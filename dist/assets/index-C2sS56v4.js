var Y0=Object.defineProperty;var J0=(e,t,s)=>t in e?Y0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Gr=(e,t,s)=>J0(e,typeof t!="symbol"?t+"":t,s);function X0(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Z0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),s}var rf={exports:{}},Do={},af={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),ey=Symbol.for("react.portal"),ty=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),sy=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),ay=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),oy=Symbol.for("react.suspense"),ly=Symbol.for("react.memo"),cy=Symbol.for("react.lazy"),Xu=Symbol.iterator;function dy(e){return e===null||typeof e!="object"?null:(e=Xu&&e[Xu]||e["@@iterator"],typeof e=="function"?e:null)}var of={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,cf={};function Rr(e,t,s){this.props=e,this.context=t,this.refs=cf,this.updater=s||of}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function df(){}df.prototype=Rr.prototype;function _d(e,t,s){this.props=e,this.context=t,this.refs=cf,this.updater=s||of}var Cd=_d.prototype=new df;Cd.constructor=_d;lf(Cd,Rr.prototype);Cd.isPureReactComponent=!0;var Zu=Array.isArray,uf=Object.prototype.hasOwnProperty,Ed={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function mf(e,t,s){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)uf.call(t,r)&&!hf.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Va,type:e,key:i,ref:o,props:a,_owner:Ed.current}}function uy(e,t){return{$$typeof:Va,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Td(e){return typeof e=="object"&&e!==null&&e.$$typeof===Va}function hy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var eh=/\/+/g;function vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hy(""+e.key):t.toString(36)}function Di(e,t,s,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Va:case ey:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+vl(o,0):r,Zu(a)?(s="",e!=null&&(s=e.replace(eh,"$&/")+"/"),Di(a,t,s,"",function(d){return d})):a!=null&&(Td(a)&&(a=uy(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(eh,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",Zu(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+vl(i,l);o+=Di(i,t,s,c,a)}else if(c=dy(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+vl(i,l++),o+=Di(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function li(e,t,s){if(e==null)return e;var r=[],a=0;return Di(e,r,"","",function(i){return t.call(s,i,a++)}),r}function my(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},$i={transition:null},fy={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:$i,ReactCurrentOwner:Ed};function ff(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:li,forEach:function(e,t,s){li(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return li(e,function(){t++}),t},toArray:function(e){return li(e,function(t){return t})||[]},only:function(e){if(!Td(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Rr;xe.Fragment=ty;xe.Profiler=sy;xe.PureComponent=_d;xe.StrictMode=ny;xe.Suspense=oy;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fy;xe.act=ff;xe.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lf({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ed.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)uf.call(t,c)&&!hf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Va,type:e.type,key:a,ref:i,props:r,_owner:o}};xe.createContext=function(e){return e={$$typeof:ay,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ry,_context:e},e.Consumer=e};xe.createElement=mf;xe.createFactory=function(e){var t=mf.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:iy,render:e}};xe.isValidElement=Td;xe.lazy=function(e){return{$$typeof:cy,_payload:{_status:-1,_result:e},_init:my}};xe.memo=function(e,t){return{$$typeof:ly,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=$i.transition;$i.transition={};try{e()}finally{$i.transition=t}};xe.unstable_act=ff;xe.useCallback=function(e,t){return ht.current.useCallback(e,t)};xe.useContext=function(e){return ht.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};xe.useEffect=function(e,t){return ht.current.useEffect(e,t)};xe.useId=function(){return ht.current.useId()};xe.useImperativeHandle=function(e,t,s){return ht.current.useImperativeHandle(e,t,s)};xe.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return ht.current.useMemo(e,t)};xe.useReducer=function(e,t,s){return ht.current.useReducer(e,t,s)};xe.useRef=function(e){return ht.current.useRef(e)};xe.useState=function(e){return ht.current.useState(e)};xe.useSyncExternalStore=function(e,t,s){return ht.current.useSyncExternalStore(e,t,s)};xe.useTransition=function(){return ht.current.useTransition()};xe.version="18.3.1";af.exports=xe;var x=af.exports;const qn=sf(x),pf=X0({__proto__:null,default:qn},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=x,gy=Symbol.for("react.element"),xy=Symbol.for("react.fragment"),yy=Object.prototype.hasOwnProperty,by=py.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vy={key:!0,ref:!0,__self:!0,__source:!0};function gf(e,t,s){var r,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)yy.call(t,r)&&!vy.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:gy,type:e,key:i,ref:o,props:a,_owner:by.current}}Do.Fragment=xy;Do.jsx=gf;Do.jsxs=gf;rf.exports=Do;var n=rf.exports,xf={exports:{}},It={},yf={exports:{}},bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,I){var _=O.length;O.push(I);e:for(;0<_;){var R=_-1>>>1,P=O[R];if(0<a(P,I))O[R]=I,O[_]=P,_=R;else break e}}function s(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var I=O[0],_=O.pop();if(_!==I){O[0]=_;e:for(var R=0,P=O.length,F=P>>>1;R<F;){var L=2*(R+1)-1,Y=O[L],G=L+1,le=O[G];if(0>a(Y,_))G<P&&0>a(le,Y)?(O[R]=le,O[G]=_,R=G):(O[R]=Y,O[L]=_,R=L);else if(G<P&&0>a(le,_))O[R]=le,O[G]=_,R=G;else break e}}return I}function a(O,I){var _=O.sortIndex-I.sortIndex;return _!==0?_:O.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,y=3,j=!1,b=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(O){for(var I=s(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=O)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=s(d)}}function h(O){if(v=!1,f(O),!b)if(s(c)!==null)b=!0,E(N);else{var I=s(d);I!==null&&T(h,I.startTime-O)}}function N(O,I){b=!1,v&&(v=!1,p(C),C=-1),j=!0;var _=y;try{for(f(I),m=s(c);m!==null&&(!(m.expirationTime>I)||O&&!U());){var R=m.callback;if(typeof R=="function"){m.callback=null,y=m.priorityLevel;var P=R(m.expirationTime<=I);I=e.unstable_now(),typeof P=="function"?m.callback=P:m===s(c)&&r(c),f(I)}else r(c);m=s(c)}if(m!==null)var F=!0;else{var L=s(d);L!==null&&T(h,L.startTime-I),F=!1}return F}finally{m=null,y=_,j=!1}}var k=!1,S=null,C=-1,M=5,A=-1;function U(){return!(e.unstable_now()-A<M)}function B(){if(S!==null){var O=e.unstable_now();A=O;var I=!0;try{I=S(!0,O)}finally{I?D():(k=!1,S=null)}}else k=!1}var D;if(typeof g=="function")D=function(){g(B)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,W=$.port2;$.port1.onmessage=B,D=function(){W.postMessage(null)}}else D=function(){w(B,0)};function E(O){S=O,k||(k=!0,D())}function T(O,I){C=w(function(){O(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||j||(b=!0,E(N))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(O){switch(y){case 1:case 2:case 3:var I=3;break;default:I=y}var _=y;y=I;try{return O()}finally{y=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,I){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var _=y;y=O;try{return I()}finally{y=_}},e.unstable_scheduleCallback=function(O,I,_){var R=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?R+_:R):_=R,O){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=_+P,O={id:u++,callback:I,priorityLevel:O,startTime:_,expirationTime:P,sortIndex:-1},_>R?(O.sortIndex=_,t(d,O),s(c)===null&&O===s(d)&&(v?(p(C),C=-1):v=!0,T(h,_-R))):(O.sortIndex=P,t(c,O),b||j||(b=!0,E(N))),O},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(O){var I=y;return function(){var _=y;y=I;try{return O.apply(this,arguments)}finally{y=_}}}})(bf);yf.exports=bf;var wy=yf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy=x,At=wy;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vf=new Set,ja={};function Ws(e,t){_r(e,t),_r(e+"Capture",t)}function _r(e,t){for(ja[e]=t,e=0;e<t.length;e++)vf.add(t[e])}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,Ny=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,th={},nh={};function Sy(e){return hc.call(nh,e)?!0:hc.call(th,e)?!1:Ny.test(e)?nh[e]=!0:(th[e]=!0,!1)}function ky(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _y(e,t,s,r){if(t===null||typeof t>"u"||ky(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,s,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Od=/[\-:]([a-z])/g;function Ad(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Od,Ad);Xe[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Od,Ad);Xe[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Od,Ad);Xe[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pd(e,t,s,r){var a=Xe.hasOwnProperty(t)?Xe[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_y(t,s,a,r)&&(s=null),r||a===null?Sy(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Un=jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),ar=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),Id=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),wf=Symbol.for("react.provider"),jf=Symbol.for("react.context"),Md=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),pc=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),Nf=Symbol.for("react.offscreen"),sh=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=sh&&e[sh]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,wl;function sa(e){if(wl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);wl=t&&t[1]||""}return`
`+wl+e}var jl=!1;function Nl(e,t){if(!e||jl)return"";jl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{jl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?sa(e):""}function Cy(e){switch(e.tag){case 5:return sa(e.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return e=Nl(e.type,!1),e;case 11:return e=Nl(e.type.render,!1),e;case 1:return e=Nl(e.type,!0),e;default:return""}}function gc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ir:return"Fragment";case ar:return"Portal";case mc:return"Profiler";case Id:return"StrictMode";case fc:return"Suspense";case pc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jf:return(e.displayName||"Context")+".Consumer";case wf:return(e._context.displayName||"Context")+".Provider";case Md:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rd:return t=e.displayName||null,t!==null?t:gc(e.type)||"Memo";case Gn:t=e._payload,e=e._init;try{return gc(e(t))}catch{}}return null}function Ey(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gc(t);case 8:return t===Id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ds(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ty(e){var t=Sf(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function di(e){e._valueTracker||(e._valueTracker=Ty(e))}function kf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Sf(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function Xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xc(e,t){var s=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function rh(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=ds(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _f(e,t){t=t.checked,t!=null&&Pd(e,"checked",t,!1)}function yc(e,t){_f(e,t);var s=ds(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bc(e,t.type,s):t.hasOwnProperty("defaultValue")&&bc(e,t.type,ds(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ah(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function bc(e,t,s){(t!=="number"||Xi(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ra=Array.isArray;function yr(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+ds(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function vc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ih(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(K(92));if(ra(s)){if(1<s.length)throw Error(K(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ds(s)}}function Cf(e,t){var s=ds(t.value),r=ds(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function oh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ef(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ef(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ui,Tf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ui=ui||document.createElement("div"),ui.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ui.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Na(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oy=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(e){Oy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ca[t]=ca[e]})});function Of(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||ca.hasOwnProperty(e)&&ca[e]?(""+t).trim():t+"px"}function Af(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=Of(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var Ay=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jc(e,t){if(t){if(Ay[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Nc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=null;function Dd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kc=null,br=null,vr=null;function lh(e){if(e=Ya(e)){if(typeof kc!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Uo(t),kc(e.stateNode,e.type,t))}}function Pf(e){br?vr?vr.push(e):vr=[e]:br=e}function If(){if(br){var e=br,t=vr;if(vr=br=null,lh(e),t)for(e=0;e<t.length;e++)lh(t[e])}}function Mf(e,t){return e(t)}function Rf(){}var Sl=!1;function Df(e,t,s){if(Sl)return e(t,s);Sl=!0;try{return Mf(e,t,s)}finally{Sl=!1,(br!==null||vr!==null)&&(Rf(),If())}}function Sa(e,t){var s=e.stateNode;if(s===null)return null;var r=Uo(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(K(231,t,typeof s));return s}var _c=!1;if(In)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){_c=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{_c=!1}function Py(e,t,s,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var da=!1,Zi=null,eo=!1,Cc=null,Iy={onError:function(e){da=!0,Zi=e}};function My(e,t,s,r,a,i,o,l,c){da=!1,Zi=null,Py.apply(Iy,arguments)}function Ry(e,t,s,r,a,i,o,l,c){if(My.apply(this,arguments),da){if(da){var d=Zi;da=!1,Zi=null}else throw Error(K(198));eo||(eo=!0,Cc=d)}}function qs(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function $f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ch(e){if(qs(e)!==e)throw Error(K(188))}function Dy(e){var t=e.alternate;if(!t){if(t=qs(e),t===null)throw Error(K(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return ch(a),e;if(i===r)return ch(a),t;i=i.sibling}throw Error(K(188))}if(s.return!==r.return)s=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,r=i;break}if(l===r){o=!0,r=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,r=a;break}if(l===r){o=!0,r=i,s=a;break}l=l.sibling}if(!o)throw Error(K(189))}}if(s.alternate!==r)throw Error(K(190))}if(s.tag!==3)throw Error(K(188));return s.stateNode.current===s?e:t}function Lf(e){return e=Dy(e),e!==null?Ff(e):null}function Ff(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ff(e);if(t!==null)return t;e=e.sibling}return null}var zf=At.unstable_scheduleCallback,dh=At.unstable_cancelCallback,$y=At.unstable_shouldYield,Ly=At.unstable_requestPaint,Le=At.unstable_now,Fy=At.unstable_getCurrentPriorityLevel,$d=At.unstable_ImmediatePriority,Uf=At.unstable_UserBlockingPriority,to=At.unstable_NormalPriority,zy=At.unstable_LowPriority,Wf=At.unstable_IdlePriority,$o=null,gn=null;function Uy(e){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot($o,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:By,Wy=Math.log,qy=Math.LN2;function By(e){return e>>>=0,e===0?32:31-(Wy(e)/qy|0)|0}var hi=64,mi=4194304;function aa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function no(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?r=aa(l):(i&=o,i!==0&&(r=aa(i)))}else o=s&~a,o!==0?r=aa(o):i!==0&&(r=aa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-Zt(t),a=1<<s,r|=e[s],t&=~a;return r}function Hy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gy(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Zt(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&r)&&(a[o]=Hy(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ec(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qf(){var e=hi;return hi<<=1,!(hi&4194240)&&(hi=64),e}function kl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ka(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=s}function Vy(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Zt(s),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~i}}function Ld(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-Zt(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var je=0;function Bf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hf,Fd,Gf,Vf,Kf,Tc=!1,fi=[],es=null,ts=null,ns=null,ka=new Map,_a=new Map,Qn=[],Ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uh(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":ka.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(t.pointerId)}}function Qr(e,t,s,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ya(t),t!==null&&Fd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Qy(e,t,s,r,a){switch(t){case"focusin":return es=Qr(es,e,t,s,r,a),!0;case"dragenter":return ts=Qr(ts,e,t,s,r,a),!0;case"mouseover":return ns=Qr(ns,e,t,s,r,a),!0;case"pointerover":var i=a.pointerId;return ka.set(i,Qr(ka.get(i)||null,e,t,s,r,a)),!0;case"gotpointercapture":return i=a.pointerId,_a.set(i,Qr(_a.get(i)||null,e,t,s,r,a)),!0}return!1}function Qf(e){var t=Cs(e.target);if(t!==null){var s=qs(t);if(s!==null){if(t=s.tag,t===13){if(t=$f(s),t!==null){e.blockedOn=t,Kf(e.priority,function(){Gf(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Li(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Oc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Sc=r,s.target.dispatchEvent(r),Sc=null}else return t=Ya(s),t!==null&&Fd(t),e.blockedOn=s,!1;t.shift()}return!0}function hh(e,t,s){Li(e)&&s.delete(t)}function Yy(){Tc=!1,es!==null&&Li(es)&&(es=null),ts!==null&&Li(ts)&&(ts=null),ns!==null&&Li(ns)&&(ns=null),ka.forEach(hh),_a.forEach(hh)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Tc||(Tc=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Yy)))}function Ca(e){function t(a){return Yr(a,e)}if(0<fi.length){Yr(fi[0],e);for(var s=1;s<fi.length;s++){var r=fi[s];r.blockedOn===e&&(r.blockedOn=null)}}for(es!==null&&Yr(es,e),ts!==null&&Yr(ts,e),ns!==null&&Yr(ns,e),ka.forEach(t),_a.forEach(t),s=0;s<Qn.length;s++)r=Qn[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qn.length&&(s=Qn[0],s.blockedOn===null);)Qf(s),s.blockedOn===null&&Qn.shift()}var wr=Un.ReactCurrentBatchConfig,so=!0;function Jy(e,t,s,r){var a=je,i=wr.transition;wr.transition=null;try{je=1,zd(e,t,s,r)}finally{je=a,wr.transition=i}}function Xy(e,t,s,r){var a=je,i=wr.transition;wr.transition=null;try{je=4,zd(e,t,s,r)}finally{je=a,wr.transition=i}}function zd(e,t,s,r){if(so){var a=Oc(e,t,s,r);if(a===null)Rl(e,t,r,ro,s),uh(e,r);else if(Qy(a,e,t,s,r))r.stopPropagation();else if(uh(e,r),t&4&&-1<Ky.indexOf(e)){for(;a!==null;){var i=Ya(a);if(i!==null&&Hf(i),i=Oc(e,t,s,r),i===null&&Rl(e,t,r,ro,s),i===a)break;a=i}a!==null&&r.stopPropagation()}else Rl(e,t,r,null,s)}}var ro=null;function Oc(e,t,s,r){if(ro=null,e=Dd(r),e=Cs(e),e!==null)if(t=qs(e),t===null)e=null;else if(s=t.tag,s===13){if(e=$f(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ro=e,null}function Yf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fy()){case $d:return 1;case Uf:return 4;case to:case zy:return 16;case Wf:return 536870912;default:return 16}default:return 16}}var Xn=null,Ud=null,Fi=null;function Jf(){if(Fi)return Fi;var e,t=Ud,s=t.length,r,a="value"in Xn?Xn.value:Xn.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===a[i-r];r++);return Fi=a.slice(e,1<r?1-r:void 0)}function zi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pi(){return!0}function mh(){return!1}function Mt(e){function t(s,r,a,i,o){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pi:mh,this.isPropagationStopped=mh,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),t}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=Mt(Dr),Qa=Me({},Dr,{view:0,detail:0}),Zy=Mt(Qa),_l,Cl,Jr,Lo=Me({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(_l=e.screenX-Jr.screenX,Cl=e.screenY-Jr.screenY):Cl=_l=0,Jr=e),_l)},movementY:function(e){return"movementY"in e?e.movementY:Cl}}),fh=Mt(Lo),eb=Me({},Lo,{dataTransfer:0}),tb=Mt(eb),nb=Me({},Qa,{relatedTarget:0}),El=Mt(nb),sb=Me({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),rb=Mt(sb),ab=Me({},Dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ib=Mt(ab),ob=Me({},Dr,{data:0}),ph=Mt(ob),lb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},db={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ub(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=db[e])?!!t[e]:!1}function qd(){return ub}var hb=Me({},Qa,{key:function(e){if(e.key){var t=lb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(e){return e.type==="keypress"?zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mb=Mt(hb),fb=Me({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Mt(fb),pb=Me({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),gb=Mt(pb),xb=Me({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),yb=Mt(xb),bb=Me({},Lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vb=Mt(bb),wb=[9,13,27,32],Bd=In&&"CompositionEvent"in window,ua=null;In&&"documentMode"in document&&(ua=document.documentMode);var jb=In&&"TextEvent"in window&&!ua,Xf=In&&(!Bd||ua&&8<ua&&11>=ua),xh=" ",yh=!1;function Zf(e,t){switch(e){case"keyup":return wb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function Nb(e,t){switch(e){case"compositionend":return ep(t);case"keypress":return t.which!==32?null:(yh=!0,xh);case"textInput":return e=t.data,e===xh&&yh?null:e;default:return null}}function Sb(e,t){if(or)return e==="compositionend"||!Bd&&Zf(e,t)?(e=Jf(),Fi=Ud=Xn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xf&&t.locale!=="ko"?null:t.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kb[e.type]:t==="textarea"}function tp(e,t,s,r){Pf(r),t=ao(t,"onChange"),0<t.length&&(s=new Wd("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var ha=null,Ea=null;function _b(e){hp(e,0)}function Fo(e){var t=dr(e);if(kf(t))return e}function Cb(e,t){if(e==="change")return t}var np=!1;if(In){var Tl;if(In){var Ol="oninput"in document;if(!Ol){var vh=document.createElement("div");vh.setAttribute("oninput","return;"),Ol=typeof vh.oninput=="function"}Tl=Ol}else Tl=!1;np=Tl&&(!document.documentMode||9<document.documentMode)}function wh(){ha&&(ha.detachEvent("onpropertychange",sp),Ea=ha=null)}function sp(e){if(e.propertyName==="value"&&Fo(Ea)){var t=[];tp(t,Ea,e,Dd(e)),Df(_b,t)}}function Eb(e,t,s){e==="focusin"?(wh(),ha=t,Ea=s,ha.attachEvent("onpropertychange",sp)):e==="focusout"&&wh()}function Tb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(Ea)}function Ob(e,t){if(e==="click")return Fo(t)}function Ab(e,t){if(e==="input"||e==="change")return Fo(t)}function Pb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:Pb;function Ta(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!hc.call(t,a)||!sn(e[a],t[a]))return!1}return!0}function jh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nh(e,t){var s=jh(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=jh(s)}}function rp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ap(){for(var e=window,t=Xi();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Xi(e.document)}return t}function Hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ib(e){var t=ap(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&rp(s.ownerDocument.documentElement,s)){if(r!==null&&Hd(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Nh(s,i);var o=Nh(s,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mb=In&&"documentMode"in document&&11>=document.documentMode,lr=null,Ac=null,ma=null,Pc=!1;function Sh(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Pc||lr==null||lr!==Xi(r)||(r=lr,"selectionStart"in r&&Hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ma&&Ta(ma,r)||(ma=r,r=ao(Ac,"onSelect"),0<r.length&&(t=new Wd("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=lr)))}function gi(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var cr={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionend:gi("Transition","TransitionEnd")},Al={},ip={};In&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function zo(e){if(Al[e])return Al[e];if(!cr[e])return e;var t=cr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in ip)return Al[e]=t[s];return e}var op=zo("animationend"),lp=zo("animationiteration"),cp=zo("animationstart"),dp=zo("transitionend"),up=new Map,kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(e,t){up.set(e,t),Ws(t,[e])}for(var Pl=0;Pl<kh.length;Pl++){var Il=kh[Pl],Rb=Il.toLowerCase(),Db=Il[0].toUpperCase()+Il.slice(1);ps(Rb,"on"+Db)}ps(op,"onAnimationEnd");ps(lp,"onAnimationIteration");ps(cp,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(dp,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function _h(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,Ry(r,t,void 0,e),e.currentTarget=null}function hp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;_h(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;_h(a,l,d),i=c}}}if(eo)throw e=Cc,eo=!1,Cc=null,e}function Ee(e,t){var s=t[$c];s===void 0&&(s=t[$c]=new Set);var r=e+"__bubble";s.has(r)||(mp(t,e,2,!1),s.add(r))}function Ml(e,t,s){var r=0;t&&(r|=4),mp(s,e,r,t)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Oa(e){if(!e[xi]){e[xi]=!0,vf.forEach(function(s){s!=="selectionchange"&&($b.has(s)||Ml(s,!1,e),Ml(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xi]||(t[xi]=!0,Ml("selectionchange",!1,t))}}function mp(e,t,s,r){switch(Yf(t)){case 1:var a=Jy;break;case 4:a=Xy;break;default:a=zd}s=a.bind(null,t,s,e),a=void 0,!_c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Rl(e,t,s,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Cs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Df(function(){var d=i,u=Dd(s),m=[];e:{var y=up.get(e);if(y!==void 0){var j=Wd,b=e;switch(e){case"keypress":if(zi(s)===0)break e;case"keydown":case"keyup":j=mb;break;case"focusin":b="focus",j=El;break;case"focusout":b="blur",j=El;break;case"beforeblur":case"afterblur":j=El;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=gb;break;case op:case lp:case cp:j=rb;break;case dp:j=yb;break;case"scroll":j=Zy;break;case"wheel":j=vb;break;case"copy":case"cut":case"paste":j=ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=gh}var v=(t&4)!==0,w=!v&&e==="scroll",p=v?y!==null?y+"Capture":null:y;v=[];for(var g=d,f;g!==null;){f=g;var h=f.stateNode;if(f.tag===5&&h!==null&&(f=h,p!==null&&(h=Sa(g,p),h!=null&&v.push(Aa(g,h,f)))),w)break;g=g.return}0<v.length&&(y=new j(y,b,null,s,u),m.push({event:y,listeners:v}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",y&&s!==Sc&&(b=s.relatedTarget||s.fromElement)&&(Cs(b)||b[Mn]))break e;if((j||y)&&(y=u.window===u?u:(y=u.ownerDocument)?y.defaultView||y.parentWindow:window,j?(b=s.relatedTarget||s.toElement,j=d,b=b?Cs(b):null,b!==null&&(w=qs(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=d),j!==b)){if(v=fh,h="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=gh,h="onPointerLeave",p="onPointerEnter",g="pointer"),w=j==null?y:dr(j),f=b==null?y:dr(b),y=new v(h,g+"leave",j,s,u),y.target=w,y.relatedTarget=f,h=null,Cs(u)===d&&(v=new v(p,g+"enter",b,s,u),v.target=f,v.relatedTarget=w,h=v),w=h,j&&b)t:{for(v=j,p=b,g=0,f=v;f;f=Ks(f))g++;for(f=0,h=p;h;h=Ks(h))f++;for(;0<g-f;)v=Ks(v),g--;for(;0<f-g;)p=Ks(p),f--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=Ks(v),p=Ks(p)}v=null}else v=null;j!==null&&Ch(m,y,j,v,!1),b!==null&&w!==null&&Ch(m,w,b,v,!0)}}e:{if(y=d?dr(d):window,j=y.nodeName&&y.nodeName.toLowerCase(),j==="select"||j==="input"&&y.type==="file")var N=Cb;else if(bh(y))if(np)N=Ab;else{N=Tb;var k=Eb}else(j=y.nodeName)&&j.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(N=Ob);if(N&&(N=N(e,d))){tp(m,N,s,u);break e}k&&k(e,y,d),e==="focusout"&&(k=y._wrapperState)&&k.controlled&&y.type==="number"&&bc(y,"number",y.value)}switch(k=d?dr(d):window,e){case"focusin":(bh(k)||k.contentEditable==="true")&&(lr=k,Ac=d,ma=null);break;case"focusout":ma=Ac=lr=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Sh(m,s,u);break;case"selectionchange":if(Mb)break;case"keydown":case"keyup":Sh(m,s,u)}var S;if(Bd)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else or?Zf(e,s)&&(C="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(Xf&&s.locale!=="ko"&&(or||C!=="onCompositionStart"?C==="onCompositionEnd"&&or&&(S=Jf()):(Xn=u,Ud="value"in Xn?Xn.value:Xn.textContent,or=!0)),k=ao(d,C),0<k.length&&(C=new ph(C,e,null,s,u),m.push({event:C,listeners:k}),S?C.data=S:(S=ep(s),S!==null&&(C.data=S)))),(S=jb?Nb(e,s):Sb(e,s))&&(d=ao(d,"onBeforeInput"),0<d.length&&(u=new ph("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=S))}hp(m,t)})}function Aa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ao(e,t){for(var s=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Sa(e,s),i!=null&&r.unshift(Aa(e,i,a)),i=Sa(e,t),i!=null&&r.push(Aa(e,i,a))),e=e.return}return r}function Ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ch(e,t,s,r,a){for(var i=t._reactName,o=[];s!==null&&s!==r;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=Sa(s,i),c!=null&&o.unshift(Aa(s,c,l))):a||(c=Sa(s,i),c!=null&&o.push(Aa(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Lb=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function Eh(e){return(typeof e=="string"?e:""+e).replace(Lb,`
`).replace(Fb,"")}function yi(e,t,s){if(t=Eh(t),Eh(e)!==t&&s)throw Error(K(425))}function io(){}var Ic=null,Mc=null;function Rc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,zb=typeof clearTimeout=="function"?clearTimeout:void 0,Th=typeof Promise=="function"?Promise:void 0,Ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Th<"u"?function(e){return Th.resolve(null).then(e).catch(Wb)}:Dc;function Wb(e){setTimeout(function(){throw e})}function Dl(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),Ca(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);Ca(t)}function ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Oh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),mn="__reactFiber$"+$r,Pa="__reactProps$"+$r,Mn="__reactContainer$"+$r,$c="__reactEvents$"+$r,qb="__reactListeners$"+$r,Bb="__reactHandles$"+$r;function Cs(e){var t=e[mn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Mn]||s[mn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Oh(e);e!==null;){if(s=e[mn])return s;e=Oh(e)}return t}e=s,s=e.parentNode}return null}function Ya(e){return e=e[mn]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Uo(e){return e[Pa]||null}var Lc=[],ur=-1;function gs(e){return{current:e}}function Oe(e){0>ur||(e.current=Lc[ur],Lc[ur]=null,ur--)}function Ce(e,t){ur++,Lc[ur]=e.current,e.current=t}var us={},rt=gs(us),bt=gs(!1),Is=us;function Cr(e,t){var s=e.type.contextTypes;if(!s)return us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vt(e){return e=e.childContextTypes,e!=null}function oo(){Oe(bt),Oe(rt)}function Ah(e,t,s){if(rt.current!==us)throw Error(K(168));Ce(rt,t),Ce(bt,s)}function fp(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(K(108,Ey(e)||"Unknown",a));return Me({},s,r)}function lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,Is=rt.current,Ce(rt,e),Ce(bt,bt.current),!0}function Ph(e,t,s){var r=e.stateNode;if(!r)throw Error(K(169));s?(e=fp(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Oe(bt),Oe(rt),Ce(rt,e)):Oe(bt),Ce(bt,s)}var En=null,Wo=!1,$l=!1;function pp(e){En===null?En=[e]:En.push(e)}function Hb(e){Wo=!0,pp(e)}function xs(){if(!$l&&En!==null){$l=!0;var e=0,t=je;try{var s=En;for(je=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}En=null,Wo=!1}catch(a){throw En!==null&&(En=En.slice(e+1)),zf($d,xs),a}finally{je=t,$l=!1}}return null}var hr=[],mr=0,co=null,uo=0,Lt=[],Ft=0,Ms=null,Tn=1,On="";function Ns(e,t){hr[mr++]=uo,hr[mr++]=co,co=e,uo=t}function gp(e,t,s){Lt[Ft++]=Tn,Lt[Ft++]=On,Lt[Ft++]=Ms,Ms=e;var r=Tn;e=On;var a=32-Zt(r)-1;r&=~(1<<a),s+=1;var i=32-Zt(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Tn=1<<32-Zt(t)+a|s<<a|r,On=i+e}else Tn=1<<i|s<<a|r,On=e}function Gd(e){e.return!==null&&(Ns(e,1),gp(e,1,0))}function Vd(e){for(;e===co;)co=hr[--mr],hr[mr]=null,uo=hr[--mr],hr[mr]=null;for(;e===Ms;)Ms=Lt[--Ft],Lt[Ft]=null,On=Lt[--Ft],Lt[Ft]=null,Tn=Lt[--Ft],Lt[Ft]=null}var Tt=null,Ct=null,Ae=!1,Xt=null;function xp(e,t){var s=zt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Ih(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Ct=ss(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ms!==null?{id:Tn,overflow:On}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=zt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Tt=e,Ct=null,!0):!1;default:return!1}}function Fc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zc(e){if(Ae){var t=Ct;if(t){var s=t;if(!Ih(e,t)){if(Fc(e))throw Error(K(418));t=ss(s.nextSibling);var r=Tt;t&&Ih(e,t)?xp(r,s):(e.flags=e.flags&-4097|2,Ae=!1,Tt=e)}}else{if(Fc(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ae=!1,Tt=e}}}function Mh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function bi(e){if(e!==Tt)return!1;if(!Ae)return Mh(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rc(e.type,e.memoizedProps)),t&&(t=Ct)){if(Fc(e))throw yp(),Error(K(418));for(;t;)xp(e,t),t=ss(t.nextSibling)}if(Mh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Ct=ss(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=Tt?ss(e.stateNode.nextSibling):null;return!0}function yp(){for(var e=Ct;e;)e=ss(e.nextSibling)}function Er(){Ct=Tt=null,Ae=!1}function Kd(e){Xt===null?Xt=[e]:Xt.push(e)}var Gb=Un.ReactCurrentBatchConfig;function Xr(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(K(309));var r=s.stateNode}if(!r)throw Error(K(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!s._owner)throw Error(K(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rh(e){var t=e._init;return t(e._payload)}function bp(e){function t(p,g){if(e){var f=p.deletions;f===null?(p.deletions=[g],p.flags|=16):f.push(g)}}function s(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function a(p,g){return p=os(p,g),p.index=0,p.sibling=null,p}function i(p,g,f){return p.index=f,e?(f=p.alternate,f!==null?(f=f.index,f<g?(p.flags|=2,g):f):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,g,f,h){return g===null||g.tag!==6?(g=Bl(f,p.mode,h),g.return=p,g):(g=a(g,f),g.return=p,g)}function c(p,g,f,h){var N=f.type;return N===ir?u(p,g,f.props.children,h,f.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gn&&Rh(N)===g.type)?(h=a(g,f.props),h.ref=Xr(p,g,f),h.return=p,h):(h=Vi(f.type,f.key,f.props,null,p.mode,h),h.ref=Xr(p,g,f),h.return=p,h)}function d(p,g,f,h){return g===null||g.tag!==4||g.stateNode.containerInfo!==f.containerInfo||g.stateNode.implementation!==f.implementation?(g=Hl(f,p.mode,h),g.return=p,g):(g=a(g,f.children||[]),g.return=p,g)}function u(p,g,f,h,N){return g===null||g.tag!==7?(g=As(f,p.mode,h,N),g.return=p,g):(g=a(g,f),g.return=p,g)}function m(p,g,f){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Bl(""+g,p.mode,f),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ci:return f=Vi(g.type,g.key,g.props,null,p.mode,f),f.ref=Xr(p,null,g),f.return=p,f;case ar:return g=Hl(g,p.mode,f),g.return=p,g;case Gn:var h=g._init;return m(p,h(g._payload),f)}if(ra(g)||Vr(g))return g=As(g,p.mode,f,null),g.return=p,g;vi(p,g)}return null}function y(p,g,f,h){var N=g!==null?g.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return N!==null?null:l(p,g,""+f,h);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ci:return f.key===N?c(p,g,f,h):null;case ar:return f.key===N?d(p,g,f,h):null;case Gn:return N=f._init,y(p,g,N(f._payload),h)}if(ra(f)||Vr(f))return N!==null?null:u(p,g,f,h,null);vi(p,f)}return null}function j(p,g,f,h,N){if(typeof h=="string"&&h!==""||typeof h=="number")return p=p.get(f)||null,l(g,p,""+h,N);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ci:return p=p.get(h.key===null?f:h.key)||null,c(g,p,h,N);case ar:return p=p.get(h.key===null?f:h.key)||null,d(g,p,h,N);case Gn:var k=h._init;return j(p,g,f,k(h._payload),N)}if(ra(h)||Vr(h))return p=p.get(f)||null,u(g,p,h,N,null);vi(g,h)}return null}function b(p,g,f,h){for(var N=null,k=null,S=g,C=g=0,M=null;S!==null&&C<f.length;C++){S.index>C?(M=S,S=null):M=S.sibling;var A=y(p,S,f[C],h);if(A===null){S===null&&(S=M);break}e&&S&&A.alternate===null&&t(p,S),g=i(A,g,C),k===null?N=A:k.sibling=A,k=A,S=M}if(C===f.length)return s(p,S),Ae&&Ns(p,C),N;if(S===null){for(;C<f.length;C++)S=m(p,f[C],h),S!==null&&(g=i(S,g,C),k===null?N=S:k.sibling=S,k=S);return Ae&&Ns(p,C),N}for(S=r(p,S);C<f.length;C++)M=j(S,p,C,f[C],h),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?C:M.key),g=i(M,g,C),k===null?N=M:k.sibling=M,k=M);return e&&S.forEach(function(U){return t(p,U)}),Ae&&Ns(p,C),N}function v(p,g,f,h){var N=Vr(f);if(typeof N!="function")throw Error(K(150));if(f=N.call(f),f==null)throw Error(K(151));for(var k=N=null,S=g,C=g=0,M=null,A=f.next();S!==null&&!A.done;C++,A=f.next()){S.index>C?(M=S,S=null):M=S.sibling;var U=y(p,S,A.value,h);if(U===null){S===null&&(S=M);break}e&&S&&U.alternate===null&&t(p,S),g=i(U,g,C),k===null?N=U:k.sibling=U,k=U,S=M}if(A.done)return s(p,S),Ae&&Ns(p,C),N;if(S===null){for(;!A.done;C++,A=f.next())A=m(p,A.value,h),A!==null&&(g=i(A,g,C),k===null?N=A:k.sibling=A,k=A);return Ae&&Ns(p,C),N}for(S=r(p,S);!A.done;C++,A=f.next())A=j(S,p,C,A.value,h),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),g=i(A,g,C),k===null?N=A:k.sibling=A,k=A);return e&&S.forEach(function(B){return t(p,B)}),Ae&&Ns(p,C),N}function w(p,g,f,h){if(typeof f=="object"&&f!==null&&f.type===ir&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ci:e:{for(var N=f.key,k=g;k!==null;){if(k.key===N){if(N=f.type,N===ir){if(k.tag===7){s(p,k.sibling),g=a(k,f.props.children),g.return=p,p=g;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gn&&Rh(N)===k.type){s(p,k.sibling),g=a(k,f.props),g.ref=Xr(p,k,f),g.return=p,p=g;break e}s(p,k);break}else t(p,k);k=k.sibling}f.type===ir?(g=As(f.props.children,p.mode,h,f.key),g.return=p,p=g):(h=Vi(f.type,f.key,f.props,null,p.mode,h),h.ref=Xr(p,g,f),h.return=p,p=h)}return o(p);case ar:e:{for(k=f.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===f.containerInfo&&g.stateNode.implementation===f.implementation){s(p,g.sibling),g=a(g,f.children||[]),g.return=p,p=g;break e}else{s(p,g);break}else t(p,g);g=g.sibling}g=Hl(f,p.mode,h),g.return=p,p=g}return o(p);case Gn:return k=f._init,w(p,g,k(f._payload),h)}if(ra(f))return b(p,g,f,h);if(Vr(f))return v(p,g,f,h);vi(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,g!==null&&g.tag===6?(s(p,g.sibling),g=a(g,f),g.return=p,p=g):(s(p,g),g=Bl(f,p.mode,h),g.return=p,p=g),o(p)):s(p,g)}return w}var Tr=bp(!0),vp=bp(!1),ho=gs(null),mo=null,fr=null,Qd=null;function Yd(){Qd=fr=mo=null}function Jd(e){var t=ho.current;Oe(ho),e._currentValue=t}function Uc(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function jr(e,t){mo=e,Qd=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(Qd!==e)if(e={context:e,memoizedValue:t,next:null},fr===null){if(mo===null)throw Error(K(308));fr=e,mo.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return t}var Es=null;function Xd(e){Es===null?Es=[e]:Es.push(e)}function wp(e,t,s,r){var a=t.interleaved;return a===null?(s.next=s,Xd(t)):(s.next=a.next,a.next=s),t.interleaved=s,Rn(e,r)}function Rn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Vn=!1;function Zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Rn(e,s)}return a=r.interleaved,a===null?(t.next=t,Xd(r)):(t.next=a.next,a.next=t),r.interleaved=t,Rn(e,s)}function Ui(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Ld(e,s)}}function Dh(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function fo(e,t,s,r){var a=e.updateQueue;Vn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var y=l.lane,j=l.eventTime;if((r&y)===y){u!==null&&(u=u.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,v=l;switch(y=t,j=s,v.tag){case 1:if(b=v.payload,typeof b=="function"){m=b.call(j,m,y);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,y=typeof b=="function"?b.call(j,m,y):b,y==null)break e;m=Me({},m,y);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[l]:y.push(l))}else j={eventTime:j,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=j,c=m):u=u.next=j,o|=y;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=m}}function $h(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(K(191,a));a.call(r)}}}var Ja={},xn=gs(Ja),Ia=gs(Ja),Ma=gs(Ja);function Ts(e){if(e===Ja)throw Error(K(174));return e}function eu(e,t){switch(Ce(Ma,t),Ce(Ia,e),Ce(xn,Ja),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wc(t,e)}Oe(xn),Ce(xn,t)}function Or(){Oe(xn),Oe(Ia),Oe(Ma)}function Np(e){Ts(Ma.current);var t=Ts(xn.current),s=wc(t,e.type);t!==s&&(Ce(Ia,e),Ce(xn,s))}function tu(e){Ia.current===e&&(Oe(xn),Oe(Ia))}var Pe=gs(0);function po(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ll=[];function nu(){for(var e=0;e<Ll.length;e++)Ll[e]._workInProgressVersionPrimary=null;Ll.length=0}var Wi=Un.ReactCurrentDispatcher,Fl=Un.ReactCurrentBatchConfig,Rs=0,Ie=null,We=null,Ge=null,go=!1,fa=!1,Ra=0,Vb=0;function et(){throw Error(K(321))}function su(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!sn(e[s],t[s]))return!1;return!0}function ru(e,t,s,r,a,i){if(Rs=i,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wi.current=e===null||e.memoizedState===null?Jb:Xb,e=s(r,a),fa){i=0;do{if(fa=!1,Ra=0,25<=i)throw Error(K(301));i+=1,Ge=We=null,t.updateQueue=null,Wi.current=Zb,e=s(r,a)}while(fa)}if(Wi.current=xo,t=We!==null&&We.next!==null,Rs=0,Ge=We=Ie=null,go=!1,t)throw Error(K(300));return e}function au(){var e=Ra!==0;return Ra=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ie.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ht(){if(We===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Ge===null?Ie.memoizedState:Ge.next;if(t!==null)Ge=t,We=e;else{if(e===null)throw Error(K(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ge===null?Ie.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function Da(e,t){return typeof t=="function"?t(e):t}function zl(e){var t=Ht(),s=t.queue;if(s===null)throw Error(K(311));s.lastRenderedReducer=e;var r=We,a=r.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Rs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ie.lanes|=u,Ds|=u}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,sn(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Ie.lanes|=i,Ds|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ul(e){var t=Ht(),s=t.queue;if(s===null)throw Error(K(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);sn(i,t.memoizedState)||(yt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function Sp(){}function kp(e,t){var s=Ie,r=Ht(),a=t(),i=!sn(r.memoizedState,a);if(i&&(r.memoizedState=a,yt=!0),r=r.queue,iu(Ep.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(s.flags|=2048,$a(9,Cp.bind(null,s,r,a,t),void 0,null),Ve===null)throw Error(K(349));Rs&30||_p(s,t,a)}return a}function _p(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Cp(e,t,s,r){t.value=s,t.getSnapshot=r,Tp(t)&&Op(e)}function Ep(e,t,s){return s(function(){Tp(t)&&Op(e)})}function Tp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!sn(e,s)}catch{return!0}}function Op(e){var t=Rn(e,1);t!==null&&en(t,e,1,-1)}function Lh(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:e},t.queue=e,e=e.dispatch=Yb.bind(null,Ie,e),[t.memoizedState,e]}function $a(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function Ap(){return Ht().memoizedState}function qi(e,t,s,r){var a=hn();Ie.flags|=e,a.memoizedState=$a(1|t,s,void 0,r===void 0?null:r)}function qo(e,t,s,r){var a=Ht();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&su(r,o.deps)){a.memoizedState=$a(t,s,i,r);return}}Ie.flags|=e,a.memoizedState=$a(1|t,s,i,r)}function Fh(e,t){return qi(8390656,8,e,t)}function iu(e,t){return qo(2048,8,e,t)}function Pp(e,t){return qo(4,2,e,t)}function Ip(e,t){return qo(4,4,e,t)}function Mp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,s){return s=s!=null?s.concat([e]):null,qo(4,4,Mp.bind(null,t,e),s)}function ou(){}function Dp(e,t){var s=Ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&su(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function $p(e,t){var s=Ht();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&su(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Lp(e,t,s){return Rs&21?(sn(s,t)||(s=qf(),Ie.lanes|=s,Ds|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=s)}function Kb(e,t){var s=je;je=s!==0&&4>s?s:4,e(!0);var r=Fl.transition;Fl.transition={};try{e(!1),t()}finally{je=s,Fl.transition=r}}function Fp(){return Ht().memoizedState}function Qb(e,t,s){var r=is(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},zp(e))Up(t,s);else if(s=wp(e,t,s,r),s!==null){var a=lt();en(s,e,r,a),Wp(s,t,r)}}function Yb(e,t,s){var r=is(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(zp(e))Up(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,sn(l,o)){var c=t.interleaved;c===null?(a.next=a,Xd(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=wp(e,t,a,r),s!==null&&(a=lt(),en(s,e,r,a),Wp(s,t,r))}}function zp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Up(e,t){fa=go=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Wp(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Ld(e,s)}}var xo={readContext:Bt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Jb={readContext:Bt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:Fh,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,qi(4194308,4,Mp.bind(null,t,e),s)},useLayoutEffect:function(e,t){return qi(4194308,4,e,t)},useInsertionEffect:function(e,t){return qi(4,2,e,t)},useMemo:function(e,t){var s=hn();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=hn();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qb.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:Lh,useDebugValue:ou,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=Lh(!1),t=e[0];return e=Kb.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=Ie,a=hn();if(Ae){if(s===void 0)throw Error(K(407));s=s()}else{if(s=t(),Ve===null)throw Error(K(349));Rs&30||_p(r,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Fh(Ep.bind(null,r,i,e),[e]),r.flags|=2048,$a(9,Cp.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=hn(),t=Ve.identifierPrefix;if(Ae){var s=On,r=Tn;s=(r&~(1<<32-Zt(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ra++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Vb++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xb={readContext:Bt,useCallback:Dp,useContext:Bt,useEffect:iu,useImperativeHandle:Rp,useInsertionEffect:Pp,useLayoutEffect:Ip,useMemo:$p,useReducer:zl,useRef:Ap,useState:function(){return zl(Da)},useDebugValue:ou,useDeferredValue:function(e){var t=Ht();return Lp(t,We.memoizedState,e)},useTransition:function(){var e=zl(Da)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Sp,useSyncExternalStore:kp,useId:Fp,unstable_isNewReconciler:!1},Zb={readContext:Bt,useCallback:Dp,useContext:Bt,useEffect:iu,useImperativeHandle:Rp,useInsertionEffect:Pp,useLayoutEffect:Ip,useMemo:$p,useReducer:Ul,useRef:Ap,useState:function(){return Ul(Da)},useDebugValue:ou,useDeferredValue:function(e){var t=Ht();return We===null?t.memoizedState=e:Lp(t,We.memoizedState,e)},useTransition:function(){var e=Ul(Da)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Sp,useSyncExternalStore:kp,useId:Fp,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Wc(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:Me({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Bo={isMounted:function(e){return(e=e._reactInternals)?qs(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=lt(),a=is(e),i=Pn(r,a);i.payload=t,s!=null&&(i.callback=s),t=rs(e,i,a),t!==null&&(en(t,e,a,r),Ui(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=lt(),a=is(e),i=Pn(r,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=rs(e,i,a),t!==null&&(en(t,e,a,r),Ui(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=lt(),r=is(e),a=Pn(s,r);a.tag=2,t!=null&&(a.callback=t),t=rs(e,a,r),t!==null&&(en(t,e,r,s),Ui(t,e,r))}};function zh(e,t,s,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ta(s,r)||!Ta(a,i):!0}function qp(e,t,s){var r=!1,a=us,i=t.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(a=vt(t)?Is:rt.current,r=t.contextTypes,i=(r=r!=null)?Cr(e,a):us),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Uh(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function qc(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Zd(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Bt(i):(i=vt(t)?Is:rt.current,a.context=Cr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wc(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bo.enqueueReplaceState(a,a.state,null),fo(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ar(e,t){try{var s="",r=t;do s+=Cy(r),r=r.return;while(r);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Wl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Bc(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ev=typeof WeakMap=="function"?WeakMap:Map;function Bp(e,t,s){s=Pn(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){bo||(bo=!0,ed=r),Bc(e,t)},s}function Hp(e,t,s){s=Pn(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){Bc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Bc(e,t),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Wh(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new ev;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=fv.bind(null,e,t,s),t.then(e,e))}function qh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bh(e,t,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Pn(-1,1),t.tag=2,rs(s,t,1))),s.lanes|=1),e)}var tv=Un.ReactCurrentOwner,yt=!1;function ot(e,t,s,r){t.child=e===null?vp(t,null,s,r):Tr(t,e.child,s,r)}function Hh(e,t,s,r,a){s=s.render;var i=t.ref;return jr(t,a),r=ru(e,t,s,r,i,a),s=au(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dn(e,t,a)):(Ae&&s&&Gd(t),t.flags|=1,ot(e,t,r,a),t.child)}function Gh(e,t,s,r,a){if(e===null){var i=s.type;return typeof i=="function"&&!pu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,Gp(e,t,i,r,a)):(e=Vi(s.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ta,s(o,r)&&e.ref===t.ref)return Dn(e,t,a)}return t.flags|=1,e=os(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gp(e,t,s,r,a){if(e!==null){var i=e.memoizedProps;if(Ta(i,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,Dn(e,t,a)}return Hc(e,t,s,r,a)}function Vp(e,t,s){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(gr,kt),kt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(gr,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:s,Ce(gr,kt),kt|=r}else i!==null?(r=i.baseLanes|s,t.memoizedState=null):r=s,Ce(gr,kt),kt|=r;return ot(e,t,a,s),t.child}function Kp(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Hc(e,t,s,r,a){var i=vt(s)?Is:rt.current;return i=Cr(t,i),jr(t,a),s=ru(e,t,s,r,i,a),r=au(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dn(e,t,a)):(Ae&&r&&Gd(t),t.flags|=1,ot(e,t,s,a),t.child)}function Vh(e,t,s,r,a){if(vt(s)){var i=!0;lo(t)}else i=!1;if(jr(t,a),t.stateNode===null)Bi(e,t),qp(t,s,r),qc(t,s,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=vt(s)?Is:rt.current,d=Cr(t,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Uh(t,o,r,d),Vn=!1;var y=t.memoizedState;o.state=y,fo(t,r,o,a),c=t.memoizedState,l!==r||y!==c||bt.current||Vn?(typeof u=="function"&&(Wc(t,s,u,r),c=t.memoizedState),(l=Vn||zh(t,s,l,r,y,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,jp(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Qt(t.type,l),o.props=d,m=t.pendingProps,y=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=vt(s)?Is:rt.current,c=Cr(t,c));var j=s.getDerivedStateFromProps;(u=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==c)&&Uh(t,o,r,c),Vn=!1,y=t.memoizedState,o.state=y,fo(t,r,o,a);var b=t.memoizedState;l!==m||y!==b||bt.current||Vn?(typeof j=="function"&&(Wc(t,s,j,r),b=t.memoizedState),(d=Vn||zh(t,s,d,r,y,b,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Gc(e,t,s,r,i,a)}function Gc(e,t,s,r,a,i){Kp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&Ph(t,s,!1),Dn(e,t,i);r=t.stateNode,tv.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,i),t.child=Tr(t,null,l,i)):ot(e,t,l,i),t.memoizedState=r.state,a&&Ph(t,s,!0),t.child}function Qp(e){var t=e.stateNode;t.pendingContext?Ah(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ah(e,t.context,!1),eu(e,t.containerInfo)}function Kh(e,t,s,r,a){return Er(),Kd(a),t.flags|=256,ot(e,t,s,r),t.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function Kc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yp(e,t,s){var r=t.pendingProps,a=Pe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ce(Pe,a&1),e===null)return zc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vo(o,r,0,null),e=As(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Kc(s),t.memoizedState=Vc,e):lu(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return nv(e,t,o,r,l,a,s);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=os(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=os(l,i):(i=As(i,o,s,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Kc(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=Vc,r}return i=e.child,e=i.sibling,r=os(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function lu(e,t){return t=Vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wi(e,t,s,r){return r!==null&&Kd(r),Tr(t,e.child,null,s),e=lu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nv(e,t,s,r,a,i,o){if(s)return t.flags&256?(t.flags&=-257,r=Wl(Error(K(422))),wi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Vo({mode:"visible",children:r.children},a,0,null),i=As(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=Kc(o),t.memoizedState=Vc,i);if(!(t.mode&1))return wi(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=Wl(i,r,void 0),wi(e,t,o,r)}if(l=(o&e.childLanes)!==0,yt||l){if(r=Ve,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Rn(e,a),en(r,e,a,-1))}return fu(),r=Wl(Error(K(421))),wi(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=pv.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ct=ss(a.nextSibling),Tt=t,Ae=!0,Xt=null,e!==null&&(Lt[Ft++]=Tn,Lt[Ft++]=On,Lt[Ft++]=Ms,Tn=e.id,On=e.overflow,Ms=t),t=lu(t,r.children),t.flags|=4096,t)}function Qh(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Uc(e.return,t,s)}function ql(e,t,s,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=s,i.tailMode=a)}function Jp(e,t,s){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ot(e,t,r.children,s),r=Pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,s,t);else if(e.tag===19)Qh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ce(Pe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&po(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),ql(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&po(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}ql(t,!0,s,null,i);break;case"together":ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ds|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,s=os(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=os(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function sv(e,t,s){switch(t.tag){case 3:Qp(t),Er();break;case 5:Np(t);break;case 1:vt(t.type)&&lo(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ce(ho,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Pe,Pe.current&1),t.flags|=128,null):s&t.child.childLanes?Yp(e,t,s):(Ce(Pe,Pe.current&1),e=Dn(e,t,s),e!==null?e.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return Jp(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ce(Pe,Pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Vp(e,t,s)}return Dn(e,t,s)}var Xp,Qc,Zp,eg;Xp=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Qc=function(){};Zp=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ts(xn.current);var i=null;switch(s){case"input":a=xc(e,a),r=xc(e,r),i=[];break;case"select":a=Me({},a,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":a=vc(e,a),r=vc(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=io)}jc(s,r);var o;s=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ja.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ja.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};eg=function(e,t,s,r){s!==r&&(t.flags|=4)};function Zr(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function rv(e,t,s){var r=t.pendingProps;switch(Vd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return vt(t.type)&&oo(),tt(t),null;case 3:return r=t.stateNode,Or(),Oe(bt),Oe(rt),nu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(sd(Xt),Xt=null))),Qc(e,t),tt(t),null;case 5:tu(t);var a=Ts(Ma.current);if(s=t.type,e!==null&&t.stateNode!=null)Zp(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return tt(t),null}if(e=Ts(xn.current),bi(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[mn]=t,r[Pa]=i,e=(t.mode&1)!==0,s){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(a=0;a<ia.length;a++)Ee(ia[a],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":rh(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":ih(r,i),Ee("invalid",r)}jc(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&yi(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&yi(r.textContent,l,e),a=["children",""+l]):ja.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(s){case"input":di(r),ah(r,i,!0);break;case"textarea":di(r),oh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=io)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ef(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[mn]=t,e[Pa]=r,Xp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nc(s,r),s){case"dialog":Ee("cancel",e),Ee("close",e),a=r;break;case"iframe":case"object":case"embed":Ee("load",e),a=r;break;case"video":case"audio":for(a=0;a<ia.length;a++)Ee(ia[a],e);a=r;break;case"source":Ee("error",e),a=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),a=r;break;case"details":Ee("toggle",e),a=r;break;case"input":rh(e,r),a=xc(e,r),Ee("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Me({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":ih(e,r),a=vc(e,r),Ee("invalid",e);break;default:a=r}jc(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Af(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tf(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Na(e,c):typeof c=="number"&&Na(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ja.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",e):c!=null&&Pd(e,i,c,o))}switch(s){case"input":di(e),ah(e,r,!1);break;case"textarea":di(e),oh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ds(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?yr(e,!!r.multiple,i,!1):r.defaultValue!=null&&yr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=io)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)eg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(s=Ts(Ma.current),Ts(xn.current),bi(t)){if(r=t.stateNode,s=t.memoizedProps,r[mn]=t,(i=r.nodeValue!==s)&&(e=Tt,e!==null))switch(e.tag){case 3:yi(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yi(r.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[mn]=t,t.stateNode=r}return tt(t),null;case 13:if(Oe(Pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&Ct!==null&&t.mode&1&&!(t.flags&128))yp(),Er(),t.flags|=98560,i=!1;else if(i=bi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[mn]=t}else Er(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Xt!==null&&(sd(Xt),Xt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?qe===0&&(qe=3):fu())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Or(),Qc(e,t),e===null&&Oa(t.stateNode.containerInfo),tt(t),null;case 10:return Jd(t.type._context),tt(t),null;case 17:return vt(t.type)&&oo(),tt(t),null;case 19:if(Oe(Pe),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zr(i,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=po(e),o!==null){for(t.flags|=128,Zr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)i=s,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ce(Pe,Pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Le()>Pr&&(t.flags|=128,r=!0,Zr(i,!1),t.lanes=4194304)}else{if(!r)if(e=po(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return tt(t),null}else 2*Le()-i.renderingStartTime>Pr&&s!==1073741824&&(t.flags|=128,r=!0,Zr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Le(),t.sibling=null,s=Pe.current,Ce(Pe,r?s&1|2:s&1),t):(tt(t),null);case 22:case 23:return mu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function av(e,t){switch(Vd(t),t.tag){case 1:return vt(t.type)&&oo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(),Oe(bt),Oe(rt),nu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(Oe(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Er()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Pe),null;case 4:return Or(),null;case 10:return Jd(t.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var ji=!1,st=!1,iv=typeof WeakSet=="function"?WeakSet:Set,ae=null;function pr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Re(e,t,r)}else s.current=null}function Yc(e,t,s){try{s()}catch(r){Re(e,t,r)}}var Yh=!1;function ov(e,t){if(Ic=so,e=ap(),Hd(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,y=null;t:for(;;){for(var j;m!==s||a!==0&&m.nodeType!==3||(l=o+a),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(j=m.firstChild)!==null;)y=m,m=j;for(;;){if(m===e)break t;if(y===s&&++d===a&&(l=o),y===i&&++u===r&&(c=o),(j=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=j}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Mc={focusedElem:e,selectionRange:s},so=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,w=b.memoizedState,p=t.stateNode,g=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:Qt(t.type,v),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(h){Re(t,t.return,h)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return b=Yh,Yh=!1,b}function pa(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Yc(t,s,i)}a=a.next}while(a!==r)}}function Ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Jc(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function tg(e){var t=e.alternate;t!==null&&(e.alternate=null,tg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mn],delete t[Pa],delete t[$c],delete t[qb],delete t[Bb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ng(e){return e.tag===5||e.tag===3||e.tag===4}function Jh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ng(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=io));else if(r!==4&&(e=e.child,e!==null))for(Xc(e,t,s),e=e.sibling;e!==null;)Xc(e,t,s),e=e.sibling}function Zc(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zc(e,t,s),e=e.sibling;e!==null;)Zc(e,t,s),e=e.sibling}var Qe=null,Yt=!1;function Wn(e,t,s){for(s=s.child;s!==null;)sg(e,t,s),s=s.sibling}function sg(e,t,s){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount($o,s)}catch{}switch(s.tag){case 5:st||pr(s,t);case 6:var r=Qe,a=Yt;Qe=null,Wn(e,t,s),Qe=r,Yt=a,Qe!==null&&(Yt?(e=Qe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Qe.removeChild(s.stateNode));break;case 18:Qe!==null&&(Yt?(e=Qe,s=s.stateNode,e.nodeType===8?Dl(e.parentNode,s):e.nodeType===1&&Dl(e,s),Ca(e)):Dl(Qe,s.stateNode));break;case 4:r=Qe,a=Yt,Qe=s.stateNode.containerInfo,Yt=!0,Wn(e,t,s),Qe=r,Yt=a;break;case 0:case 11:case 14:case 15:if(!st&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yc(s,t,o),a=a.next}while(a!==r)}Wn(e,t,s);break;case 1:if(!st&&(pr(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){Re(s,t,l)}Wn(e,t,s);break;case 21:Wn(e,t,s);break;case 22:s.mode&1?(st=(r=st)||s.memoizedState!==null,Wn(e,t,s),st=r):Wn(e,t,s);break;default:Wn(e,t,s)}}function Xh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new iv),t.forEach(function(r){var a=gv.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function Vt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Yt=!1;break e;case 3:Qe=l.stateNode.containerInfo,Yt=!0;break e;case 4:Qe=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(Qe===null)throw Error(K(160));sg(i,o,a),Qe=null,Yt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Re(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rg(t,e),t=t.sibling}function rg(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),cn(e),r&4){try{pa(3,e,e.return),Ho(3,e)}catch(v){Re(e,e.return,v)}try{pa(5,e,e.return)}catch(v){Re(e,e.return,v)}}break;case 1:Vt(t,e),cn(e),r&512&&s!==null&&pr(s,s.return);break;case 5:if(Vt(t,e),cn(e),r&512&&s!==null&&pr(s,s.return),e.flags&32){var a=e.stateNode;try{Na(a,"")}catch(v){Re(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_f(a,i),Nc(l,o);var d=Nc(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Af(a,m):u==="dangerouslySetInnerHTML"?Tf(a,m):u==="children"?Na(a,m):Pd(a,u,m,d)}switch(l){case"input":yc(a,i);break;case"textarea":Cf(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?yr(a,!!i.multiple,j,!1):y!==!!i.multiple&&(i.defaultValue!=null?yr(a,!!i.multiple,i.defaultValue,!0):yr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Pa]=i}catch(v){Re(e,e.return,v)}}break;case 6:if(Vt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(K(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Re(e,e.return,v)}}break;case 3:if(Vt(t,e),cn(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Ca(t.containerInfo)}catch(v){Re(e,e.return,v)}break;case 4:Vt(t,e),cn(e);break;case 13:Vt(t,e),cn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(uu=Le())),r&4&&Xh(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(st=(d=st)||u,Vt(t,e),st=d):Vt(t,e),cn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ae=e,u=e.child;u!==null;){for(m=ae=u;ae!==null;){switch(y=ae,j=y.child,y.tag){case 0:case 11:case 14:case 15:pa(4,y,y.return);break;case 1:pr(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,s=y.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){Re(r,s,v)}}break;case 5:pr(y,y.return);break;case 22:if(y.memoizedState!==null){em(m);continue}}j!==null?(j.return=y,ae=j):em(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Of("display",o))}catch(v){Re(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(v){Re(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Vt(t,e),cn(e),r&4&&Xh(e);break;case 21:break;default:Vt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(ng(s)){var r=s;break e}s=s.return}throw Error(K(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Na(a,""),r.flags&=-33);var i=Jh(e);Zc(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Jh(e);Xc(e,l,o);break;default:throw Error(K(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lv(e,t,s){ae=e,ag(e)}function ag(e,t,s){for(var r=(e.mode&1)!==0;ae!==null;){var a=ae,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||ji;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||st;l=ji;var d=st;if(ji=o,(st=c)&&!d)for(ae=a;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?tm(a):c!==null?(c.return=o,ae=c):tm(a);for(;i!==null;)ae=i,ag(i),i=i.sibling;ae=a,ji=l,st=d}Zh(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ae=i):Zh(e)}}function Zh(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Ho(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(s===null)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Qt(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$h(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}$h(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ca(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}st||t.flags&512&&Jc(t)}catch(y){Re(t,t.return,y)}}if(t===e){ae=null;break}if(s=t.sibling,s!==null){s.return=t.return,ae=s;break}ae=t.return}}function em(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ae=s;break}ae=t.return}}function tm(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ho(4,t)}catch(c){Re(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Re(t,a,c)}}var i=t.return;try{Jc(t)}catch(c){Re(t,i,c)}break;case 5:var o=t.return;try{Jc(t)}catch(c){Re(t,o,c)}}}catch(c){Re(t,t.return,c)}if(t===e){ae=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ae=l;break}ae=t.return}}var cv=Math.ceil,yo=Un.ReactCurrentDispatcher,cu=Un.ReactCurrentOwner,Ut=Un.ReactCurrentBatchConfig,ve=0,Ve=null,Ue=null,Je=0,kt=0,gr=gs(0),qe=0,La=null,Ds=0,Go=0,du=0,ga=null,gt=null,uu=0,Pr=1/0,_n=null,bo=!1,ed=null,as=null,Ni=!1,Zn=null,vo=0,xa=0,td=null,Hi=-1,Gi=0;function lt(){return ve&6?Le():Hi!==-1?Hi:Hi=Le()}function is(e){return e.mode&1?ve&2&&Je!==0?Je&-Je:Gb.transition!==null?(Gi===0&&(Gi=qf()),Gi):(e=je,e!==0||(e=window.event,e=e===void 0?16:Yf(e.type)),e):1}function en(e,t,s,r){if(50<xa)throw xa=0,td=null,Error(K(185));Ka(e,s,r),(!(ve&2)||e!==Ve)&&(e===Ve&&(!(ve&2)&&(Go|=s),qe===4&&Yn(e,Je)),wt(e,r),s===1&&ve===0&&!(t.mode&1)&&(Pr=Le()+500,Wo&&xs()))}function wt(e,t){var s=e.callbackNode;Gy(e,t);var r=no(e,e===Ve?Je:0);if(r===0)s!==null&&dh(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&dh(s),t===1)e.tag===0?Hb(nm.bind(null,e)):pp(nm.bind(null,e)),Ub(function(){!(ve&6)&&xs()}),s=null;else{switch(Bf(r)){case 1:s=$d;break;case 4:s=Uf;break;case 16:s=to;break;case 536870912:s=Wf;break;default:s=to}s=mg(s,ig.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function ig(e,t){if(Hi=-1,Gi=0,ve&6)throw Error(K(327));var s=e.callbackNode;if(Nr()&&e.callbackNode!==s)return null;var r=no(e,e===Ve?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wo(e,r);else{t=r;var a=ve;ve|=2;var i=lg();(Ve!==e||Je!==t)&&(_n=null,Pr=Le()+500,Os(e,t));do try{hv();break}catch(l){og(e,l)}while(!0);Yd(),yo.current=i,ve=a,Ue!==null?t=0:(Ve=null,Je=0,t=qe)}if(t!==0){if(t===2&&(a=Ec(e),a!==0&&(r=a,t=nd(e,a))),t===1)throw s=La,Os(e,0),Yn(e,r),wt(e,Le()),s;if(t===6)Yn(e,r);else{if(a=e.current.alternate,!(r&30)&&!dv(a)&&(t=wo(e,r),t===2&&(i=Ec(e),i!==0&&(r=i,t=nd(e,i))),t===1))throw s=La,Os(e,0),Yn(e,r),wt(e,Le()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Ss(e,gt,_n);break;case 3:if(Yn(e,r),(r&130023424)===r&&(t=uu+500-Le(),10<t)){if(no(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){lt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Dc(Ss.bind(null,e,gt,_n),t);break}Ss(e,gt,_n);break;case 4:if(Yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Zt(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cv(r/1960))-r,10<r){e.timeoutHandle=Dc(Ss.bind(null,e,gt,_n),r);break}Ss(e,gt,_n);break;case 5:Ss(e,gt,_n);break;default:throw Error(K(329))}}}return wt(e,Le()),e.callbackNode===s?ig.bind(null,e):null}function nd(e,t){var s=ga;return e.current.memoizedState.isDehydrated&&(Os(e,t).flags|=256),e=wo(e,t),e!==2&&(t=gt,gt=s,t!==null&&sd(t)),e}function sd(e){gt===null?gt=e:gt.push.apply(gt,e)}function dv(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],i=a.getSnapshot;a=a.value;try{if(!sn(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~du,t&=~Go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Zt(t),r=1<<s;e[s]=-1,t&=~r}}function nm(e){if(ve&6)throw Error(K(327));Nr();var t=no(e,0);if(!(t&1))return wt(e,Le()),null;var s=wo(e,t);if(e.tag!==0&&s===2){var r=Ec(e);r!==0&&(t=r,s=nd(e,r))}if(s===1)throw s=La,Os(e,0),Yn(e,t),wt(e,Le()),s;if(s===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ss(e,gt,_n),wt(e,Le()),null}function hu(e,t){var s=ve;ve|=1;try{return e(t)}finally{ve=s,ve===0&&(Pr=Le()+500,Wo&&xs())}}function $s(e){Zn!==null&&Zn.tag===0&&!(ve&6)&&Nr();var t=ve;ve|=1;var s=Ut.transition,r=je;try{if(Ut.transition=null,je=1,e)return e()}finally{je=r,Ut.transition=s,ve=t,!(ve&6)&&xs()}}function mu(){kt=gr.current,Oe(gr)}function Os(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,zb(s)),Ue!==null)for(s=Ue.return;s!==null;){var r=s;switch(Vd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oo();break;case 3:Or(),Oe(bt),Oe(rt),nu();break;case 5:tu(r);break;case 4:Or();break;case 13:Oe(Pe);break;case 19:Oe(Pe);break;case 10:Jd(r.type._context);break;case 22:case 23:mu()}s=s.return}if(Ve=e,Ue=e=os(e.current,null),Je=kt=t,qe=0,La=null,du=Go=Ds=0,gt=ga=null,Es!==null){for(t=0;t<Es.length;t++)if(s=Es[t],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}s.pending=r}Es=null}return e}function og(e,t){do{var s=Ue;try{if(Yd(),Wi.current=xo,go){for(var r=Ie.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}go=!1}if(Rs=0,Ge=We=Ie=null,fa=!1,Ra=0,cu.current=null,s===null||s.return===null){qe=1,La=t,Ue=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var y=u.alternate;y?(u.updateQueue=y.updateQueue,u.memoizedState=y.memoizedState,u.lanes=y.lanes):(u.updateQueue=null,u.memoizedState=null)}var j=qh(o);if(j!==null){j.flags&=-257,Bh(j,o,l,i,t),j.mode&1&&Wh(i,d,t),t=j,c=d;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break e}else{if(!(t&1)){Wh(i,d,t),fu();break e}c=Error(K(426))}}else if(Ae&&l.mode&1){var w=qh(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Bh(w,o,l,i,t),Kd(Ar(c,l));break e}}i=c=Ar(c,l),qe!==4&&(qe=2),ga===null?ga=[i]:ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Bp(i,c,t);Dh(i,p);break e;case 1:l=c;var g=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(as===null||!as.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var h=Hp(i,l,t);Dh(i,h);break e}}i=i.return}while(i!==null)}dg(s)}catch(N){t=N,Ue===s&&s!==null&&(Ue=s=s.return);continue}break}while(!0)}function lg(){var e=yo.current;return yo.current=xo,e===null?xo:e}function fu(){(qe===0||qe===3||qe===2)&&(qe=4),Ve===null||!(Ds&268435455)&&!(Go&268435455)||Yn(Ve,Je)}function wo(e,t){var s=ve;ve|=2;var r=lg();(Ve!==e||Je!==t)&&(_n=null,Os(e,t));do try{uv();break}catch(a){og(e,a)}while(!0);if(Yd(),ve=s,yo.current=r,Ue!==null)throw Error(K(261));return Ve=null,Je=0,qe}function uv(){for(;Ue!==null;)cg(Ue)}function hv(){for(;Ue!==null&&!$y();)cg(Ue)}function cg(e){var t=hg(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?dg(e):Ue=t,cu.current=null}function dg(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=av(s,t),s!==null){s.flags&=32767,Ue=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ue=null;return}}else if(s=rv(s,t,kt),s!==null){Ue=s;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);qe===0&&(qe=5)}function Ss(e,t,s){var r=je,a=Ut.transition;try{Ut.transition=null,je=1,mv(e,t,s,r)}finally{Ut.transition=a,je=r}return null}function mv(e,t,s,r){do Nr();while(Zn!==null);if(ve&6)throw Error(K(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Vy(e,i),e===Ve&&(Ue=Ve=null,Je=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ni||(Ni=!0,mg(to,function(){return Nr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=je;je=1;var l=ve;ve|=4,cu.current=null,ov(e,s),rg(s,e),Ib(Mc),so=!!Ic,Mc=Ic=null,e.current=s,lv(s),Ly(),ve=l,je=o,Ut.transition=i}else e.current=s;if(Ni&&(Ni=!1,Zn=e,vo=a),i=e.pendingLanes,i===0&&(as=null),Uy(s.stateNode),wt(e,Le()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(bo)throw bo=!1,e=ed,ed=null,e;return vo&1&&e.tag!==0&&Nr(),i=e.pendingLanes,i&1?e===td?xa++:(xa=0,td=e):xa=0,xs(),null}function Nr(){if(Zn!==null){var e=Bf(vo),t=Ut.transition,s=je;try{if(Ut.transition=null,je=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,vo=0,ve&6)throw Error(K(331));var a=ve;for(ve|=4,ae=e.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var u=ae;switch(u.tag){case 0:case 11:case 15:pa(8,u,i)}var m=u.child;if(m!==null)m.return=u,ae=m;else for(;ae!==null;){u=ae;var y=u.sibling,j=u.return;if(tg(u),u===d){ae=null;break}if(y!==null){y.return=j,ae=y;break}ae=j}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pa(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,ae=p;break e}ae=i.return}}var g=e.current;for(ae=g;ae!==null;){o=ae;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,ae=f;else e:for(o=g;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ho(9,l)}}catch(N){Re(l,l.return,N)}if(l===o){ae=null;break e}var h=l.sibling;if(h!==null){h.return=l.return,ae=h;break e}ae=l.return}}if(ve=a,xs(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot($o,e)}catch{}r=!0}return r}finally{je=s,Ut.transition=t}}return!1}function sm(e,t,s){t=Ar(s,t),t=Bp(e,t,1),e=rs(e,t,1),t=lt(),e!==null&&(Ka(e,1,t),wt(e,t))}function Re(e,t,s){if(e.tag===3)sm(e,e,s);else for(;t!==null;){if(t.tag===3){sm(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){e=Ar(s,e),e=Hp(t,e,1),t=rs(t,e,1),e=lt(),t!==null&&(Ka(t,1,e),wt(t,e));break}}t=t.return}}function fv(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&s,Ve===e&&(Je&s)===s&&(qe===4||qe===3&&(Je&130023424)===Je&&500>Le()-uu?Os(e,0):du|=s),wt(e,t)}function ug(e,t){t===0&&(e.mode&1?(t=mi,mi<<=1,!(mi&130023424)&&(mi=4194304)):t=1);var s=lt();e=Rn(e,t),e!==null&&(Ka(e,t,s),wt(e,s))}function pv(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),ug(e,s)}function gv(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),ug(e,s)}var hg;hg=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)yt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return yt=!1,sv(e,t,s);yt=!!(e.flags&131072)}else yt=!1,Ae&&t.flags&1048576&&gp(t,uo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bi(e,t),e=t.pendingProps;var a=Cr(t,rt.current);jr(t,s),a=ru(null,t,r,e,a,s);var i=au();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(i=!0,lo(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Zd(t),a.updater=Bo,t.stateNode=a,a._reactInternals=t,qc(t,r,e,s),t=Gc(null,t,r,!0,i,s)):(t.tag=0,Ae&&i&&Gd(t),ot(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=yv(r),e=Qt(r,e),a){case 0:t=Hc(null,t,r,e,s);break e;case 1:t=Vh(null,t,r,e,s);break e;case 11:t=Hh(null,t,r,e,s);break e;case 14:t=Gh(null,t,r,Qt(r.type,e),s);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qt(r,a),Hc(e,t,r,a,s);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qt(r,a),Vh(e,t,r,a,s);case 3:e:{if(Qp(t),e===null)throw Error(K(387));r=t.pendingProps,i=t.memoizedState,a=i.element,jp(e,t),fo(t,r,null,s);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ar(Error(K(423)),t),t=Kh(e,t,r,s,a);break e}else if(r!==a){a=Ar(Error(K(424)),t),t=Kh(e,t,r,s,a);break e}else for(Ct=ss(t.stateNode.containerInfo.firstChild),Tt=t,Ae=!0,Xt=null,s=vp(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Er(),r===a){t=Dn(e,t,s);break e}ot(e,t,r,s)}t=t.child}return t;case 5:return Np(t),e===null&&zc(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Rc(r,a)?o=null:i!==null&&Rc(r,i)&&(t.flags|=32),Kp(e,t),ot(e,t,o,s),t.child;case 6:return e===null&&zc(t),null;case 13:return Yp(e,t,s);case 4:return eu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,s):ot(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qt(r,a),Hh(e,t,r,a,s);case 7:return ot(e,t,t.pendingProps,s),t.child;case 8:return ot(e,t,t.pendingProps.children,s),t.child;case 12:return ot(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ce(ho,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===a.children&&!bt.current){t=Dn(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pn(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Uc(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Uc(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ot(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,jr(t,s),a=Bt(a),r=r(a),t.flags|=1,ot(e,t,r,s),t.child;case 14:return r=t.type,a=Qt(r,t.pendingProps),a=Qt(r.type,a),Gh(e,t,r,a,s);case 15:return Gp(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qt(r,a),Bi(e,t),t.tag=1,vt(r)?(e=!0,lo(t)):e=!1,jr(t,s),qp(t,r,a),qc(t,r,a,s),Gc(null,t,r,!0,e,s);case 19:return Jp(e,t,s);case 22:return Vp(e,t,s)}throw Error(K(156,t.tag))};function mg(e,t){return zf(e,t)}function xv(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,s,r){return new xv(e,t,s,r)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yv(e){if(typeof e=="function")return pu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Md)return 11;if(e===Rd)return 14}return 2}function os(e,t){var s=e.alternate;return s===null?(s=zt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Vi(e,t,s,r,a,i){var o=2;if(r=e,typeof e=="function")pu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ir:return As(s.children,a,i,t);case Id:o=8,a|=8;break;case mc:return e=zt(12,s,t,a|2),e.elementType=mc,e.lanes=i,e;case fc:return e=zt(13,s,t,a),e.elementType=fc,e.lanes=i,e;case pc:return e=zt(19,s,t,a),e.elementType=pc,e.lanes=i,e;case Nf:return Vo(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wf:o=10;break e;case jf:o=9;break e;case Md:o=11;break e;case Rd:o=14;break e;case Gn:o=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=zt(o,s,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function As(e,t,s,r){return e=zt(7,e,r,t),e.lanes=s,e}function Vo(e,t,s,r){return e=zt(22,e,r,t),e.elementType=Nf,e.lanes=s,e.stateNode={isHidden:!1},e}function Bl(e,t,s){return e=zt(6,e,null,t),e.lanes=s,e}function Hl(e,t,s){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bv(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function gu(e,t,s,r,a,i,o,l,c){return e=new bv(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=zt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(i),e}function vv(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function fg(e){if(!e)return us;e=e._reactInternals;e:{if(qs(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var s=e.type;if(vt(s))return fp(e,s,t)}return t}function pg(e,t,s,r,a,i,o,l,c){return e=gu(s,r,!0,e,a,i,o,l,c),e.context=fg(null),s=e.current,r=lt(),a=is(s),i=Pn(r,a),i.callback=t??null,rs(s,i,a),e.current.lanes=a,Ka(e,a,r),wt(e,r),e}function Ko(e,t,s,r){var a=t.current,i=lt(),o=is(a);return s=fg(s),t.context===null?t.context=s:t.pendingContext=s,t=Pn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rs(a,t,o),e!==null&&(en(e,a,o,i),Ui(e,a,o)),o}function jo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function xu(e,t){rm(e,t),(e=e.alternate)&&rm(e,t)}function wv(){return null}var gg=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}Qo.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Ko(e,t,null,null)};Qo.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$s(function(){Ko(null,e,null,null)}),t[Mn]=null}};function Qo(e){this._internalRoot=e}Qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Qn.length&&t!==0&&t<Qn[s].priority;s++);Qn.splice(s,0,e),s===0&&Qf(e)}};function bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function am(){}function jv(e,t,s,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=jo(o);i.call(d)}}var o=pg(t,r,e,0,null,!1,!1,"",am);return e._reactRootContainer=o,e[Mn]=o.current,Oa(e.nodeType===8?e.parentNode:e),$s(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=jo(c);l.call(d)}}var c=gu(e,0,!1,null,null,!1,!1,"",am);return e._reactRootContainer=c,e[Mn]=c.current,Oa(e.nodeType===8?e.parentNode:e),$s(function(){Ko(t,c,s,r)}),c}function Jo(e,t,s,r,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=jo(o);l.call(c)}}Ko(t,o,e,a)}else o=jv(s,t,e,a,r);return jo(o)}Hf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=aa(t.pendingLanes);s!==0&&(Ld(t,s|1),wt(t,Le()),!(ve&6)&&(Pr=Le()+500,xs()))}break;case 13:$s(function(){var r=Rn(e,1);if(r!==null){var a=lt();en(r,e,1,a)}}),xu(e,1)}};Fd=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var s=lt();en(t,e,134217728,s)}xu(e,134217728)}};Gf=function(e){if(e.tag===13){var t=is(e),s=Rn(e,t);if(s!==null){var r=lt();en(s,e,t,r)}xu(e,t)}};Vf=function(){return je};Kf=function(e,t){var s=je;try{return je=e,t()}finally{je=s}};kc=function(e,t,s){switch(t){case"input":if(yc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=Uo(r);if(!a)throw Error(K(90));kf(r),yc(r,a)}}}break;case"textarea":Cf(e,s);break;case"select":t=s.value,t!=null&&yr(e,!!s.multiple,t,!1)}};Mf=hu;Rf=$s;var Nv={usingClientEntryPoint:!1,Events:[Ya,dr,Uo,Pf,If,hu]},ea={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sv={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lf(e),e===null?null:e.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{$o=Si.inject(Sv),gn=Si}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv;It.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(t))throw Error(K(200));return vv(e,t,null,s)};It.createRoot=function(e,t){if(!bu(e))throw Error(K(299));var s=!1,r="",a=gg;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=gu(e,1,!1,null,null,s,!1,r,a),e[Mn]=t.current,Oa(e.nodeType===8?e.parentNode:e),new yu(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Lf(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return $s(e)};It.hydrate=function(e,t,s){if(!Yo(t))throw Error(K(200));return Jo(null,e,t,!0,s)};It.hydrateRoot=function(e,t,s){if(!bu(e))throw Error(K(405));var r=s!=null&&s.hydratedSources||null,a=!1,i="",o=gg;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=pg(t,null,e,1,s??null,a,!1,i,o),e[Mn]=t.current,Oa(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Qo(t)};It.render=function(e,t,s){if(!Yo(t))throw Error(K(200));return Jo(null,e,t,!1,s)};It.unmountComponentAtNode=function(e){if(!Yo(e))throw Error(K(40));return e._reactRootContainer?($s(function(){Jo(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};It.unstable_batchedUpdates=hu;It.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Yo(s))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Jo(e,t,s,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function xg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xg)}catch(e){console.error(e)}}xg(),xf.exports=It;var Xo=xf.exports;const kv=sf(Xo);var yg,im=Xo;yg=im.createRoot,im.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(e,t)=>{const s=x.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>x.createElement("svg",{ref:u,..._v,width:a,height:a,stroke:r,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Cv(e)}`,l].join(" "),...d},[...t.map(([m,y])=>x.createElement(m,y)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=re("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=re("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=re("FlaskRound",[["path",{d:"M10 2v7.31",key:"5d1hyh"}],["path",{d:"M14 9.3V1.99",key:"14k4l0"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14 9.3a6.5 6.5 0 1 1-4 0",key:"1r8fvy"}],["path",{d:"M5.52 16h12.96",key:"46hh1i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=re("Gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=re("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=re("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=re("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=re("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=re("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=re("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=re("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=re("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=re("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=re("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=re("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=re("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),cd=[{grade:1,name:"الصف الأول الأساسي",code:"ELEM1ST2024"},{grade:1,name:"الصف الأول الأساسي",code:"GRADE1KEY1"},{grade:1,name:"الصف الأول الأساسي",code:"GRADE1KEY2"},{grade:1,name:"الصف الأول الأساسي",code:"GRADE1KEY3"},{grade:1,name:"الصف الأول الأساسي",code:"GRADE1KEY4"},{grade:1,name:"الصف الأول الأساسي",code:"GRADE1KEY5"},{grade:2,name:"الصف الثاني الأساسي",code:"ELEM2ND2024"},{grade:2,name:"الصف الثاني الأساسي",code:"GRADE2KEY1"},{grade:2,name:"الصف الثاني الأساسي",code:"GRADE2KEY2"},{grade:2,name:"الصف الثاني الأساسي",code:"GRADE2KEY3"},{grade:2,name:"الصف الثاني الأساسي",code:"GRADE2KEY4"},{grade:2,name:"الصف الثاني الأساسي",code:"GRADE2KEY5"},{grade:3,name:"الصف الثالث الأساسي",code:"ELEM3RD2024"},{grade:3,name:"الصف الثالث الأساسي",code:"GRADE3KEY1"},{grade:3,name:"الصف الثالث الأساسي",code:"GRADE3KEY2"},{grade:3,name:"الصف الثالث الأساسي",code:"GRADE3KEY3"},{grade:3,name:"الصف الثالث الأساسي",code:"GRADE3KEY4"},{grade:3,name:"الصف الثالث الأساسي",code:"GRADE3KEY5"},{grade:4,name:"الصف الرابع الأساسي",code:"ELEM4TH2024"},{grade:4,name:"الصف الرابع الأساسي",code:"GRADE4KEY1"},{grade:4,name:"الصف الرابع الأساسي",code:"GRADE4KEY2"},{grade:4,name:"الصف الرابع الأساسي",code:"GRADE4KEY3"},{grade:4,name:"الصف الرابع الأساسي",code:"GRADE4KEY4"},{grade:4,name:"الصف الرابع الأساسي",code:"GRADE4KEY5"},{grade:5,name:"الصف الخامس الأساسي",code:"ELEM5TH2024"},{grade:5,name:"الصف الخامس الأساسي",code:"GRADE5KEY1"},{grade:5,name:"الصف الخامس الأساسي",code:"GRADE5KEY2"},{grade:5,name:"الصف الخامس الأساسي",code:"GRADE5KEY3"},{grade:5,name:"الصف الخامس الأساسي",code:"GRADE5KEY4"},{grade:5,name:"الصف الخامس الأساسي",code:"GRADE5KEY5"},{grade:6,name:"الصف السادس الأساسي",code:"ELEM6TH2024"},{grade:6,name:"الصف السادس الأساسي",code:"GRADE6KEY1"},{grade:6,name:"الصف السادس الأساسي",code:"GRADE6KEY2"},{grade:6,name:"الصف السادس الأساسي",code:"GRADE6KEY3"},{grade:6,name:"الصف السادس الأساسي",code:"GRADE6KEY4"},{grade:6,name:"الصف السادس الأساسي",code:"GRADE6KEY5"},{grade:7,name:"الصف السابع الأساسي",code:"MID1ST2024"},{grade:7,name:"الصف السابع الأساسي",code:"GRADE7KEY1"},{grade:7,name:"الصف السابع الأساسي",code:"GRADE7KEY2"},{grade:7,name:"الصف السابع الأساسي",code:"GRADE7KEY3"},{grade:7,name:"الصف السابع الأساسي",code:"GRADE7KEY4"},{grade:7,name:"الصف السابع الأساسي",code:"GRADE7KEY5"},{grade:8,name:"الصف الثامن الأساسي",code:"MID2ND2024"},{grade:8,name:"الصف الثامن الأساسي",code:"GRADE8KEY1"},{grade:8,name:"الصف الثامن الأساسي",code:"GRADE8KEY2"},{grade:8,name:"الصف الثامن الأساسي",code:"GRADE8KEY3"},{grade:8,name:"الصف الثامن الأساسي",code:"GRADE8KEY4"},{grade:8,name:"الصف الثامن الأساسي",code:"GRADE8KEY5"},{grade:9,name:"الصف التاسع الأساسي",code:"MID3RD2024"},{grade:9,name:"الصف التاسع الأساسي",code:"GRADE9KEY1"},{grade:9,name:"الصف التاسع الأساسي",code:"GRADE9KEY2"},{grade:9,name:"الصف التاسع الأساسي",code:"GRADE9KEY3"},{grade:9,name:"الصف التاسع الأساسي",code:"GRADE9KEY4"},{grade:9,name:"الصف التاسع الأساسي",code:"GRADE9KEY5"},{grade:10,name:"الصف العاشر الأساسي",code:"HIGH1ST2024"},{grade:10,name:"الصف العاشر الأساسي",code:"GRADE10KEY1"},{grade:10,name:"الصف العاشر الأساسي",code:"GRADE10KEY2"},{grade:10,name:"الصف العاشر الأساسي",code:"GRADE10KEY3"},{grade:10,name:"الصف العاشر الأساسي",code:"GRADE10KEY4"},{grade:10,name:"الصف العاشر الأساسي",code:"GRADE10KEY5"},{grade:11,name:"الصف الحادي عشر",code:"HIGH2ND2024"},{grade:11,name:"الصف الحادي عشر",code:"GRADE11KEY1"},{grade:11,name:"الصف الحادي عشر",code:"GRADE11KEY2"},{grade:11,name:"الصف الحادي عشر",code:"GRADE11KEY3"},{grade:11,name:"الصف الحادي عشر",code:"GRADE11KEY4"},{grade:11,name:"الصف الحادي عشر",code:"GRADE11KEY5"},{grade:12,name:"الصف الثاني عشر",code:"HIGH3RD2024"},{grade:12,name:"الصف الثاني عشر",code:"GRADE12KEY1"},{grade:12,name:"الصف الثاني عشر",code:"GRADE12KEY2"},{grade:12,name:"الصف الثاني عشر",code:"GRADE12KEY3"},{grade:12,name:"الصف الثاني عشر",code:"GRADE12KEY4"},{grade:12,name:"الصف الثاني عشر",code:"GRADE12KEY5"},{grade:0,name:"المدير - جميع الصفوف",code:"1912191984",isAdmin:!0}],An={},vg=e=>{const t=cd.find(s=>s.code===e);if(t)return t;try{for(const s of Object.keys(An)){const r=localStorage.getItem(`teacher-access-codes-${s}`);if(r){const a=JSON.parse(r),i=a.find(o=>o.code===e&&o.isActive);if(i){if(i.expiresAt&&new Date(i.expiresAt).getTime()<Date.now()||i.maxUsage&&i.usageCount>=i.maxUsage)continue;const o=a.map(d=>d.code===e?{...d,usageCount:(d.usageCount||0)+1}:d);localStorage.setItem(`teacher-access-codes-${s}`,JSON.stringify(o));const l=An[s],c=`الصف ${i.grade}`;return{grade:i.grade,name:c,code:i.code}}}}return null}catch(s){return console.error("Error checking dynamic access codes:",s),null}},Bv=e=>{const t=vg(e);return t!=null&&t.isTeacher&&t.teacherId?An[t.teacherId]:null},Hv="modulepreload",Gv=function(e){return"/"+e},hm={},ei=function(t,s,r){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=Gv(c),c in hm)return;hm[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Hv,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((y,j)=>{m.addEventListener("load",y),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Vv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>zr);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)};class Nu extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class Kv extends Nu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Qv extends Nu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Yv extends Nu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dd||(dd={}));var Jv=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class Xv{constructor(t,{headers:s={},customFetch:r,region:a=dd.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Vv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var r;return Jv(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(b=>{throw new Kv(b)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new Qv(u);if(!u.ok)throw new Yv(u);let y=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),j;return y==="application/json"?j=yield u.json():y==="application/octet-stream"?j=yield u.blob():y==="text/event-stream"?j=u:y==="multipart/form-data"?j=yield u.formData():j=yield u.text(),{data:j,error:null}}catch(a){return{data:null,error:a}}})}}var xt={},Su={},tl={},ti={},nl={},sl={},Zv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ir=Zv();const ew=Ir.fetch,wg=Ir.fetch.bind(Ir),jg=Ir.Headers,tw=Ir.Request,nw=Ir.Response,zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:jg,Request:tw,Response:nw,default:wg,fetch:ew},Symbol.toStringTag,{value:"Module"})),sw=Z0(zr);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});let rw=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};rl.default=rw;var Ng=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sl,"__esModule",{value:!0});const aw=Ng(sw),iw=Ng(rl);let ow=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=aw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,m=null,y=i.status,j=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,y=406,j="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(u=[],d=null,y=200,j="OK")}catch{i.status===404&&v===""?(y=204,j="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,y=200,j="OK"),d&&this.shouldThrowOnError)throw new iw.default(d)}return{error:d,data:u,count:m,status:y,statusText:j}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}returns(){return this}overrideTypes(){return this}};sl.default=ow;var lw=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nl,"__esModule",{value:!0});const cw=lw(sl);let dw=class extends cw.default{select(t){let s=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:r=s}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nl.default=dw;var uw=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ti,"__esModule",{value:!0});const hw=uw(nl);let mw=class extends hw.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const r=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(t,s,r){return this.url.searchParams.append(t,`not.${s}.${r}`),this}or(t,{foreignTable:s,referencedTable:r=s}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,r){return this.url.searchParams.append(t,`${s}.${r}`),this}};ti.default=mw;var fw=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tl,"__esModule",{value:!0});const ta=fw(ti);let pw=class{constructor(t,{headers:s={},schema:r,fetch:a}){this.url=t,this.headers=s,this.schema=r,this.fetch=a}select(t,{head:s=!1,count:r}={}){const a=s?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ta.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:r=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ta.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new ta.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new ta.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ta.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tl.default=pw;var al={},il={};Object.defineProperty(il,"__esModule",{value:!0});il.version=void 0;il.version="0.0.0-automated";Object.defineProperty(al,"__esModule",{value:!0});al.DEFAULT_HEADERS=void 0;const gw=il;al.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${gw.version}`};var Sg=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Su,"__esModule",{value:!0});const xw=Sg(tl),yw=Sg(ti),bw=al;let vw=class kg{constructor(t,{headers:s={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},bw.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new xw.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new kg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new yw.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Su.default=vw;var Ur=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xt,"__esModule",{value:!0});xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const _g=Ur(Su);xt.PostgrestClient=_g.default;const Cg=Ur(tl);xt.PostgrestQueryBuilder=Cg.default;const Eg=Ur(ti);xt.PostgrestFilterBuilder=Eg.default;const Tg=Ur(nl);xt.PostgrestTransformBuilder=Tg.default;const Og=Ur(sl);xt.PostgrestBuilder=Og.default;const Ag=Ur(rl);xt.PostgrestError=Ag.default;var ww=xt.default={PostgrestClient:_g.default,PostgrestQueryBuilder:Cg.default,PostgrestFilterBuilder:Eg.default,PostgrestTransformBuilder:Tg.default,PostgrestBuilder:Og.default,PostgrestError:Ag.default};const{PostgrestClient:jw,PostgrestQueryBuilder:tC,PostgrestFilterBuilder:nC,PostgrestTransformBuilder:sC,PostgrestBuilder:rC,PostgrestError:aC}=ww;function Nw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Sw=Nw(),kw="2.11.15",_w=`realtime-js/${kw}`,Cw="1.0.0",Pg=1e4,Ew=1e3;var ya;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ya||(ya={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var Jt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Jt||(Jt={}));var ud;(function(e){e.websocket="websocket"})(ud||(ud={}));var _s;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_s||(_s={}));class Tw{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,s,r)}_decodeBroadcast(t,s,r){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ig{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_e||(_e={}));const mm=(e,t,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Ow(o,e,t,a),i),{})},Ow=(e,t,s,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=s[e];return i&&!r.includes(i)?Mg(i,o):hd(o)},Mg=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return Mw(t,s)}switch(e){case _e.bool:return Aw(t);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return Pw(t);case _e.json:case _e.jsonb:return Iw(t);case _e.timestamp:return Rw(t);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return hd(t);default:return hd(t)}},hd=e=>e,Aw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Pw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Iw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Mw=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,r=e[s];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Mg(t,l))}return e},Rw=e=>typeof e=="string"?e.replace(" ","T"):e,Rg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Vl{constructor(t,s,r={},a=Pg){this.channel=t,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var fm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(fm||(fm={}));class ba{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ba.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=ba.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ba.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,a){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const m=i[d];if(m){const y=u.map(w=>w.presence_ref),j=m.map(w=>w.presence_ref),b=u.filter(w=>j.indexOf(w.presence_ref)<0),v=m.filter(w=>y.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,s,r,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(j=>j.presence_ref),y=u.filter(j=>m.indexOf(j.presence_ref)<0);t[l].unshift(...y)}r(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const a=t[r];return"metas"in a?s[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(pm||(pm={}));var gm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gm||(gm={}));var Cn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Cn||(Cn={}));class ku{constructor(t,s={config:{}},r){this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Vl(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new Ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new ba(this),this.broadcastEndpointURL=Rg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(Cn.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Cn.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){t==null||t(Cn.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,j=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,b=[];for(let v=0;v<j;v++){const w=y[v],{filter:{event:p,schema:g,table:f,filter:h}}=w,N=u&&u[v];if(N&&N.event===p&&N.schema===g&&N.table===f&&N.filter===h)b.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(Cn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Cn.SUBSCRIBED);return}}).receive("error",u=>{this.state=nt.errored,t==null||t(Cn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Cn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this._on(t,s,r)}async send(t,s={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Vl(this,Jt.leave,{},t),r.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Vl(this,t,s,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Jt;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let y=this._onMessage(o,s,r);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(j=>{var b,v,w;return((b=j.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(v=j.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(j=>j.callback(y,r)):(i=this.bindings[o])===null||i===void 0||i.filter(j=>{var b,v,w,p,g,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in j){const h=j.id,N=(b=j.filter)===null||b===void 0?void 0:b.event;return h&&((v=s.ids)===null||v===void 0?void 0:v.includes(h))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const h=(g=(p=j==null?void 0:j.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return h==="*"||h===((f=s==null?void 0:s.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===o}).map(j=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:v,table:w,commit_timestamp:p,type:g,errors:f}=b;y=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:p,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(b))}j.callback(y,r)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ku.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jt.close,{},t)}_onError(t){this._on(Jt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=mm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=mm(t.columns,t.old_record)),s}}const xm=()=>{},Dw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $w{constructor(t,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xm,this.ref=0,this.logger=xm,this.conn=null,this.sendBuffer=[],this.serializer=new Tw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ei(async()=>{const{default:c}=await Promise.resolve().then(()=>zr);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${ud.websocket}`,this.httpEndpoint=Rg(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ig(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Sw),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cw}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ya.connecting:return _s.Connecting;case ya.open:return _s.Open;case ya.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}channel(t,s={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new ku(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const a={access_token:s,version:_w};s&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Jt.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Ew,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:r,event:a,payload:i,ref:o}=s;r==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${r}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([Dw],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class _u extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function He(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Lw extends _u{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class md extends _u{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Fw=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Dg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>zr);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},zw=()=>Fw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ei(()=>Promise.resolve().then(()=>zr),void 0)).Response:Response}),fd=e=>{if(Array.isArray(e))return e.map(s=>fd(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,r])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=fd(r)}),t};var Bs=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Kl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Uw=(e,t,s)=>Bs(void 0,void 0,void 0,function*(){const r=yield zw();e instanceof r&&!(s!=null&&s.noResolveJson)?e.json().then(a=>{t(new Lw(Kl(a),e.status||500))}).catch(a=>{t(new md(Kl(a),a))}):t(new md(Kl(e),e))}),Ww=(e,t,s,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),s))};function ni(e,t,s,r,a,i){return Bs(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,Ww(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Uw(c,l,r))})})}function ko(e,t,s,r){return Bs(this,void 0,void 0,function*(){return ni(e,"GET",t,s,r)})}function Kn(e,t,s,r,a){return Bs(this,void 0,void 0,function*(){return ni(e,"POST",t,r,a,s)})}function qw(e,t,s,r,a){return Bs(this,void 0,void 0,function*(){return ni(e,"PUT",t,r,a,s)})}function Bw(e,t,s,r){return Bs(this,void 0,void 0,function*(){return ni(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function $g(e,t,s,r,a){return Bs(this,void 0,void 0,function*(){return ni(e,"DELETE",t,r,a,s)})}var pt=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Hw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ym={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gw{constructor(t,s={},r,a){this.url=t,this.headers=s,this.bucketId=r,this.fetch=Dg(a)}uploadOrUpdate(t,s,r,a){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ym),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),y=yield m.json();return m.ok?{data:{path:d,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(i){if(He(i))return{data:null,error:i};throw i}})}upload(t,s,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,r)})}uploadToSignedUrl(t,s,r,a){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:ym.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),y=yield m.json();return m.ok?{data:{path:i,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(He(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield Kn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new _u("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}update(t,s,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,r)})}move(t,s,r){return pt(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}copy(t,s,r){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,r){return pt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Kn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,r){return pt(this,void 0,void 0,function*(){try{const a=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}download(t,s){return pt(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ko(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(He(l))return{data:null,error:l};throw l}})}info(t){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const r=yield ko(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:fd(r),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}exists(t){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Bw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(He(r)&&r instanceof md){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,s){const r=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return pt(this,void 0,void 0,function*(){try{return{data:yield $g(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}list(t,s,r){return pt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Hw),s),{prefix:t||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Vw="2.7.1",Kw={"X-Client-Info":`storage-js/${Vw}`};var Qs=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class Qw{constructor(t,s={},r){this.url=t,this.headers=Object.assign(Object.assign({},Kw),s),this.fetch=Dg(r)}listBuckets(){return Qs(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}})}getBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Qs(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}updateBucket(t,s){return Qs(this,void 0,void 0,function*(){try{return{data:yield qw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield $g(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}}class Yw extends Qw{constructor(t,s={},r){super(t,s,r)}from(t){return new Gw(this.url,this.headers,t,this.fetch)}}const Jw="2.50.2";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const Xw={"X-Client-Info":`supabase-js-${oa}/${Jw}`},Zw={headers:Xw},ej={schema:"public"},tj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var sj=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const rj=e=>{let t;return e?t=e:typeof fetch>"u"?t=wg:t=fetch,(...s)=>t(...s)},aj=()=>typeof Headers>"u"?jg:Headers,ij=(e,t,s)=>{const r=rj(s),a=aj();return(i,o)=>sj(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var oj=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function lj(e){return e.endsWith("/")?e:e+"/"}function cj(e,t){var s,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,y={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>oj(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}const Lg="2.70.0",sr=30*1e3,pd=3,Ql=pd*sr,dj="http://localhost:9999",uj="supabase.auth.token",hj={"X-Client-Info":`gotrue-js/${Lg}`},gd="X-Supabase-Api-Version",Fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fj=6e5;class Cu extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class pj extends Cu{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function gj(e){return ue(e)&&e.name==="AuthApiError"}class zg extends Cu{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class bs extends Cu{constructor(t,s,r,a){super(t,r,a),this.name=s,this.status=r}}class Bn extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xj(e){return ue(e)&&e.name==="AuthSessionMissingError"}class ki extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _i extends bs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ci extends bs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yj(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class bm extends bs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xd extends bs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Yl(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class vm extends bs{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class va extends bs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wm=` 	
\r=`.split(""),bj=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<wm.length;t+=1)e[wm[t].charCodeAt(0)]=-2;for(let t=0;t<_o.length;t+=1)e[_o[t].charCodeAt(0)]=t;return e})();function jm(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(_o[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(_o[r]),t.queuedBits-=6}}function Ug(e,t,s){const r=bj[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Nm(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{jj(o,r,s)};for(let o=0;o<e.length;o+=1)Ug(e.charCodeAt(o),a,i);return t.join("")}function vj(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function wj(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}vj(r,t)}}function jj(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Nj(e){const t=[],s={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Ug(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Sj(e){const t=[];return wj(e,s=>t.push(s)),new Uint8Array(t)}function kj(e){const t=[],s={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>jm(a,s,r)),jm(null,s,r),t.join("")}function _j(e){return Math.round(Date.now()/1e3)+e}function Cj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Kt=()=>typeof window<"u"&&typeof document<"u",js={tested:!1,writable:!1},wa=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(js.tested)return js.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),js.tested=!0,js.writable=!0}catch{js.tested=!0,js.writable=!1}return js.writable};function Ej(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((r,a)=>{t[a]=r}),t}const Wg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>zr);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},Tj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qg=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Ei=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ti=async(e,t)=>{await e.removeItem(t)};class ol{constructor(){this.promise=new ol.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}ol.promiseConstructor=Promise;function Jl(e){const t=e.split(".");if(t.length!==3)throw new va("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!mj.test(t[r]))throw new va("JWT not in base64url format");return{header:JSON.parse(Nm(t[0])),payload:JSON.parse(Nm(t[1])),signature:Nj(t[2]),raw:{header:t[0],payload:t[1]}}}async function Oj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Aj(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Pj(e){return("0"+e.toString(16)).substr(-2)}function Ij(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,Pj).join("")}async function Mj(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Rj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Mj(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(e,t,s=!1){const r=Ij();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await qg(e,`${t}-code-verifier`,a);const i=await Rj(r);return[i,r===i?"plain":"s256"]}const Dj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $j(e){const t=e.headers.get(gd);if(!t||!t.match(Dj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Lj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Fj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Js(e){if(!zj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Uj=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s};const ks=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wj=[502,503,504];async function Sm(e){var t;if(!Tj(e))throw new xd(ks(e),0);if(Wj.includes(e.status))throw new xd(ks(e),e.status);let s;try{s=await e.json()}catch(i){throw new zg(ks(i),i)}let r;const a=$j(e);if(a&&a.getTime()>=Fg["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new vm(ks(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Bn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new vm(ks(s),e.status,s.weak_password.reasons);throw new pj(ks(s),e.status||500,r)}const qj=(e,t,s,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};async function pe(e,t,s,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[gd]||(i[gd]=Fg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Bj(e,t,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Bj(e,t,s,r,a,i){const o=qj(t,r,a,i);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new xd(ks(c),0)}if(l.ok||await Sm(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Sm(c)}}function kn(e){var t;let s=null;Kj(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=_j(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:r},error:null}}function km(e){const t=kn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Hj(e){return{data:e,error:null}}function Gj(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i}=e,o=Uj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Vj(e){return e}function Kj(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xl=["global","local","others"];var Qj=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s};class Yj{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=Wg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Xl[0]){if(Xl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xl.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Jn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=Qj(t,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Gj,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ue(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jn})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Vj});if(u.error)throw u.error;const m=await u.json(),y=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,j=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return j.length>0&&(j.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=v}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(ue(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Js(t);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jn})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Js(t);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Jn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){Js(t);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Jn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Js(t.userId);try{const{data:s,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Js(t.userId),Js(t.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}}}const Jj={getItem:e=>wa()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{wa()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{wa()&&globalThis.localStorage.removeItem(e)}};function _m(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Xj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xs={debug:!!(globalThis&&wa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Zj extends Bg{}async function eN(e,t,s){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Zj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Xj();const tN={url:dj,storageKey:uj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cm(e,t,s){return await s()}class Wa{constructor(t){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wa.nextInstanceID,Wa.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},tN),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Yj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Wg(a.fetch),this.lock=a.lock||Cm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Kt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=eN:this.lock=Cm,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:wa()?this.storage=Jj:(this.memoryStorage={},this.storage=_m(this.memoryStorage)):(this.memoryStorage={},this.storage=_m(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=Ej(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Kt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),yj(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ue(s)?{error:s}:{error:new zg("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,a;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:kn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,r,a;try{let i;if("email"in t){const{email:u,password:m,options:y}=t;let j=null,b=null;this.flowType==="pkce"&&([j,b]=await Ys(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:u,password:m,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:j,code_challenge_method:b},xform:kn})}else if("phone"in t){const{phone:u,password:m,options:y}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:kn})}else throw new _i("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:o,options:l}=t;s=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:km})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:km})}else throw new _i("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ki}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,r,a,i,o,l,c,d,u,m,y,j;let b,v;if("message"in t)b=t.message,v=t.signature;else{const{chain:w,wallet:p,statement:g,options:f}=t;let h;if(Kt())if(typeof p=="object")h=p;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))h=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");h=p}const N=new URL((s=f==null?void 0:f.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in h&&h.signIn){const k=await h.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),g?{statement:g}:null));let S;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")S=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)S=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)b=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in h)||typeof h.signMessage!="function"||!("publicKey"in h)||typeof h!="object"||!h.publicKey||!("toBase58"in h.publicKey)||typeof h.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,h.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((m=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...f.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const k=await h.signMessage(new TextEncoder().encode(b),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:w,error:p}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:kj(v)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:kn});if(p)throw p;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ki}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:p})}catch(w){if(ue(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const s=await Ei(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s??"").split("/");try{const{data:i,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:kn});if(await Ti(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ki}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:r,token:a,access_token:i,nonce:o}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:kn}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ki}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ys(this.storage,this.storageKey));const{error:m}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new _i("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,r;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:kn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ys(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Hj})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new Bn;const{error:a}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await pe(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await pe(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new _i("You must provide either an email or phone number and a type")}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Ei(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Ql:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jn}):await this._useSession(async s=>{var r,a,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Jn})})}catch(s){if(ue(s))return xj(s)&&(await this._removeSession(),await Ti(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Bn;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ys(this.storage,this.storageKey));const{data:d,error:u}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Jn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bn;const s=Date.now()/1e3;let r=s,a=!0,i=null;const{payload:o}=Jl(t.access_token);if(o.exp&&(r=o.exp,a=r<=s),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ue(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Bn;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Kt())throw new Ci("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ci(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new bm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ci("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bm("No code detected.");const{data:g,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const h=new URL(window.location.href);return h.searchParams.delete("code"),window.history.replaceState(window.history.state,"",h.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Ci("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let y=u+m;c&&(y=parseInt(c));const j=y-u;j*1e3<=sr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${m}s`);const b=y-m;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,u);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const p={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:y,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(ue(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Ei(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(gj(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ti(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=Cj(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Ys(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:m,error:y}=i;if(y)throw y;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",j,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Kt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ue(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Aj(async a=>(a>0&&await Oj(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:kn})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Yl(i)&&Date.now()+o-r<sr})}catch(r){if(this._debug(s,"error",r),ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),Kt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Ei(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const a=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ql;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Ql}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Yl(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ol;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Bn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ue(i)){const o={session:null,error:i};return Yl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qg(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ti(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),sr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/sr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${sr}ms, refresh threshold is ${pd} ticks`),a<=pd&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const a=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ys(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ue(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ue(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Jl(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let r=s.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+fj>Date.now()))return r;const{data:a,error:i}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new va("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),r=a.keys.find(o=>o.kid===t),!r)throw new va("No matching signing key found in JWKS");return r}async getClaims(t,s={keys:[]}){try{let r=t;if(!r){const{data:j,error:b}=await this.getSession();if(b||!j.session)return{data:null,error:b};r=j.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Jl(r);if(Lj(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:j}=await this.getUser(r);if(j)throw j;return{data:{claims:i,header:a,signature:o},error:null}}const d=Fj(a.alg),u=await this.fetchJwk(a.kid,s),m=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,o,Sj(`${l}.${c}`)))throw new va("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}Wa.nextInstanceID=0;const nN=Wa;class sN extends nN{constructor(t){super(t)}}var rN=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(m){o(m)}}function c(u){try{d(r.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class aN{constructor(t,s,r){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=lj(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:ej,realtime:nj,auth:Object.assign(Object.assign({},tj),{storageKey:d}),global:Zw},m=cj(r??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=ij(s,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new jw(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new Xv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yw(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},r={}){return this.rest.rpc(t,s,r)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return rN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sN({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new $w(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,s,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iN=(e,t,s)=>new aN(e,t,s),Hg="your_supabase_project_url_here",oN="your_supabase_anon_key_here",lN=Hg!=="your_supabase_project_url_here";console.warn("⚠️ Supabase credentials are missing or invalid. Please update your .env file with valid credentials."),console.warn("📝 Instructions:"),console.warn("1. Go to your Supabase project dashboard"),console.warn("2. Navigate to Settings → API"),console.warn("3. Copy your Project URL and anon/public key"),console.warn("4. Update the .env file with these values"),console.warn("5. Restart your development server");const Z=iN(Hg,oN),Gg=async()=>(console.warn("Supabase connection skipped: Invalid or missing credentials"),!1),rr=()=>lN,xr=async e=>{try{const{count:t,error:s}=await Z.from(e).select("*",{count:"exact",head:!0});if(s)throw s;return t||0}catch(t){return console.error(`Error getting count for table ${e}:`,t),0}},Em=async e=>{try{const t=await xr(e),{error:s}=await Z.from(e).delete().neq("id","00000000-0000-0000-0000-000000000000");if(s)return{success:!1,count:0,error:s.message};const r=await xr(e),a=t-r;return{success:r===0,count:a}}catch(t){return{success:!1,count:0,error:t.message||"حدث خطأ غير معروف"}}},cN=({onLogin:e,selectedGrade:t})=>{var v;const[s,r]=x.useState(""),[a,i]=x.useState(!1),[o,l]=x.useState(""),[c,d]=x.useState(!1),[u,m]=x.useState({}),[y,j]=x.useState(!1);x.useEffect(()=>{(async()=>{{j(!1);return}})(),new URLSearchParams(window.location.search).get("grade")&&window.history.replaceState({},document.title,window.location.pathname)},[]);const b=async w=>{w.preventDefault(),l(""),d(!0),await new Promise(p=>setTimeout(p,1e3));try{y&&rr();const p=vg(s.trim());p?t!==void 0&&p.isAdmin?e({...p,grade:t}):e(p):l("الرمز السري غير صحيح. يرجى المحاولة مرة أخرى.")}catch(p){console.error("Error during login:",p),l("حدث خطأ أثناء تسجيل الدخول. يرجى المحاولة مرة أخرى.")}finally{d(!1)}};return Array.from(new Set(cd.filter(w=>!w.isTeacher&&!w.isAdmin).map(w=>w.grade))).sort((w,p)=>w-p),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",dir:"rtl",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl p-8 shadow-2xl mb-6",children:[n.jsx(ze,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"أنا مستعد"}),n.jsx("p",{className:"text-blue-100",children:"للصفوف من الأول إلى الثاني عشر"}),n.jsx("p",{className:"text-yellow-200 font-semibold mt-2",children:"حالياً يدعم فقط اللغة الإنجليزية لكل الصفوف ماعدا الصف السابع والثامن"})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Te,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"دخول آمن"}),n.jsx("p",{className:"text-gray-600",children:"أدخل الرمز السري للوصول إلى محتوى صفك"}),t!==void 0&&n.jsx("div",{className:"mt-2 bg-blue-50 text-blue-700 p-2 rounded-lg",children:n.jsxs("p",{className:"font-semibold",children:["الدخول إلى ",(v=cd.find(w=>w.grade===t&&!w.isTeacher&&!w.isAdmin))==null?void 0:v.name]})})]}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"code",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الرمز السري"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",id:"code",value:s,onChange:w=>r(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none transition-colors text-center font-mono text-lg",placeholder:"أدخل الرمز السري",required:!0,disabled:c}),n.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:a?n.jsx(Zo,{className:"w-5 h-5"}):n.jsx(Xa,{className:"w-5 h-5"})})]})]}),o&&n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 text-center",children:n.jsx("p",{className:"text-red-700 font-semibold",children:o})}),n.jsx("button",{type:"submit",disabled:c||!s.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white py-3 px-6 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"جاري التحقق..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Te,{className:"w-5 h-5"}),"دخول"]})})]})]}),n.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"المواد المتاحة"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx("span",{className:"text-2xl",children:"📚"})}),n.jsx("div",{className:"text-xs font-semibold",children:"اللغة الإنجليزية"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx("span",{className:"text-2xl",children:"🔢"})}),n.jsx("div",{className:"text-xs font-semibold",children:"الرياضيات"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx("span",{className:"text-2xl",children:"🔬"})}),n.jsx("div",{className:"text-xs font-semibold",children:"العلوم"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx("span",{className:"text-2xl",children:"☪️"})}),n.jsx("div",{className:"text-xs font-semibold",children:"التربية الإسلامية"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx("span",{className:"text-2xl",children:"📖"})}),n.jsx("div",{className:"text-xs font-semibold",children:"اللغة العربية"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-gray-500 to-slate-600 text-white p-3 rounded-lg text-center shadow-md cursor-pointer transition-transform hover:scale-105",children:[n.jsx("div",{className:"flex items-center justify-center mb-1",children:n.jsx(el,{className:"w-6 h-6"})}),n.jsx("div",{className:"text-xs font-semibold",children:"وصول المدير"})]})]})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("div",{className:`${y?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"} border rounded-xl p-4`,children:n.jsxs("p",{className:`text-sm ${y?"text-green-700":"text-yellow-700"}`,children:[n.jsx("strong",{children:y?"✓ متصل بقاعدة البيانات":"⚠️ وضع غير متصل"}),n.jsx("br",{}),y?"البيانات متزامنة ومحدثة تلقائياً":"يرجى تحديث متغيرات البيئة في ملف .env للاتصال بقاعدة البيانات"]})})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[n.jsx("strong",{children:"تحتاج مساعدة؟"}),n.jsx("br",{}),"تواصل مع معلمك للحصول على الرمز السري الخاص بصفك"]})})})]})})},Tm=e=>e===0?"bg-gradient-to-br from-purple-50 to-pink-50":e===1?"bg-gradient-to-br from-blue-50 to-sky-50":e===2?"bg-gradient-to-br from-green-50 to-emerald-50":e===3?"bg-gradient-to-br from-yellow-50 to-amber-50":e===4?"bg-gradient-to-br from-orange-50 to-red-50":e===5?"bg-gradient-to-br from-pink-50 to-rose-50":e===6?"bg-gradient-to-br from-violet-50 to-purple-50":e===7?"bg-gradient-to-br from-indigo-50 to-blue-50":e===8?"bg-gradient-to-br from-teal-50 to-green-50":e===9?"bg-gradient-to-br from-amber-50 to-yellow-50":e===10?"bg-gradient-to-br from-red-50 to-orange-50":e===11?"bg-gradient-to-br from-rose-50 to-pink-50":e===12?"bg-gradient-to-br from-purple-50 to-indigo-50":"bg-gradient-to-br from-gray-50 to-blue-50",Eu=e=>e===0?"from-purple-600 to-pink-600":e===1?"from-blue-500 to-sky-500":e===2?"from-green-500 to-emerald-500":e===3?"from-yellow-500 to-amber-500":e===4?"from-orange-500 to-red-500":e===5?"from-pink-500 to-rose-500":e===6?"from-violet-500 to-purple-500":e===7?"from-indigo-500 to-blue-500":e===8?"from-teal-500 to-green-500":e===9?"from-amber-500 to-yellow-500":e===10?"from-red-500 to-orange-500":e===11?"from-rose-500 to-pink-500":e===12?"from-purple-500 to-indigo-500":"from-gray-500 to-slate-500",dN=e=>e===0?"bg-purple-50":e===1?"bg-blue-50":e===2?"bg-green-50":e===3?"bg-yellow-50":e===4?"bg-orange-50":e===5?"bg-pink-50":e===6?"bg-violet-50":e===7?"bg-indigo-50":e===8?"bg-teal-50":e===9?"bg-amber-50":e===10?"bg-red-50":e===11?"bg-rose-50":e===12?"bg-purple-50":"bg-gray-50",uN=({className:e=""})=>{const[t,s]=x.useState(!1),[r,a]=x.useState(!1),[i,o]=x.useState(null);x.useEffect(()=>{l();const c=setInterval(l,6e4);return()=>clearInterval(c)},[]);const l=async()=>{a(!0);const c=await Gg();s(c),o(new Date),a(!1)};return n.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[t?n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx(qv,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs",children:"متصل بقاعدة البيانات"})]}):n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(Wv,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs",children:"غير متصل"})]}),n.jsx("button",{onClick:l,disabled:r,className:"text-gray-500 hover:text-gray-700 disabled:text-gray-300",title:"تحديث حالة الاتصال",children:n.jsx(Ze,{className:`w-3 h-3 ${r?"animate-spin":""}`})}),i&&n.jsx("span",{className:"text-xs text-gray-500",children:i.toLocaleTimeString()})]})},Om=({progress:e,gradeAccess:t})=>{const s=()=>t?`${Eu(t.grade)}`:"from-purple-600 via-blue-600 to-teal-600";return n.jsx("header",{className:`bg-gradient-to-r ${s()} text-white`,children:n.jsx("div",{className:"container mx-auto px-6 py-8",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[n.jsxs("div",{className:"text-center md:text-right mb-6 md:mb-0",children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-2 flex items-center justify-center md:justify-start gap-3",children:[n.jsx(ze,{className:"w-12 h-12"}),"أنا مستعد"]}),t!=null&&t.isStudent?n.jsxs("div",{className:"text-xl opacity-90",children:[n.jsxs("p",{className:"mb-1",children:["مرحباً ",t.studentName," 👋"]}),n.jsxs("p",{className:"text-lg",children:["دليل شامل لتعلم اللغة الإنجليزية - ",t.name]})]}):n.jsx("p",{className:"text-xl opacity-90",children:t?`دليل شامل لتعلم اللغة الإنجليزية - ${t.name}`:"للصفوف من الخامس إلى الثاني عشر"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-6 bg-white/10 rounded-2xl p-4 backdrop-blur-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ju,{className:"w-5 h-5 text-yellow-300"}),n.jsx("span",{className:"text-2xl font-bold",children:e.totalScore})]}),n.jsx("span",{className:"text-sm opacity-80",children:"النقاط"})]}),n.jsx("div",{className:"w-px h-12 bg-white/20"}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(on,{className:"w-5 h-5 text-orange-300"}),n.jsx("span",{className:"text-2xl font-bold",children:e.currentStreak})]}),n.jsx("span",{className:"text-sm opacity-80",children:"متتالية"})]})]}),n.jsx(uN,{className:"text-white/80"})]})]})})})},hN=(e,t=!1,s)=>{const r=[{id:"admin",label:"لوحة تحكم المدير",englishLabel:"Admin Panel",icon:el}],a=[{id:"subjects",label:"المواد الدراسية",englishLabel:"Subjects",icon:ze},{id:"practice",label:"التدريب التفاعلي",englishLabel:"Interactive Practice",icon:Ov}],i={id:"units",label:"الوحدات الدراسية",englishLabel:"Units",icon:ze};let o=[...a];return s&&s.id==="english"&&o.splice(1,0,i),t?[...r,...o]:o},Am=({activeTab:e,onTabChange:t,gradeAccess:s,currentSubject:r,onLogout:a})=>{const i=hN(s.grade,s.isAdmin,r),o=dN(s.grade),l=Eu(s.grade);return n.jsx("nav",{className:"bg-white border-b-4 border-gray-200 sticky top-0 z-40 shadow-sm",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:`flex items-center justify-between py-3 border-b border-gray-100 ${o}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[s.isAdmin?n.jsx(el,{className:"w-6 h-6 text-purple-600"}):n.jsx(ze,{className:"w-6 h-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-gray-800 text-lg",children:s.name}),s.isAdmin&&n.jsx("p",{className:"text-sm text-purple-600",children:"وصول شامل لجميع الصفوف"})]})]}),n.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:[n.jsx(Pv,{className:"w-4 h-4"}),"خروج"]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:i.map(c=>{const d=c.icon,u=e===c.id;return n.jsxs("button",{onClick:()=>t(c.id),className:`
                  flex flex-col items-center gap-2 px-4 py-4 whitespace-nowrap font-semibold transition-all duration-200 min-w-max text-sm
                  ${u?`bg-gradient-to-r ${l} text-white transform -translate-y-1 rounded-t-lg`:`text-gray-600 hover:bg-gradient-to-r hover:${l} hover:text-white hover:rounded-t-lg`}
                `,children:[n.jsx(d,{className:"w-4 h-4"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-bold",children:c.label}),n.jsx("div",{className:"text-xs opacity-80",children:c.englishLabel})]})]},c.id)})})]})})};class mN{constructor(){Gr(this,"voices",[]);Gr(this,"isInitialized",!1);Gr(this,"currentUtterance",null);Gr(this,"_isSupported",!1);this.checkSupport()}checkSupport(){this._isSupported=typeof window<"u"&&"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,console.log("دعم نظام النطق:",this._isSupported?"متاح":"غير متاح")}async initializeVoices(){return this._isSupported?this.isInitialized&&this.voices.length>0?Promise.resolve():new Promise((t,s)=>{const r=()=>{try{this.voices=window.speechSynthesis.getVoices(),this.isInitialized=!0,console.log("تم تحميل الأصوات:",this.voices.length,"صوت متاح"),this.voices.length===0?console.warn("تم تحميل قائمة أصوات فارغة"):console.log("الأصوات المتاحة:",this.voices.map(a=>`${a.name} (${a.lang})`).join(", ")),t()}catch(a){console.error("خطأ أثناء تحميل الأصوات:",a),s(a)}};try{const a=window.speechSynthesis.getVoices();if(a&&a.length>0){this.voices=a,this.isInitialized=!0,console.log("تم تحميل الأصوات فوراً:",a.length),t();return}window.speechSynthesis.onvoiceschanged=r,setTimeout(()=>{this.isInitialized||(console.log("تحميل الأصوات بالطريقة الاحتياطية"),r())},2e3)}catch(a){console.error("خطأ أثناء تهيئة الأصوات:",a),s(a)}}):(console.warn("نظام النطق غير مدعوم في هذا المتصفح"),Promise.reject(new Error("Speech synthesis not supported")))}getBestVoice(){if(!this._isSupported)return null;if(this.voices.length===0)return console.warn("لا توجد أصوات متاحة"),null;const t=this.voices.filter(o=>o.lang.toLowerCase().includes("en")||o.lang.toLowerCase().includes("english"));if(t.length===0)return console.warn("لا توجد أصوات إنجليزية، استخدام الصوت الافتراضي"),this.voices[0];const s=[{pattern:/google.*us.*female/i,score:100},{pattern:/google.*uk.*female/i,score:95},{pattern:/google.*us.*male/i,score:90},{pattern:/google.*uk.*male/i,score:85},{pattern:/microsoft.*zira/i,score:80},{pattern:/microsoft.*hazel/i,score:75},{pattern:/microsoft.*david/i,score:70},{pattern:/samantha/i,score:65},{pattern:/alex/i,score:60},{pattern:/karen/i,score:55},{pattern:/.*en-us.*female/i,score:50},{pattern:/.*en-gb.*female/i,score:45},{pattern:/.*en-us.*male/i,score:40},{pattern:/.*en-gb.*male/i,score:35},{pattern:/.*en-us/i,score:30},{pattern:/.*en-gb/i,score:25},{pattern:/.*en/i,score:20}];let r=null,a=0;t.forEach(o=>{const l=`${o.name} ${o.lang}`.toLowerCase();for(const c of s)if(c.pattern.test(l)&&c.score>a){r=o,a=c.score;break}});const i=r||t[0];return console.log("تم اختيار الصوت:",i==null?void 0:i.name,i==null?void 0:i.lang),i}async speak(t,s={}){if(!this._isSupported)return console.error("نظام النطق غير مدعوم في هذا المتصفح"),Promise.reject(new Error("Speech synthesis not supported"));if(!this.isInitialized)try{console.log("تهيئة نظام النطق..."),await this.initializeVoices()}catch(o){return console.error("فشل في تهيئة نظام النطق:",o),Promise.reject(o)}this.stop(),await new Promise(o=>setTimeout(o,100));const r=this.getBestVoice();if(!r)return console.error("لم يتم العثور على صوت مناسب"),Promise.reject(new Error("No suitable voice found"));const a=t.trim();console.log(`نطق النص: "${a}" باستخدام الصوت: ${r.name}`);const i=new SpeechSynthesisUtterance(a);return i.voice=r,i.lang=r.lang||"en-US",i.rate=s.slow?.7:s.rate||.85,i.pitch=s.pitch||1,i.volume=s.volume||1,this.currentUtterance=i,new Promise((o,l)=>{const c=setTimeout(()=>{console.warn("انتهت مهلة النطق"),this.stop(),l(new Error("Speech timeout"))},12e4);i.onstart=()=>{console.log("بدأ النطق")},i.onend=()=>{console.log("انتهى النطق بنجاح"),clearTimeout(c),this.currentUtterance=null,o()},i.onerror=d=>{clearTimeout(c),this.currentUtterance=null,d.error==="interrupted"||d.error==="canceled"?(console.log("تم مقاطعة النطق:",d.error),o()):(console.error("خطأ في النطق:",d.error),l(new Error(`Speech error: ${d.error}`)))};try{window.speechSynthesis.speak(i),setTimeout(()=>{window.speechSynthesis.paused&&(console.log("استئناف النطق المتوقف"),window.speechSynthesis.resume())},100);const d=setInterval(()=>{!window.speechSynthesis.speaking&&!window.speechSynthesis.pending&&(clearInterval(d),this.currentUtterance===i&&(console.log("انتهى النطق (فحص دوري)"),clearTimeout(c),this.currentUtterance=null,o()))},500)}catch(d){clearTimeout(c),this.currentUtterance=null,console.error("خطأ في تشغيل النطق:",d),l(d)}})}stop(){if(this._isSupported)try{(window.speechSynthesis.speaking||window.speechSynthesis.pending)&&window.speechSynthesis.cancel(),this.currentUtterance=null}catch(t){console.error("خطأ أثناء إيقاف النطق:",t)}}pause(){if(this._isSupported)try{window.speechSynthesis.speaking&&!window.speechSynthesis.paused&&window.speechSynthesis.pause()}catch(t){console.error("خطأ أثناء إيقاف مؤقت للنطق:",t)}}resume(){if(this._isSupported)try{window.speechSynthesis.paused&&window.speechSynthesis.resume()}catch(t){console.error("خطأ أثناء استئناف النطق:",t)}}isPlaying(){return this._isSupported?window.speechSynthesis.speaking:!1}isPaused(){return this._isSupported?window.speechSynthesis.paused:!1}isSupported(){return this._isSupported}getBestVoiceInfo(){const t=this.getBestVoice();if(!t)return null;const s=t.name.toLowerCase();let r="System",a="medium",i="female",o="US";return s.includes("google")?(r="Google",a="premium"):s.includes("microsoft")?(r="Microsoft",a="high"):s.includes("apple")&&(r="Apple",a="high"),(s.includes("male")||s.includes("david")||s.includes("alex"))&&(i="male"),t.lang.includes("gb")||s.includes("uk")?o="UK":t.lang.includes("au")?o="AU":t.lang.includes("ca")&&(o="CA"),{name:t.name,lang:t.lang,quality:a,provider:r,gender:i,accent:o}}async initialize(){if(!this._isSupported)return console.warn("نظام النطق غير مدعوم في هذا المتصفح"),Promise.reject(new Error("Speech synthesis not supported"));try{await this.initializeVoices();try{const t=new SpeechSynthesisUtterance(" ");t.volume=.01,t.rate=10,window.speechSynthesis.speak(t),setTimeout(()=>{window.speechSynthesis.speaking&&window.speechSynthesis.cancel()},100)}catch(t){console.warn("فشل في تشغيل الصوت الصامت للتهيئة:",t)}return console.log("تم تهيئة نظام النطق بنجاح"),Promise.resolve()}catch(t){return console.error("فشل في تهيئة نظام النطق:",t),Promise.reject(t)}}async testSpeech(){if(!this._isSupported)return!1;try{return await this.speak("Test",{volume:.1,rate:2}),!0}catch(t){return console.error("فشل اختبار النطق:",t),!1}}}const Se=new mN,fN=({word:e,onPronounce:t})=>{const[s,r]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(!1),[y,j]=x.useState(0),[b,v]=x.useState(!1),[w,p]=x.useState(null),[g,f]=x.useState(!1);x.useEffect(()=>{(async()=>{try{await Se.initialize();const O=Se.isSupported();l(O),O?(d(Se.getBestVoiceInfo()),console.log("تم تهيئة نظام النطق في البطاقة")):p("النطق غير متاح في هذا المتصفح")}catch(O){console.error("فشل في تهيئة النطق:",O),l(!1),p("النطق غير متاح في هذا المتصفح")}})()},[]);const h=()=>{g||(f(!0),r(!s),setTimeout(()=>{f(!1)},1200))},N=async(T,O=!1)=>{if(T.stopPropagation(),!o){k("❌ النطق غير متاح في هذا المتصفح. جرب Chrome أو Edge","error");return}if(a){Se.stop(),i(!1);return}try{i(!0),p(null);const I=e.english;console.log(`نطق الكلمة في البطاقة: ${I} - الترجمة: ${e.arabic} - الوحدة: ${e.unit}`),await Se.speak(I,{slow:O,emphasis:!0,rate:O?.6:.85,pitch:1,volume:1}),i(!1),j(P=>P+1),t==null||t();const _=[`🎯 ${I} - نطق ممتاز!`,`🔊 استمع جيداً لـ ${I}`,`⭐ كرر نطق ${I}`,`🎵 ${I} - أحسنت الاستماع!`,`🏆 ${I} - تحسن رائع في النطق!`],R=_[Math.floor(Math.random()*_.length)];k(R,"success")}catch(I){i(!1),console.error("خطأ في النطق:",I),p("فشل في تشغيل النطق"),I instanceof Error&&I.message==="Speech timeout"?k("❌ خطأ في تشغيل الصوت: انتهت المهلة. يرجى التحقق من اتصال الإنترنت أو تجربة متصفح آخر (مثل Chrome أو Edge)","error"):k("❌ خطأ في تشغيل الصوت. تأكد من أن المتصفح يدعم النطق","error")}},k=(T,O="info")=>{const I=document.createElement("div"),_=O==="success"?"bg-emerald-500":O==="error"?"bg-rose-500":"bg-sky-500";I.className=`fixed top-4 left-1/2 transform -translate-x-1/2 ${_} text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold text-sm`,I.textContent=T,document.body.appendChild(I),setTimeout(()=>{I.style.opacity="0",I.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(I)&&document.body.removeChild(I)},300)},3e3)},S=()=>{if(!c)return null;const T={premium:"bg-gradient-to-r from-violet-500 to-purple-500",high:"bg-gradient-to-r from-blue-500 to-cyan-500",medium:"bg-gradient-to-r from-emerald-500 to-teal-500",low:"bg-slate-500"},O={premium:"🏆",high:"⭐",medium:"👍",low:"📢"};return n.jsx("div",{className:`${T[c.quality]} text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1`,children:n.jsx("span",{children:O[c.quality]})})},C=()=>({noun:"📦",verb:"⚡",adjective:"🎨",adverb:"🔄",preposition:"🔗",pronoun:"👤",conjunction:"🤝",interjection:"💬"})[e.partOfSpeech]||"📝",M=()=>({easy:"from-green-400 to-emerald-500",medium:"from-yellow-400 to-orange-500",hard:"from-red-400 to-pink-500"})[e.difficulty]||"from-blue-400 to-indigo-500",A=T=>{if(!T)return"";if(T.length>50){const O=T.split(" ");let I="";for(const _ of O){if((I+_).length>45)break;I+=(I?" ":"")+_}return I+"..."}return T},U=(T,O)=>{if(!T||!O)return T;const I=O.trim().toLowerCase(),_=new RegExp(`\\b(${I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})\\b`,"gi"),R=T.split(_),P=[];for(let F=0;F<R.length;F++){const L=R[F];L&&L.toLowerCase()===I?P.push(n.jsx("span",{className:"bg-yellow-400 text-black px-1 py-0.5 rounded font-bold shadow-sm animate-pulse mx-0.5",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 2px 4px rgba(255,255,0,0.3)",display:"inline-block"},children:L},`highlight-${F}`)):L&&P.push(n.jsx("span",{className:"text-white",children:L},`text-${F}`))}return P.length>0?P:n.jsx("span",{className:"text-white",children:T})},B=e.english,D=e.arabic,$=e.pronunciation,W=e.unit,E=A(e.exampleSentence||"");return!B||!D?(console.error("بيانات الكلمة غير صحيحة:",e),null):n.jsxs("div",{className:"perspective-1000 h-64 relative group",children:[n.jsxs("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[c&&S(),e.difficulty&&n.jsx("div",{className:`bg-gradient-to-r ${M()} text-white px-2 py-1 rounded-full text-xs font-bold`,children:e.difficulty==="easy"?"🟢":e.difficulty==="medium"?"🟡":"🔴"})]}),y>0&&n.jsxs("div",{className:"absolute top-2 right-2 z-10 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[n.jsx(on,{className:"w-3 h-3"}),y]}),o&&n.jsx("button",{onClick:T=>{T.stopPropagation(),m(!u)},className:"absolute bottom-2 right-2 z-10 bg-white/20 hover:bg-white/30 text-white p-1 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100",children:n.jsx(tn,{className:"w-3 h-3"})}),u&&c&&n.jsxs("div",{className:"absolute top-12 right-2 z-20 bg-white rounded-xl shadow-2xl p-4 text-xs border-2 border-slate-200 min-w-48 backdrop-blur-sm animate-in fade-in duration-300",children:[n.jsxs("div",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"معلومات الصوت"]}),n.jsxs("div",{className:"space-y-2 text-slate-600",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("strong",{children:"المزود:"}),n.jsx("span",{className:"text-blue-600",children:c.provider})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("strong",{children:"الجودة:"}),n.jsx("span",{className:`font-semibold ${c.quality==="premium"?"text-purple-600":c.quality==="high"?"text-blue-600":c.quality==="medium"?"text-green-600":"text-gray-600"}`,children:c.quality==="premium"?"فائقة":c.quality==="high"?"عالية":c.quality==="medium"?"جيدة":"أساسية"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("strong",{children:"اللهجة:"}),n.jsx("span",{className:"text-indigo-600",children:c.accent})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("strong",{children:"النوع:"}),n.jsx("span",{className:"text-pink-600",children:c.gender==="female"?"أنثى":"ذكر"})]})]})]}),n.jsxs("div",{className:`relative w-full h-full transform-style-preserve-3d transition-all duration-1000 ease-in-out cursor-pointer ${s?"rotate-y-180":""} ${g?"pointer-events-none":""}`,onClick:h,children:[n.jsxs("div",{className:"absolute inset-0 backface-hidden bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 rounded-xl p-4 text-white flex flex-col justify-between shadow-xl hover:shadow-2xl transition-all duration-500 border border-slate-600 overflow-hidden",children:[n.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 animate-in fade-in duration-700",children:[n.jsx("span",{className:"text-2xl",children:C()}),n.jsx("div",{className:"text-xl font-bold leading-tight break-words max-w-full",children:B})]}),e.partOfSpeech&&n.jsx("div",{className:"text-xs opacity-75 bg-white/20 px-2 py-1 rounded-full mb-3 animate-in slide-in-from-bottom duration-700 delay-200",children:e.partOfSpeech}),$&&n.jsx("div",{className:"mb-3 animate-in slide-in-from-bottom duration-700 delay-300",children:n.jsxs("button",{onClick:T=>{T.stopPropagation(),v(!b)},className:"text-xs opacity-90 font-mono bg-white/20 px-2 py-1 rounded-lg hover:bg-white/30 transition-all duration-300 flex items-center gap-1",children:[b?n.jsx(Zo,{className:"w-3 h-3"}):n.jsx(Xa,{className:"w-3 h-3"}),n.jsx("span",{className:"transition-all duration-300",children:b?$:"النطق"})]})})]}),n.jsxs("div",{className:"flex justify-center gap-2 mb-3 animate-in slide-in-from-bottom duration-700 delay-400",children:[n.jsx("button",{onClick:T=>N(T,!1),disabled:!o,className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 text-sm font-semibold ${o?"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 shadow-lg":"bg-gray-500/50 cursor-not-allowed"} ${a?"animate-pulse bg-gradient-to-r from-purple-500 to-pink-500":""}`,children:a?n.jsxs(n.Fragment,{children:[n.jsx(No,{className:"w-4 h-4"}),n.jsx("span",{children:"إيقاف"})]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),n.jsx("span",{children:"عادي"})]})}),n.jsxs("button",{onClick:T=>N(T,!0),disabled:!o||a,className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 text-sm font-semibold ${o&&!a?"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 shadow-lg":"bg-gray-500/50 cursor-not-allowed"}`,children:[n.jsx(Za,{className:"w-3 h-3"}),n.jsx("span",{children:"بطيء"})]})]}),n.jsxs("div",{className:"space-y-2 animate-in slide-in-from-bottom duration-700 delay-500",children:[w&&n.jsx("div",{className:"text-xs text-red-300 text-center bg-red-500/20 px-2 py-1 rounded-lg animate-in fade-in duration-300",children:w}),!o&&n.jsxs("div",{className:"text-xs opacity-80 text-center bg-red-500/20 px-2 py-1 rounded-lg animate-in fade-in duration-300",children:[n.jsx(Uv,{className:"w-3 h-3 mx-auto mb-1"}),"الصوت غير متاح"]}),n.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70",children:[n.jsx("div",{className:"bg-white/10 px-2 py-1 rounded-full truncate max-w-[60%]",children:W}),n.jsxs("div",{className:"bg-white/10 px-2 py-1 rounded-full flex items-center gap-1",children:[n.jsx(ze,{className:"w-3 h-3"}),n.jsx("span",{children:"اضغط للترجمة"})]})]})]})]}),n.jsxs("div",{className:"absolute inset-0 backface-hidden rotate-y-180 bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-600 rounded-xl p-3 text-white flex flex-col justify-between shadow-xl hover:shadow-2xl transition-all duration-500 border border-emerald-500 overflow-hidden",children:[n.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:[n.jsx("div",{className:"text-xl font-bold mb-2 leading-tight break-words max-w-full animate-in fade-in duration-700",children:D}),n.jsx("div",{className:"text-xs opacity-90 bg-white/20 px-2 py-1 rounded-full mb-2 truncate max-w-full animate-in slide-in-from-bottom duration-700 delay-200",children:W})]}),E&&n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-3 rounded-lg mb-3 animate-in slide-in-from-bottom duration-700 delay-300",children:[n.jsx("div",{className:"text-xs opacity-80 mb-1 text-center font-semibold",children:"مثال:"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs leading-relaxed break-words font-medium",dir:"ltr",style:{wordWrap:"break-word",overflowWrap:"break-word",hyphens:"auto",lineHeight:"1.3"},children:U(E,B)}),e.exampleSentence&&e.exampleSentence.length>50&&n.jsx("div",{className:"text-xs opacity-70 mt-1 italic",children:"(مثال مختصر)"}),n.jsxs("div",{className:"text-xs opacity-70 mt-1 flex items-center justify-center gap-1",children:[n.jsx("span",{className:"bg-yellow-400 text-black px-1 py-0.5 rounded text-xs font-bold",children:B}),n.jsx("span",{children:"= الكلمة المستهدفة"})]})]})]}),n.jsx("div",{className:"space-y-2 animate-in slide-in-from-bottom duration-700 delay-400",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:T=>N(T,!1),disabled:!o,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 font-semibold shadow-lg border-2 text-sm ${o?"bg-white text-emerald-700 hover:bg-emerald-50 border-white":"bg-gray-500/50 text-gray-300 cursor-not-allowed border-gray-400"} ${a?"animate-pulse":""}`,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-emerald-700"}),n.jsx("span",{children:"جاري التشغيل..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),n.jsx("span",{children:"كرر النطق"})]})})})}),y>=3&&n.jsxs("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 animate-in fade-in duration-500",children:[n.jsx(Ls,{className:"w-3 h-3"}),"متدرب"]})]})]})]})},yd=({title:e,words:t,grammarRules:s,onWordPronounce:r})=>{var f;const[a,i]=x.useState(new Set),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(!0);x.useEffect(()=>{const h=setTimeout(()=>{m(!1)},500);return()=>clearTimeout(h)},[t,s]);const y=h=>{const N=new Set(a);N.has(h)?N.delete(h):N.add(h),i(N)},j=async(h,N)=>{if(c===N){Se.stop(),d(null);return}try{d(N),await Se.speak(h,{rate:.8,pitch:1,volume:1}),d(null)}catch(k){console.error("خطأ في نطق المثال:",k),d(null)}},b=t.length<=12||o?t:t.slice(0,12),v=h=>h.toLowerCase().includes("greeting")||h.toLowerCase().includes("تحيات")?"👋":h.toLowerCase().includes("this")||h.toLowerCase().includes("that")||h.toLowerCase().includes("إشارة")?"👆":h.toLowerCase().includes("is")||h.toLowerCase().includes("are")||h.toLowerCase().includes("جمل")?"🔗":h.toLowerCase().includes("number")||h.toLowerCase().includes("عد")||h.toLowerCase().includes("أرقام")?"🔢":h.toLowerCase().includes("plural")?"📚":h.toLowerCase().includes("have")||h.toLowerCase().includes("has")?"🤲":h.toLowerCase().includes("like")?"❤️":h.toLowerCase().includes("article")?"📝":h.toLowerCase().includes("preposition")?"📍":h.toLowerCase().includes("continuous")?"⏰":h.toLowerCase().includes("adjective")?"🎨":h.toLowerCase().includes("question")?"❓":h.toLowerCase().includes("comparative")?"⚖️":h.toLowerCase().includes("must")||h.toLowerCase().includes("should")?"⚠️":h.toLowerCase().includes("perfect")?"✅":h.toLowerCase().includes("passive")?"🔄":h.toLowerCase().includes("conditional")?"🔀":h.toLowerCase().includes("reported")?"💬":h.toLowerCase().includes("cohesive")||h.toLowerCase().includes("cohesion")?"🔗":h.toLowerCase().includes("used to")?"⏮️":"📖",w=h=>{const N=h.examples.length+h.explanation.length/50;return N<5?"from-green-400 to-emerald-500":N<8?"from-yellow-400 to-orange-500":"from-red-400 to-pink-500"},p=h=>{const N=h.examples.length+h.explanation.length/50;return N<5?{level:"مبتدئ",color:"text-green-600",bg:"bg-green-100"}:N<8?{level:"متوسط",color:"text-yellow-600",bg:"bg-yellow-100"}:{level:"متقدم",color:"text-red-600",bg:"bg-red-100"}},g=(h,N)=>{const k=[{title:"تحدي الإبداع",text:"أنشئ قصة قصيرة من 5 جمل باستخدام هذه القاعدة والكلمات الجديدة التي تعلمتها!",icon:n.jsx(Mv,{className:"w-5 h-5 text-white"}),color:"from-purple-500 to-pink-600"},{title:"تحدي المحادثة",text:"تدرب مع زميلك على محادثة قصيرة باستخدام هذه القاعدة لمدة 3 دقائق!",icon:n.jsx(ct,{className:"w-5 h-5 text-white"}),color:"from-blue-500 to-indigo-600"},{title:"تحدي التطبيق",text:"اكتب 5 جمل مختلفة باستخدام هذه القاعدة واطلب من معلمك تقييمها!",icon:n.jsx(Pt,{className:"w-5 h-5 text-white"}),color:"from-orange-500 to-red-600"},{title:"تحدي الذاكرة",text:"احفظ مثالين من الأمثلة وأعد كتابتهما غداً من الذاكرة!",icon:n.jsx(rd,{className:"w-5 h-5 text-white"}),color:"from-teal-500 to-cyan-600"},{title:"تحدي الاستكشاف",text:"ابحث عن 3 أمثلة إضافية لهذه القاعدة في كتابك أو على الإنترنت!",icon:n.jsx($v,{className:"w-5 h-5 text-white"}),color:"from-green-500 to-emerald-600"}];return k[h%k.length]};return u?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-12",children:[n.jsxs("div",{className:"text-center relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-100 via-purple-50 to-teal-100 rounded-3xl opacity-50"}),n.jsxs("div",{className:"relative z-10 py-8 px-6",children:[n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 mb-4 flex items-center justify-center gap-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-3 rounded-2xl shadow-lg",children:n.jsx(ze,{className:"w-10 h-10 text-white"})}),n.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zs,{className:"w-5 h-5 text-blue-500"}),n.jsxs("span",{children:[t.length," كلمة"]})]}),s&&s.length>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"w-5 h-5 text-purple-500"}),n.jsxs("span",{children:[s.length," قاعدة"]})]})]}),n.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-teal-500 mx-auto rounded-full mt-4"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[n.jsx(Fv,{className:"w-7 h-7 text-yellow-500"}),"المفردات التفاعلية"]}),t.length>12&&n.jsx("button",{onClick:()=>l(!o),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-2 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx(cm,{className:"w-4 h-4"}),"إظهار أقل"]}):n.jsxs(n.Fragment,{children:[n.jsx(id,{className:"w-4 h-4"}),"إظهار الكل (",t.length,")"]})})]}),t.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:b.map((h,N)=>n.jsx(fN,{word:h,onPronounce:()=>r==null?void 0:r(h.english)},`${h.english}-${N}`))}):n.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center",children:[n.jsx("p",{className:"text-yellow-700 text-lg",children:"لا توجد مفردات متاحة لهذه الوحدة"}),n.jsx("p",{className:"text-yellow-600 mt-2",children:"يرجى اختيار وحدة أخرى أو التواصل مع المعلم"})]}),!o&&t.length>12&&n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-slate-600 mb-4",children:["يتم عرض ",b.length," من أصل ",t.length," كلمة"]})})]}),s&&s.length>0&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"text-3xl font-bold text-slate-800 mb-4 flex items-center justify-center gap-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 p-3 rounded-2xl shadow-lg",children:n.jsx(rd,{className:"w-8 h-8 text-white"})}),n.jsx("span",{className:"bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"القواعد النحوية التفاعلية"})]}),n.jsx("p",{className:"text-slate-600 text-lg",children:"تعلم القواعد الأساسية بطريقة تفاعلية وممتعة مع أمثلة عملية"}),n.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-amber-500 to-orange-600 mx-auto rounded-full mt-3"})]}),n.jsx("div",{className:"grid gap-8",children:s.map((h,N)=>{const k=a.has(N),S=v(h.title),C=w(h),M=p(h),A=g(N);return n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-amber-100 overflow-hidden hover:shadow-3xl transition-all duration-500 hover:scale-[1.01] group",children:[n.jsxs("div",{className:`bg-gradient-to-r ${C} p-8 cursor-pointer relative overflow-hidden`,onClick:()=>y(N),children:[n.jsxs("div",{className:"absolute inset-0 opacity-10",children:[n.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white rounded-full translate-x-12 translate-y-12"})]}),n.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx("span",{className:"text-3xl",children:S})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-2xl font-bold text-white mb-2 leading-tight",children:h.title}),n.jsxs("div",{className:"flex items-center gap-4 text-white/90 text-sm",children:[n.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full flex items-center gap-1",children:[n.jsx(Fe,{className:"w-4 h-4"}),h.examples.length," أمثلة"]}),n.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full flex items-center gap-1",children:[n.jsx(ju,{className:"w-4 h-4"}),"الصف ",h.grade]}),n.jsx("span",{className:`${M.bg} ${M.color} px-3 py-1 rounded-full font-semibold`,children:M.level})]})]})]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"bg-white/20 hover:bg-white/30 p-3 rounded-xl transition-all duration-300 group-hover:scale-110",children:k?n.jsx(cm,{className:"w-6 h-6 text-white"}):n.jsx(id,{className:"w-6 h-6 text-white"})})})]})]}),k&&n.jsxs("div",{className:"p-8 space-y-8 animate-in slide-in-from-top duration-500",children:[n.jsxs("div",{className:"bg-gradient-to-r from-amber-50 via-orange-50 to-yellow-50 rounded-2xl p-6 border-2 border-amber-200 shadow-inner",children:[n.jsxs("h5",{className:"font-bold text-amber-800 mb-4 flex items-center gap-3 text-xl",children:[n.jsx("div",{className:"bg-amber-500 p-2 rounded-lg",children:n.jsx(vn,{className:"w-5 h-5 text-white"})}),"الشرح التفصيلي:"]}),n.jsx("p",{className:"text-slate-700 text-lg leading-relaxed font-medium",children:h.explanation})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h5",{className:"font-bold text-slate-800 text-xl flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-500 p-2 rounded-lg",children:n.jsx(ct,{className:"w-5 h-5 text-white"})}),"أمثلة تطبيقية متنوعة:"]}),n.jsx("div",{className:"grid gap-4",children:h.examples.map((U,B)=>{const D=`${N}-${B}`,$=c===D;return n.jsx("div",{className:"group bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-200 rounded-2xl p-6 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] hover:border-blue-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shadow-lg",children:B+1}),n.jsxs("span",{className:"text-sm text-blue-600 font-bold bg-blue-100 px-3 py-1 rounded-full",children:["مثال ",B+1]})]}),n.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-4 rounded-xl border border-blue-100 shadow-sm",children:n.jsx("p",{className:"text-slate-800 font-mono text-lg leading-relaxed",dir:"ltr",children:U})})]}),n.jsx("button",{className:`p-3 rounded-xl transition-all duration-300 ml-4 hover:scale-110 shadow-lg ${$?"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700"} text-white opacity-0 group-hover:opacity-100`,onClick:W=>{W.stopPropagation(),j(U,D)},children:$?n.jsx("div",{className:"flex items-center gap-1",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})}):n.jsx(nn,{className:"w-5 h-5"})})]})},B)})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-green-500 p-3 rounded-xl shadow-lg",children:n.jsx(zs,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h6",{className:"font-bold text-green-800 mb-3 text-lg",children:"💡 نصيحة ذكية للممارسة:"}),n.jsx("p",{className:"text-green-700 leading-relaxed font-medium",children:"ابدأ بكتابة جملة واحدة بسيطة، ثم أضف كلمة جديدة في كل مرة. هذا يساعدك على فهم القاعدة تدريجياً وبناء الثقة في استخدامها."}),n.jsx("div",{className:"mt-3 bg-green-100 p-3 rounded-lg",children:n.jsx("p",{className:"text-green-800 text-sm font-semibold",children:"🎯 هدف اليوم: استخدم هذه القاعدة في 3 جمل مختلفة"})})]})]})}),n.jsx("div",{className:`bg-gradient-to-r ${A.color} border-2 border-purple-200 rounded-2xl p-6 shadow-lg text-white`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-xl shadow-lg",children:A.icon}),n.jsxs("div",{children:[n.jsxs("h6",{className:"font-bold mb-3 text-lg",children:["🚀 ",A.title,":"]}),n.jsx("p",{className:"leading-relaxed font-medium opacity-95",children:A.text}),n.jsx("div",{className:"mt-4 bg-white/20 backdrop-blur-sm p-3 rounded-lg",children:n.jsx("p",{className:"text-sm font-semibold",children:"⭐ مكافأة: +10 نقاط عند إكمال التحدي!"})})]})]})})]}),n.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-2xl p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg",children:n.jsx(Fe,{className:"w-5 h-5 text-white"})}),n.jsx("span",{className:"font-bold text-indigo-800 text-lg",children:"🎉 تم استكشاف هذه القاعدة بنجاح!"})]}),n.jsxs("div",{className:"text-indigo-600 text-sm font-semibold bg-indigo-100 px-3 py-1 rounded-full",children:["قاعدة ",N+1," من ",s.length]})]})})]})]},N)})}),n.jsx("div",{className:"bg-gradient-to-r from-purple-100 via-blue-50 to-teal-100 rounded-3xl p-8 border-2 border-purple-200 shadow-2xl",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("h4",{className:"text-2xl font-bold text-slate-800 mb-4 flex items-center justify-center gap-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-3 rounded-xl shadow-lg",children:n.jsx(Ls,{className:"w-6 h-6 text-white"})}),"🏆 ملخص إنجازاتك في القواعد"]}),n.jsxs("p",{className:"text-slate-600 mb-6 text-lg",children:["أحسنت! لقد استكشفت ",s.length," قاعدة نحوية مهمة في هذه الوحدة"]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm px-4 py-3 rounded-xl border border-purple-200 shadow-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-700 mb-1",children:s.reduce((h,N)=>h+N.examples.length,0)}),n.jsx("span",{className:"text-purple-600 font-semibold",children:"مثال تطبيقي"})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm px-4 py-3 rounded-xl border border-blue-200 shadow-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-700 mb-1",children:(f=s[0])==null?void 0:f.grade}),n.jsx("span",{className:"text-blue-600 font-semibold",children:"مستوى الصف"})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm px-4 py-3 rounded-xl border border-teal-200 shadow-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-teal-700 mb-1",children:"100%"}),n.jsx("span",{className:"text-teal-600 font-semibold",children:"معدل الإكمال"})]})]})]})})]}),t.length===0&&(!s||s.length===0)&&n.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-8 text-center",children:[n.jsx(ze,{className:"w-16 h-16 mx-auto text-yellow-400 mb-4"}),n.jsx("h3",{className:"text-2xl font-bold text-yellow-700 mb-2",children:"لا يوجد محتوى متاح"}),n.jsx("p",{className:"text-yellow-600",children:"لا توجد مفردات أو قواعد متاحة لهذه الوحدة حالياً. يرجى اختيار وحدة أخرى أو التواصل مع المعلم."})]})]})},pN=({words:e,onScore:t,onStreak:s})=>{const[r,a]=x.useState(0),[i,o]=x.useState(!1),[l,c]=x.useState(0),[d,u]=x.useState(0),[m,y]=x.useState(0),[j,b]=x.useState("pronunciation"),[v,w]=x.useState(new Map),[p,g]=x.useState(!1),[f,h]=x.useState(!1),[N,k]=x.useState(!1),[S,C]=x.useState({autoAdvance:!0,showHints:!0,difficulty:"medium"}),M=e[r],A=e.length,U=Array.from(v.values()).filter(F=>F.overallMastery>=80).length;x.useEffect(()=>{(async()=>{try{await Se.initialize(),k(Se.isSupported())}catch{k(!1)}})()},[]),x.useEffect(()=>{e.forEach(F=>{v.has(F.english)||v.set(F.english,{word:F,pronunciationAttempts:0,spellingAttempts:0,usageAttempts:0,grammarAttempts:0,pronunciationCorrect:0,spellingCorrect:0,usageCorrect:0,grammarCorrect:0,overallMastery:0,lastReviewed:new Date})})},[e]);const B=async()=>{if(!(!N||!M)){if(f){Se.stop(),h(!1);return}try{h(!0),await Se.speak(M.english,{rate:.8,pitch:1,volume:1,emphasis:!0}),h(!1)}catch(F){h(!1),console.error("Error playing pronunciation:",F)}}},D=F=>{if(!M)return;const L=v.get(M.english);if(!L)return;switch(j){case"pronunciation":L.pronunciationAttempts++,F&&L.pronunciationCorrect++;break;case"spelling":L.spellingAttempts++,F&&L.spellingCorrect++;break;case"usage":L.usageAttempts++,F&&L.usageCorrect++;break;case"grammar":L.grammarAttempts++,F&&L.grammarCorrect++;break}const Y=["pronunciation","spelling","usage","grammar"];let G=0,le=0;Y.forEach(ee=>{const ne=L[`${ee}Attempts`],de=L[`${ee}Correct`];ne>0&&(G+=de/ne*100,le++)}),L.overallMastery=le>0?G/le:0,L.lastReviewed=new Date,w(new Map(v))},$=()=>{D(!0);const F=l+E(),L=d+1;c(F),u(L),y(Math.max(m,L)),t(E()),s(!0),S.autoAdvance&&setTimeout(T,1e3)},W=()=>{D(!1),u(0),s(!1),S.autoAdvance&&setTimeout(T,1500)},E=()=>{const F={pronunciation:10,spelling:15,usage:20,grammar:25},L={easy:1,medium:1.2,hard:1.5};return Math.round(F[j]*L[S.difficulty])},T=()=>{const F=["pronunciation","spelling","usage","grammar"],L=F.indexOf(j);L<F.length-1?(b(F[L+1]),o(!1)):O()},O=()=>{r<e.length-1?(a(r+1),b("pronunciation"),o(!1)):g(!0)},I=()=>{a(0),b("pronunciation"),o(!1),c(0),u(0),g(!1),w(new Map)},_=()=>({pronunciation:"🔊 النطق",spelling:"✍️ التهجئة",usage:"📝 الاستخدام",grammar:"📚 القواعد"})[j],R=()=>({pronunciation:"استمع للكلمة وكررها",spelling:"تهجى الكلمة بشكل صحيح",usage:"استخدم الكلمة في جملة",grammar:"حدد نوع الكلمة النحوي"})[j],P=()=>{if(!M)return null;switch(j){case"pronunciation":return n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-blue-800 mb-4",children:"استمع ونطق الكلمة"}),n.jsx("div",{className:"text-3xl font-bold mb-4",dir:"ltr",children:M.english}),n.jsx("div",{className:"text-lg text-gray-600 mb-4",children:M.arabic}),n.jsxs("button",{onClick:B,disabled:!N,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-5 h-5"}),f?"جاري التشغيل...":"استمع للنطق"]})]}),!i&&n.jsx("div",{className:"flex justify-center gap-4",children:n.jsx("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",children:"أظهر النطق الصوتي"})}),i&&n.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[n.jsx("div",{className:"text-lg font-mono mb-4",dir:"ltr",children:M.pronunciation}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fe,{className:"w-5 h-5"}),"نطقت بشكل صحيح"]}),n.jsxs("button",{onClick:W,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Et,{className:"w-5 h-5"}),"أحتاج مزيد من التدريب"]})]})]})]});case"spelling":return n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{className:"bg-purple-50 rounded-xl p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-purple-800 mb-4",children:"تهجى الكلمة"}),n.jsx("div",{className:"text-lg text-gray-600 mb-4",children:M.arabic}),n.jsxs("button",{onClick:B,disabled:!N,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2 mx-auto mb-4",children:[n.jsx(nn,{className:"w-4 h-4"}),"استمع"]})]}),!i&&n.jsx("div",{className:"flex justify-center gap-4",children:n.jsx("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",children:"أظهر التهجئة"})}),i&&n.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[n.jsx("div",{className:"text-2xl font-bold mb-4 font-mono",dir:"ltr",children:M.english}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fe,{className:"w-5 h-5"}),"هجيت بشكل صحيح"]}),n.jsxs("button",{onClick:W,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Et,{className:"w-5 h-5"}),"أحتاج مزيد من التدريب"]})]})]})]});case"usage":return n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-green-800 mb-4",children:"استخدم الكلمة في جملة"}),n.jsx("div",{className:"text-2xl font-bold mb-2",dir:"ltr",children:M.english}),n.jsx("div",{className:"text-lg text-gray-600 mb-4",children:M.arabic})]}),!i&&n.jsx("div",{className:"flex justify-center gap-4",children:n.jsx("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",children:"أظهر مثال"})}),i&&n.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[n.jsx("div",{className:"text-lg mb-4",dir:"ltr",children:M.exampleSentence}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fe,{className:"w-5 h-5"}),"فهمت الاستخدام"]}),n.jsxs("button",{onClick:W,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Et,{className:"w-5 h-5"}),"أحتاج مزيد من الأمثلة"]})]})]})]});case"grammar":return n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-orange-800 mb-4",children:"ما نوع هذه الكلمة؟"}),n.jsx("div",{className:"text-2xl font-bold mb-2",dir:"ltr",children:M.english}),n.jsx("div",{className:"text-lg text-gray-600 mb-4",children:M.arabic})]}),!i&&n.jsx("div",{className:"flex justify-center gap-4",children:n.jsx("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",children:"أظهر نوع الكلمة"})}),i&&n.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[n.jsxs("div",{className:"text-lg mb-4",children:["نوع الكلمة: ",n.jsx("span",{className:"font-bold",children:M.partOfSpeech})]}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fe,{className:"w-5 h-5"}),"عرفت النوع"]}),n.jsxs("button",{onClick:W,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Et,{className:"w-5 h-5"}),"أحتاج مراجعة القواعد"]})]})]})]});default:return null}};if(p){const F=A>0?U/A*100:0;return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهت الجلسة!"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:l}),n.jsx("div",{className:"text-sm opacity-80",children:"النقاط الإجمالية"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[F.toFixed(1),"%"]}),n.jsx("div",{className:"text-sm opacity-80",children:"الدقة"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:m}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:U}),n.jsx("div",{className:"text-sm opacity-80",children:"كلمات متقنة"})]})]})]}),n.jsx("div",{className:"p-8 text-center",children:n.jsxs("button",{onClick:I,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:[n.jsx(Lr,{className:"w-5 h-5 inline mr-2"}),"جلسة جديدة"]})})]})}return M?n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-t-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:"🎴 بطاقات المراجعة التفاعلية"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:l}),n.jsx("div",{className:"text-xs opacity-80",children:"النقاط"})]}),d>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),d]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm opacity-90 mb-4",children:[n.jsxs("span",{children:["الكلمة ",r+1," من ",A]}),n.jsx("span",{children:_()})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/A*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:_()}),n.jsx("p",{className:"text-gray-600",children:R()})]}),P(),n.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>{r>0&&(a(r-1),b("pronunciation"),o(!1))},disabled:r===0,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white px-4 py-2 rounded-lg transition-colors",children:"الكلمة السابقة"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"المرحلة الحالية"}),n.jsx("div",{className:"flex gap-2 mt-1",children:["pronunciation","spelling","usage","grammar"].map((F,L)=>n.jsx("div",{className:`w-3 h-3 rounded-full ${F===j?"bg-purple-600":["pronunciation","spelling","usage","grammar"].indexOf(j)>L?"bg-green-500":"bg-gray-300"}`},F))})]}),n.jsx("button",{onClick:T,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:j==="grammar"?"الكلمة التالية":"المرحلة التالية"})]})]})]}):n.jsx("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:n.jsx("div",{className:"text-gray-500",children:"لا توجد كلمات متاحة"})})},Zl="english-word-progress",ec="english-study-sessions",Vg=()=>{const[e,t]=x.useState({}),[s,r]=x.useState([]),[a,i]=x.useState(null);x.useEffect(()=>{const f=localStorage.getItem(Zl);f&&t(JSON.parse(f));const h=localStorage.getItem(ec);h&&r(JSON.parse(h))},[]);const o=f=>{t(f),localStorage.setItem(Zl,JSON.stringify(f))},l=f=>{r(f),localStorage.setItem(ec,JSON.stringify(f))},c=f=>({wordId:f,pronunciationMastery:0,spellingMastery:0,usageMastery:0,grammarMastery:0,overallMastery:0,lastReviewed:new Date().toISOString(),reviewCount:0,correctAnswers:0,incorrectAnswers:0,streak:0,bestStreak:0,timeSpent:0,difficultyLevel:"medium",needsReview:!0,masteryHistory:[]}),d=f=>{const{pronunciationMastery:h,spellingMastery:N,usageMastery:k,grammarMastery:S}=f;return Math.round((h+N+k+S)/4)},u=(f,h,N="mixed")=>{const k={...e},C={...k[f]||c(f),...h};C.overallMastery=d(C),C.lastReviewed=new Date().toISOString(),C.reviewCount+=1;const M={date:new Date().toISOString(),pronunciationScore:C.pronunciationMastery,spellingScore:C.spellingMastery,usageScore:C.usageMastery,grammarScore:C.grammarMastery,overallScore:C.overallMastery,activityType:N};if(C.masteryHistory=[...C.masteryHistory,M].slice(-20),C.needsReview=C.overallMastery<80,k[f]=C,o(k),a){const A={...a,wordsStudied:[...new Set([...a.wordsStudied,f])]};i(A)}};return{wordProgress:e,studySessions:s,currentSession:a,updateWordKnowledge:u,recordCorrectAnswer:(f,h)=>{const N=e[f]||c(f),k=N.streak+1,S=Math.max(k,N.bestStreak),C=Math.min(10,20-N.correctAnswers),M={correctAnswers:N.correctAnswers+1,streak:k,bestStreak:S};switch(h){case"pronunciation":M.pronunciationMastery=Math.min(100,N.pronunciationMastery+C);break;case"spelling":M.spellingMastery=Math.min(100,N.spellingMastery+C);break;case"usage":M.usageMastery=Math.min(100,N.usageMastery+C);break;case"grammar":M.grammarMastery=Math.min(100,N.grammarMastery+C);break}u(f,M,h)},recordIncorrectAnswer:(f,h)=>{const N=e[f]||c(f),k={incorrectAnswers:N.incorrectAnswers+1,streak:0,needsReview:!0},S=5;switch(h){case"pronunciation":k.pronunciationMastery=Math.max(0,N.pronunciationMastery-S);break;case"spelling":k.spellingMastery=Math.max(0,N.spellingMastery-S);break;case"usage":k.usageMastery=Math.max(0,N.usageMastery-S);break;case"grammar":k.grammarMastery=Math.max(0,N.grammarMastery-S);break}u(f,k,h)},startStudySession:()=>{const f={id:Date.now().toString(),startTime:new Date().toISOString(),wordsStudied:[],totalScore:0,activitiesCompleted:[],duration:0};return i(f),f},endStudySession:()=>{if(a){const f=new Date().toISOString(),h=Math.round((new Date(f).getTime()-new Date(a.startTime).getTime())/1e3),N={...a,endTime:f,duration:h},k=[...s,N];return l(k),i(null),N}return null},getWordsByMasteryLevel:f=>{const h=Object.values(e);switch(f){case"low":return h.filter(N=>N.overallMastery<40);case"medium":return h.filter(N=>N.overallMastery>=40&&N.overallMastery<80);case"high":return h.filter(N=>N.overallMastery>=80);default:return h}},getWordsNeedingReview:()=>Object.values(e).filter(f=>f.needsReview),getStudyStatistics:()=>{const f=Object.values(e),h=f.length,N=f.filter(D=>D.overallMastery>=80).length,k=f.filter(D=>D.overallMastery>=40&&D.overallMastery<80).length,S=f.filter(D=>D.overallMastery<40).length,C=s.reduce((D,$)=>D+$.duration,0),M=s.length>0?C/s.length:0,A=f.reduce((D,$)=>D+$.correctAnswers,0),U=f.reduce((D,$)=>D+$.incorrectAnswers,0),B=A+U>0?A/(A+U)*100:0;return{totalWords:h,masteredWords:N,wordsInProgress:k,strugglingWords:S,totalStudyTime:C,averageSessionTime:M,accuracy:B,totalSessions:s.length,currentStreak:Math.max(...f.map(D=>D.streak),0),bestOverallStreak:Math.max(...f.map(D=>D.bestStreak),0)}},resetProgress:()=>{t({}),r([]),i(null),localStorage.removeItem(Zl),localStorage.removeItem(ec)}}},gN=({words:e,onClose:t})=>{const{wordProgress:s,getStudyStatistics:r}=Vg(),[a,i]=x.useState("all"),[o,l]=x.useState("mastery"),c=r(),d=()=>{let b=e.filter(v=>s[v.english]);switch(a){case"low":b=b.filter(v=>{const w=s[v.english];return w&&w.overallMastery<40});break;case"medium":b=b.filter(v=>{const w=s[v.english];return w&&w.overallMastery>=40&&w.overallMastery<80});break;case"high":b=b.filter(v=>{const w=s[v.english];return w&&w.overallMastery>=80});break}return b.sort((v,w)=>{const p=s[v.english],g=s[w.english];switch(o){case"name":return v.english.localeCompare(w.english);case"mastery":return((g==null?void 0:g.overallMastery)||0)-((p==null?void 0:p.overallMastery)||0);case"lastReviewed":return new Date((g==null?void 0:g.lastReviewed)||0).getTime()-new Date((p==null?void 0:p.lastReviewed)||0).getTime();default:return 0}}),b},u=()=>{const b=e.filter(f=>s[f.english]).map(f=>{const h=s[f.english];return{"الكلمة الإنجليزية":f.english,"الترجمة العربية":f.arabic,الوحدة:f.unit,"إتقان النطق":`${h.pronunciationMastery}%`,"إتقان التهجئة":`${h.spellingMastery}%`,"إتقان الاستخدام":`${h.usageMastery}%`,"إتقان القواعد":`${h.grammarMastery}%`,"الإتقان العام":`${h.overallMastery}%`,"عدد المراجعات":h.reviewCount,"الإجابات الصحيحة":h.correctAnswers,"الإجابات الخاطئة":h.incorrectAnswers,"أفضل سلسلة":h.bestStreak,"آخر مراجعة":new Date(h.lastReviewed).toLocaleDateString("ar-SA"),"يحتاج مراجعة":h.needsReview?"نعم":"لا"}}),v=[Object.keys(b[0]||{}).join(","),...b.map(f=>Object.values(f).join(","))].join(`
`),w=new Blob([v],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(w),g=document.createElement("a");g.setAttribute("href",p),g.setAttribute("download",`word_progress_report_${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},m=b=>{const v=Math.floor(b/3600),w=Math.floor(b%3600/60);return v>0?`${v}س ${w}د`:`${w}د`},y=b=>b>=80?"text-green-600 bg-green-100":b>=40?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",j=d();return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[n.jsx(Fa,{className:"w-8 h-8"}),"تقرير تقدم الكلمات المفصل"]}),n.jsx("button",{onClick:t,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",children:"✕"})]})}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center",children:[n.jsx(zs,{className:"w-8 h-8 mx-auto text-blue-600 mb-2"}),n.jsx("div",{className:"text-3xl font-bold text-blue-700",children:c.totalWords}),n.jsx("div",{className:"text-blue-600",children:"إجمالي الكلمات"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[n.jsx(Ls,{className:"w-8 h-8 mx-auto text-green-600 mb-2"}),n.jsx("div",{className:"text-3xl font-bold text-green-700",children:c.masteredWords}),n.jsx("div",{className:"text-green-600",children:"كلمات متقنة"})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[n.jsx(So,{className:"w-8 h-8 mx-auto text-yellow-600 mb-2"}),n.jsxs("div",{className:"text-3xl font-bold text-yellow-700",children:[c.accuracy.toFixed(1),"%"]}),n.jsx("div",{className:"text-yellow-600",children:"دقة الإجابات"})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-6 text-center",children:[n.jsx(dt,{className:"w-8 h-8 mx-auto text-purple-600 mb-2"}),n.jsx("div",{className:"text-3xl font-bold text-purple-700",children:m(c.totalStudyTime)}),n.jsx("div",{className:"text-purple-600",children:"وقت الدراسة"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"إحصائيات مفصلة"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-semibold text-gray-700",children:"توزيع الإتقان"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"متقن (80%+)"}),n.jsx("span",{className:"font-bold text-green-600",children:c.masteredWords})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"متوسط (40-79%)"}),n.jsx("span",{className:"font-bold text-yellow-600",children:c.wordsInProgress})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"يحتاج مراجعة (<40%)"}),n.jsx("span",{className:"font-bold text-red-600",children:c.strugglingWords})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-semibold text-gray-700",children:"جلسات الدراسة"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"إجمالي الجلسات"}),n.jsx("span",{className:"font-bold",children:c.totalSessions})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"متوسط وقت الجلسة"}),n.jsx("span",{className:"font-bold",children:m(c.averageSessionTime)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"أفضل سلسلة"}),n.jsx("span",{className:"font-bold text-orange-600",children:c.bestOverallStreak})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-semibold text-gray-700",children:"الأداء العام"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"السلسلة الحالية"}),n.jsx("span",{className:"font-bold text-blue-600",children:c.currentStreak})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"معدل التحسن"}),n.jsxs("span",{className:"font-bold text-green-600",children:[c.totalWords>0?(c.masteredWords/c.totalWords*100).toFixed(1):0,"%"]})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cs,{className:"w-5 h-5 text-gray-600"}),n.jsxs("select",{value:a,onChange:b=>i(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"all",children:"جميع الكلمات"}),n.jsx("option",{value:"high",children:"متقنة (80%+)"}),n.jsx("option",{value:"medium",children:"متوسطة (40-79%)"}),n.jsx("option",{value:"low",children:"تحتاج مراجعة (<40%)"})]})]}),n.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"mastery",children:"ترتيب حسب الإتقان"}),n.jsx("option",{value:"name",children:"ترتيب أبجدي"}),n.jsx("option",{value:"lastReviewed",children:"آخر مراجعة"})]}),n.jsxs("button",{onClick:u,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-4 h-4"}),"تصدير التقرير"]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:n.jsxs("h3",{className:"font-bold text-gray-800",children:["الكلمات (",j.length,")"]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:j.length>0?n.jsx("div",{className:"divide-y divide-gray-200",children:j.map(b=>{const v=s[b.english];return n.jsx("div",{className:"p-4 hover:bg-gray-50",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"font-bold text-lg",children:b.english}),n.jsx("span",{className:"text-gray-600",children:b.arabic}),n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${y(v.overallMastery)}`,children:[v.overallMastery,"%"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"النطق:"}),n.jsxs("span",{className:`ml-2 font-semibold ${y(v.pronunciationMastery)}`,children:[v.pronunciationMastery,"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"التهجئة:"}),n.jsxs("span",{className:`ml-2 font-semibold ${y(v.spellingMastery)}`,children:[v.spellingMastery,"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"الاستخدام:"}),n.jsxs("span",{className:`ml-2 font-semibold ${y(v.usageMastery)}`,children:[v.usageMastery,"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"القواعد:"}),n.jsxs("span",{className:`ml-2 font-semibold ${y(v.grammarMastery)}`,children:[v.grammarMastery,"%"]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["مراجعات: ",v.reviewCount]}),n.jsxs("span",{children:["صحيح: ",v.correctAnswers]}),n.jsxs("span",{children:["خطأ: ",v.incorrectAnswers]}),n.jsxs("span",{children:["أفضل سلسلة: ",v.bestStreak]}),n.jsxs("span",{children:["آخر مراجعة: ",new Date(v.lastReviewed).toLocaleDateString("ar-SA")]})]})]})})},b.english)})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(cs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"لا توجد كلمات تطابق الفلتر المحدد"})]})})]})]})]})})},xN=({words:e,onScore:t,onStreak:s})=>{const[r,a]=x.useState(0),[i,o]=x.useState(0),[l,c]=x.useState(null),[d,u]=x.useState(!1),[m,y]=x.useState(30),[j,b]=x.useState(!1),[v,w]=x.useState([]),[p,g]=x.useState(0),[f,h]=x.useState(0),N=Math.min(10,e.length);x.useEffect(()=>{e.length>0&&k()},[e]),x.useEffect(()=>{if(m>0&&!d&&!j&&v.length>0){const E=setTimeout(()=>y(m-1),1e3);return()=>clearTimeout(E)}else m===0&&!d&&v.length>0&&U()},[m,d,j,v.length]);const k=()=>{if(e.length===0)return;const E=[...e].sort(()=>Math.random()-.5).slice(0,N),T=[];E.forEach((O,I)=>{const _=["meaning","usage","spelling"],R=_[I%_.length];let P;switch(R){case"meaning":P=S(O);break;case"usage":P=C(O);break;case"spelling":P=M(O);break;default:P=S(O)}T.push(P)}),w(T)},S=E=>{const T=E.arabic,O=e.filter(R=>R.arabic!==T&&R.unit===E.unit).sort(()=>Math.random()-.5).slice(0,3).map(R=>R.arabic);if(O.length<3){const R=e.filter(P=>P.arabic!==T&&!O.includes(P.arabic)).sort(()=>Math.random()-.5).slice(0,3-O.length).map(P=>P.arabic);O.push(...R)}const I=[T,...O].sort(()=>Math.random()-.5),_=I.indexOf(T);return{question:`ما معنى كلمة "${E.english}"؟`,options:I,correctIndex:_,word:E,type:"meaning"}},C=E=>{const O=(E.exampleSentence||`I use the ${E.english} every day.`).replace(new RegExp(E.english,"gi"),"____"),I=E.english,_=e.filter(F=>F.english!==I&&F.partOfSpeech===E.partOfSpeech).sort(()=>Math.random()-.5).slice(0,3).map(F=>F.english);if(_.length<3){const F=e.filter(L=>L.english!==I&&!_.includes(L.english)).sort(()=>Math.random()-.5).slice(0,3-_.length).map(L=>L.english);_.push(...F)}const R=[I,..._].sort(()=>Math.random()-.5),P=R.indexOf(I);return{question:`أكمل الجملة: "${O}"`,options:R,correctIndex:P,word:E,type:"usage"}},M=E=>{const T=E.english,O=[A(E.english,"substitute"),A(E.english,"omit"),A(E.english,"add")].filter(R=>R!==T),I=[T,...O].sort(()=>Math.random()-.5),_=I.indexOf(T);return{question:`ما هي الطريقة الصحيحة لكتابة كلمة "${E.arabic}"؟`,options:I,correctIndex:_,word:E,type:"spelling"}},A=(E,T)=>{const O=E.split("");switch(T){case"substitute":if(O.length>1){const R=Math.floor(Math.random()*O.length),P="abcdefghijklmnopqrstuvwxyz";O[R]=P[Math.floor(Math.random()*P.length)]}break;case"omit":if(O.length>2){const R=Math.floor(Math.random()*O.length);O.splice(R,1)}break;case"add":const I=Math.floor(Math.random()*(O.length+1)),_="abcdefghijklmnopqrstuvwxyz";O.splice(I,0,_[Math.floor(Math.random()*_.length)]);break}return O.join("")},U=()=>{u(!0),g(0),s(!1),setTimeout(D,2e3)},B=E=>{if(l!==null)return;if(c(E),u(!0),E===v[r].correctIndex){const O=i+1,I=p+1;o(O),g(I),h(Math.max(f,I)),t(15),s(!0)}else g(0),s(!1);setTimeout(D,2500)},D=()=>{r+1>=N?b(!0):(a(r+1),c(null),u(!1),y(30))},$=()=>{a(0),o(0),c(null),u(!1),y(30),b(!1),g(0),k()};if(e.length===0)return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx(zs,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"لا توجد كلمات متاحة"}),n.jsx("p",{className:"text-gray-600",children:"يرجى اختيار وحدة تحتوي على كلمات للاختبار"})]});if(v.length===0)return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحضير الأسئلة..."})]});if(j){const E=Math.round(i/N*100);return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهى الاختبار!"}),n.jsxs("div",{className:"text-6xl font-bold mb-2",children:[E,"%"]}),n.jsxs("p",{className:"text-xl",children:[i," / ",N," إجابة صحيحة"]}),n.jsxs("div",{className:"mt-4 flex justify-center gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:f}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:p}),n.jsx("div",{className:"text-sm opacity-80",children:"السلسلة النهائية"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"mb-6",children:E>=90?n.jsx("p",{className:"text-2xl text-green-600 font-bold",children:"🏆 ممتاز جداً! أنت محترف!"}):E>=80?n.jsx("p",{className:"text-2xl text-blue-600 font-bold",children:"🎉 ممتاز! استمر في التقدم!"}):E>=70?n.jsx("p",{className:"text-2xl text-yellow-600 font-bold",children:"👍 جيد جداً! تحسن ملحوظ!"}):E>=60?n.jsx("p",{className:"text-2xl text-orange-600 font-bold",children:"📚 جيد! راجع الكلمات مرة أخرى"}):n.jsx("p",{className:"text-2xl text-red-600 font-bold",children:"💪 لا تيأس! المراجعة هي الحل"})}),n.jsx("button",{onClick:$,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:"🔄 إعادة الاختبار"})]})]})}const W=v[r];return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("span",{className:"text-lg font-semibold",children:["السؤال ",r+1," / ",N]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dt,{className:"w-5 h-5"}),n.jsxs("span",{className:`text-xl font-bold ${m<=10?"text-red-300 animate-pulse":""}`,children:[m,"s"]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:i}),n.jsx("div",{className:"text-xs opacity-80",children:"النتيجة"})]}),p>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),p]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]})]})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/N*100}%`}})})]}),n.jsxs("div",{className:"p-8",children:[n.jsx("div",{className:"mb-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${W.type==="meaning"?"bg-blue-100 text-blue-800":W.type==="usage"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:W.type==="meaning"?"📖 معنى الكلمة":W.type==="usage"?"🎯 استخدام الكلمة":"✍️ تهجئة الكلمة"})}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-8 text-center",children:W.question}),n.jsx("div",{className:"space-y-4 mb-8",children:W.options.map((E,T)=>{let O="w-full p-4 rounded-xl font-semibold transition-all hover:scale-105 shadow-md ";const I=/[\u0600-\u06FF]/.test(E),_=I?"rtl":"ltr",R=I?"text-right":"text-left";return d?T===W.correctIndex?O+="bg-green-500 text-white":T===l?O+="bg-red-500 text-white":O+="bg-gray-300 text-gray-600":O+="bg-blue-50 hover:bg-blue-100 text-gray-800 border-2 border-blue-200 hover:border-blue-400",n.jsx("button",{onClick:()=>B(T),disabled:d,className:`${O} ${R}`,dir:_,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-lg",children:E}),d&&T===W.correctIndex&&n.jsx(Fe,{className:"w-6 h-6"}),d&&T===l&&T!==W.correctIndex&&n.jsx(Et,{className:"w-6 h-6"})]})},T)})}),d&&n.jsx("div",{className:`p-4 rounded-xl text-center font-semibold ${l===W.correctIndex?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l===W.correctIndex?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Fe,{className:"w-6 h-6"}),"✅ إجابة صحيحة! ممتاز!",p>1&&n.jsxs("span",{className:"ml-2",children:["🔥 سلسلة ",p,"!"]})]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Et,{className:"w-6 h-6"}),n.jsx("span",{children:"❌ إجابة خاطئة. الإجابة الصحيحة: "}),n.jsx("span",{className:"font-bold",dir:/[\u0600-\u06FF]/.test(W.options[W.correctIndex])?"rtl":"ltr",children:W.options[W.correctIndex]})]})})]})]})},yN=({words:e,onScore:t})=>{const[s,r]=x.useState({wordCount:10,showHints:!0,playAudioOnStart:!0,difficulty:"medium",timeLimit:120,shuffleWords:!0,showProgress:!0,allowSkip:!1,theme:"colorful",cardSize:"medium",matchType:"english-arabic"}),[a,i]=x.useState([]),[o,l]=x.useState([]),[c,d]=x.useState([]),[u,m]=x.useState(0),[y,j]=x.useState(0),[b,v]=x.useState(120),[w,p]=x.useState(!1),[g,f]=x.useState(!1),[h,N]=x.useState(!1),[k,S]=x.useState(!1),[C,M]=x.useState(!1),[A,U]=x.useState(0),[B,D]=x.useState(0),[$,W]=x.useState(0),[E,T]=x.useState(0),[O,I]=x.useState(!1),[_,R]=x.useState(!1),[P,F]=x.useState(!1),[L,Y]=x.useState(!1),[G,le]=x.useState(0),[ee,ne]=x.useState(1),[de,te]=x.useState(!1),[he,q]=x.useState(1),[J,ie]=x.useState(0),ye={easy:{pairs:6,time:180,factor:.8},medium:{pairs:8,time:120,factor:1},hard:{pairs:12,time:90,factor:1.5}},we=ye[s.difficulty].pairs;x.useEffect(()=>{e.length>0&&Rt()},[e,s.difficulty,s.matchType]),x.useEffect(()=>{(async()=>{try{await Se.initialize(),R(Se.isSupported())}catch(se){R(!1),console.error("Error initializing speech engine:",se)}})()},[]),x.useEffect(()=>{if(g&&!h&&b>0&&!w){const V=setTimeout(()=>v(b-1),1e3);return()=>clearTimeout(V)}else b===0&&s.timeLimit>0&&!w&&p(!0)},[b,g,w,h,s.timeLimit]),x.useEffect(()=>{if(u===we&&we>0){p(!0);const V=H();t(V),Y(!0),setTimeout(()=>Y(!1),5e3)}},[u,we,s.difficulty,t]),x.useEffect(()=>{C&&c.length===0&&M(!1)},[C,c]),x.useEffect(()=>{console.log("Memory Game State:",{flippedCards:c.length,isChecking:C,matchedPairs:u,gameStarted:g,gameComplete:w})},[c,C,u,g,w]),x.useEffect(()=>{if(G>0)if(Date.now()-G<3e3){const oe=Math.min(ee+.5,4);ne(oe),te(!0),setTimeout(()=>te(!1),1500)}else ne(1)},[u]);const Rt=()=>{let V=[...e];s.difficulty==="easy"?V=V.filter(Ne=>Ne.english.length<=6):s.difficulty==="hard"&&(V=V.filter(Ne=>Ne.english.length>=7)),s.shuffleWords&&(V=V.sort(()=>Math.random()-.5));const se=V.slice(0,Math.min(we,V.length));i(se),q(ye[s.difficulty].factor);const oe=[];s.matchType==="english-arabic"?se.forEach((Ne,be)=>{oe.push({id:be*2,text:Ne.english,pairId:be,isFlipped:!1,isMatched:!1,type:"english",pronunciation:Ne.pronunciation}),oe.push({id:be*2+1,text:Ne.arabic,pairId:be,isFlipped:!1,isMatched:!1,type:"arabic"})}):s.matchType==="english-english"?se.forEach((Ne,be)=>{oe.push({id:be*2,text:Ne.english,pairId:be,isFlipped:!1,isMatched:!1,type:"english",pronunciation:Ne.pronunciation}),oe.push({id:be*2+1,text:Ne.english,pairId:be,isFlipped:!1,isMatched:!1,type:"english",pronunciation:Ne.pronunciation})}):s.matchType==="arabic-arabic"&&se.forEach((Ne,be)=>{oe.push({id:be*2,text:Ne.arabic,pairId:be,isFlipped:!1,isMatched:!1,type:"arabic"}),oe.push({id:be*2+1,text:Ne.arabic,pairId:be,isFlipped:!1,isMatched:!1,type:"arabic"})});const me=oe.sort(()=>Math.random()-.5);l(me),m(0),j(0),v(ye[s.difficulty].time),p(!1),f(!1),d([]),U(0),D(0),W(0),T(0),ne(1),le(0)},Gt=()=>{d([]),M(!1),m(0),j(0),U(0),D(0),T(0),ne(1),p(!1),N(!1),f(!0),v(ye[s.difficulty].time),l(V=>V.map(se=>({...se,isFlipped:!1,isMatched:!1}))),console.log("🎮 Memory Game Started!")},vs=()=>{N(!h)},Dt=V=>{if(console.log(`🎯 flipCard called for card ${V}`),!g||h||C||w){console.log("❌ flipCard blocked: gameStarted:",g,"gamePaused:",h,"isChecking:",C,"gameComplete:",w);return}const se=o.find(me=>me.id===V);if(!se){console.log("❌ Card not found:",V);return}if(se.isFlipped||se.isMatched){console.log("❌ Card already flipped/matched:",{id:V,isFlipped:se.isFlipped,isMatched:se.isMatched});return}if(c.length>=2){console.log("❌ Too many cards already flipped:",c.length);return}console.log(`✅ Flipping card ${V} (${se.text})`);const oe=[...c,V];d(oe),l(me=>{const Ne=me.map(be=>be.id===V?{...be,isFlipped:!0}:be);return console.log(`🃏 Card ${V} state updated to flipped:`,Ne.find(be=>be.id===V)),Ne}),se.type==="english"&&_&&s.playAudioOnStart&&Ke(se.text),console.log("📋 Current flipped cards:",oe),oe.length===2&&(console.log("🔍 Two cards flipped, starting match check in 1.2 seconds..."),M(!0),j(me=>me+1),setTimeout(()=>z(oe),1200))},Ke=async V=>{if(_)try{I(!0),await Se.speak(V,{rate:.8,pitch:1,volume:1,emphasis:!0}),I(!1)}catch(se){I(!1),console.error("Error playing audio:",se)}},z=V=>{if(V.length!==2){M(!1);return}const[se,oe]=V,me=o.find(be=>be.id===se),Ne=o.find(be=>be.id===oe);if(!me||!Ne){d([]),M(!1);return}if(me.pairId===Ne.pairId)l(be=>be.map($e=>$e.id===se||$e.id===oe?{...$e,isMatched:!0,isFlipped:!0}:$e)),m(be=>be+1),d([]),M(!1);else{const be=[se,oe];setTimeout(()=>{l($e=>{const Vs=$e.map(oi=>be.includes(oi.id)&&!oi.isMatched?{...oi,isFlipped:!1}:oi);return console.log("Flipping back cards:",be,Vs),[...Vs]}),d([]),D(0),M(!1),ie($e=>$e+1)},1500)}},H=()=>{const V=s.difficulty==="easy"?30:s.difficulty==="medium"?50:70,se=s.timeLimit>0?Math.max(0,b/ye[s.difficulty].time):.5,oe=we*2,me=Math.max(0,1-(y-oe)/(oe*2));return Math.round(V*(1+se*.5+me*.5))},Q=()=>{if(!s.showHints)return;const V=o.filter($e=>!$e.isMatched&&!$e.isFlipped);if(V.length===0)return;const se=[...new Set(V.map($e=>$e.pairId))];if(se.length===0)return;const oe=se[Math.floor(Math.random()*se.length)],me=V.find($e=>$e.pairId===oe);if(!me)return;const Ne=[...o],be=Ne.findIndex($e=>$e.id===me.id);be!==-1&&(Ne[be]={...Ne[be],isFlipped:!0},l(Ne),setTimeout(()=>{l($e=>$e.map(Vs=>Vs.id===me.id?{...Vs,isFlipped:!1}:Vs))},1e3),T($e=>$e+1),ce("💡 Hint used! A card was briefly revealed.","info"))},ce=(V,se="info")=>{const oe=document.createElement("div"),me=se==="success"?"bg-green-500":se==="error"?"bg-red-500":"bg-blue-500";oe.className=`fixed top-4 left-1/2 transform -translate-x-1/2 ${me} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold`,oe.textContent=V,document.body.appendChild(oe),setTimeout(()=>{oe.style.opacity="0",oe.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(oe)&&document.body.removeChild(oe)},300)},3e3)},fe=V=>{const se=Math.floor(V/60),oe=V%60;return`${se}:${oe.toString().padStart(2,"0")}`},ke=()=>y===0?100:Math.round(u/y*100),ln=()=>{const V=ke(),se=ye[s.difficulty].time-b,oe=u>0?se/u:0;return V>=90&&oe<8?"🏆 Exceptional performance! Your memory is outstanding!":V>=80&&oe<10?"🎉 Excellent work! You have a great memory!":V>=70?"👍 Good job! Keep practicing to improve further!":V>=50?"💪 Nice effort! Try to focus more on card positions!":"🧠 Memory games take practice. Keep trying!"},St=()=>({small:"h-16 w-16 text-xs",medium:"h-24 w-24 text-sm",large:"h-32 w-32 text-base"})[s.cardSize],bl=V=>{const se=`${St()} rounded-xl cursor-pointer transition-all duration-300 flex items-center justify-center text-center p-2 font-semibold transform perspective-1000`;return V.isMatched?s.theme==="colorful"?`${se} bg-gradient-to-br from-green-400 to-teal-500 text-white shadow-lg scale-105`:s.theme==="minimal"?`${se} bg-white border-2 border-green-500 text-green-700 shadow-lg scale-105`:`${se} bg-green-100 border-2 border-green-500 text-green-800 shadow-lg scale-105`:V.isFlipped?s.theme==="colorful"?`${se} ${V.type==="english"?"bg-gradient-to-br from-blue-400 to-purple-500":"bg-gradient-to-br from-orange-400 to-red-500"} text-white shadow-lg`:s.theme==="minimal"?`${se} bg-white border-2 ${V.type==="english"?"border-blue-500 text-blue-700":"border-orange-500 text-orange-700"} shadow-lg`:`${se} ${V.type==="english"?"bg-blue-100 border-2 border-blue-500 text-blue-800":"bg-orange-100 border-2 border-orange-500 text-orange-800"} shadow-lg`:s.theme==="colorful"?`${se} bg-gradient-to-br from-gray-400 to-gray-600 text-white hover:from-gray-500 hover:to-gray-700 hover:scale-105`:s.theme==="minimal"?`${se} bg-white border-2 border-gray-300 text-gray-500 hover:border-gray-400 hover:text-gray-700 hover:scale-105`:`${se} bg-gray-100 border-2 border-gray-300 text-gray-500 hover:bg-gray-200 hover:border-gray-400 hover:text-gray-700 hover:scale-105`},ws=()=>{const V=we;return V<=6?"grid-cols-3 md:grid-cols-4":V<=8?"grid-cols-4":V<=12?"grid-cols-4 md:grid-cols-6":"grid-cols-4 md:grid-cols-6 lg:grid-cols-8"};if(e.length===0)return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"لا توجد كلمات متاحة"}),n.jsx("p",{className:"text-gray-600",children:"يرجى اختيار وحدة تحتوي على كلمات للعب"})]});if(w){const V=ye[s.difficulty].time-b,se=u===we,oe=ke();return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:`text-white p-8 text-center ${se?"bg-gradient-to-r from-green-500 to-teal-500":"bg-gradient-to-r from-red-500 to-pink-500"}`,children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:se?"🎊 تهانينا!":"⏰ انتهى الوقت!"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:u}),n.jsx("div",{className:"text-sm opacity-80",children:"أزواج مطابقة"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[oe,"%"]}),n.jsx("div",{className:"text-sm opacity-80",children:"دقة"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:y}),n.jsx("div",{className:"text-sm opacity-80",children:"محاولات"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:fe(V)}),n.jsx("div",{className:"text-sm opacity-80",children:"الوقت المستغرق"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("p",{className:"text-xl mb-6 font-semibold",children:ln()}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"مستوى الصعوبة"}),n.jsxs("select",{value:s.difficulty,onChange:me=>r({...s,difficulty:me.target.value}),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"نوع المطابقة"}),n.jsxs("select",{value:s.matchType,onChange:me=>r({...s,matchType:me.target.value}),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"english-arabic",children:"إنجليزي-عربي"}),n.jsx("option",{value:"english-english",children:"إنجليزي-إنجليزي"}),n.jsx("option",{value:"arabic-arabic",children:"عربي-عربي"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"المظهر"}),n.jsxs("select",{value:s.theme,onChange:me=>r({...s,theme:me.target.value}),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"standard",children:"قياسي"}),n.jsx("option",{value:"colorful",children:"ملون"}),n.jsx("option",{value:"minimal",children:"بسيط"})]})]})]}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:()=>S(!0),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5"}),"الإعدادات"]}),n.jsxs("button",{onClick:Rt,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(Lr,{className:"w-5 h-5"}),"لعب مرة أخرى"]})]})]})]})}return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[k&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(tn,{className:"w-6 h-6 text-indigo-600"}),"إعدادات اللعبة"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"مستوى الصعوبة"}),n.jsxs("select",{value:s.difficulty,onChange:V=>r({...s,difficulty:V.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"easy",children:"سهل (6 أزواج - 3 دقائق)"}),n.jsx("option",{value:"medium",children:"متوسط (8 أزواج - 2 دقيقة)"}),n.jsx("option",{value:"hard",children:"صعب (12 زوج - 1.5 دقيقة)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"نوع المطابقة"}),n.jsxs("select",{value:s.matchType,onChange:V=>r({...s,matchType:V.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"english-arabic",children:"إنجليزي-عربي (الكلمة وترجمتها)"}),n.jsx("option",{value:"english-english",children:"إنجليزي-إنجليزي (نفس الكلمة مرتين)"}),n.jsx("option",{value:"arabic-arabic",children:"عربي-عربي (نفس الترجمة مرتين)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المظهر"}),n.jsxs("select",{value:s.theme,onChange:V=>r({...s,theme:V.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"standard",children:"قياسي"}),n.jsx("option",{value:"colorful",children:"ملون"}),n.jsx("option",{value:"minimal",children:"بسيط"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"حجم البطاقات"}),n.jsxs("select",{value:s.cardSize,onChange:V=>r({...s,cardSize:V.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",children:[n.jsx("option",{value:"small",children:"صغير"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"large",children:"كبير"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:s.showHints,onChange:V=>r({...s,showHints:V.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"text-gray-700",children:"إظهار التلميحات"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:s.playAudioOnStart,onChange:V=>r({...s,playAudioOnStart:V.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"text-gray-700",children:"تشغيل الصوت تلقائياً"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:s.shuffleWords,onChange:V=>r({...s,shuffleWords:V.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"text-gray-700",children:"خلط ترتيب الكلمات"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:s.showProgress,onChange:V=>r({...s,showProgress:V.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"text-gray-700",children:"إظهار شريط التقدم"})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsx("button",{onClick:()=>{S(!1),Rt()},className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg transition-colors",children:"تطبيق"}),n.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 rounded-lg transition-colors",children:"إلغاء"})]})]})}),P&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(um,{className:"w-6 h-6 text-blue-600"}),"كيفية اللعب"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx("div",{className:"text-xl",children:"1"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"اقلب بطاقتين في كل مرة"}),n.jsx("p",{className:"text-gray-600",children:"انقر على بطاقتين لقلبهما ومعرفة ما بداخلهما"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx("div",{className:"text-xl",children:"2"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"ابحث عن الأزواج المتطابقة"}),n.jsx("p",{className:"text-gray-600",children:"حاول العثور على الكلمة الإنجليزية وما يقابلها بالعربية"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx("div",{className:"text-xl",children:"3"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"تذكر مواقع البطاقات"}),n.jsx("p",{className:"text-gray-600",children:"حاول تذكر مكان كل بطاقة لتتمكن من العثور على الأزواج بسرعة"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx("div",{className:"text-xl",children:"4"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"اجمع النقاط وأكمل اللعبة"}),n.jsx("p",{className:"text-gray-600",children:"كلما وجدت أزواجاً أكثر بمحاولات أقل، حصلت على نقاط أعلى"})]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:()=>F(!1),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors",children:"فهمت!"})})]})}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-t-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:"🧠 لعبة الذاكرة"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>F(!0),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",title:"كيفية اللعب",children:n.jsx(um,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>S(!0),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",title:"الإعدادات",children:n.jsx(tn,{className:"w-5 h-5"})}),g&&n.jsx("button",{onClick:vs,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",title:h?"استئناف":"إيقاف مؤقت",children:h?n.jsx(Za,{className:"w-5 h-5"}):n.jsx(No,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:u}),n.jsx("div",{className:"text-sm opacity-80",children:"أزواج"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:y}),n.jsx("div",{className:"text-sm opacity-80",children:"محاولات"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[ke(),"%"]}),n.jsx("div",{className:"text-sm opacity-80",children:"دقة"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:`text-2xl font-bold flex items-center justify-center gap-2 ${b<=20?"text-red-300 animate-pulse":""}`,children:[n.jsx(dt,{className:"w-6 h-6"}),fe(b)]}),n.jsx("div",{className:"text-sm opacity-80",children:"وقت"})]})]}),s.showProgress&&n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mt-4",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${u/we*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8",children:[g?h?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-4",children:"⏸️ اللعبة متوقفة"}),n.jsx("button",{onClick:vs,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-xl transition-all hover:scale-105 shadow-lg",children:"▶️ متابعة اللعبة"})]}):n.jsxs(n.Fragment,{children:[de&&ee>1&&n.jsx("div",{className:"text-center mb-4 animate-bounce",children:n.jsxs("span",{className:"inline-block bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-full font-bold text-lg",children:["🔥 Combo x",ee.toFixed(1),"!"]})}),n.jsx("div",{className:`grid gap-4 ${ws()}`,children:o.map(V=>n.jsxs("div",{onClick:()=>Dt(V.id),className:bl(V),children:[V.isFlipped||V.isMatched?n.jsx("span",{className:`block ${V.type==="arabic"?"text-lg":"text-base"}`,dir:V.type==="arabic"?"rtl":"ltr",children:V.text}):n.jsx("span",{className:"text-2xl",children:"🎴"}),n.jsx("div",{className:"absolute -top-1 -right-1 text-xs bg-gray-500 text-white rounded-full w-4 h-4 flex items-center justify-center opacity-50",children:V.id}),n.jsxs("div",{className:"absolute -bottom-1 -left-1 text-xs",children:[V.isFlipped?"↗️":"⬇️",V.isMatched?"✅":"❌"]})]},`${V.id}-${V.isFlipped}-${V.isMatched}`))}),n.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[s.showHints&&n.jsxs("button",{onClick:Q,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(vn,{className:"w-5 h-5"}),"تلميح"]}),n.jsxs("button",{onClick:vs,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(No,{className:"w-5 h-5"}),"إيقاف مؤقت"]}),n.jsxs("button",{onClick:Rt,className:"bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Lv,{className:"w-5 h-5"}),"خلط جديد"]})]})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-4",children:"اعثر على الأزواج المتطابقة!"}),n.jsx("p",{className:"text-gray-600 mb-4",children:s.matchType==="english-arabic"?"اقلب البطاقات للعثور على الكلمة الإنجليزية وترجمتها العربية":s.matchType==="english-english"?"اقلب البطاقات للعثور على نفس الكلمة الإنجليزية":"اقلب البطاقات للعثور على نفس الكلمة العربية"}),n.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["المستوى: ",s.difficulty==="easy"?"سهل":s.difficulty==="medium"?"متوسط":"صعب","(",we," أزواج - ",fe(ye[s.difficulty].time),")"]}),n.jsx("button",{onClick:Gt,className:"bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white px-8 py-4 rounded-xl font-semibold text-xl transition-all hover:scale-105 shadow-lg",children:"🎮 ابدأ اللعبة"})]}),L&&n.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50",children:[n.jsx("div",{className:"absolute top-0 left-1/4 animate-fall-slow",children:n.jsx("span",{className:"text-4xl",children:"🎉"})}),n.jsx("div",{className:"absolute top-0 left-1/2 animate-fall-medium",children:n.jsx("span",{className:"text-4xl",children:"🎊"})}),n.jsx("div",{className:"absolute top-0 left-3/4 animate-fall-fast",children:n.jsx("span",{className:"text-4xl",children:"🎈"})}),n.jsx("div",{className:"absolute top-0 left-1/3 animate-fall-medium delay-300",children:n.jsx("span",{className:"text-4xl",children:"🏆"})}),n.jsx("div",{className:"absolute top-0 left-2/3 animate-fall-slow delay-500",children:n.jsx("span",{className:"text-4xl",children:"⭐"})}),n.jsx("div",{className:"absolute top-0 left-1/5 animate-fall-fast delay-700",children:n.jsx("span",{className:"text-4xl",children:"🎯"})}),n.jsx("div",{className:"absolute top-0 left-4/5 animate-fall-medium delay-1000",children:n.jsx("span",{className:"text-4xl",children:"🎖️"})})]})]})]})},bN=[{sound:"/eə/",description:"صوت الـ eə كما في hair",arabicDescription:'صوت مركب من "إ" و "أ" مع إطالة خفيفة',words:[{word:"hair",phonetic:"/heə/",arabic:"شعر",difficulty:"easy"},{word:"fair",phonetic:"/feə/",arabic:"عادل / فاتح",difficulty:"easy"},{word:"chair",phonetic:"/tʃeə/",arabic:"كرسي",difficulty:"medium"},{word:"there",phonetic:"/ðeə/",arabic:"هناك",difficulty:"medium"}]},{sound:"/eɪ/",description:"صوت الـ eɪ كما في today",arabicDescription:'صوت مركب من "إي" مع انتقال إلى "ي"',words:[{word:"today",phonetic:"/təˈdeɪ/",arabic:"اليوم",difficulty:"easy"},{word:"eight",phonetic:"/eɪt/",arabic:"ثمانية",difficulty:"easy"},{word:"grey",phonetic:"/ɡreɪ/",arabic:"رمادي",difficulty:"medium"},{word:"painting",phonetic:"/ˈpeɪntɪŋ/",arabic:"رسم",difficulty:"hard"}]}],vN=({onScore:e})=>{const[t,s]=x.useState(null),[r,a]=x.useState(!1),[i,o]=x.useState(null),[l,c]=x.useState("normal"),[d,u]=x.useState(new Set);x.useEffect(()=>{(async()=>{try{await Se.initialize(),a(Se.isSupported()),Se.isSupported()&&(o(Se.getBestVoiceInfo()),console.log("تم تهيئة نظام النطق في تمرين النطق"))}catch(b){a(!1),console.error("فشل في تهيئة النطق:",b)}})()},[]);const m=async(j,b={})=>{if(!r){y("❌ النطق غير متاح في هذا المتصفح. جرب Chrome أو Edge","error");return}if(t===j){Se.stop(),s(null);return}try{s(j);const v={slow:b.slow||l==="slow",emphasis:!0,rate:b.slow?.5:l==="slow"?.6:.85,pitch:(i==null?void 0:i.quality)==="premium"?1.1:1.05,volume:1};await Se.speak(j,v),(b.repeat||l==="repeat")&&(await new Promise(g=>setTimeout(g,800)),await Se.speak(j,{...v,rate:v.rate*.8})),s(null),u(g=>new Set([...g,j])),e(3);const w=[`🎯 ${j} - نطق ممتاز!`,`🔊 استمع جيداً لـ ${j}`,`⭐ ${j} - أحسنت الاستماع!`,`🎵 نطق ${j} واضح ومفهوم!`],p=w[Math.floor(Math.random()*w.length)];y(p,"success")}catch(v){s(null),y("❌ خطأ في تشغيل الصوت","error"),console.error("خطأ في النطق:",v)}},y=(j,b="info")=>{const v=document.createElement("div"),w=b==="success"?"bg-green-500":b==="error"?"bg-red-500":"bg-blue-500";v.className=`fixed top-4 left-1/2 transform -translate-x-1/2 ${w} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold max-w-md text-center`,v.textContent=j,document.body.appendChild(v),setTimeout(()=>{v.style.opacity="0",v.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(v)&&document.body.removeChild(v)},300)},4e3)};return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 text-white rounded-xl p-6 text-center relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("h3",{className:"text-3xl font-bold mb-2 flex items-center justify-center gap-3",children:[n.jsx(od,{className:"w-8 h-8"}),"تمرين النطق"]}),n.jsx("p",{className:"opacity-90 text-lg",children:"تدرب على نطق الكلمات الإنجليزية"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5"}),"وضع التدريب:"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>c("normal"),className:`p-4 rounded-xl border-2 transition-all ${l==="normal"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(nn,{className:"w-6 h-6 mx-auto mb-2"}),n.jsx("div",{className:"font-semibold",children:"نطق عادي"}),n.jsx("div",{className:"text-sm opacity-70",children:"سرعة طبيعية"})]}),n.jsxs("button",{onClick:()=>c("slow"),className:`p-4 rounded-xl border-2 transition-all ${l==="slow"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300"}`,children:[n.jsx(Za,{className:"w-6 h-6 mx-auto mb-2"}),n.jsx("div",{className:"font-semibold",children:"نطق بطيء"}),n.jsx("div",{className:"text-sm opacity-70",children:"للتعلم والتركيز"})]}),n.jsxs("button",{onClick:()=>c("repeat"),className:`p-4 rounded-xl border-2 transition-all ${l==="repeat"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx(Ls,{className:"w-6 h-6 mx-auto mb-2"}),n.jsx("div",{className:"font-semibold",children:"تكرار مزدوج"}),n.jsx("div",{className:"text-sm opacity-70",children:"نطق مرتين للحفظ"})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-xl p-6",children:[n.jsx("h4",{className:"font-bold text-gray-800 mb-4",children:"📊 تقدمك في التدريب:"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-1 bg-white rounded-full h-4 overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-500",style:{width:`${d.size/8*100}%`}})}),n.jsxs("span",{className:"font-bold text-gray-700",children:[d.size," / 8 كلمة"]})]})]}),n.jsx("div",{className:"space-y-6",children:bN.map((j,b)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-white p-6",children:[n.jsx("h4",{className:"text-2xl font-bold mb-2",children:j.sound}),n.jsx("p",{className:"text-lg opacity-90 mb-2",children:j.description}),n.jsx("p",{className:"text-sm opacity-80",children:j.arabicDescription})]}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:j.words.map((v,w)=>n.jsxs("button",{onClick:()=>m(v.word),disabled:t===v.word,className:`w-full bg-gradient-to-br from-blue-500 to-indigo-600 hover:scale-105 disabled:scale-100 disabled:opacity-70 text-white p-6 rounded-xl font-semibold transition-all shadow-md relative overflow-hidden ${t===v.word?"animate-pulse":""} ${d.has(v.word)?"ring-4 ring-green-300":""}`,children:[n.jsx("div",{className:"absolute top-2 right-2 text-xs bg-white/20 px-2 py-1 rounded-full",children:v.difficulty==="easy"?"🟢 سهل":v.difficulty==="medium"?"🟡 متوسط":"🔴 صعب"}),d.has(v.word)&&n.jsx("div",{className:"absolute top-2 left-2 text-green-300",children:n.jsx(Fe,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex items-center justify-center gap-2 mb-3",children:t===v.word?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),n.jsx("span",{className:"text-sm",children:"يتم التشغيل..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-6 h-6"}),n.jsx("span",{className:"text-xl font-bold",children:v.word})]})}),n.jsx("div",{className:"text-sm opacity-90 font-mono bg-white/20 px-3 py-1 rounded mb-2",children:v.phonetic}),n.jsx("div",{className:"text-sm opacity-90 font-medium",children:v.arabic}),n.jsxs("div",{className:"absolute bottom-2 left-2 text-xs opacity-70",children:[l==="slow"&&"🐌",l==="repeat"&&"🔄",l==="normal"&&"⚡"]})]},w))})})]},b))}),n.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6",children:[n.jsxs("h5",{className:"font-bold text-green-800 mb-3 flex items-center gap-2",children:[n.jsx(nn,{className:"w-5 h-5"}),"نصائح للتدريب على النطق:"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"🎧"}),n.jsx("span",{children:"استمع للكلمة عدة مرات"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"🔄"}),n.jsx("span",{children:"كرر النطق بصوت عالٍ"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"🐌"}),n.jsx("span",{children:"استخدم الوضع البطيء للكلمات الصعبة"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"📝"}),n.jsx("span",{children:"اكتب الكلمة كما تسمعها"})]})]})]}),!r&&n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[n.jsx("h4",{className:"font-bold text-red-800 mb-3 text-xl",children:"⚠️ تحسين تجربة الصوت"}),n.jsx("p",{className:"text-red-700 mb-4",children:"للحصول على أفضل جودة صوت، استخدم أحد المتصفحات التالية:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:[n.jsx("div",{className:"font-bold",children:"Chrome"}),n.jsx("div",{className:"text-green-600",children:"🏆 الأفضل"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:[n.jsx("div",{className:"font-bold",children:"Edge"}),n.jsx("div",{className:"text-green-600",children:"⭐ ممتاز"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:[n.jsx("div",{className:"font-bold",children:"Safari"}),n.jsx("div",{className:"text-yellow-600",children:"👍 جيد"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:[n.jsx("div",{className:"font-bold",children:"Firefox"}),n.jsx("div",{className:"text-orange-600",children:"📢 محدود"})]})]})]})]})},wN=[{english:"family",arabic:"عائلة",unit:"Family",pronunciation:"/ˈfæməli/",grade:1,partOfSpeech:"noun",exampleSentence:"I love my family.",difficulty:"easy"},{english:"mother",arabic:"أم",unit:"Family",pronunciation:"/ˈmʌðə/",grade:1,partOfSpeech:"noun",exampleSentence:"My mother is kind.",difficulty:"easy"},{english:"father",arabic:"أب",unit:"Family",pronunciation:"/ˈfɑːðə/",grade:1,partOfSpeech:"noun",exampleSentence:"My father works hard.",difficulty:"easy"},{english:"sister",arabic:"أخت",unit:"Family",pronunciation:"/ˈsɪstə/",grade:1,partOfSpeech:"noun",exampleSentence:"My sister is funny.",difficulty:"easy"},{english:"brother",arabic:"أخ",unit:"Family",pronunciation:"/ˈbrʌðə/",grade:1,partOfSpeech:"noun",exampleSentence:"My brother plays soccer.",difficulty:"easy"},{english:"baby",arabic:"طفل صغير",unit:"Family",pronunciation:"/ˈbeɪbi/",grade:1,partOfSpeech:"noun",exampleSentence:"The baby is sleeping.",difficulty:"easy"},{english:"cat",arabic:"قطة",unit:"Animals",pronunciation:"/kæt/",grade:1,partOfSpeech:"noun",exampleSentence:"The cat is cute.",difficulty:"easy"},{english:"dog",arabic:"كلب",unit:"Animals",pronunciation:"/dɒɡ/",grade:1,partOfSpeech:"noun",exampleSentence:"My dog is friendly.",difficulty:"easy"},{english:"bird",arabic:"طائر",unit:"Animals",pronunciation:"/bɜːd/",grade:1,partOfSpeech:"noun",exampleSentence:"The bird can fly.",difficulty:"easy"},{english:"fish",arabic:"سمكة",unit:"Animals",pronunciation:"/fɪʃ/",grade:1,partOfSpeech:"noun",exampleSentence:"Fish live in water.",difficulty:"easy"},{english:"rabbit",arabic:"أرنب",unit:"Animals",pronunciation:"/ˈræbɪt/",grade:1,partOfSpeech:"noun",exampleSentence:"The rabbit is white.",difficulty:"easy"},{english:"horse",arabic:"حصان",unit:"Animals",pronunciation:"/hɔːs/",grade:1,partOfSpeech:"noun",exampleSentence:"The horse runs fast.",difficulty:"easy"},{english:"red",arabic:"أحمر",unit:"Colors",pronunciation:"/red/",grade:1,partOfSpeech:"adjective",exampleSentence:"The apple is red.",difficulty:"easy"},{english:"blue",arabic:"أزرق",unit:"Colors",pronunciation:"/bluː/",grade:1,partOfSpeech:"adjective",exampleSentence:"The sky is blue.",difficulty:"easy"},{english:"green",arabic:"أخضر",unit:"Colors",pronunciation:"/ɡriːn/",grade:1,partOfSpeech:"adjective",exampleSentence:"Grass is green.",difficulty:"easy"},{english:"yellow",arabic:"أصفر",unit:"Colors",pronunciation:"/ˈjeləʊ/",grade:1,partOfSpeech:"adjective",exampleSentence:"The sun is yellow.",difficulty:"easy"},{english:"black",arabic:"أسود",unit:"Colors",pronunciation:"/blæk/",grade:1,partOfSpeech:"adjective",exampleSentence:"My hair is black.",difficulty:"easy"},{english:"white",arabic:"أبيض",unit:"Colors",pronunciation:"/waɪt/",grade:1,partOfSpeech:"adjective",exampleSentence:"Snow is white.",difficulty:"easy"},{english:"one",arabic:"واحد",unit:"Numbers",pronunciation:"/wʌn/",grade:1,partOfSpeech:"noun",exampleSentence:"I have one book.",difficulty:"easy"},{english:"two",arabic:"اثنان",unit:"Numbers",pronunciation:"/tuː/",grade:1,partOfSpeech:"noun",exampleSentence:"I see two cats.",difficulty:"easy"},{english:"three",arabic:"ثلاثة",unit:"Numbers",pronunciation:"/θriː/",grade:1,partOfSpeech:"noun",exampleSentence:"There are three birds.",difficulty:"easy"},{english:"four",arabic:"أربعة",unit:"Numbers",pronunciation:"/fɔː/",grade:1,partOfSpeech:"noun",exampleSentence:"I have four pencils.",difficulty:"easy"},{english:"five",arabic:"خمسة",unit:"Numbers",pronunciation:"/faɪv/",grade:1,partOfSpeech:"noun",exampleSentence:"Give me five apples.",difficulty:"easy"},{english:"head",arabic:"رأس",unit:"Body Parts",pronunciation:"/hed/",grade:1,partOfSpeech:"noun",exampleSentence:"I touch my head.",difficulty:"easy"},{english:"eye",arabic:"عين",unit:"Body Parts",pronunciation:"/aɪ/",grade:1,partOfSpeech:"noun",exampleSentence:"I see with my eyes.",difficulty:"easy"},{english:"nose",arabic:"أنف",unit:"Body Parts",pronunciation:"/nəʊz/",grade:1,partOfSpeech:"noun",exampleSentence:"I smell with my nose.",difficulty:"easy"},{english:"mouth",arabic:"فم",unit:"Body Parts",pronunciation:"/maʊθ/",grade:1,partOfSpeech:"noun",exampleSentence:"I eat with my mouth.",difficulty:"easy"},{english:"hand",arabic:"يد",unit:"Body Parts",pronunciation:"/hænd/",grade:1,partOfSpeech:"noun",exampleSentence:"I wave my hand.",difficulty:"easy"},{english:"foot",arabic:"قدم",unit:"Body Parts",pronunciation:"/fʊt/",grade:1,partOfSpeech:"noun",exampleSentence:"I walk with my feet.",difficulty:"easy"},{english:"apple",arabic:"تفاحة",unit:"Food",pronunciation:"/ˈæpl/",grade:1,partOfSpeech:"noun",exampleSentence:"The apple is sweet.",difficulty:"easy"},{english:"banana",arabic:"موزة",unit:"Food",pronunciation:"/bəˈnɑːnə/",grade:1,partOfSpeech:"noun",exampleSentence:"I like bananas.",difficulty:"easy"},{english:"bread",arabic:"خبز",unit:"Food",pronunciation:"/bred/",grade:1,partOfSpeech:"noun",exampleSentence:"I eat bread for breakfast.",difficulty:"easy"},{english:"milk",arabic:"حليب",unit:"Food",pronunciation:"/mɪlk/",grade:1,partOfSpeech:"noun",exampleSentence:"Milk is white.",difficulty:"easy"},{english:"water",arabic:"ماء",unit:"Food",pronunciation:"/ˈwɔːtə/",grade:1,partOfSpeech:"noun",exampleSentence:"I drink water.",difficulty:"easy"},{english:"book",arabic:"كتاب",unit:"School",pronunciation:"/bʊk/",grade:1,partOfSpeech:"noun",exampleSentence:"I read a book.",difficulty:"easy"},{english:"pen",arabic:"قلم",unit:"School",pronunciation:"/pen/",grade:1,partOfSpeech:"noun",exampleSentence:"I write with a pen.",difficulty:"easy"},{english:"desk",arabic:"مكتب",unit:"School",pronunciation:"/desk/",grade:1,partOfSpeech:"noun",exampleSentence:"My desk is clean.",difficulty:"easy"},{english:"chair",arabic:"كرسي",unit:"School",pronunciation:"/tʃeə/",grade:1,partOfSpeech:"noun",exampleSentence:"I sit on a chair.",difficulty:"easy"},{english:"school",arabic:"مدرسة",unit:"School",pronunciation:"/skuːl/",grade:1,partOfSpeech:"noun",exampleSentence:"I go to school.",difficulty:"easy"}],jN=[{title:"أدوات التعريف والتنكير (A, An, The)",explanation:"نستخدم 'a' قبل الكلمات التي تبدأ بحرف ساكن، و 'an' قبل الكلمات التي تبدأ بحرف متحرك، و 'the' للإشارة إلى شيء محدد.",examples:["a cat - قطة","an apple - تفاحة","the book - الكتاب","a dog - كلب","an orange - برتقالة","the sun - الشمس"],unit:"Family",grade:1},{title:"الضمائر البسيطة (I, You, He, She, It)",explanation:"الضمائر تحل محل الأسماء. نستخدم I للمتكلم، You للمخاطب، He للذكر، She للأنثى، It للأشياء.",examples:["I am happy. - أنا سعيد","You are my friend. - أنت صديقي","He is tall. - هو طويل","She is kind. - هي لطيفة","It is red. - إنه أحمر","I love you. - أحبك"],unit:"Animals",grade:1},{title:"فعل الكون (am, is, are)",explanation:"نستخدم 'am' مع I، و 'is' مع He/She/It، و 'are' مع You/We/They.",examples:["I am seven years old. - عمري سبع سنوات","She is my sister. - هي أختي","You are nice. - أنت لطيف","The cat is black. - القطة سوداء","We are friends. - نحن أصدقاء","They are happy. - هم سعداء"],unit:"Colors",grade:1},{title:"الجمع البسيط (Adding -s)",explanation:"لجعل الكلمة جمع، نضيف عادة حرف 's' في النهاية.",examples:["cat → cats - قطة → قطط","dog → dogs - كلب → كلاب","book → books - كتاب → كتب","apple → apples - تفاحة → تفاح","bird → birds - طائر → طيور","hand → hands - يد → أيدي"],unit:"Numbers",grade:1},{title:"أفعال بسيطة (Simple Verbs)",explanation:"الأفعال تخبرنا عما يفعله الشخص أو الشيء.",examples:["I eat. - أنا آكل","She runs. - هي تجري","He sleeps. - هو ينام","We play. - نحن نلعب","They sing. - هم يغنون","The bird flies. - الطائر يطير"],unit:"Body Parts",grade:1},{title:"الأسئلة البسيطة (Simple Questions)",explanation:"لتكوين سؤال، نضع فعل الكون في البداية أو نستخدم كلمات الاستفهام.",examples:["Are you happy? - هل أنت سعيد؟","Is she your sister? - هل هي أختك؟","What is this? - ما هذا؟","Where is the cat? - أين القطة؟","How are you? - كيف حالك؟","Who is that? - من ذلك؟"],unit:"Food",grade:1}],NN=[{question:"I _____ a student.",options:["am","is","are","be"],correct:0,explanation:"نستخدم 'am' مع الضمير I",unit:"Family",grade:1},{question:"The cat _____ black.",options:["am","is","are","be"],correct:1,explanation:"نستخدم 'is' مع المفرد الغائب",unit:"Animals",grade:1},{question:"Choose the correct article: _____ apple",options:["a","an","the","no article"],correct:1,explanation:"نستخدم 'an' قبل الكلمات التي تبدأ بحرف متحرك",unit:"Colors",grade:1},{question:"What is the plural of 'book'?",options:["book","books","bookes","bookies"],correct:1,explanation:"نضيف 's' للحصول على الجمع",unit:"Numbers",grade:1},{question:"You _____ my friend.",options:["am","is","are","be"],correct:2,explanation:"نستخدم 'are' مع الضمير You",unit:"Body Parts",grade:1},{question:"Choose the correct article: _____ dog",options:["a","an","the","any"],correct:0,explanation:"نستخدم 'a' قبل الكلمات التي تبدأ بحرف ساكن",unit:"Food",grade:1},{question:"What is the plural of 'cat'?",options:["cat","cats","cates","kitties"],correct:1,explanation:"نضيف 's' في النهاية للجمع",unit:"School",grade:1},{question:"She _____ my sister.",options:["am","is","are","be"],correct:1,explanation:"نستخدم 'is' مع الضمير She",unit:"Family",grade:1},{question:"Choose the correct sentence:",options:["I are happy","I am happy","I is happy","I be happy"],correct:1,explanation:"الجملة الصحيحة هي 'I am happy'",unit:"Animals",grade:1},{question:"The birds _____ in the sky.",options:["am","is","are","be"],correct:2,explanation:"نستخدم 'are' مع الجمع",unit:"Colors",grade:1}],SN=[{english:"house",arabic:"منزل",unit:"Home",pronunciation:"/haʊs/",grade:2,partOfSpeech:"noun",exampleSentence:"I live in a big house.",difficulty:"easy"},{english:"room",arabic:"غرفة",unit:"Home",pronunciation:"/ruːm/",grade:2,partOfSpeech:"noun",exampleSentence:"My room is clean.",difficulty:"easy"},{english:"kitchen",arabic:"مطبخ",unit:"Home",pronunciation:"/ˈkɪtʃɪn/",grade:2,partOfSpeech:"noun",exampleSentence:"Mom cooks in the kitchen.",difficulty:"easy"},{english:"bedroom",arabic:"غرفة نوم",unit:"Home",pronunciation:"/ˈbedruːm/",grade:2,partOfSpeech:"noun",exampleSentence:"I sleep in my bedroom.",difficulty:"easy"},{english:"bathroom",arabic:"حمام",unit:"Home",pronunciation:"/ˈbɑːθruːm/",grade:2,partOfSpeech:"noun",exampleSentence:"I wash my hands in the bathroom.",difficulty:"easy"},{english:"door",arabic:"باب",unit:"Home",pronunciation:"/dɔː/",grade:2,partOfSpeech:"noun",exampleSentence:"Please close the door.",difficulty:"easy"},{english:"window",arabic:"نافذة",unit:"Home",pronunciation:"/ˈwɪndəʊ/",grade:2,partOfSpeech:"noun",exampleSentence:"I look out the window.",difficulty:"easy"},{english:"toy",arabic:"لعبة",unit:"Toys and Games",pronunciation:"/tɔɪ/",grade:2,partOfSpeech:"noun",exampleSentence:"This is my favorite toy.",difficulty:"easy"},{english:"ball",arabic:"كرة",unit:"Toys and Games",pronunciation:"/bɔːl/",grade:2,partOfSpeech:"noun",exampleSentence:"Let's play with the ball.",difficulty:"easy"},{english:"doll",arabic:"دمية",unit:"Toys and Games",pronunciation:"/dɒl/",grade:2,partOfSpeech:"noun",exampleSentence:"The doll has beautiful hair.",difficulty:"easy"},{english:"puzzle",arabic:"أحجية",unit:"Toys and Games",pronunciation:"/ˈpʌzl/",grade:2,partOfSpeech:"noun",exampleSentence:"I can solve this puzzle.",difficulty:"easy"},{english:"game",arabic:"لعبة",unit:"Toys and Games",pronunciation:"/ɡeɪm/",grade:2,partOfSpeech:"noun",exampleSentence:"We play a fun game.",difficulty:"easy"},{english:"bicycle",arabic:"دراجة",unit:"Toys and Games",pronunciation:"/ˈbaɪsɪkl/",grade:2,partOfSpeech:"noun",exampleSentence:"I ride my bicycle to school.",difficulty:"easy"},{english:"sun",arabic:"شمس",unit:"Weather",pronunciation:"/sʌn/",grade:2,partOfSpeech:"noun",exampleSentence:"The sun is bright today.",difficulty:"easy"},{english:"rain",arabic:"مطر",unit:"Weather",pronunciation:"/reɪn/",grade:2,partOfSpeech:"noun",exampleSentence:"I like the sound of rain.",difficulty:"easy"},{english:"snow",arabic:"ثلج",unit:"Weather",pronunciation:"/snəʊ/",grade:2,partOfSpeech:"noun",exampleSentence:"Snow is white and cold.",difficulty:"easy"},{english:"wind",arabic:"ريح",unit:"Weather",pronunciation:"/wɪnd/",grade:2,partOfSpeech:"noun",exampleSentence:"The wind blows the leaves.",difficulty:"easy"},{english:"hot",arabic:"حار",unit:"Weather",pronunciation:"/hɒt/",grade:2,partOfSpeech:"adjective",exampleSentence:"Today is very hot.",difficulty:"easy"},{english:"cold",arabic:"بارد",unit:"Weather",pronunciation:"/kəʊld/",grade:2,partOfSpeech:"adjective",exampleSentence:"Winter is cold.",difficulty:"easy"},{english:"shirt",arabic:"قميص",unit:"Clothes",pronunciation:"/ʃɜːt/",grade:2,partOfSpeech:"noun",exampleSentence:"I wear a blue shirt.",difficulty:"easy"},{english:"pants",arabic:"بنطلون",unit:"Clothes",pronunciation:"/pænts/",grade:2,partOfSpeech:"noun",exampleSentence:"My pants are black.",difficulty:"easy"},{english:"dress",arabic:"فستان",unit:"Clothes",pronunciation:"/dres/",grade:2,partOfSpeech:"noun",exampleSentence:"She wears a pretty dress.",difficulty:"easy"},{english:"shoes",arabic:"حذاء",unit:"Clothes",pronunciation:"/ʃuːz/",grade:2,partOfSpeech:"noun",exampleSentence:"I need new shoes.",difficulty:"easy"},{english:"hat",arabic:"قبعة",unit:"Clothes",pronunciation:"/hæt/",grade:2,partOfSpeech:"noun",exampleSentence:"The hat protects from sun.",difficulty:"easy"},{english:"jacket",arabic:"سترة",unit:"Clothes",pronunciation:"/ˈdʒækɪt/",grade:2,partOfSpeech:"noun",exampleSentence:"I wear a jacket when it's cold.",difficulty:"easy"},{english:"run",arabic:"يجري",unit:"Actions",pronunciation:"/rʌn/",grade:2,partOfSpeech:"verb",exampleSentence:"I can run fast.",difficulty:"easy"},{english:"walk",arabic:"يمشي",unit:"Actions",pronunciation:"/wɔːk/",grade:2,partOfSpeech:"verb",exampleSentence:"Let's walk to the park.",difficulty:"easy"},{english:"jump",arabic:"يقفز",unit:"Actions",pronunciation:"/dʒʌmp/",grade:2,partOfSpeech:"verb",exampleSentence:"The frog can jump high.",difficulty:"easy"},{english:"sing",arabic:"يغني",unit:"Actions",pronunciation:"/sɪŋ/",grade:2,partOfSpeech:"verb",exampleSentence:"She likes to sing songs.",difficulty:"easy"},{english:"dance",arabic:"يرقص",unit:"Actions",pronunciation:"/dɑːns/",grade:2,partOfSpeech:"verb",exampleSentence:"We dance at the party.",difficulty:"easy"},{english:"swim",arabic:"يسبح",unit:"Actions",pronunciation:"/swɪm/",grade:2,partOfSpeech:"verb",exampleSentence:"Fish swim in the water.",difficulty:"easy"},{english:"car",arabic:"سيارة",unit:"Transportation",pronunciation:"/kɑː/",grade:2,partOfSpeech:"noun",exampleSentence:"Dad drives the car.",difficulty:"easy"},{english:"bus",arabic:"حافلة",unit:"Transportation",pronunciation:"/bʌs/",grade:2,partOfSpeech:"noun",exampleSentence:"I take the bus to school.",difficulty:"easy"},{english:"train",arabic:"قطار",unit:"Transportation",pronunciation:"/treɪn/",grade:2,partOfSpeech:"noun",exampleSentence:"The train is very long.",difficulty:"easy"},{english:"plane",arabic:"طائرة",unit:"Transportation",pronunciation:"/pleɪn/",grade:2,partOfSpeech:"noun",exampleSentence:"The plane flies in the sky.",difficulty:"easy"},{english:"boat",arabic:"قارب",unit:"Transportation",pronunciation:"/bəʊt/",grade:2,partOfSpeech:"noun",exampleSentence:"We sail in a boat.",difficulty:"easy"},{english:"morning",arabic:"صباح",unit:"Time",pronunciation:"/ˈmɔːnɪŋ/",grade:2,partOfSpeech:"noun",exampleSentence:"I wake up in the morning.",difficulty:"easy"},{english:"afternoon",arabic:"بعد الظهر",unit:"Time",pronunciation:"/ˌɑːftəˈnuːn/",grade:2,partOfSpeech:"noun",exampleSentence:"We play in the afternoon.",difficulty:"easy"},{english:"night",arabic:"ليل",unit:"Time",pronunciation:"/naɪt/",grade:2,partOfSpeech:"noun",exampleSentence:"Stars shine at night.",difficulty:"easy"},{english:"today",arabic:"اليوم",unit:"Time",pronunciation:"/təˈdeɪ/",grade:2,partOfSpeech:"noun",exampleSentence:"Today is Monday.",difficulty:"easy"},{english:"tomorrow",arabic:"غداً",unit:"Time",pronunciation:"/təˈmɒrəʊ/",grade:2,partOfSpeech:"noun",exampleSentence:"Tomorrow is Tuesday.",difficulty:"easy"},{english:"yesterday",arabic:"أمس",unit:"Time",pronunciation:"/ˈjestədeɪ/",grade:2,partOfSpeech:"noun",exampleSentence:"Yesterday was sunny.",difficulty:"easy"}],kN=[{title:"المضارع البسيط (Simple Present)",explanation:"نستخدم المضارع البسيط للتحدث عن العادات والحقائق. نضيف 's' مع He/She/It.",examples:["I play every day. - ألعب كل يوم","She plays with dolls. - تلعب بالدمى","We eat breakfast. - نتناول الفطار","He runs fast. - يجري بسرعة","They sing songs. - يغنون الأغاني","The bird flies. - الطائر يطير"],unit:"Home",grade:2},{title:"حروف الجر البسيطة (in, on, under)",explanation:"حروف الجر تخبرنا عن موقع الأشياء. in = في، on = على، under = تحت.",examples:["The book is in the bag. - الكتاب في الحقيبة","The cat is on the table. - القطة على الطاولة","The ball is under the chair. - الكرة تحت الكرسي","I live in a house. - أسكن في منزل","The hat is on my head. - القبعة على رأسي","The dog is under the tree. - الكلب تحت الشجرة"],unit:"Toys and Games",grade:2},{title:"أسئلة What و Where",explanation:"نستخدم What لسؤال عن الشيء، و Where لسؤال عن المكان.",examples:["What is this? - ما هذا؟","Where is the book? - أين الكتاب؟","What color is it? - ما لونه؟","Where do you live? - أين تسكن؟","What is your name? - ما اسمك؟","Where is the bathroom? - أين الحمام؟"],unit:"Weather",grade:2},{title:"الصفات البسيطة (Simple Adjectives)",explanation:"الصفات تصف الأسماء. نضعها عادة قبل الاسم في الإنجليزية.",examples:["a big house - منزل كبير","a small car - سيارة صغيرة","a red apple - تفاحة حمراء","a happy child - طفل سعيد","a cold day - يوم بارد","a beautiful dress - فستان جميل"],unit:"Clothes",grade:2},{title:"فعل Like مع ing",explanation:"عندما نقول ما نحبه من الأنشطة، نستخدم like + فعل مع ing.",examples:["I like swimming. - أحب السباحة","She likes dancing. - تحب الرقص","We like playing. - نحب اللعب","He likes running. - يحب الجري","They like singing. - يحبون الغناء","I like reading books. - أحب قراءة الكتب"],unit:"Actions",grade:2},{title:"فعل Can للقدرة",explanation:"نستخدم can للتعبير عن القدرة على فعل شيء.",examples:["I can swim. - أستطيع السباحة","She can sing. - تستطيع الغناء","We can play. - نستطيع اللعب","Can you run? - هل تستطيع الجري؟","Birds can fly. - الطيور تستطيع الطيران","Fish can swim. - الأسماك تستطيع السباحة"],unit:"Transportation",grade:2}],_N=[{question:"She _____ with her toys every day.",options:["play","plays","playing","played"],correct:1,explanation:"نضيف 's' مع She في المضارع البسيط",unit:"Home",grade:2},{question:"The book is _____ the table.",options:["in","on","under","at"],correct:1,explanation:"نستخدم 'on' عندما يكون الشيء على سطح شيء آخر",unit:"Toys and Games",grade:2},{question:"_____ is your favorite color?",options:["What","Where","When","Who"],correct:0,explanation:"نستخدم 'What' للسؤال عن الأشياء",unit:"Weather",grade:2},{question:"I have a _____ car.",options:["red beautiful","beautiful red","beautifully red","red beauty"],correct:1,explanation:"الصفة تأتي قبل الاسم",unit:"Clothes",grade:2},{question:"I like _____ games.",options:["play","plays","playing","played"],correct:2,explanation:"نستخدم الفعل مع ing بعد like",unit:"Actions",grade:2},{question:"Birds _____ fly.",options:["can","can't","cannot","could"],correct:0,explanation:"الطيور تستطيع الطيران",unit:"Transportation",grade:2},{question:"The cat is _____ the chair.",options:["in","on","under","into"],correct:2,explanation:"تحت الكرسي",unit:"Time",grade:2},{question:"We _____ to school every morning.",options:["go","goes","going","went"],correct:0,explanation:"نستخدم الفعل الأساسي مع We",unit:"Home",grade:2},{question:"_____ do you live?",options:["What","Where","When","Why"],correct:1,explanation:"نستخدم 'Where' للسؤال عن المكان",unit:"Toys and Games",grade:2},{question:"I _____ ride a bicycle.",options:["can","am","is","are"],correct:0,explanation:"نستخدم 'can' للتعبير عن القدرة",unit:"Weather",grade:2}],CN=[{english:"friend",arabic:"صديق",unit:"Friends and Friendship",pronunciation:"/frend/",grade:3,partOfSpeech:"noun",exampleSentence:"Sarah is my best friend.",difficulty:"easy"},{english:"kind",arabic:"لطيف",unit:"Friends and Friendship",pronunciation:"/kaɪnd/",grade:3,partOfSpeech:"adjective",exampleSentence:"She is very kind to everyone.",difficulty:"easy"},{english:"helpful",arabic:"مفيد",unit:"Friends and Friendship",pronunciation:"/ˈhelpfəl/",grade:3,partOfSpeech:"adjective",exampleSentence:"My friend is always helpful.",difficulty:"easy"},{english:"share",arabic:"يشارك",unit:"Friends and Friendship",pronunciation:"/ʃeə/",grade:3,partOfSpeech:"verb",exampleSentence:"I share my toys with friends.",difficulty:"easy"},{english:"care",arabic:"يهتم",unit:"Friends and Friendship",pronunciation:"/keə/",grade:3,partOfSpeech:"verb",exampleSentence:"Good friends care about each other.",difficulty:"easy"},{english:"football",arabic:"كرة القدم",unit:"Sports and Activities",pronunciation:"/ˈfʊtbɔːl/",grade:3,partOfSpeech:"noun",exampleSentence:"We play football in the park.",difficulty:"easy"},{english:"basketball",arabic:"كرة السلة",unit:"Sports and Activities",pronunciation:"/ˈbɑːskɪtbɔːl/",grade:3,partOfSpeech:"noun",exampleSentence:"Basketball is fun to play.",difficulty:"easy"},{english:"swimming",arabic:"سباحة",unit:"Sports and Activities",pronunciation:"/ˈswɪmɪŋ/",grade:3,partOfSpeech:"noun",exampleSentence:"Swimming is good exercise.",difficulty:"easy"},{english:"drawing",arabic:"رسم",unit:"Sports and Activities",pronunciation:"/ˈdrɔːɪŋ/",grade:3,partOfSpeech:"noun",exampleSentence:"I love drawing pictures.",difficulty:"easy"},{english:"reading",arabic:"قراءة",unit:"Sports and Activities",pronunciation:"/ˈriːdɪŋ/",grade:3,partOfSpeech:"noun",exampleSentence:"Reading books is my hobby.",difficulty:"easy"},{english:"breakfast",arabic:"فطار",unit:"Food and Meals",pronunciation:"/ˈbrekfəst/",grade:3,partOfSpeech:"noun",exampleSentence:"I eat breakfast every morning.",difficulty:"easy"},{english:"lunch",arabic:"غداء",unit:"Food and Meals",pronunciation:"/lʌntʃ/",grade:3,partOfSpeech:"noun",exampleSentence:"We have lunch at school.",difficulty:"easy"},{english:"dinner",arabic:"عشاء",unit:"Food and Meals",pronunciation:"/ˈdɪnə/",grade:3,partOfSpeech:"noun",exampleSentence:"My family eats dinner together.",difficulty:"easy"},{english:"vegetables",arabic:"خضروات",unit:"Food and Meals",pronunciation:"/ˈvedʒtəblz/",grade:3,partOfSpeech:"noun",exampleSentence:"Vegetables are healthy food.",difficulty:"easy"},{english:"fruits",arabic:"فواكه",unit:"Food and Meals",pronunciation:"/fruːts/",grade:3,partOfSpeech:"noun",exampleSentence:"I eat fruits every day.",difficulty:"easy"}],EN=[{title:"المضارع المستمر (Present Continuous)",explanation:"نستخدم المضارع المستمر للتحدث عن أحداث تحدث الآن. التركيب: am/is/are + فعل + ing",examples:["I am reading a book. - أنا أقرأ كتاباً","She is playing football. - هي تلعب كرة القدم","They are eating lunch. - هم يتناولون الغداء","We are studying English. - نحن ندرس الإنجليزية","He is drawing a picture. - هو يرسم صورة","The children are swimming. - الأطفال يسبحون"],unit:"Friends and Friendship",grade:3},{title:"الماضي البسيط (Simple Past)",explanation:"نستخدم الماضي البسيط للتحدث عن أحداث حدثت في الماضي وانتهت.",examples:["I played football yesterday. - لعبت كرة القدم أمس","She visited her friend. - زارت صديقتها","We watched a movie. - شاهدنا فيلماً","He finished his homework. - أنهى واجبه","They walked to school. - مشوا إلى المدرسة","I helped my mother. - ساعدت أمي"],unit:"Sports and Activities",grade:3}],TN=[{question:"I _____ reading a book right now.",options:["am","is","are","was"],correct:0,explanation:"نستخدم 'am' مع I في المضارع المستمر",unit:"Friends and Friendship",grade:3},{question:"She _____ football yesterday.",options:["play","plays","played","playing"],correct:2,explanation:"نستخدم الماضي البسيط للأحداث التي حدثت أمس",unit:"Sports and Activities",grade:3}],ON=[{english:"environment",arabic:"بيئة",unit:"Nature and Environment",pronunciation:"/ɪnˈvaɪrənmənt/",grade:4,partOfSpeech:"noun",exampleSentence:"We must protect our environment.",difficulty:"medium"},{english:"nature",arabic:"طبيعة",unit:"Nature and Environment",pronunciation:"/ˈneɪtʃə/",grade:4,partOfSpeech:"noun",exampleSentence:"Nature is beautiful and important.",difficulty:"medium"},{english:"forest",arabic:"غابة",unit:"Nature and Environment",pronunciation:"/ˈfɒrɪst/",grade:4,partOfSpeech:"noun",exampleSentence:"The forest is full of trees.",difficulty:"medium"},{english:"ocean",arabic:"محيط",unit:"Nature and Environment",pronunciation:"/ˈəʊʃn/",grade:4,partOfSpeech:"noun",exampleSentence:"The ocean is very deep.",difficulty:"medium"},{english:"mountain",arabic:"جبل",unit:"Nature and Environment",pronunciation:"/ˈmaʊntɪn/",grade:4,partOfSpeech:"noun",exampleSentence:"The mountain is very high.",difficulty:"medium"},{english:"computer",arabic:"حاسوب",unit:"Technology and Communication",pronunciation:"/kəmˈpjuːtə/",grade:4,partOfSpeech:"noun",exampleSentence:"I use a computer for my homework.",difficulty:"medium"},{english:"internet",arabic:"إنترنت",unit:"Technology and Communication",pronunciation:"/ˈɪntənet/",grade:4,partOfSpeech:"noun",exampleSentence:"The internet helps us learn.",difficulty:"medium"},{english:"telephone",arabic:"هاتف",unit:"Technology and Communication",pronunciation:"/ˈtelɪfəʊn/",grade:4,partOfSpeech:"noun",exampleSentence:"I call my grandmother on the telephone.",difficulty:"medium"},{english:"message",arabic:"رسالة",unit:"Technology and Communication",pronunciation:"/ˈmesɪdʒ/",grade:4,partOfSpeech:"noun",exampleSentence:"She sent me a message.",difficulty:"medium"},{english:"information",arabic:"معلومات",unit:"Technology and Communication",pronunciation:"/ˌɪnfəˈmeɪʃn/",grade:4,partOfSpeech:"noun",exampleSentence:"We need more information about this topic.",difficulty:"medium"}],AN=[{title:"المستقبل البسيط (Simple Future)",explanation:"نستخدم المستقبل البسيط للتحدث عن أحداث ستحدث في المستقبل. التركيب: will + فعل أساسي",examples:["I will study hard. - سأدرس بجد","She will visit us tomorrow. - ستزورنا غداً","We will protect the environment. - سنحمي البيئة","They will use computers. - سيستخدمون الحاسوب","He will send a message. - سيرسل رسالة","It will rain tomorrow. - ستمطر غداً"],unit:"Nature and Environment",grade:4},{title:"الأسئلة بـ How many و How much",explanation:"نستخدم 'How many' مع الأشياء المعدودة و 'How much' مع الأشياء غير المعدودة.",examples:["How many books do you have? - كم كتاباً لديك؟","How much water do you drink? - كم من الماء تشرب؟","How many friends are coming? - كم صديقاً قادم؟","How much time do we have? - كم من الوقت لدينا؟","How many computers are there? - كم حاسوباً هناك؟","How much information do you need? - كم من المعلومات تحتاج؟"],unit:"Technology and Communication",grade:4}],PN=[{question:"Tomorrow, I _____ visit my grandmother.",options:["will","would","was","am"],correct:0,explanation:"نستخدم 'will' للمستقبل البسيط",unit:"Nature and Environment",grade:4},{question:"_____ computers do you have at home?",options:["How much","How many","How often","How long"],correct:1,explanation:"نستخدم 'How many' مع الأشياء المعدودة",unit:"Technology and Communication",grade:4}],IN=[{english:"welcome",arabic:"مرحباً",unit:"Welcome Back",pronunciation:"/ˈwelkəm/",grade:5,partOfSpeech:"noun",exampleSentence:"They gave us a warm welcome at the hotel."},{english:"return",arabic:"يعود",unit:"Welcome Back",pronunciation:"/rɪˈtɜːn/",grade:5,partOfSpeech:"verb",exampleSentence:"We will return to school next week."},{english:"friend",arabic:"صديق",unit:"Welcome Back",pronunciation:"/frend/",grade:5,partOfSpeech:"noun",exampleSentence:"She is my best friend."},{english:"classroom",arabic:"فصل دراسي",unit:"Welcome Back",pronunciation:"/ˈklɑːsruːm/",grade:5,partOfSpeech:"noun",exampleSentence:"Our classroom is on the second floor."},{english:"teacher",arabic:"معلم",unit:"Welcome Back",pronunciation:"/ˈtiːtʃə/",grade:5,partOfSpeech:"noun",exampleSentence:"Our teacher is very kind."},{english:"student",arabic:"طالب",unit:"Welcome Back",pronunciation:"/ˈstjuːdnt/",grade:5,partOfSpeech:"noun",exampleSentence:"He is a hardworking student."},{english:"talent",arabic:"موهبة",unit:"Talent Show",pronunciation:"/ˈtælənt/",grade:5,partOfSpeech:"noun",exampleSentence:"She has a talent for singing."},{english:"show",arabic:"عرض",unit:"Talent Show",pronunciation:"/ʃəʊ/",grade:5,partOfSpeech:"noun",exampleSentence:"We watched a great show last night."},{english:"perform",arabic:"يؤدي",unit:"Talent Show",pronunciation:"/pəˈfɔːm/",grade:5,partOfSpeech:"verb",exampleSentence:"She will perform a song at the talent show."},{english:"stage",arabic:"مسرح",unit:"Talent Show",pronunciation:"/steɪdʒ/",grade:5,partOfSpeech:"noun",exampleSentence:"The performers stood on the stage."},{english:"audience",arabic:"جمهور",unit:"Talent Show",pronunciation:"/ˈɔːdiəns/",grade:5,partOfSpeech:"noun",exampleSentence:"The audience clapped after the performance."},{english:"sing",arabic:"يغني",unit:"Talent Show",pronunciation:"/sɪŋ/",grade:5,partOfSpeech:"verb",exampleSentence:"She can sing very well."},{english:"dance",arabic:"يرقص",unit:"Talent Show",pronunciation:"/dɑːns/",grade:5,partOfSpeech:"verb",exampleSentence:"They dance beautifully together."},{english:"play",arabic:"يعزف",unit:"Talent Show",pronunciation:"/pleɪ/",grade:5,partOfSpeech:"verb",exampleSentence:"He plays the piano in the talent show."},{english:"instrument",arabic:"آلة موسيقية",unit:"Talent Show",pronunciation:"/ˈɪnstrəmənt/",grade:5,partOfSpeech:"noun",exampleSentence:"The violin is a beautiful instrument."},{english:"practice",arabic:"يتدرب",unit:"Talent Show",pronunciation:"/ˈpræktɪs/",grade:5,partOfSpeech:"verb",exampleSentence:"You need to practice every day to improve."},{english:"nervous",arabic:"متوتر",unit:"Talent Show",pronunciation:"/ˈnɜːvəs/",grade:5,partOfSpeech:"adjective",exampleSentence:"I feel nervous before performing on stage."},{english:"confident",arabic:"واثق",unit:"Talent Show",pronunciation:"/ˈkɒnfɪdənt/",grade:5,partOfSpeech:"adjective",exampleSentence:"She is confident about her singing abilities."},{english:"past",arabic:"ماضي",unit:"Then and Now",pronunciation:"/pɑːst/",grade:5,partOfSpeech:"noun",exampleSentence:"In the past, people didn't have smartphones."},{english:"present",arabic:"حاضر",unit:"Then and Now",pronunciation:"/ˈpreznt/",grade:5,partOfSpeech:"noun",exampleSentence:"We should focus on the present, not worry about the future."},{english:"change",arabic:"يتغير",unit:"Then and Now",pronunciation:"/tʃeɪndʒ/",grade:5,partOfSpeech:"verb",exampleSentence:"Technology changes very quickly."},{english:"modern",arabic:"حديث",unit:"Then and Now",pronunciation:"/ˈmɒdn/",grade:5,partOfSpeech:"adjective",exampleSentence:"We live in a modern world with advanced technology."},{english:"traditional",arabic:"تقليدي",unit:"Then and Now",pronunciation:"/trəˈdɪʃənl/",grade:5,partOfSpeech:"adjective",exampleSentence:"My grandmother wears traditional clothes."},{english:"history",arabic:"تاريخ",unit:"Then and Now",pronunciation:"/ˈhɪstri/",grade:5,partOfSpeech:"noun",exampleSentence:"I love learning about history."},{english:"adventure",arabic:"مغامرة",unit:"Let's Explore!",pronunciation:"/ədˈventʃə/",grade:5,partOfSpeech:"noun",exampleSentence:"We went on an exciting adventure in the forest."},{english:"explore",arabic:"يستكشف",unit:"Let's Explore!",pronunciation:"/ɪkˈsplɔː/",grade:5,partOfSpeech:"verb",exampleSentence:"Let's explore the mysterious cave together."},{english:"discover",arabic:"يكتشف",unit:"Let's Explore!",pronunciation:"/dɪˈskʌvə/",grade:5,partOfSpeech:"verb",exampleSentence:"Scientists discover new species every year."},{english:"journey",arabic:"رحلة",unit:"Let's Explore!",pronunciation:"/ˈdʒɜːni/",grade:5,partOfSpeech:"noun",exampleSentence:"Our journey to the mountains was unforgettable."},{english:"map",arabic:"خريطة",unit:"Let's Explore!",pronunciation:"/mæp/",grade:5,partOfSpeech:"noun",exampleSentence:"We need a map to find our way."},{english:"compass",arabic:"بوصلة",unit:"Let's Explore!",pronunciation:"/ˈkʌmpəs/",grade:5,partOfSpeech:"noun",exampleSentence:"A compass helps you find direction."},{english:"shopping",arabic:"تسوق",unit:"Off to the Shops",pronunciation:"/ˈʃɒpɪŋ/",grade:5,partOfSpeech:"noun",exampleSentence:"I love going shopping with my friends."},{english:"buy",arabic:"يشتري",unit:"Off to the Shops",pronunciation:"/baɪ/",grade:5,partOfSpeech:"verb",exampleSentence:"I want to buy a new shirt."},{english:"sell",arabic:"يبيع",unit:"Off to the Shops",pronunciation:"/sel/",grade:5,partOfSpeech:"verb",exampleSentence:"They sell fresh fruit at this market."},{english:"price",arabic:"سعر",unit:"Off to the Shops",pronunciation:"/praɪs/",grade:5,partOfSpeech:"noun",exampleSentence:"What's the price of this book?"},{english:"expensive",arabic:"غالي",unit:"Off to the Shops",pronunciation:"/ɪkˈspensɪv/",grade:5,partOfSpeech:"adjective",exampleSentence:"This restaurant is very expensive."},{english:"cheap",arabic:"رخيص",unit:"Off to the Shops",pronunciation:"/tʃiːp/",grade:5,partOfSpeech:"adjective",exampleSentence:"These shoes are cheap and comfortable."},{english:"adventure",arabic:"مغامرة",unit:"Adventure Stories",pronunciation:"/ədˈventʃə/",grade:5,partOfSpeech:"noun",exampleSentence:"We went on an exciting adventure in the forest."},{english:"explore",arabic:"يستكشف",unit:"Adventure Stories",pronunciation:"/ɪkˈsplɔː/",grade:5,partOfSpeech:"verb",exampleSentence:"Let's explore the mysterious cave together."},{english:"treasure",arabic:"كنز",unit:"Adventure Stories",pronunciation:"/ˈtreʒə/",grade:5,partOfSpeech:"noun",exampleSentence:"The pirates buried their treasure on the island."},{english:"discover",arabic:"يكتشف",unit:"Adventure Stories",pronunciation:"/dɪˈskʌvə/",grade:5,partOfSpeech:"verb",exampleSentence:"Scientists discover new species every year."},{english:"journey",arabic:"رحلة",unit:"Adventure Stories",pronunciation:"/ˈdʒɜːni/",grade:5,partOfSpeech:"noun",exampleSentence:"Our journey to the mountains was unforgettable."},{english:"brave",arabic:"شجاع",unit:"Adventure Stories",pronunciation:"/breɪv/",grade:5,partOfSpeech:"adjective",exampleSentence:"The brave knight saved the princess."},{english:"environment",arabic:"بيئة",unit:"Science and Nature",pronunciation:"/ɪnˈvaɪrənmənt/",grade:5,partOfSpeech:"noun",exampleSentence:"We must protect our environment for future generations."},{english:"pollution",arabic:"تلوث",unit:"Science and Nature",pronunciation:"/pəˈluːʃn/",grade:5,partOfSpeech:"noun",exampleSentence:"Air pollution is a serious problem in big cities."},{english:"recycle",arabic:"يعيد التدوير",unit:"Science and Nature",pronunciation:"/riːˈsaɪkl/",grade:5,partOfSpeech:"verb",exampleSentence:"We should recycle plastic bottles and paper."},{english:"experiment",arabic:"تجربة",unit:"Science and Nature",pronunciation:"/ɪkˈsperɪmənt/",grade:5,partOfSpeech:"noun",exampleSentence:"The science experiment was very interesting."},{english:"observe",arabic:"يلاحظ",unit:"Science and Nature",pronunciation:"/əbˈzɜːv/",grade:5,partOfSpeech:"verb",exampleSentence:"Students observe the plants growing in the garden."},{english:"microscope",arabic:"مجهر",unit:"Science and Nature",pronunciation:"/ˈmaɪkrəskəʊp/",grade:5,partOfSpeech:"noun",exampleSentence:"We used a microscope to see tiny organisms."},{english:"technology",arabic:"تكنولوجيا",unit:"Technology and Communication",pronunciation:"/tekˈnɒlədʒi/",grade:5,partOfSpeech:"noun",exampleSentence:"Modern technology makes our lives easier."},{english:"computer",arabic:"حاسوب",unit:"Technology and Communication",pronunciation:"/kəmˈpjuːtə/",grade:5,partOfSpeech:"noun",exampleSentence:"I use my computer to do homework and play games."},{english:"internet",arabic:"إنترنت",unit:"Technology and Communication",pronunciation:"/ˈɪntənet/",grade:5,partOfSpeech:"noun",exampleSentence:"The internet helps us find information quickly."},{english:"communicate",arabic:"يتواصل",unit:"Technology and Communication",pronunciation:"/kəˈmjuːnɪkeɪt/",grade:5,partOfSpeech:"verb",exampleSentence:"We communicate with friends through video calls."},{english:"message",arabic:"رسالة",unit:"Technology and Communication",pronunciation:"/ˈmesɪdʒ/",grade:5,partOfSpeech:"noun",exampleSentence:"She sent me a message on my phone."},{english:"invention",arabic:"اختراع",unit:"Technology and Communication",pronunciation:"/ɪnˈvenʃn/",grade:5,partOfSpeech:"noun",exampleSentence:"The telephone was an important invention."},{english:"exercise",arabic:"تمرين",unit:"Health and Fitness",pronunciation:"/ˈeksəsaɪz/",grade:5,partOfSpeech:"noun",exampleSentence:"Regular exercise keeps us healthy and strong."},{english:"nutrition",arabic:"تغذية",unit:"Health and Fitness",pronunciation:"/njuːˈtrɪʃn/",grade:5,partOfSpeech:"noun",exampleSentence:"Good nutrition is important for growing children."},{english:"vitamin",arabic:"فيتامين",unit:"Health and Fitness",pronunciation:"/ˈvɪtəmɪn/",grade:5,partOfSpeech:"noun",exampleSentence:"Oranges contain vitamin C which is good for health."},{english:"muscle",arabic:"عضلة",unit:"Health and Fitness",pronunciation:"/ˈmʌsl/",grade:5,partOfSpeech:"noun",exampleSentence:"Swimming helps build strong muscles."},{english:"energy",arabic:"طاقة",unit:"Health and Fitness",pronunciation:"/ˈenədʒi/",grade:5,partOfSpeech:"noun",exampleSentence:"Eating breakfast gives us energy for the day."},{english:"balance",arabic:"توازن",unit:"Health and Fitness",pronunciation:"/ˈbæləns/",grade:5,partOfSpeech:"noun",exampleSentence:"Yoga helps improve balance and flexibility."},{english:"community",arabic:"مجتمع",unit:"Community and Culture",pronunciation:"/kəˈmjuːnəti/",grade:5,partOfSpeech:"noun",exampleSentence:"Our community works together to keep the neighborhood clean."},{english:"tradition",arabic:"تقليد",unit:"Community and Culture",pronunciation:"/trəˈdɪʃn/",grade:5,partOfSpeech:"noun",exampleSentence:"It's a family tradition to have dinner together every Sunday."},{english:"celebrate",arabic:"يحتفل",unit:"Community and Culture",pronunciation:"/ˈseləbreɪt/",grade:5,partOfSpeech:"verb",exampleSentence:"We celebrate our national day with fireworks and parades."},{english:"festival",arabic:"مهرجان",unit:"Community and Culture",pronunciation:"/ˈfestɪvl/",grade:5,partOfSpeech:"noun",exampleSentence:"The music festival attracts visitors from around the world."},{english:"volunteer",arabic:"متطوع",unit:"Community and Culture",pronunciation:"/ˌvɒlənˈtɪə/",grade:5,partOfSpeech:"noun",exampleSentence:"Many volunteers help at the local food bank."},{english:"respect",arabic:"احترام",unit:"Community and Culture",pronunciation:"/rɪˈspekt/",grade:5,partOfSpeech:"noun",exampleSentence:"We should show respect for people of all cultures."}],MN=[{title:"الأزمنة المركبة (Present Perfect Tense)",explanation:"نستخدم المضارع التام للتحدث عن أحداث حصلت في الماضي ولها تأثير على الحاضر. نكونه باستخدام have/has + past participle.",examples:["I have visited many countries. - لقد زرت دولاً كثيرة","She has finished her homework. - لقد أنهت واجبها المنزلي","We have lived here for five years. - لقد عشنا هنا لمدة خمس سنوات","They have never seen snow. - لم يروا الثلج قط","He has already eaten lunch. - لقد تناول الغداء بالفعل","Have you ever been to Paris? - هل سبق لك أن ذهبت إلى باريس؟"],unit:"Welcome Back",grade:5},{title:"الجمل الشرطية البسيطة (First Conditional)",explanation:"نستخدم الجملة الشرطية الأولى للتحدث عن احتمالات مستقبلية. التركيب: If + present simple, will + base verb.",examples:["If it rains, we will stay inside. - إذا أمطرت، سنبقى في الداخل","If you study hard, you will pass the exam. - إذا درست بجد، ستنجح في الامتحان","If we recycle, we will help the environment. - إذا أعدنا التدوير، سنساعد البيئة","If she comes early, we will start the meeting. - إذا جاءت مبكراً، سنبدأ الاجتماع","If they practice, they will improve. - إذا تدربوا، سيتحسنون","If you eat vegetables, you will be healthy. - إذا أكلت الخضار، ستكون بصحة جيدة"],unit:"Let's Explore!",grade:5},{title:"المقارنات (Comparative and Superlative)",explanation:"نستخدم المقارنات للمقارنة بين شيئين أو أكثر. للصفات القصيرة نضيف -er/-est، وللطويلة نستخدم more/most.",examples:["This computer is faster than that one. - هذا الحاسوب أسرع من ذلك","She is the smartest student in class. - هي أذكى طالبة في الصف","Technology is more advanced now. - التكنولوجيا أكثر تطوراً الآن","This is the most interesting book. - هذا أكثر الكتب إثارة للاهتمام","Running is better than walking for exercise. - الجري أفضل من المشي للتمرين","This is the healthiest food option. - هذا أصح خيار طعام"],unit:"Off to the Shops",grade:5},{title:"الأفعال المساعدة (Modal Verbs)",explanation:"الأفعال المساعدة مثل can, could, should, must تعبر عن القدرة والإمكانية والنصيحة والضرورة.",examples:["You should exercise regularly. - يجب أن تتمرن بانتظام","We must protect our environment. - يجب أن نحمي بيئتنا","Children can learn languages easily. - يستطيع الأطفال تعلم اللغات بسهولة","Could you help me with this? - هل يمكنك مساعدتي في هذا؟","You might need a jacket today. - قد تحتاج إلى سترة اليوم","We ought to respect our elders. - يجب أن نحترم كبار السن"],unit:"Then and Now",grade:5},{title:"الجمل المعقدة (Complex Sentences)",explanation:"الجمل المعقدة تحتوي على جملة رئيسية وجملة فرعية مرتبطة بأدوات ربط مثل because, although, when, while.",examples:["We celebrate festivals because they bring us together. - نحتفل بالمهرجانات لأنها تجمعنا","Although it was raining, we went to the park. - رغم أنه كان يمطر، ذهبنا إلى الحديقة","When volunteers help, communities become stronger. - عندما يساعد المتطوعون، تصبح المجتمعات أقوى","While technology advances, we must remember traditions. - بينما تتقدم التكنولوجيا، يجب أن نتذكر التقاليد","Since exercise is important, we should do it daily. - بما أن التمرين مهم، يجب أن نمارسه يومياً","Before we start the experiment, we need safety equipment. - قبل أن نبدأ التجربة، نحتاج معدات السلامة"],unit:"Community and Culture",grade:5},{title:"أزمنة المضارع (Present Tenses)",explanation:"نستخدم المضارع البسيط للعادات والحقائق، والمضارع المستمر للأحداث الجارية الآن.",examples:["She sings in the talent show every year. - تغني في عرض المواهب كل عام","He is singing on stage right now. - هو يغني على المسرح الآن","They practice their performance every day. - يتدربون على أدائهم كل يوم","We are practicing our dance for the show. - نحن نتدرب على رقصتنا للعرض","The audience always claps after a good performance. - يصفق الجمهور دائماً بعد الأداء الجيد","Look! The audience is clapping for her. - انظر! الجمهور يصفق لها"],unit:"Talent Show",grade:5}],RN=[{question:"I _____ never been to London.",options:["have","has","had","having"],correct:0,explanation:"نستخدم 'have' مع I في المضارع التام",unit:"Welcome Back",grade:5},{question:"If we _____ the environment, future generations will benefit.",options:["protect","will protect","protected","protecting"],correct:0,explanation:"في الجملة الشرطية الأولى، نستخدم المضارع البسيط بعد if",unit:"Let's Explore!",grade:5},{question:"This smartphone is _____ than my old phone.",options:["more fast","faster","most fast","fastest"],correct:1,explanation:"fast صفة قصيرة، نضيف -er للمقارنة",unit:"Off to the Shops",grade:5},{question:"You _____ eat more vegetables to stay healthy.",options:["can","should","might","could"],correct:1,explanation:"should تعبر عن النصيحة",unit:"Then and Now",grade:5},{question:"_____ it was cold, we enjoyed the festival.",options:["Because","Although","When","If"],correct:1,explanation:"Although تعبر عن التناقض",unit:"Community and Culture",grade:5},{question:"What does 'adventure' mean in Arabic?",options:["رحلة","مغامرة","كنز","اكتشاف"],correct:1,explanation:"adventure تعني مغامرة",unit:"Adventure Stories",grade:5},{question:"We use a _____ to see very small things.",options:["telescope","microscope","computer","camera"],correct:1,explanation:"المجهر (microscope) يستخدم لرؤية الأشياء الصغيرة جداً",unit:"Science and Nature",grade:5},{question:"The _____ helps us find information quickly.",options:["television","radio","internet","newspaper"],correct:2,explanation:"الإنترنت يساعدنا في العثور على المعلومات بسرعة",unit:"Technology and Communication",grade:5},{question:"Regular _____ keeps us healthy and strong.",options:["sleeping","eating","exercise","reading"],correct:2,explanation:"التمرين المنتظم يحافظ على صحتنا وقوتنا",unit:"Health and Fitness",grade:5},{question:"A _____ is someone who helps others without payment.",options:["teacher","volunteer","doctor","student"],correct:1,explanation:"المتطوع هو شخص يساعد الآخرين دون مقابل",unit:"Community and Culture",grade:5},{question:"She _____ in the talent show next week.",options:["performs","is performing","performed","has performed"],correct:1,explanation:"نستخدم المضارع المستمر (is performing) للتعبير عن حدث مخطط له في المستقبل القريب",unit:"Talent Show",grade:5},{question:"What does 'talent' mean in Arabic?",options:["عرض","مسرح","موهبة","جمهور"],correct:2,explanation:"talent تعني موهبة",unit:"Talent Show",grade:5}],DN=[{english:"energetic",arabic:"نشيط",unit:"The WOW! Team",pronunciation:"/ˌenəˈdʒetɪk/",grade:6,partOfSpeech:"adjective",exampleSentence:"She is very energetic and loves to play sports."},{english:"fun",arabic:"مرح",unit:"The WOW! Team",pronunciation:"/fʌn/",grade:6,partOfSpeech:"adjective",exampleSentence:"The party was really fun and exciting."},{english:"pretty",arabic:"جميل",unit:"The WOW! Team",pronunciation:"/ˈprɪti/",grade:6,partOfSpeech:"adjective",exampleSentence:"She has a pretty smile."},{english:"kind",arabic:"لطيف",unit:"The WOW! Team",pronunciation:"/kaɪnd/",grade:6,partOfSpeech:"adjective",exampleSentence:"He is very kind to animals."},{english:"brave",arabic:"شجاع",unit:"The WOW! Team",pronunciation:"/breɪv/",grade:6,partOfSpeech:"adjective",exampleSentence:"The brave firefighter saved the cat."},{english:"clever",arabic:"ذكي",unit:"The WOW! Team",pronunciation:"/ˈklevə/",grade:6,partOfSpeech:"adjective",exampleSentence:"She is clever at solving puzzles."},{english:"height",arabic:"طول",unit:"The WOW! Team",pronunciation:"/haɪt/",grade:6,partOfSpeech:"noun",exampleSentence:"What is your height?"},{english:"chatty",arabic:"كثير الكلام",unit:"The WOW! Team",pronunciation:"/ˈtʃæti/",grade:6,partOfSpeech:"adjective",exampleSentence:"My sister is very chatty in the morning."},{english:"friendly",arabic:"ودود",unit:"The WOW! Team",pronunciation:"/ˈfrendli/",grade:6,partOfSpeech:"adjective",exampleSentence:"The new student is friendly and helpful."},{english:"handsome",arabic:"وسيم",unit:"The WOW! Team",pronunciation:"/ˈhænsəm/",grade:6,partOfSpeech:"adjective",exampleSentence:"He is a handsome young man."},{english:"creative",arabic:"مبدع",unit:"The WOW! Team",pronunciation:"/kriˈeɪtɪv/",grade:6,partOfSpeech:"adjective",exampleSentence:"She is creative and loves to paint."},{english:"tall",arabic:"طويل",unit:"The WOW! Team",pronunciation:"/tɔːl/",grade:6,partOfSpeech:"adjective",exampleSentence:"The basketball player is very tall."},{english:"skiing",arabic:"التزلج",unit:"Free-time fun",pronunciation:"/ˈskiːɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"I love skiing in the mountains."},{english:"swimming",arabic:"السباحة",unit:"Free-time fun",pronunciation:"/ˈswɪmɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"Swimming is good exercise."},{english:"skating",arabic:"التزلج على الجليد",unit:"Free-time fun",pronunciation:"/ˈskeɪtɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"Ice skating is fun in winter."},{english:"cycling",arabic:"ركوب الدراجة",unit:"Free-time fun",pronunciation:"/ˈsaɪklɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"Cycling is good for your health."},{english:"scooting",arabic:"ركوب السكوتر",unit:"Free-time fun",pronunciation:"/ˈskuːtɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"Scooting to school is faster than walking."},{english:"volleyball",arabic:"كرة الطائرة",unit:"Free-time fun",pronunciation:"/ˈvɒlibɔːl/",grade:6,partOfSpeech:"noun",exampleSentence:"We play volleyball at the beach."},{english:"hockey",arabic:"الهوكي",unit:"Free-time fun",pronunciation:"/ˈhɒki/",grade:6,partOfSpeech:"noun",exampleSentence:"Hockey is popular in Canada."},{english:"badminton",arabic:"الريشة الطائرة",unit:"Free-time fun",pronunciation:"/ˈbædmɪntən/",grade:6,partOfSpeech:"noun",exampleSentence:"Badminton requires quick reflexes."},{english:"karate",arabic:"الكاراتيه",unit:"Free-time fun",pronunciation:"/kəˈrɑːti/",grade:6,partOfSpeech:"noun",exampleSentence:"He practices karate every evening."},{english:"gymnastics",arabic:"الجمباز",unit:"Free-time fun",pronunciation:"/dʒɪmˈnæstɪks/",grade:6,partOfSpeech:"noun",exampleSentence:"Gymnastics requires flexibility and strength."},{english:"athletics",arabic:"ألعاب القوى",unit:"Free-time fun",pronunciation:"/æθˈletɪks/",grade:6,partOfSpeech:"noun",exampleSentence:"Athletics includes running and jumping."},{english:"photography",arabic:"التصوير",unit:"Free-time fun",pronunciation:"/fəˈtɒɡrəfi/",grade:6,partOfSpeech:"noun",exampleSentence:"Photography is my favorite hobby."},{english:"puzzles",arabic:"الألغاز",unit:"Free-time fun",pronunciation:"/ˈpʌzlz/",grade:6,partOfSpeech:"noun",exampleSentence:"I enjoy solving puzzles in my free time."},{english:"gardening",arabic:"البستنة",unit:"Free-time fun",pronunciation:"/ˈɡɑːdnɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"Gardening helps me relax."},{english:"board games",arabic:"ألعاب الطاولة",unit:"Free-time fun",pronunciation:"/bɔːd ɡeɪmz/",grade:6,partOfSpeech:"noun",exampleSentence:"We play board games on rainy days."},{english:"shows",arabic:"عروض",unit:"Free-time fun",pronunciation:"/ʃəʊz/",grade:6,partOfSpeech:"noun",exampleSentence:"The children put on shows for their parents."},{english:"video games",arabic:"ألعاب الفيديو",unit:"Free-time fun",pronunciation:"/ˈvɪdiəʊ ɡeɪmz/",grade:6,partOfSpeech:"noun",exampleSentence:"Video games can be educational and fun."},{english:"instruments",arabic:"آلات موسيقية",unit:"Free-time fun",pronunciation:"/ˈɪnstrəmənts/",grade:6,partOfSpeech:"noun",exampleSentence:"She plays several musical instruments."},{english:"models",arabic:"نماذج",unit:"Free-time fun",pronunciation:"/ˈmɒdlz/",grade:6,partOfSpeech:"noun",exampleSentence:"He likes making model airplanes."},{english:"videos",arabic:"فيديوهات",unit:"Free-time fun",pronunciation:"/ˈvɪdiəʊz/",grade:6,partOfSpeech:"noun",exampleSentence:"They make funny videos for their friends."},{english:"cards",arabic:"البطاقات",unit:"Free-time fun",pronunciation:"/kɑːdz/",grade:6,partOfSpeech:"noun",exampleSentence:"He collects baseball cards."},{english:"cartoons",arabic:"الرسوم المتحركة",unit:"Free-time fun",pronunciation:"/kɑːˈtuːnz/",grade:6,partOfSpeech:"noun",exampleSentence:"Children love watching cartoons on TV."},{english:"diary",arabic:"مذكرات",unit:"Free-time fun",pronunciation:"/ˈdaɪəri/",grade:6,partOfSpeech:"noun",exampleSentence:"She writes in her diary every night."},{english:"password",arabic:"كلمة المرور",unit:"Technology",pronunciation:"/ˈpɑːswɜːd/",grade:6,partOfSpeech:"noun",exampleSentence:"Don't share your password with anyone."},{english:"app",arabic:"تطبيق",unit:"Technology",pronunciation:"/æp/",grade:6,partOfSpeech:"noun",exampleSentence:"This app helps me learn new languages."},{english:"laptop",arabic:"حاسوب محمول",unit:"Technology",pronunciation:"/ˈlæptɒp/",grade:6,partOfSpeech:"noun",exampleSentence:"I use my laptop for schoolwork."},{english:"camera",arabic:"كاميرا",unit:"Technology",pronunciation:"/ˈkæmərə/",grade:6,partOfSpeech:"noun",exampleSentence:"The digital camera takes clear photos."},{english:"headphones",arabic:"سماعات رأس",unit:"Technology",pronunciation:"/ˈhedfəʊnz/",grade:6,partOfSpeech:"noun",exampleSentence:"I use headphones to listen to music."},{english:"speaker",arabic:"مكبر صوت",unit:"Technology",pronunciation:"/ˈspiːkə/",grade:6,partOfSpeech:"noun",exampleSentence:"The speaker is very loud and clear."},{english:"smartphone",arabic:"هاتف ذكي",unit:"Technology",pronunciation:"/ˈsmɑːtfəʊn/",grade:6,partOfSpeech:"noun",exampleSentence:"My smartphone has many useful features."},{english:"website",arabic:"موقع إلكتروني",unit:"Technology",pronunciation:"/ˈwebsaɪt/",grade:6,partOfSpeech:"noun",exampleSentence:"This website has lots of educational games."},{english:"reader",arabic:"قارئ إلكتروني",unit:"Technology",pronunciation:"/ˈriːdə/",grade:6,partOfSpeech:"noun",exampleSentence:"An e-reader can store thousands of books."},{english:"screen",arabic:"شاشة",unit:"Technology",pronunciation:"/skriːn/",grade:6,partOfSpeech:"noun",exampleSentence:"The computer screen is very bright."},{english:"printer",arabic:"طابعة",unit:"Technology",pronunciation:"/ˈprɪntə/",grade:6,partOfSpeech:"noun",exampleSentence:"The printer is out of paper."},{english:"devices",arabic:"أجهزة",unit:"Technology",pronunciation:"/dɪˈvaɪsɪz/",grade:6,partOfSpeech:"noun",exampleSentence:"Modern devices make life easier."},{english:"online",arabic:"متصل بالإنترنت",unit:"Technology",pronunciation:"/ˈɒnlaɪn/",grade:6,partOfSpeech:"adjective",exampleSentence:"I go online to research my homework."},{english:"upload",arabic:"رفع",unit:"Technology",pronunciation:"/ˌʌpˈləʊd/",grade:6,partOfSpeech:"verb",exampleSentence:"I upload photos to share with friends."},{english:"download",arabic:"تنزيل",unit:"Technology",pronunciation:"/ˌdaʊnˈləʊd/",grade:6,partOfSpeech:"verb",exampleSentence:"You can download the app for free."},{english:"search",arabic:"بحث",unit:"Technology",pronunciation:"/sɜːtʃ/",grade:6,partOfSpeech:"verb",exampleSentence:"I search the internet for information."},{english:"press",arabic:"ضغط",unit:"Technology",pronunciation:"/pres/",grade:6,partOfSpeech:"verb",exampleSentence:"Press the button to start the machine."},{english:"click",arabic:"نقر",unit:"Technology",pronunciation:"/klɪk/",grade:6,partOfSpeech:"verb",exampleSentence:"Click on the icon to open the program."},{english:"message",arabic:"رسالة",unit:"Technology",pronunciation:"/ˈmesɪdʒ/",grade:6,partOfSpeech:"noun",exampleSentence:"I send a message to my friend every day."},{english:"selfie",arabic:"صورة ذاتية",unit:"Technology",pronunciation:"/ˈselfi/",grade:6,partOfSpeech:"noun",exampleSentence:"She takes a selfie with her friends."},{english:"castle",arabic:"قلعة",unit:"Places",pronunciation:"/ˈkɑːsl/",grade:6,partOfSpeech:"noun",exampleSentence:"The old castle has many towers."},{english:"harbour",arabic:"ميناء",unit:"Places",pronunciation:"/ˈhɑːbə/",grade:6,partOfSpeech:"noun",exampleSentence:"Ships dock at the harbour."},{english:"stadium",arabic:"ملعب",unit:"Places",pronunciation:"/ˈsteɪdiəm/",grade:6,partOfSpeech:"noun",exampleSentence:"The football stadium holds 50,000 people."},{english:"tower",arabic:"برج",unit:"Places",pronunciation:"/ˈtaʊə/",grade:6,partOfSpeech:"noun",exampleSentence:"The tower is 100 meters tall."},{english:"skyscraper",arabic:"ناطحة سحاب",unit:"Places",pronunciation:"/ˈskaɪskreɪpə/",grade:6,partOfSpeech:"noun",exampleSentence:"The skyscraper has 80 floors."},{english:"factory",arabic:"مصنع",unit:"Places",pronunciation:"/ˈfæktri/",grade:6,partOfSpeech:"noun",exampleSentence:"The factory produces cars."},{english:"hospital",arabic:"مستشفى",unit:"Places",pronunciation:"/ˈhɒspɪtl/",grade:6,partOfSpeech:"noun",exampleSentence:"The hospital has excellent doctors."},{english:"palace",arabic:"قصر",unit:"Places",pronunciation:"/ˈpæləs/",grade:6,partOfSpeech:"noun",exampleSentence:"The royal palace is very beautiful."},{english:"pool",arabic:"حمام سباحة",unit:"Places",pronunciation:"/puːl/",grade:6,partOfSpeech:"noun",exampleSentence:"The swimming pool is open all day."},{english:"centre",arabic:"مركز",unit:"Places",pronunciation:"/ˈsentə/",grade:6,partOfSpeech:"noun",exampleSentence:"The sports centre has a gym and pool."},{english:"building",arabic:"مبنى",unit:"Places",pronunciation:"/ˈbɪldɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"The office building is very modern."},{english:"apartment",arabic:"شقة",unit:"Places",pronunciation:"/əˈpɑːtmənt/",grade:6,partOfSpeech:"noun",exampleSentence:"They live in a small apartment."},{english:"ceiling",arabic:"سقف",unit:"Places",pronunciation:"/ˈsiːlɪŋ/",grade:6,partOfSpeech:"noun",exampleSentence:"The ceiling is painted white."},{english:"floor",arabic:"أرضية",unit:"Places",pronunciation:"/flɔː/",grade:6,partOfSpeech:"noun",exampleSentence:"The floor is made of wood."},{english:"wall",arabic:"جدار",unit:"Places",pronunciation:"/wɔːl/",grade:6,partOfSpeech:"noun",exampleSentence:"The wall is painted blue."},{english:"roof",arabic:"سطح",unit:"Places",pronunciation:"/ruːf/",grade:6,partOfSpeech:"noun",exampleSentence:"The roof protects us from rain."},{english:"corner",arabic:"زاوية",unit:"Places",pronunciation:"/ˈkɔːnə/",grade:6,partOfSpeech:"noun",exampleSentence:"Put the chair in the corner."},{english:"corridor",arabic:"ممر",unit:"Places",pronunciation:"/ˈkɒrɪdɔː/",grade:6,partOfSpeech:"noun",exampleSentence:"Walk down the corridor to find the exit."},{english:"stairs",arabic:"درج",unit:"Places",pronunciation:"/steəz/",grade:6,partOfSpeech:"noun",exampleSentence:"Take the stairs to the second floor."},{english:"steps",arabic:"درجات",unit:"Places",pronunciation:"/steps/",grade:6,partOfSpeech:"noun",exampleSentence:"There are ten steps to the door."},{english:"lift",arabic:"مصعد",unit:"Places",pronunciation:"/lɪft/",grade:6,partOfSpeech:"noun",exampleSentence:"Take the lift to the top floor."},{english:"escalator",arabic:"سلم متحرك",unit:"Places",pronunciation:"/ˈeskəleɪtə/",grade:6,partOfSpeech:"noun",exampleSentence:"The escalator goes up and down."},{english:"entrance",arabic:"مدخل",unit:"Places",pronunciation:"/ˈentrəns/",grade:6,partOfSpeech:"noun",exampleSentence:"The main entrance is on the left."},{english:"exit",arabic:"مخرج",unit:"Places",pronunciation:"/ˈeksɪt/",grade:6,partOfSpeech:"noun",exampleSentence:"The emergency exit is clearly marked."},{english:"college",arabic:"كلية",unit:"Places",pronunciation:"/ˈkɒlɪdʒ/",grade:6,partOfSpeech:"noun",exampleSentence:"She studies at the local college."},{english:"airport",arabic:"مطار",unit:"Places",pronunciation:"/ˈeəpɔːt/",grade:6,partOfSpeech:"noun",exampleSentence:"The airport is very busy today."},{english:"bridge",arabic:"جسر",unit:"Places",pronunciation:"/brɪdʒ/",grade:6,partOfSpeech:"noun",exampleSentence:"The bridge crosses the river."},{english:"station",arabic:"محطة",unit:"Places",pronunciation:"/ˈsteɪʃn/",grade:6,partOfSpeech:"noun",exampleSentence:"The fire station is near the school."},{english:"theatre",arabic:"مسرح",unit:"Places",pronunciation:"/ˈθɪətə/",grade:6,partOfSpeech:"noun",exampleSentence:"We watched a play at the theatre."},{english:"office",arabic:"مكتب",unit:"Places",pronunciation:"/ˈɒfɪs/",grade:6,partOfSpeech:"noun",exampleSentence:"My father works in an office."},{english:"square",arabic:"ساحة",unit:"Places",pronunciation:"/skweə/",grade:6,partOfSpeech:"noun",exampleSentence:"The town square has a fountain."}],$N=[{title:"Present simple",explanation:"نستخدم المضارع البسيط للتعبير عن الحقائق والعادات والأنشطة المتكررة",examples:["I think I'm quite clever because I'm good at Maths and Science.","She plays volleyball every weekend.","They don't like doing puzzles.","Do you collect cards?"],unit:"The WOW! Team",grade:6},{title:"Present simple vs Present continuous",explanation:"نستخدم المضارع البسيط للعادات والأنشطة المتكررة، ونستخدم المضارع المستمر للأنشطة التي تحدث الآن",examples:["I do karate every Monday. (عادة متكررة)","Look! I'm doing it now. (يحدث الآن)","She plays the piano on Tuesdays. (عادة متكررة)","She's playing the piano right now. (يحدث الآن)"],unit:"Free-time fun",grade:6},{title:"State verbs",explanation:"أفعال الحالة هي أفعال لا تستخدم عادة في الزمن المستمر لأنها تعبر عن حالات وليس أفعال",examples:["He doesn't like doing photography.","Do you know this song?","I understand the rules.","She loves playing the piano."],unit:"Free-time fun",grade:6},{title:"could/couldn't",explanation:"نستخدم could/couldn't للتعبير عن القدرة في الماضي",examples:["We couldn't use the computers.","She could play the piano when she was five.","Could you ride a bike when you were four?","I couldn't speak English when I was young."],unit:"Technology",grade:6},{title:"had to/didn't have to",explanation:"نستخدم had to للتعبير عن الضرورة في الماضي، و didn't have to للتعبير عن عدم الضرورة في الماضي",examples:["She had to use a pen.","They had to wait for the bus.","I didn't have to do my homework yesterday.","Did you have to go to school on Saturday?"],unit:"Technology",grade:6},{title:"Comparative adverbs",explanation:"نستخدم الظروف المقارنة للمقارنة بين طريقة أداء الأفعال",examples:["I can play the piano better than you.","She runs faster than her brother.","He speaks more quietly than his friend.","They work harder than we do."],unit:"Technology",grade:6},{title:"Relative pronouns",explanation:"نستخدم ضمائر الوصل لربط الجمل وإعطاء معلومات إضافية",examples:["He's the doctor who she saw in the hospital.","A stadium is the place where you can watch sports matches.","What's the book that/which you want to read?","I remember the time when you went to hospital."],unit:"Places",grade:6},{title:"Past continuous",explanation:"نستخدم الماضي المستمر للتعبير عن أحداث كانت مستمرة في وقت معين في الماضي",examples:["She was playing in the garden when it started to rain.","They were watching TV when I called.","What were you doing at 7 o'clock yesterday?","I wasn't sleeping when you sent the message."],unit:"Places",grade:6},{title:"Imperatives",explanation:"نستخدم صيغة الأمر لإعطاء التعليمات والتوجيهات",examples:["Go through the door.","Take the first right.","Don't turn left at the traffic lights.","Walk straight ahead."],unit:"Places",grade:6}],LN=[{question:"I think I'm quite _____ because I'm good at Maths and Science.",options:["energetic","clever","pretty","kind"],correct:1,explanation:"نستخدم كلمة clever للتعبير عن الذكاء والقدرة على التعلم بسرعة",unit:"The WOW! Team",grade:6},{question:"Look! She _____ a selfie right now.",options:["takes","is taking","take","taking"],correct:1,explanation:"نستخدم المضارع المستمر (is taking) للتعبير عن فعل يحدث الآن",unit:"Free-time fun",grade:6},{question:"He _____ like doing photography.",options:["don't","doesn't","isn't","aren't"],correct:1,explanation:"نستخدم doesn't مع ضمير الغائب المفرد (he) في النفي في المضارع البسيط",unit:"Free-time fun",grade:6},{question:"When I was young, I _____ use a computer.",options:["can't","couldn't","didn't can","don't can"],correct:1,explanation:"نستخدم couldn't للتعبير عن عدم القدرة في الماضي",unit:"Technology",grade:6},{question:"Yesterday, she _____ use her sister's laptop.",options:["has to","have to","had to","having to"],correct:2,explanation:"نستخدم had to للتعبير عن الضرورة في الماضي",unit:"Technology",grade:6},{question:"My brother plays the guitar _____ than me.",options:["good","better","best","well"],correct:1,explanation:"نستخدم better كظرف مقارنة من good/well",unit:"Technology",grade:6},{question:"A stadium is the place _____ you can watch sports matches.",options:["who","which","where","when"],correct:2,explanation:"نستخدم where للإشارة إلى المكان في جمل الوصل",unit:"Places",grade:6},{question:"She _____ playing in the garden when it started to rain.",options:["is","was","were","are"],correct:1,explanation:"نستخدم was مع ضمائر المفرد (she) في الماضي المستمر",unit:"Places",grade:6},{question:"_____ through the door and take the first right.",options:["Going","Go","Goes","Went"],correct:1,explanation:"نستخدم صيغة الأمر (Go) لإعطاء التوجيهات",unit:"Places",grade:6},{question:"He's the doctor _____ she saw in the hospital.",options:["who","which","where","when"],correct:0,explanation:"نستخدم who للإشارة إلى الأشخاص في جمل الوصل",unit:"Places",grade:6}],FN=[{english:"global",arabic:"عالمي",unit:"Global Citizens",pronunciation:"/ˈɡləʊbl/",grade:9,partOfSpeech:"adjective",exampleSentence:"Climate change is a global issue."},{english:"citizen",arabic:"مواطن",unit:"Global Citizens",pronunciation:"/ˈsɪtɪzn/",grade:9,partOfSpeech:"noun",exampleSentence:"Every citizen has rights and responsibilities."},{english:"responsibility",arabic:"مسؤولية",unit:"Global Citizens",pronunciation:"/rɪˌspɒnsəˈbɪləti/",grade:9,partOfSpeech:"noun",exampleSentence:"It's our responsibility to protect the environment."},{english:"volunteer",arabic:"متطوع",unit:"Global Citizens",pronunciation:"/ˌvɒlənˈtɪə/",grade:9,partOfSpeech:"noun",exampleSentence:"She works as a volunteer at the local hospital."},{english:"community",arabic:"مجتمع",unit:"Global Citizens",pronunciation:"/kəˈmjuːnəti/",grade:9,partOfSpeech:"noun",exampleSentence:"We need to help our local community."},{english:"environment",arabic:"بيئة",unit:"Global Citizens",pronunciation:"/ɪnˈvaɪrənmənt/",grade:9,partOfSpeech:"noun",exampleSentence:"We must protect our environment for future generations."},{english:"sustainable",arabic:"مستدام",unit:"Global Citizens",pronunciation:"/səˈsteɪnəbl/",grade:9,partOfSpeech:"adjective",exampleSentence:"We need to find sustainable solutions to environmental problems."},{english:"recycle",arabic:"إعادة تدوير",unit:"Global Citizens",pronunciation:"/ˌriːˈsaɪkl/",grade:9,partOfSpeech:"verb",exampleSentence:"It's important to recycle paper, plastic, and glass."},{english:"technology",arabic:"تكنولوجيا",unit:"Technology Today",pronunciation:"/tekˈnɒlədʒi/",grade:9,partOfSpeech:"noun",exampleSentence:"Modern technology has changed the way we live."},{english:"innovation",arabic:"ابتكار",unit:"Technology Today",pronunciation:"/ˌɪnəˈveɪʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"This company is known for its innovation in smartphone design."},{english:"artificial intelligence",arabic:"ذكاء اصطناعي",unit:"Technology Today",pronunciation:"/ˌɑːtɪfɪʃl ɪnˈtelɪdʒəns/",grade:9,partOfSpeech:"noun",exampleSentence:"Artificial intelligence is changing many industries."},{english:"virtual reality",arabic:"واقع افتراضي",unit:"Technology Today",pronunciation:"/ˌvɜːtʃuəl riˈæləti/",grade:9,partOfSpeech:"noun",exampleSentence:"Virtual reality games are becoming more realistic."},{english:"social media",arabic:"وسائل التواصل الاجتماعي",unit:"Technology Today",pronunciation:"/ˌsəʊʃl ˈmiːdiə/",grade:9,partOfSpeech:"noun",exampleSentence:"Many teenagers spend hours on social media every day."},{english:"digital",arabic:"رقمي",unit:"Technology Today",pronunciation:"/ˈdɪdʒɪtl/",grade:9,partOfSpeech:"adjective",exampleSentence:"We live in a digital age."},{english:"cybersecurity",arabic:"أمن سيبراني",unit:"Technology Today",pronunciation:"/ˌsaɪbəsɪˈkjʊərəti/",grade:9,partOfSpeech:"noun",exampleSentence:"Cybersecurity is important to protect our personal information online."},{english:"algorithm",arabic:"خوارزمية",unit:"Technology Today",pronunciation:"/ˈælɡərɪðəm/",grade:9,partOfSpeech:"noun",exampleSentence:"Search engines use complex algorithms to find information."},{english:"nutrition",arabic:"تغذية",unit:"Health and Fitness",pronunciation:"/njuːˈtrɪʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"Good nutrition is essential for health."},{english:"exercise",arabic:"تمرين",unit:"Health and Fitness",pronunciation:"/ˈeksəsaɪz/",grade:9,partOfSpeech:"noun",exampleSentence:"Regular exercise helps keep you healthy."},{english:"balanced diet",arabic:"نظام غذائي متوازن",unit:"Health and Fitness",pronunciation:"/ˌbælənst ˈdaɪət/",grade:9,partOfSpeech:"noun",exampleSentence:"A balanced diet includes fruits, vegetables, and protein."},{english:"mental health",arabic:"صحة نفسية",unit:"Health and Fitness",pronunciation:"/ˌmentl ˈhelθ/",grade:9,partOfSpeech:"noun",exampleSentence:"Mental health is as important as physical health."},{english:"wellbeing",arabic:"رفاهية",unit:"Health and Fitness",pronunciation:"/ˌwelˈbiːɪŋ/",grade:9,partOfSpeech:"noun",exampleSentence:"The program focuses on student wellbeing."},{english:"lifestyle",arabic:"نمط حياة",unit:"Health and Fitness",pronunciation:"/ˈlaɪfstaɪl/",grade:9,partOfSpeech:"noun",exampleSentence:"A healthy lifestyle includes good sleep habits."},{english:"hydration",arabic:"ترطيب",unit:"Health and Fitness",pronunciation:"/haɪˈdreɪʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"Proper hydration is important during exercise."},{english:"mindfulness",arabic:"اليقظة الذهنية",unit:"Health and Fitness",pronunciation:"/ˈmaɪndfəlnəs/",grade:9,partOfSpeech:"noun",exampleSentence:"Mindfulness practices can reduce stress."},{english:"career",arabic:"مهنة",unit:"Career Paths",pronunciation:"/kəˈrɪə/",grade:9,partOfSpeech:"noun",exampleSentence:"She has had a successful career in medicine."},{english:"profession",arabic:"مهنة",unit:"Career Paths",pronunciation:"/prəˈfeʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"Teaching is a rewarding profession."},{english:"qualification",arabic:"مؤهل",unit:"Career Paths",pronunciation:"/ˌkwɒlɪfɪˈkeɪʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"You need specific qualifications for this job."},{english:"resume",arabic:"سيرة ذاتية",unit:"Career Paths",pronunciation:"/ˈrezjuːmeɪ/",grade:9,partOfSpeech:"noun",exampleSentence:"I updated my resume before applying for the job."},{english:"interview",arabic:"مقابلة",unit:"Career Paths",pronunciation:"/ˈɪntəvjuː/",grade:9,partOfSpeech:"noun",exampleSentence:"I have a job interview tomorrow."},{english:"skill",arabic:"مهارة",unit:"Career Paths",pronunciation:"/skɪl/",grade:9,partOfSpeech:"noun",exampleSentence:"Communication is an important skill in any job."},{english:"experience",arabic:"خبرة",unit:"Career Paths",pronunciation:"/ɪkˈspɪəriəns/",grade:9,partOfSpeech:"noun",exampleSentence:"She has five years of experience in marketing."},{english:"internship",arabic:"تدريب عملي",unit:"Career Paths",pronunciation:"/ˈɪntɜːnʃɪp/",grade:9,partOfSpeech:"noun",exampleSentence:"The internship gave me valuable work experience."},{english:"culture",arabic:"ثقافة",unit:"Cultural Exchange",pronunciation:"/ˈkʌltʃə/",grade:9,partOfSpeech:"noun",exampleSentence:"Every country has its own unique culture."},{english:"tradition",arabic:"تقليد",unit:"Cultural Exchange",pronunciation:"/trəˈdɪʃn/",grade:9,partOfSpeech:"noun",exampleSentence:"This festival is an important tradition in our country."},{english:"diversity",arabic:"تنوع",unit:"Cultural Exchange",pronunciation:"/daɪˈvɜːsəti/",grade:9,partOfSpeech:"noun",exampleSentence:"Cultural diversity makes our society stronger."},{english:"heritage",arabic:"تراث",unit:"Cultural Exchange",pronunciation:"/ˈherɪtɪdʒ/",grade:9,partOfSpeech:"noun",exampleSentence:"We should preserve our cultural heritage."},{english:"customs",arabic:"عادات",unit:"Cultural Exchange",pronunciation:"/ˈkʌstəmz/",grade:9,partOfSpeech:"noun",exampleSentence:"Different countries have different customs and traditions."},{english:"exchange",arabic:"تبادل",unit:"Cultural Exchange",pronunciation:"/ɪksˈtʃeɪndʒ/",grade:9,partOfSpeech:"noun",exampleSentence:"The cultural exchange program helped students learn about other countries."},{english:"identity",arabic:"هوية",unit:"Cultural Exchange",pronunciation:"/aɪˈdentəti/",grade:9,partOfSpeech:"noun",exampleSentence:"Language is an important part of cultural identity."},{english:"perspective",arabic:"وجهة نظر",unit:"Cultural Exchange",pronunciation:"/pəˈspektɪv/",grade:9,partOfSpeech:"noun",exampleSentence:"Traveling gives you a new perspective on the world."}],zN=[{title:"Present Perfect Continuous",explanation:"نستخدم المضارع التام المستمر للتعبير عن أحداث بدأت في الماضي واستمرت حتى الوقت الحاضر، مع التركيز على استمرارية الحدث.",examples:["I have been studying English for five years.","She has been working on this project since January.","They have been living in Oman for ten years.","How long have you been waiting here?"],unit:"Global Citizens",grade:9},{title:"Past Perfect",explanation:"نستخدم الماضي التام للتعبير عن حدث وقع قبل حدث آخر في الماضي.",examples:["By the time I arrived, the meeting had already started.","She had finished her homework before dinner.","They had never seen such a beautiful place before they visited Oman.","I realized that I had forgotten my passport at home."],unit:"Technology Today",grade:9},{title:"Conditionals (First, Second, and Third)",explanation:"نستخدم الجمل الشرطية للتعبير عن مواقف محتملة أو غير محتملة أو مستحيلة.",examples:["If it rains tomorrow, we will cancel the picnic. (First conditional - حالة محتملة في المستقبل)","If I had more time, I would learn another language. (Second conditional - حالة غير محتملة في الحاضر)","If she had studied harder, she would have passed the exam. (Third conditional - حالة مستحيلة في الماضي)","What would you do if you won the lottery? (Second conditional)"],unit:"Career Paths",grade:9},{title:"Reported Speech",explanation:"نستخدم الكلام المنقول لنقل ما قاله شخص ما دون استخدام كلماته الدقيقة.",examples:['Direct: "I am tired." → Reported: He said (that) he was tired.','Direct: "I will call you tomorrow." → Reported: She said (that) she would call me the next day.','Direct: "Have you finished your homework?" → Reported: He asked me if I had finished my homework.',`Direct: "Don't touch that!" → Reported: She told me not to touch that.`],unit:"Cultural Exchange",grade:9},{title:"Passive Voice",explanation:"نستخدم المبني للمجهول عندما يكون التركيز على الحدث أكثر من الفاعل، أو عندما لا نعرف من هو الفاعل.",examples:["Active: People speak English all over the world. → Passive: English is spoken all over the world.","Active: Someone stole my bike. → Passive: My bike was stolen.","Active: They will announce the results tomorrow. → Passive: The results will be announced tomorrow.","Active: They have built a new hospital. → Passive: A new hospital has been built."],unit:"Health and Fitness",grade:9}],UN=[{question:"She _____ in this company for five years.",options:["works","is working","has been working","worked"],correct:2,explanation:"نستخدم المضارع التام المستمر (has been working) للتعبير عن حدث بدأ في الماضي واستمر حتى الوقت الحاضر",unit:"Global Citizens",grade:9},{question:"By the time we arrived at the cinema, the film _____.",options:["started","has started","had started","was starting"],correct:2,explanation:"نستخدم الماضي التام (had started) للتعبير عن حدث وقع قبل حدث آخر في الماضي",unit:"Technology Today",grade:9},{question:"If I _____ more time, I would learn another language.",options:["have","had","will have","would have"],correct:1,explanation:"نستخدم 'had' في الجملة الشرطية الثانية (Second conditional) للتعبير عن حالة غير محتملة في الحاضر",unit:"Career Paths",grade:9},{question:"She said she _____ to the party the next day.",options:["will come","comes","would come","came"],correct:2,explanation:"في الكلام المنقول، نحول 'will come' إلى 'would come'",unit:"Cultural Exchange",grade:9},{question:"The Eiffel Tower _____ by millions of tourists every year.",options:["visits","is visited","visited","has visited"],correct:1,explanation:"نستخدم المبني للمجهول (is visited) لأن التركيز على الحدث وليس الفاعل",unit:"Health and Fitness",grade:9},{question:"If she _____ harder, she would have passed the exam.",options:["studied","studies","had studied","would study"],correct:2,explanation:"نستخدم 'had studied' في الجملة الشرطية الثالثة (Third conditional) للتعبير عن حالة مستحيلة في الماضي",unit:"Career Paths",grade:9},{question:"_____ you _____ your homework yet?",options:["Did / finish","Have / finished","Are / finishing","Do / finish"],correct:1,explanation:"نستخدم المضارع التام (Have ... finished) للسؤال عن حدث قد يكون انتهى في وقت غير محدد في الماضي",unit:"Global Citizens",grade:9},{question:"The news _____ on TV last night.",options:["was announced","were announced","announced","is announced"],correct:0,explanation:"نستخدم المبني للمجهول في الماضي البسيط (was announced) لأن 'news' تعامل كمفرد",unit:"Technology Today",grade:9},{question:"He asked me where _____.",options:["do I live","I lived","I live","did I live"],correct:1,explanation:"في الكلام المنقول، نحول السؤال المباشر 'Where do you live?' إلى 'where I lived'",unit:"Cultural Exchange",grade:9},{question:"You should eat healthy food and exercise regularly if you want to _____.",options:["stay fit","staying fit","stayed fit","to stay fit"],correct:0,explanation:"بعد 'want to' نستخدم الفعل في صيغة المصدر (stay)",unit:"Health and Fitness",grade:9}],WN=[{english:"aspiration",arabic:"طموح",unit:"Future Aspirations",pronunciation:"/ˌæspəˈreɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"She has aspirations to become a doctor."},{english:"ambition",arabic:"طموح",unit:"Future Aspirations",pronunciation:"/æmˈbɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"His ambition is to start his own business."},{english:"goal",arabic:"هدف",unit:"Future Aspirations",pronunciation:"/ɡəʊl/",grade:10,partOfSpeech:"noun",exampleSentence:"Setting clear goals helps you achieve success."},{english:"achievement",arabic:"إنجاز",unit:"Future Aspirations",pronunciation:"/əˈtʃiːvmənt/",grade:10,partOfSpeech:"noun",exampleSentence:"Graduating from university was a significant achievement."},{english:"determination",arabic:"عزيمة",unit:"Future Aspirations",pronunciation:"/dɪˌtɜːmɪˈneɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"Success requires hard work and determination."},{english:"perseverance",arabic:"مثابرة",unit:"Future Aspirations",pronunciation:"/ˌpɜːsɪˈvɪərəns/",grade:10,partOfSpeech:"noun",exampleSentence:"Perseverance is essential when facing challenges."},{english:"opportunity",arabic:"فرصة",unit:"Future Aspirations",pronunciation:"/ˌɒpəˈtjuːnəti/",grade:10,partOfSpeech:"noun",exampleSentence:"Education provides opportunities for a better future."},{english:"potential",arabic:"إمكانية",unit:"Future Aspirations",pronunciation:"/pəˈtenʃl/",grade:10,partOfSpeech:"noun",exampleSentence:"The teacher saw great potential in her students."},{english:"discovery",arabic:"اكتشاف",unit:"Science and Discovery",pronunciation:"/dɪˈskʌvəri/",grade:10,partOfSpeech:"noun",exampleSentence:"The discovery of penicillin changed medicine forever."},{english:"research",arabic:"بحث",unit:"Science and Discovery",pronunciation:"/rɪˈsɜːtʃ/",grade:10,partOfSpeech:"noun",exampleSentence:"Scientific research is essential for progress."},{english:"experiment",arabic:"تجربة",unit:"Science and Discovery",pronunciation:"/ɪkˈsperɪmənt/",grade:10,partOfSpeech:"noun",exampleSentence:"The students conducted an experiment in the laboratory."},{english:"hypothesis",arabic:"فرضية",unit:"Science and Discovery",pronunciation:"/haɪˈpɒθəsɪs/",grade:10,partOfSpeech:"noun",exampleSentence:"A scientist develops a hypothesis before testing it."},{english:"innovation",arabic:"ابتكار",unit:"Science and Discovery",pronunciation:"/ˌɪnəˈveɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"Technological innovation has transformed our lives."},{english:"breakthrough",arabic:"اختراق",unit:"Science and Discovery",pronunciation:"/ˈbreɪkθruː/",grade:10,partOfSpeech:"noun",exampleSentence:"The team made a breakthrough in cancer research."},{english:"analyze",arabic:"يحلل",unit:"Science and Discovery",pronunciation:"/ˈænəlaɪz/",grade:10,partOfSpeech:"verb",exampleSentence:"Scientists analyze data to draw conclusions."},{english:"theory",arabic:"نظرية",unit:"Science and Discovery",pronunciation:"/ˈθɪəri/",grade:10,partOfSpeech:"noun",exampleSentence:"Einstein's theory of relativity revolutionized physics."},{english:"media",arabic:"وسائل الإعلام",unit:"Media and Communication",pronunciation:"/ˈmiːdiə/",grade:10,partOfSpeech:"noun",exampleSentence:"Social media has changed how we communicate."},{english:"communication",arabic:"تواصل",unit:"Media and Communication",pronunciation:"/kəˌmjuːnɪˈkeɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"Effective communication is key to success."},{english:"journalism",arabic:"صحافة",unit:"Media and Communication",pronunciation:"/ˈdʒɜːnəlɪzəm/",grade:10,partOfSpeech:"noun",exampleSentence:"She studied journalism at university."},{english:"broadcast",arabic:"بث",unit:"Media and Communication",pronunciation:"/ˈbrɔːdkɑːst/",grade:10,partOfSpeech:"noun",exampleSentence:"The broadcast reached millions of viewers."},{english:"advertisement",arabic:"إعلان",unit:"Media and Communication",pronunciation:"/ədˈvɜːtɪsmənt/",grade:10,partOfSpeech:"noun",exampleSentence:"The company launched a new advertisement campaign."},{english:"influence",arabic:"تأثير",unit:"Media and Communication",pronunciation:"/ˈɪnfluəns/",grade:10,partOfSpeech:"noun",exampleSentence:"The media has a significant influence on public opinion."},{english:"audience",arabic:"جمهور",unit:"Media and Communication",pronunciation:"/ˈɔːdiəns/",grade:10,partOfSpeech:"noun",exampleSentence:"The show attracted a large audience."},{english:"publish",arabic:"ينشر",unit:"Media and Communication",pronunciation:"/ˈpʌblɪʃ/",grade:10,partOfSpeech:"verb",exampleSentence:"The newspaper will publish the article tomorrow."},{english:"challenge",arabic:"تحدي",unit:"Global Challenges",pronunciation:"/ˈtʃælɪndʒ/",grade:10,partOfSpeech:"noun",exampleSentence:"Climate change is one of the biggest challenges we face."},{english:"poverty",arabic:"فقر",unit:"Global Challenges",pronunciation:"/ˈpɒvəti/",grade:10,partOfSpeech:"noun",exampleSentence:"Many organizations work to reduce poverty worldwide."},{english:"inequality",arabic:"عدم مساواة",unit:"Global Challenges",pronunciation:"/ˌɪnɪˈkwɒləti/",grade:10,partOfSpeech:"noun",exampleSentence:"Social inequality remains a problem in many countries."},{english:"climate change",arabic:"تغير المناخ",unit:"Global Challenges",pronunciation:"/ˈklaɪmət tʃeɪndʒ/",grade:10,partOfSpeech:"noun",exampleSentence:"We need to take action against climate change."},{english:"solution",arabic:"حل",unit:"Global Challenges",pronunciation:"/səˈluːʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"Finding solutions to global problems requires cooperation."},{english:"crisis",arabic:"أزمة",unit:"Global Challenges",pronunciation:"/ˈkraɪsɪs/",grade:10,partOfSpeech:"noun",exampleSentence:"The country is facing an economic crisis."},{english:"awareness",arabic:"وعي",unit:"Global Challenges",pronunciation:"/əˈweənəs/",grade:10,partOfSpeech:"noun",exampleSentence:"Raising awareness about environmental issues is important."},{english:"impact",arabic:"تأثير",unit:"Global Challenges",pronunciation:"/ˈɪmpækt/",grade:10,partOfSpeech:"noun",exampleSentence:"Human activities have a significant impact on the environment."},{english:"culture",arabic:"ثقافة",unit:"Arts and Culture",pronunciation:"/ˈkʌltʃə/",grade:10,partOfSpeech:"noun",exampleSentence:"Different countries have different cultures."},{english:"heritage",arabic:"تراث",unit:"Arts and Culture",pronunciation:"/ˈherɪtɪdʒ/",grade:10,partOfSpeech:"noun",exampleSentence:"We should preserve our cultural heritage."},{english:"tradition",arabic:"تقليد",unit:"Arts and Culture",pronunciation:"/trəˈdɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"This festival is an important tradition in our country."},{english:"exhibition",arabic:"معرض",unit:"Arts and Culture",pronunciation:"/ˌeksɪˈbɪʃn/",grade:10,partOfSpeech:"noun",exampleSentence:"The art exhibition attracted many visitors."},{english:"masterpiece",arabic:"تحفة فنية",unit:"Arts and Culture",pronunciation:"/ˈmɑːstəpiːs/",grade:10,partOfSpeech:"noun",exampleSentence:"The Mona Lisa is considered a masterpiece."},{english:"creativity",arabic:"إبداع",unit:"Arts and Culture",pronunciation:"/ˌkriːeɪˈtɪvəti/",grade:10,partOfSpeech:"noun",exampleSentence:"Art classes encourage creativity in students."},{english:"architecture",arabic:"هندسة معمارية",unit:"Arts and Culture",pronunciation:"/ˈɑːkɪtektʃə/",grade:10,partOfSpeech:"noun",exampleSentence:"Islamic architecture is known for its beautiful designs."},{english:"preserve",arabic:"يحافظ",unit:"Arts and Culture",pronunciation:"/prɪˈzɜːv/",grade:10,partOfSpeech:"verb",exampleSentence:"It's important to preserve historical buildings."}],qN=[{title:"Future Perfect and Future Continuous",explanation:"نستخدم المستقبل التام للتعبير عن حدث سيكتمل قبل وقت محدد في المستقبل، ونستخدم المستقبل المستمر للتعبير عن حدث سيكون مستمراً في وقت محدد في المستقبل.",examples:["By this time next year, I will have graduated from university. (Future Perfect)","This time tomorrow, I will be flying to London. (Future Continuous)","By 2030, scientists will have found a cure for many diseases. (Future Perfect)","At 8 PM tonight, we will be watching the football match. (Future Continuous)"],unit:"Future Aspirations",grade:10},{title:"Passive Voice with Different Tenses",explanation:"يمكن استخدام المبني للمجهول مع أزمنة مختلفة للتركيز على الحدث بدلاً من الفاعل.",examples:["Present: The experiment is conducted by scientists. (الحاضر)","Past: The discovery was made last year. (الماضي)","Present Perfect: The theory has been challenged by new evidence. (المضارع التام)","Future: The results will be published next month. (المستقبل)","Modal: The problem can be solved with this approach. (الأفعال المساعدة)"],unit:"Science and Discovery",grade:10},{title:"Relative Clauses (Defining and Non-defining)",explanation:"نستخدم جمل الوصل لإعطاء معلومات إضافية عن الاسم. الجمل الوصفية المحددة تعطي معلومات ضرورية، بينما الجمل الوصفية غير المحددة تعطي معلومات إضافية غير ضرورية.",examples:["The woman who lives next door is a doctor. (Defining - محددة)","My brother, who lives in London, is visiting next week. (Non-defining - غير محددة)","The book that I bought yesterday is very interesting. (Defining - محددة)","Paris, which is the capital of France, is famous for its architecture. (Non-defining - غير محددة)"],unit:"Media and Communication",grade:10},{title:"Mixed Conditionals",explanation:"نستخدم الجمل الشرطية المختلطة عندما يكون الشرط في زمن والنتيجة في زمن آخر.",examples:["If I had studied medicine (past), I would be a doctor now (present).","If I were rich (present), I would have traveled around the world (past).","If we hadn't polluted the environment (past), we wouldn't be facing climate change now (present).","If I spoke French (present), I would have applied for that job (past)."],unit:"Global Challenges",grade:10},{title:"Modals of Deduction (Present and Past)",explanation:"نستخدم الأفعال المساعدة للتعبير عن الاستنتاج أو التخمين في الحاضر والماضي.",examples:["Present: He must be tired. (لابد أنه متعب - تأكيد قوي)","Present: She might be at home. (ربما تكون في المنزل - احتمال)","Past: They must have missed the train. (لابد أنهم فاتتهم القطار - تأكيد قوي عن الماضي)","Past: He can't have forgotten the meeting. (لا يمكن أن يكون قد نسي الاجتماع - نفي قوي)"],unit:"Arts and Culture",grade:10}],BN=[{question:"By this time next year, I _____ my studies.",options:["will complete","will be completing","will have completed","complete"],correct:2,explanation:"نستخدم المستقبل التام (will have completed) للتعبير عن حدث سيكتمل قبل وقت محدد في المستقبل",unit:"Future Aspirations",grade:10},{question:"At 8 PM tomorrow, we _____ to the conference.",options:["will drive","will be driving","will have driven","drive"],correct:1,explanation:"نستخدم المستقبل المستمر (will be driving) للتعبير عن حدث سيكون مستمراً في وقت محدد في المستقبل",unit:"Future Aspirations",grade:10},{question:"The new vaccine _____ by scientists last month.",options:["is developed","was developed","has developed","develops"],correct:1,explanation:"نستخدم المبني للمجهول في الماضي البسيط (was developed) للتعبير عن حدث تم في الماضي",unit:"Science and Discovery",grade:10},{question:"The results of the experiment _____ in the next issue of the journal.",options:["will publish","will be publishing","will be published","are published"],correct:2,explanation:"نستخدم المبني للمجهول في المستقبل البسيط (will be published) للتعبير عن حدث سيتم في المستقبل",unit:"Science and Discovery",grade:10},{question:"The woman _____ won the Nobel Prize is my professor.",options:["who","which","whose","whom"],correct:0,explanation:"نستخدم 'who' في جملة الوصل المحددة عندما نشير إلى شخص",unit:"Media and Communication",grade:10},{question:"My hometown, _____ is in the south, is famous for its beaches.",options:["that","who","which","where"],correct:2,explanation:"نستخدم 'which' في جملة الوصل غير المحددة عندما نشير إلى مكان أو شيء",unit:"Media and Communication",grade:10},{question:"If I had known about the problem earlier, I _____ it by now.",options:["would solve","would have solved","will solve","solved"],correct:1,explanation:"نستخدم 'would have solved' في الجملة الشرطية الثالثة للتعبير عن نتيجة في الماضي لشرط لم يتحقق",unit:"Global Challenges",grade:10},{question:"If we _____ more sustainable energy sources, we wouldn't be facing such severe climate change now.",options:["use","used","had used","would use"],correct:2,explanation:"نستخدم 'had used' في الجملة الشرطية المختلطة للتعبير عن شرط في الماضي ونتيجة في الحاضر",unit:"Global Challenges",grade:10},{question:"She _____ be at home. Her car is outside.",options:["must","might","can't","should"],correct:0,explanation:"نستخدم 'must' للتعبير عن استنتاج قوي في الحاضر",unit:"Arts and Culture",grade:10},{question:"He _____ the message. He just replied to it.",options:["must have received","might have received","can't have received","should have received"],correct:0,explanation:"نستخدم 'must have received' للتعبير عن استنتاج قوي في الماضي",unit:"Arts and Culture",grade:10}],HN=[{english:"university",arabic:"جامعة",unit:"Higher Education",pronunciation:"/ˌjuːnɪˈvɜːsəti/",grade:11,partOfSpeech:"noun",exampleSentence:"She wants to study medicine at university."},{english:"academic",arabic:"أكاديمي",unit:"Higher Education",pronunciation:"/ˌækəˈdemɪk/",grade:11,partOfSpeech:"adjective",exampleSentence:"His academic achievements are impressive."},{english:"scholarship",arabic:"منحة دراسية",unit:"Higher Education",pronunciation:"/ˈskɒləʃɪp/",grade:11,partOfSpeech:"noun",exampleSentence:"She received a scholarship to study abroad."},{english:"degree",arabic:"شهادة جامعية",unit:"Higher Education",pronunciation:"/dɪˈɡriː/",grade:11,partOfSpeech:"noun",exampleSentence:"He has a degree in computer science."},{english:"lecture",arabic:"محاضرة",unit:"Higher Education",pronunciation:"/ˈlektʃə/",grade:11,partOfSpeech:"noun",exampleSentence:"The professor gave an interesting lecture on climate change."},{english:"research",arabic:"بحث علمي",unit:"Higher Education",pronunciation:"/rɪˈsɜːtʃ/",grade:11,partOfSpeech:"noun",exampleSentence:"She is conducting research on renewable energy."},{english:"campus",arabic:"حرم جامعي",unit:"Higher Education",pronunciation:"/ˈkæmpəs/",grade:11,partOfSpeech:"noun",exampleSentence:"The university campus has many facilities for students."},{english:"graduate",arabic:"يتخرج",unit:"Higher Education",pronunciation:"/ˈɡrædʒueɪt/",grade:11,partOfSpeech:"verb",exampleSentence:"She will graduate next year with a degree in engineering."},{english:"globalization",arabic:"عولمة",unit:"Globalization",pronunciation:"/ˌɡləʊbəlaɪˈzeɪʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Globalization has connected people around the world."},{english:"economy",arabic:"اقتصاد",unit:"Globalization",pronunciation:"/ɪˈkɒnəmi/",grade:11,partOfSpeech:"noun",exampleSentence:"The global economy is affected by many factors."},{english:"trade",arabic:"تجارة",unit:"Globalization",pronunciation:"/treɪd/",grade:11,partOfSpeech:"noun",exampleSentence:"International trade has increased significantly in recent years."},{english:"multinational",arabic:"متعدد الجنسيات",unit:"Globalization",pronunciation:"/ˌmʌltiˈnæʃnəl/",grade:11,partOfSpeech:"adjective",exampleSentence:"Many multinational companies have offices in different countries."},{english:"import",arabic:"يستورد",unit:"Globalization",pronunciation:"/ɪmˈpɔːt/",grade:11,partOfSpeech:"verb",exampleSentence:"The country imports most of its oil."},{english:"export",arabic:"يصدر",unit:"Globalization",pronunciation:"/ɪkˈspɔːt/",grade:11,partOfSpeech:"verb",exampleSentence:"They export fruits to European countries."},{english:"currency",arabic:"عملة",unit:"Globalization",pronunciation:"/ˈkʌrənsi/",grade:11,partOfSpeech:"noun",exampleSentence:"The dollar is a global currency."},{english:"market",arabic:"سوق",unit:"Globalization",pronunciation:"/ˈmɑːkɪt/",grade:11,partOfSpeech:"noun",exampleSentence:"The company is expanding into new markets."},{english:"sustainability",arabic:"استدامة",unit:"Environmental Sustainability",pronunciation:"/səˌsteɪnəˈbɪləti/",grade:11,partOfSpeech:"noun",exampleSentence:"Environmental sustainability is crucial for future generations."},{english:"renewable",arabic:"متجدد",unit:"Environmental Sustainability",pronunciation:"/rɪˈnjuːəbl/",grade:11,partOfSpeech:"adjective",exampleSentence:"Solar power is a renewable energy source."},{english:"conservation",arabic:"حفاظ",unit:"Environmental Sustainability",pronunciation:"/ˌkɒnsəˈveɪʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Wildlife conservation is important to protect endangered species."},{english:"biodiversity",arabic:"تنوع بيولوجي",unit:"Environmental Sustainability",pronunciation:"/ˌbaɪəʊdaɪˈvɜːsəti/",grade:11,partOfSpeech:"noun",exampleSentence:"Rainforests have incredible biodiversity."},{english:"ecosystem",arabic:"نظام بيئي",unit:"Environmental Sustainability",pronunciation:"/ˈiːkəʊsɪstəm/",grade:11,partOfSpeech:"noun",exampleSentence:"Human activities can damage fragile ecosystems."},{english:"carbon footprint",arabic:"بصمة كربونية",unit:"Environmental Sustainability",pronunciation:"/ˈkɑːbən ˈfʊtprɪnt/",grade:11,partOfSpeech:"noun",exampleSentence:"We should try to reduce our carbon footprint."},{english:"deforestation",arabic:"إزالة الغابات",unit:"Environmental Sustainability",pronunciation:"/diːˌfɒrɪˈsteɪʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Deforestation contributes to climate change."},{english:"pollution",arabic:"تلوث",unit:"Environmental Sustainability",pronunciation:"/pəˈluːʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Air pollution is a major problem in big cities."},{english:"innovation",arabic:"ابتكار",unit:"Innovation and Technology",pronunciation:"/ˌɪnəˈveɪʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Innovation drives progress in technology."},{english:"artificial intelligence",arabic:"ذكاء اصطناعي",unit:"Innovation and Technology",pronunciation:"/ˌɑːtɪfɪʃl ɪnˈtelɪdʒəns/",grade:11,partOfSpeech:"noun",exampleSentence:"Artificial intelligence is transforming many industries."},{english:"automation",arabic:"أتمتة",unit:"Innovation and Technology",pronunciation:"/ˌɔːtəˈmeɪʃn/",grade:11,partOfSpeech:"noun",exampleSentence:"Automation has replaced many manual jobs."},{english:"biotechnology",arabic:"تقنية حيوية",unit:"Innovation and Technology",pronunciation:"/ˌbaɪəʊtekˈnɒlədʒi/",grade:11,partOfSpeech:"noun",exampleSentence:"Biotechnology is used in medicine and agriculture."},{english:"nanotechnology",arabic:"تقنية النانو",unit:"Innovation and Technology",pronunciation:"/ˌnænəʊtekˈnɒlədʒi/",grade:11,partOfSpeech:"noun",exampleSentence:"Nanotechnology deals with extremely small structures."},{english:"robotics",arabic:"علم الروبوتات",unit:"Innovation and Technology",pronunciation:"/rəʊˈbɒtɪks/",grade:11,partOfSpeech:"noun",exampleSentence:"Robotics is an exciting field of engineering."},{english:"virtual reality",arabic:"واقع افتراضي",unit:"Innovation and Technology",pronunciation:"/ˌvɜːtʃuəl riˈæləti/",grade:11,partOfSpeech:"noun",exampleSentence:"Virtual reality creates immersive experiences."},{english:"algorithm",arabic:"خوارزمية",unit:"Innovation and Technology",pronunciation:"/ˈælɡərɪðəm/",grade:11,partOfSpeech:"noun",exampleSentence:"Algorithms are used to solve complex problems."},{english:"literature",arabic:"أدب",unit:"Literature and Arts",pronunciation:"/ˈlɪtrətʃə/",grade:11,partOfSpeech:"noun",exampleSentence:"She has always been interested in English literature."},{english:"poetry",arabic:"شعر",unit:"Literature and Arts",pronunciation:"/ˈpəʊɪtri/",grade:11,partOfSpeech:"noun",exampleSentence:"Poetry expresses emotions through language."},{english:"novel",arabic:"رواية",unit:"Literature and Arts",pronunciation:"/ˈnɒvl/",grade:11,partOfSpeech:"noun",exampleSentence:"She is writing her first novel."},{english:"character",arabic:"شخصية",unit:"Literature and Arts",pronunciation:"/ˈkærəktə/",grade:11,partOfSpeech:"noun",exampleSentence:"The main character in the story is very interesting."},{english:"plot",arabic:"حبكة",unit:"Literature and Arts",pronunciation:"/plɒt/",grade:11,partOfSpeech:"noun",exampleSentence:"The plot of the movie was full of unexpected twists."},{english:"theme",arabic:"موضوع",unit:"Literature and Arts",pronunciation:"/θiːm/",grade:11,partOfSpeech:"noun",exampleSentence:"Love is a common theme in literature."},{english:"metaphor",arabic:"استعارة",unit:"Literature and Arts",pronunciation:"/ˈmetəfə/",grade:11,partOfSpeech:"noun",exampleSentence:"The author uses metaphors to describe the character's feelings."},{english:"symbolism",arabic:"رمزية",unit:"Literature and Arts",pronunciation:"/ˈsɪmbəlɪzəm/",grade:11,partOfSpeech:"noun",exampleSentence:"Symbolism is an important literary device."}],GN=[{title:"Advanced Passive Constructions",explanation:"نستخدم تراكيب المبني للمجهول المتقدمة مثل 'have something done' و 'is said to be' و 'is thought to have been'.",examples:["I had my car repaired yesterday. (ترتيب شخص آخر للقيام بعمل ما)","The professor is said to be an expert in this field. (يُقال إن)","The ancient manuscript is believed to have been written in the 12th century. (يُعتقد أن)","English is known to be spoken in many countries. (من المعروف أن)"],unit:"Higher Education",grade:11},{title:"Inversion for Emphasis",explanation:"نستخدم القلب النحوي (تغيير ترتيب الكلمات) للتأكيد أو للتعبير عن المواقف الرسمية.",examples:["Never have I seen such a beautiful sunset. (بدلاً من: I have never seen such a beautiful sunset.)","Not only did she win the competition, but she also broke the record. (بدلاً من: She not only won the competition, but she also broke the record.)","Rarely does he arrive on time. (بدلاً من: He rarely arrives on time.)","Should you need any assistance, please contact us. (بدلاً من: If you should need any assistance, please contact us.)"],unit:"Globalization",grade:11},{title:"Participle Clauses",explanation:"نستخدم جمل المشاركة (الحال) لتقصير الجمل وربطها بطريقة أكثر إيجازاً.",examples:["Walking home, I saw an old friend. (= While I was walking home, I saw an old friend.)","Having finished his work, he went home. (= After he had finished his work, he went home.)","Worried about the exam, she studied all night. (= Because she was worried about the exam, she studied all night.)","Given more time, I could have done a better job. (= If I had been given more time, I could have done a better job.)"],unit:"Environmental Sustainability",grade:11},{title:"Cleft Sentences",explanation:"نستخدم الجمل المنقسمة للتأكيد على جزء معين من الجملة.",examples:["It was John who called you yesterday. (وليس شخص آخر)","What I need is a good night's sleep. (وليس شيء آخر)","It was in Paris that they first met. (وليس في مكان آخر)","The reason why I'm late is that my car broke down. (تأكيد على السبب)"],unit:"Innovation and Technology",grade:11},{title:"Advanced Conditionals and Wishes",explanation:"نستخدم تراكيب شرطية متقدمة وجمل التمني للتعبير عن مواقف افتراضية أو غير واقعية.",examples:["If it weren't for your help, I wouldn't have succeeded. (لولا مساعدتك، لما نجحت)","I wish I had studied harder when I was at school. (أتمنى لو درست بجد أكثر عندما كنت في المدرسة)","If only we could turn back time. (لو أننا نستطيع إعادة الزمن)","Suppose you won the lottery, what would you do? (افترض أنك ربحت اليانصيب، ماذا ستفعل؟)"],unit:"Literature and Arts",grade:11}],VN=[{question:"I _____ my car serviced last week.",options:["have","had","did","made"],correct:1,explanation:"نستخدم 'had' في تركيب 'have something done' للتعبير عن ترتيب شخص آخر للقيام بعمل ما",unit:"Higher Education",grade:11},{question:"The professor _____ to be working on a groundbreaking research project.",options:["says","is said","is saying","has said"],correct:1,explanation:"نستخدم 'is said to' للتعبير عن ما يقوله الناس عن شخص أو شيء ما",unit:"Higher Education",grade:11},{question:"_____ had I seen such a beautiful performance.",options:["Never","Not never","Never before","Not only"],correct:0,explanation:"نستخدم القلب النحوي مع 'Never' في بداية الجملة للتأكيد",unit:"Globalization",grade:11},{question:"Not only _____ the exam, but she also got the highest score.",options:["she passed","did she pass","passed she","she did pass"],correct:1,explanation:"بعد 'Not only' في بداية الجملة، نستخدم القلب النحوي (did she pass)",unit:"Globalization",grade:11},{question:"_____ the report, she went home.",options:["Having finished","She finished","Finished","After finishing"],correct:0,explanation:"نستخدم 'Having finished' (جملة المشاركة) لتقصير الجملة 'After she had finished the report, she went home'",unit:"Environmental Sustainability",grade:11},{question:"_____ about the environmental impact, the company decided to change its policies.",options:["It worried","Worried","Being worried","It was worried"],correct:2,explanation:"نستخدم 'Being worried' (جملة المشاركة) لتقصير الجملة 'Because the company was worried about the environmental impact, it decided to change its policies'",unit:"Environmental Sustainability",grade:11},{question:"It was _____ who discovered penicillin.",options:["Alexander Fleming","Alexander Fleming he","that Alexander Fleming","when Alexander Fleming"],correct:0,explanation:"في الجملة المنقسمة التي تبدأ بـ 'It was'، نضع الاسم مباشرة بعدها ثم 'who' إذا كان الاسم لشخص",unit:"Innovation and Technology",grade:11},{question:"_____ I need is some time to think about it.",options:["That","What","Which","It is"],correct:1,explanation:"نستخدم 'What' في بداية الجملة المنقسمة للتأكيد على الشيء المطلوب",unit:"Innovation and Technology",grade:11},{question:"If only I _____ how to solve this problem.",options:["know","knew","have known","would know"],correct:1,explanation:"بعد 'If only' نستخدم الماضي البسيط (knew) للتعبير عن تمني في الحاضر",unit:"Literature and Arts",grade:11},{question:"I wish I _____ to the concert last night.",options:["went","go","had gone","would go"],correct:2,explanation:"بعد 'I wish' نستخدم الماضي التام (had gone) للتعبير عن تمني في الماضي",unit:"Literature and Arts",grade:11}],KN=[{english:"accurate",arabic:"دقيق",unit:"News and the Media",pronunciation:"/ˈækjərət/",grade:12,partOfSpeech:"adjective",exampleSentence:"It's important to provide accurate information in news reports.",difficulty:"medium"},{english:"basic",arabic:"أساسي",unit:"News and the Media",pronunciation:"/ˈbeɪsɪk/",grade:12,partOfSpeech:"adjective",exampleSentence:"The article covered the basic facts of the story.",difficulty:"easy"},{english:"bizarre",arabic:"غريب",unit:"News and the Media",pronunciation:"/bɪˈzɑː/",grade:12,partOfSpeech:"adjective",exampleSentence:"The newspaper reported a bizarre incident in the town.",difficulty:"medium"},{english:"documentary",arabic:"فيلم وثائقي",unit:"News and the Media",pronunciation:"/ˌdɒkjʊˈmentəri/",grade:12,partOfSpeech:"noun",exampleSentence:"The documentary about climate change won several awards.",difficulty:"medium"},{english:"drown",arabic:"يغرق",unit:"News and the Media",pronunciation:"/draʊn/",grade:12,partOfSpeech:"verb",exampleSentence:"The news reported that two people drowned in the flood.",difficulty:"easy"},{english:"ethical",arabic:"أخلاقي",unit:"News and the Media",pronunciation:"/ˈeθɪkəl/",grade:12,partOfSpeech:"adjective",exampleSentence:"Journalists must follow ethical guidelines when reporting news.",difficulty:"medium"},{english:"freelance",arabic:"مستقل",unit:"News and the Media",pronunciation:"/ˈfriːlɑːns/",grade:12,partOfSpeech:"adjective",exampleSentence:"She works as a freelance journalist for several newspapers.",difficulty:"medium"},{english:"iceberg",arabic:"جبل جليدي",unit:"News and the Media",pronunciation:"/ˈaɪsbɜːɡ/",grade:12,partOfSpeech:"noun",exampleSentence:"The ship hit an iceberg and sank, according to news reports.",difficulty:"medium"},{english:"obsession",arabic:"هوس",unit:"News and the Media",pronunciation:"/əbˈseʃən/",grade:12,partOfSpeech:"noun",exampleSentence:"The media's obsession with celebrities can be harmful.",difficulty:"hard"},{english:"prey",arabic:"فريسة",unit:"News and the Media",pronunciation:"/preɪ/",grade:12,partOfSpeech:"noun",exampleSentence:"The documentary showed how lions hunt their prey.",difficulty:"medium"},{english:"pursue",arabic:"يلاحق",unit:"News and the Media",pronunciation:"/pəˈsjuː/",grade:12,partOfSpeech:"verb",exampleSentence:"The journalist decided to pursue the story despite the risks.",difficulty:"hard"},{english:"survive",arabic:"ينجو",unit:"News and the Media",pronunciation:"/səˈvaɪv/",grade:12,partOfSpeech:"verb",exampleSentence:"Only five people survived the accident, according to news reports.",difficulty:"medium"},{english:"tragic",arabic:"مأساوي",unit:"News and the Media",pronunciation:"/ˈtrædʒɪk/",grade:12,partOfSpeech:"adjective",exampleSentence:"The newspaper described the event as a tragic loss for the community.",difficulty:"medium"},{english:"analyse",arabic:"يحلل",unit:"Work and Careers",pronunciation:"/ˈænəlaɪz/",grade:12,partOfSpeech:"verb",exampleSentence:"The team will analyse the market data before making a decision.",difficulty:"medium"},{english:"apply",arabic:"يتقدم بطلب",unit:"Work and Careers",pronunciation:"/əˈplaɪ/",grade:12,partOfSpeech:"verb",exampleSentence:"I'm going to apply for the marketing position at that company.",difficulty:"easy"},{english:"candidate",arabic:"مرشح",unit:"Work and Careers",pronunciation:"/ˈkændɪdeɪt/",grade:12,partOfSpeech:"noun",exampleSentence:"The company interviewed five candidates for the position.",difficulty:"medium"},{english:"consultant",arabic:"مستشار",unit:"Work and Careers",pronunciation:"/kənˈsʌltənt/",grade:12,partOfSpeech:"noun",exampleSentence:"They hired a consultant to help improve their business processes.",difficulty:"medium"},{english:"convince",arabic:"يقنع",unit:"Work and Careers",pronunciation:"/kənˈvɪns/",grade:12,partOfSpeech:"verb",exampleSentence:"She managed to convince the manager to adopt her new idea.",difficulty:"medium"},{english:"marketing",arabic:"تسويق",unit:"Work and Careers",pronunciation:"/ˈmɑːkɪtɪŋ/",grade:12,partOfSpeech:"noun",exampleSentence:"The company invested heavily in marketing to promote their new product.",difficulty:"medium"},{english:"motivated",arabic:"متحفز",unit:"Work and Careers",pronunciation:"/ˈməʊtɪveɪtɪd/",grade:12,partOfSpeech:"adjective",exampleSentence:"Employers look for motivated individuals who can work independently.",difficulty:"medium"},{english:"promote",arabic:"يروج",unit:"Work and Careers",pronunciation:"/prəˈməʊt/",grade:12,partOfSpeech:"verb",exampleSentence:"The company will promote their new product on social media.",difficulty:"medium"},{english:"proposal",arabic:"اقتراح",unit:"Work and Careers",pronunciation:"/prəˈpəʊzəl/",grade:12,partOfSpeech:"noun",exampleSentence:"She submitted a detailed proposal for the new project.",difficulty:"medium"},{english:"referee",arabic:"مرجع",unit:"Work and Careers",pronunciation:"/ˌrefəˈriː/",grade:12,partOfSpeech:"noun",exampleSentence:"You should include at least two referees in your job application.",difficulty:"hard"},{english:"shift",arabic:"نوبة عمل",unit:"Work and Careers",pronunciation:"/ʃɪft/",grade:12,partOfSpeech:"noun",exampleSentence:"Nurses often work night shifts at the hospital.",difficulty:"easy"},{english:"stressful",arabic:"مرهق",unit:"Work and Careers",pronunciation:"/ˈstresfʊl/",grade:12,partOfSpeech:"adjective",exampleSentence:"Working in emergency services can be very stressful.",difficulty:"medium"},{english:"verbal",arabic:"شفهي",unit:"Work and Careers",pronunciation:"/ˈvɜːbəl/",grade:12,partOfSpeech:"adjective",exampleSentence:"Good verbal communication skills are essential for this job.",difficulty:"medium"},{english:"destruction",arabic:"دمار",unit:"Health and Safety",pronunciation:"/dɪˈstrʌkʃən/",grade:12,partOfSpeech:"noun",exampleSentence:"The earthquake caused widespread destruction in the city.",difficulty:"hard"},{english:"earthquake",arabic:"زلزال",unit:"Health and Safety",pronunciation:"/ˈɜːθkweɪk/",grade:12,partOfSpeech:"noun",exampleSentence:"The earthquake measured 7.2 on the Richter scale.",difficulty:"medium"},{english:"emergency",arabic:"حالة طوارئ",unit:"Health and Safety",pronunciation:"/ɪˈmɜːdʒənsi/",grade:12,partOfSpeech:"noun",exampleSentence:"In case of emergency, call the ambulance immediately.",difficulty:"medium"},{english:"garbage",arabic:"قمامة",unit:"Health and Safety",pronunciation:"/ˈɡɑːbɪdʒ/",grade:12,partOfSpeech:"noun",exampleSentence:"Proper disposal of garbage helps prevent health hazards.",difficulty:"easy"},{english:"hurricane",arabic:"إعصار",unit:"Health and Safety",pronunciation:"/ˈhʌrɪkən/",grade:12,partOfSpeech:"noun",exampleSentence:"The hurricane caused severe damage to coastal areas.",difficulty:"medium"},{english:"jogging",arabic:"الجري الخفيف",unit:"Health and Safety",pronunciation:"/ˈdʒɒɡɪŋ/",grade:12,partOfSpeech:"noun",exampleSentence:"Regular jogging can improve your cardiovascular health.",difficulty:"easy"},{english:"lifeguard",arabic:"منقذ",unit:"Health and Safety",pronunciation:"/ˈlaɪfɡɑːd/",grade:12,partOfSpeech:"noun",exampleSentence:"The lifeguard rescued a child who was struggling in the water.",difficulty:"medium"},{english:"litter",arabic:"نفايات",unit:"Health and Safety",pronunciation:"/ˈlɪtə/",grade:12,partOfSpeech:"noun",exampleSentence:"There are strict penalties for people who litter in public places.",difficulty:"easy"},{english:"posture",arabic:"وضعية الجسم",unit:"Health and Safety",pronunciation:"/ˈpɒstʃə/",grade:12,partOfSpeech:"noun",exampleSentence:"Maintaining good posture is important for preventing back pain.",difficulty:"medium"},{english:"prone to",arabic:"عرضة لـ",unit:"Health and Safety",pronunciation:"/prəʊn tuː/",grade:12,partOfSpeech:"adjective",exampleSentence:"People with certain medical conditions are more prone to infections.",difficulty:"hard"},{english:"restore",arabic:"يستعيد",unit:"Health and Safety",pronunciation:"/rɪˈstɔː/",grade:12,partOfSpeech:"verb",exampleSentence:"The community worked together to restore services after the flood.",difficulty:"medium"},{english:"sore",arabic:"مؤلم",unit:"Health and Safety",pronunciation:"/sɔː/",grade:12,partOfSpeech:"adjective",exampleSentence:"After exercising, my muscles were sore for two days.",difficulty:"easy"},{english:"torrential",arabic:"غزير",unit:"Health and Safety",pronunciation:"/təˈrenʃəl/",grade:12,partOfSpeech:"adjective",exampleSentence:"Torrential rain caused flooding in many areas.",difficulty:"hard"},{english:"charity",arabic:"جمعية خيرية",unit:"Citizenship",pronunciation:"/ˈtʃærəti/",grade:12,partOfSpeech:"noun",exampleSentence:"The charity provides food and shelter for homeless people.",difficulty:"medium"},{english:"diverse",arabic:"متنوع",unit:"Citizenship",pronunciation:"/daɪˈvɜːs/",grade:12,partOfSpeech:"adjective",exampleSentence:"Our school has students from diverse cultural backgrounds.",difficulty:"medium"},{english:"donate",arabic:"يتبرع",unit:"Citizenship",pronunciation:"/dəʊˈneɪt/",grade:12,partOfSpeech:"verb",exampleSentence:"Many people donate money to help those affected by natural disasters.",difficulty:"medium"},{english:"fundraise",arabic:"يجمع التبرعات",unit:"Citizenship",pronunciation:"/ˈfʌndreɪz/",grade:12,partOfSpeech:"verb",exampleSentence:"The students will fundraise for the local hospital.",difficulty:"medium"},{english:"hospitable",arabic:"مضياف",unit:"Citizenship",pronunciation:"/hɒˈspɪtəbl/",grade:12,partOfSpeech:"adjective",exampleSentence:"Omani people are known for being hospitable to visitors.",difficulty:"hard"},{english:"inspire",arabic:"يلهم",unit:"Citizenship",pronunciation:"/ɪnˈspaɪə/",grade:12,partOfSpeech:"verb",exampleSentence:"Good leaders inspire others to take positive action.",difficulty:"medium"},{english:"proud",arabic:"فخور",unit:"Citizenship",pronunciation:"/praʊd/",grade:12,partOfSpeech:"adjective",exampleSentence:"We are proud of our national heritage and traditions.",difficulty:"easy"},{english:"residence",arabic:"إقامة",unit:"Citizenship",pronunciation:"/ˈrezɪdəns/",grade:12,partOfSpeech:"noun",exampleSentence:"You need to prove your residence to apply for certain services.",difficulty:"medium"},{english:"respect",arabic:"احترام",unit:"Citizenship",pronunciation:"/rɪˈspekt/",grade:12,partOfSpeech:"verb",exampleSentence:"Good citizens respect the laws and customs of their country.",difficulty:"easy"},{english:"responsibility",arabic:"مسؤولية",unit:"Citizenship",pronunciation:"/rɪˌspɒnsəˈbɪləti/",grade:12,partOfSpeech:"noun",exampleSentence:"Voting is an important responsibility of citizenship.",difficulty:"hard"},{english:"tolerance",arabic:"تسامح",unit:"Citizenship",pronunciation:"/ˈtɒlərəns/",grade:12,partOfSpeech:"noun",exampleSentence:"Tolerance of different beliefs is essential in a diverse society.",difficulty:"medium"},{english:"uphold",arabic:"يدعم",unit:"Citizenship",pronunciation:"/ʌpˈhəʊld/",grade:12,partOfSpeech:"verb",exampleSentence:"Citizens should uphold the values of their community.",difficulty:"medium"}],QN=[{title:"Reported Speech (Advanced)",explanation:"نستخدم الكلام المنقول لنقل ما قاله شخص ما دون استخدام كلماته الدقيقة. في المستوى المتقدم، نتعامل مع تغييرات الزمن والضمائر وظروف الزمان والمكان وأفعال النقل المختلفة.",examples:['Direct: "I am writing an article." → Reported: She said (that) she was writing an article.','Direct: "We will publish this tomorrow." → Reported: They said (that) they would publish that the next day.','Direct: "Have you finished the report?" → Reported: He asked if I had finished the report.',`Direct: "Don't use unethical methods!" → Reported: The editor warned the journalist not to use unethical methods.`],unit:"News and the Media",grade:12},{title:"Modal Verbs of Obligation, Desirability and Necessity",explanation:"نستخدم الأفعال المساعدة للتعبير عن الالتزام والرغبة والضرورة في سياقات مختلفة، خاصة في بيئة العمل.",examples:["You must submit your application before the deadline. (التزام قوي)","You should include references in your CV. (نصيحة)","Candidates need to have relevant experience. (ضرورة)","You don't have to wear formal clothes to the interview. (عدم ضرورة)","You might want to prepare answers to common interview questions. (اقتراح)"],unit:"Work and Careers",grade:12},{title:"Conditionals (Mixed and Advanced)",explanation:"نستخدم الجمل الشرطية المختلطة والمتقدمة للتعبير عن مواقف معقدة تجمع بين أزمنة مختلفة أو تتضمن هياكل نحوية متقدمة.",examples:["If the hurricane hadn't been predicted, many more people would be in danger now. (ماضي تام في الشرط، مضارع في النتيجة)","If I were you, I would have prepared an emergency kit. (مضارع في الشرط، ماضي تام في النتيجة)","Had there been proper safety measures, the accident could have been avoided. (شرط مقلوب بدون 'if')","Should you experience any symptoms, you must seek medical attention immediately. (شرط مع 'should' المقلوبة)"],unit:"Health and Safety",grade:12},{title:"Used to + Infinitive",explanation:"نستخدم 'used to + infinitive' للتعبير عن عادات أو حالات كانت موجودة في الماضي ولكنها لم تعد موجودة الآن.",examples:["People used to throw garbage in the streets, but now they are more environmentally conscious.","I used to live in the city center, but now I live in the suburbs.","Did you use to volunteer when you were younger?","He didn't use to respect other people's opinions, but now he's more tolerant."],unit:"Citizenship",grade:12},{title:"Cohesive Devices in Writing",explanation:"نستخدم أدوات الربط لإنشاء تماسك في الكتابة وربط الأفكار بطريقة منطقية ومتسلسلة.",examples:["Firstly, we need to identify the problem. Secondly, we should analyse possible solutions. Finally, we can implement the best option.","The charity helps homeless people. Moreover, it provides education for underprivileged children.","Despite the challenges, the community remained united. Nevertheless, they needed external support.","The government introduced new policies. As a result, citizenship applications increased significantly."],unit:"Citizenship",grade:12}],YN=[{question:"She said she _____ working on an important news story.",options:["is","was","has been","will be"],correct:1,explanation:"في الكلام المنقول، نحول المضارع البسيط 'am' إلى الماضي البسيط 'was'",unit:"News and the Media",grade:12},{question:"The reporter asked if I _____ the documentary yet.",options:["watched","had watched","have watched","was watching"],correct:1,explanation:"في الكلام المنقول، نحول المضارع التام 'have watched' إلى الماضي التام 'had watched'",unit:"News and the Media",grade:12},{question:"Candidates _____ arrive on time for the interview.",options:["must","might","could","would"],correct:0,explanation:"نستخدم 'must' للتعبير عن الالتزام القوي",unit:"Work and Careers",grade:12},{question:"You _____ wear formal clothes to the interview, but it's recommended.",options:["must","should","have to","don't have to"],correct:3,explanation:"نستخدم 'don't have to' للتعبير عن عدم الضرورة",unit:"Work and Careers",grade:12},{question:"If the hurricane _____ predicted, many more people would be in danger now.",options:["wasn't","wouldn't be","hadn't been","isn't"],correct:2,explanation:"نستخدم الماضي التام في الشرط المختلط عندما نتحدث عن حدث في الماضي له تأثير على الحاضر",unit:"Health and Safety",grade:12},{question:"_____ there been proper safety measures, the accident could have been avoided.",options:["If","Had","Would","Should"],correct:1,explanation:"نستخدم 'Had' في بداية الجملة كبديل لـ 'If there had been' في الشرط المقلوب",unit:"Health and Safety",grade:12},{question:"People _____ throw garbage in the streets, but now they are more environmentally conscious.",options:["use to","used to","were used to","are used to"],correct:1,explanation:"نستخدم 'used to' للتعبير عن عادة في الماضي لم تعد موجودة الآن",unit:"Citizenship",grade:12},{question:"_____ the challenges, the community remained united.",options:["Although","Despite","However","Nevertheless"],correct:1,explanation:"نستخدم 'Despite' متبوعة باسم أو عبارة اسمية للتعبير عن التناقض",unit:"Citizenship",grade:12},{question:"The government introduced new policies. _____, citizenship applications increased.",options:["Therefore","However","As a result","Despite this"],correct:2,explanation:"نستخدم 'As a result' للتعبير عن النتيجة المباشرة لحدث سابق",unit:"Citizenship",grade:12},{question:"What does 'ethical' mean in Arabic?",options:["دقيق","مستقل","أخلاقي","مأساوي"],correct:2,explanation:"ethical تعني أخلاقي باللغة العربية",unit:"News and the Media",grade:12}],JN={1:jN,2:kN,3:EN,4:AN,5:MN,6:$N,9:zN,10:qN,11:GN,12:QN},XN={1:NN,2:_N,3:TN,4:PN,5:RN,6:LN,9:UN,10:BN,11:VN,12:YN},Tu=e=>{const t=JN[e]||[];return console.log(`الصف ${e}: تم تحميل ${t.length} قاعدة نحوية`),t},Ou=e=>{const t=XN[e]||[];return console.log(`الصف ${e}: تم تحميل ${t.length} سؤال`),t},ZN=({onScore:e,onStreak:t,grade:s=5})=>{const[r,a]=x.useState(0),[i,o]=x.useState(null),[l,c]=x.useState(!1),[d,u]=x.useState([]),[m,y]=x.useState(0),[j,b]=x.useState(0),[v,w]=x.useState(0),[p,g]=x.useState(45),[f,h]=x.useState(!1),[N,k]=x.useState("medium"),S=10;x.useEffect(()=>{C()},[s,N]),x.useEffect(()=>{if(p>0&&!l&&!f&&d.length>0){const W=setTimeout(()=>g(p-1),1e3);return()=>clearTimeout(W)}else p===0&&!l&&d.length>0&&M()},[p,l,f,d.length]);const C=()=>{const W=Ou(s);if(W.length===0){u([{question:"She _____ to school every day.",options:["go","goes","going","went"],correct:1,explanation:"نستخدم 'goes' مع ضمير الغائب المفرد (she) في المضارع البسيط",unit:"Grammar Basics",grade:s},{question:"I _____ my homework yesterday.",options:["do","did","doing","done"],correct:1,explanation:"نستخدم 'did' للتعبير عن فعل حدث في الماضي",unit:"Grammar Basics",grade:s},{question:"There _____ many books on the table.",options:["is","are","was","were"],correct:1,explanation:"نستخدم 'are' مع الأسماء الجمع (books) في المضارع",unit:"Grammar Basics",grade:s}]);return}let E=[...W];N==="easy"?E=E.filter((O,I)=>I%3===0):N==="hard"&&(E=E.filter((O,I)=>I%2===1));const T=E.sort(()=>Math.random()-.5).slice(0,Math.min(S,E.length));u(T)},M=()=>{o(-1),c(!0),b(0),t(!1),setTimeout(()=>{U()},3e3)},A=W=>{if(i!==null)return;if(o(W),c(!0),W===d[r].correct){const T=m+1,O=j+1;y(T),b(O),w(Math.max(v,O));let I=N==="easy"?10:N==="medium"?15:20;p>30&&(I+=5),O>=3&&(I+=O),e(I),t(!0)}else b(0),t(!1);setTimeout(()=>{U()},4e3)},U=()=>{r+1>=d.length?h(!0):(a(W=>W+1),o(null),c(!1),g(45))},B=()=>{a(0),o(null),c(!1),y(0),b(0),g(45),h(!1),C()},D=W=>`${W}s`;if(d.length===0)return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحضير أسئلة القواعد..."})]});if(f){const W=Math.round(m/d.length*100);return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهى التحدي!"}),n.jsxs("div",{className:"text-6xl font-bold mb-2",children:[W,"%"]}),n.jsxs("p",{className:"text-xl mb-4",children:[m," / ",d.length," إجابة صحيحة"]}),n.jsxs("div",{className:"flex justify-center gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:v}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:N}),n.jsx("div",{className:"text-sm opacity-80",children:"المستوى"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"mb-6",children:W>=90?n.jsx("p",{className:"text-2xl text-purple-600 font-bold",children:"🏆 خبير في القواعد!"}):W>=80?n.jsx("p",{className:"text-2xl text-blue-600 font-bold",children:"🎉 ممتاز في القواعد!"}):W>=70?n.jsx("p",{className:"text-2xl text-green-600 font-bold",children:"👍 جيد جداً!"}):W>=60?n.jsx("p",{className:"text-2xl text-yellow-600 font-bold",children:"📚 تحتاج مراجعة!"}):n.jsx("p",{className:"text-2xl text-red-600 font-bold",children:"💪 راجع القواعد!"})}),n.jsx("div",{className:"flex justify-center gap-4 mb-6",children:n.jsxs("select",{value:N,onChange:E=>k(E.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})}),n.jsx("button",{onClick:B,className:"bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:"🔄 تحدي جديد"})]})]})}const $=d[r];return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:"⚡ تحدي القواعد"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:m}),n.jsx("div",{className:"text-xs opacity-80",children:"النتيجة"})]}),j>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),j]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-lg font-bold flex items-center gap-1 ${p<=10?"text-red-300 animate-pulse":""}`,children:[n.jsx(dt,{className:"w-4 h-4"}),D(p)]}),n.jsx("div",{className:"text-xs opacity-80",children:"وقت"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm opacity-90",children:[n.jsxs("span",{children:["السؤال ",r+1," / ",d.length]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N==="easy"?"bg-green-500":N==="medium"?"bg-yellow-500":"bg-red-500"}`,children:N==="easy"?"سهل":N==="medium"?"متوسط":"صعب"})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mt-4",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/d.length*100}%`}})})]}),n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-2",children:$.unit}),n.jsx("h4",{className:"text-2xl font-bold text-gray-800 text-center mb-4",dir:"ltr",children:$.question})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:$.options.map((W,E)=>{let T="p-4 rounded-xl font-semibold transition-all hover:scale-105 shadow-md border-2 ";const O=/[\u0600-\u06FF]/.test(W),I=O?"rtl":"ltr",_=O?"text-right":"text-left";return l?E===$.correct?T+="bg-green-500 text-white border-green-600":E===i?T+="bg-red-500 text-white border-red-600":T+="bg-gray-300 text-gray-600 border-gray-300":T+="bg-purple-50 hover:bg-purple-100 text-gray-800 border-purple-200 hover:border-purple-400",n.jsx("button",{onClick:()=>A(E),disabled:l,className:`${T} ${_}`,dir:I,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-lg",children:W}),l&&E===$.correct&&n.jsx(Fe,{className:"w-6 h-6"}),l&&E===i&&E!==$.correct&&n.jsx(Et,{className:"w-6 h-6"})]})},E)})}),l&&n.jsxs("div",{className:`p-6 rounded-xl ${i===-1?"bg-orange-50 border-2 border-orange-200":i===$.correct?"bg-green-50 border-2 border-green-200":"bg-red-50 border-2 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(vn,{className:`w-6 h-6 mt-1 ${i===-1?"text-orange-600":i===$.correct?"text-green-600":"text-red-600"}`}),n.jsxs("div",{children:[n.jsxs("h5",{className:"font-bold text-lg mb-2",children:[i===-1?"⏰ انتهى الوقت!":i===$.correct?"✅ صحيح!":"❌ خطأ!",j>1&&i===$.correct&&n.jsxs("span",{className:"ml-2 text-purple-600",children:["🔥 سلسلة ",j,"!"]})]}),n.jsxs("p",{className:"text-gray-700 mb-2",children:[n.jsx("strong",{children:"الإجابة الصحيحة:"}),n.jsx("span",{className:"ml-2",dir:"ltr",children:$.options[$.correct]})]}),n.jsx("p",{className:"text-gray-700",children:$.explanation})]})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("button",{onClick:U,className:"inline-flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:[r+1>=d.length?"إنهاء التحدي":"السؤال التالي",n.jsx(vu,{className:"w-4 h-4"})]})})]})]})]})},e1=({words:e,onScore:t,onStreak:s})=>{const[r,a]=x.useState([]),[i,o]=x.useState(0),[l,c]=x.useState(""),[d,u]=x.useState(null),[m,y]=x.useState(!1),[j,b]=x.useState(0),[v,w]=x.useState(0),[p,g]=x.useState(0),[f,h]=x.useState(!1),[N,k]=x.useState(!1),[S,C]=x.useState(!1),[M,A]=x.useState(120),[U,B]=x.useState("medium"),[D,$]=x.useState(0),[W,E]=x.useState(0),[T,O]=x.useState(null),[I,_]=x.useState(!1),[R,P]=x.useState(!1),[F,L]=x.useState([]),Y=x.useRef(null),G=Math.min(8,e.length);x.useEffect(()=>{le()},[e,U]),x.useEffect(()=>{if(M>0&&!S&&r.length>0&&!m){const z=setTimeout(()=>A(M-1),1e3);return()=>clearTimeout(z)}else M===0&&r.length>0&&!m&&he()},[M,S,r.length,m]);const le=()=>{if(e.length===0)return;const H=e.sort(()=>Math.random()-.5).slice(0,G).map(Q=>{const ce=ee(Q),fe=ne(Q),ke=de(Q);return{word:Q,prompt:ce[Math.floor(Math.random()*ce.length)],hints:fe,sampleSentences:ke,difficulty:te(Q)}});a(H)},ee=z=>{const H=[`اكتب جملة تستخدم فيها كلمة "${z.english}" (${z.arabic})`,`أنشئ جملة إبداعية تحتوي على كلمة "${z.english}"`,`اكتب جملة تشرح معنى "${z.english}" من خلال السياق`,`استخدم "${z.english}" في جملة تصف موقفاً من حياتك`,`اكتب جملة تُظهر أهمية "${z.english}" في الحياة اليومية`];return z.partOfSpeech==="verb"?H.push(`اكتب جملة تُظهر كيف تقوم بـ "${z.english}"`):z.partOfSpeech==="adjective"?H.push(`اكتب جملة تصف شيئاً بأنه "${z.english}"`):z.partOfSpeech==="noun"&&H.push(`اكتب جملة تتحدث عن "${z.english}" المفضل لديك`),H},ne=z=>{const H=[`معنى الكلمة: ${z.arabic}`,`نوع الكلمة: ${z.partOfSpeech}`,`الوحدة: ${z.unit}`];return z.pronunciation&&H.push(`النطق: ${z.pronunciation}`),z.partOfSpeech==="verb"?H.push("تذكر: الأفعال تعبر عن الأعمال والحركات"):z.partOfSpeech==="adjective"?H.push("تذكر: الصفات تصف الأشياء والأشخاص"):z.partOfSpeech==="noun"&&H.push("تذكر: الأسماء تشير إلى الأشخاص والأشياء والأماكن"),H},de=z=>{const H=[];z.exampleSentence&&H.push(z.exampleSentence);const Q={verb:[`I ${z.english} every day.`,`She likes to ${z.english}.`,`We ${z.english} together.`],noun:[`The ${z.english} is beautiful.`,`I have a ${z.english}.`,`This ${z.english} is special.`],adjective:[`The cat is very ${z.english}.`,`She looks ${z.english} today.`,`This book is ${z.english}.`]},ce=Q[z.partOfSpeech]||Q.noun;return H.push(...ce.slice(0,2)),H},te=z=>z.english.length<=5?"easy":z.english.length<=8?"medium":"hard",he=()=>{u("⏰ انتهى الوقت! حاول في المرة القادمة أن تكتب بشكل أسرع."),y(!0),w(0),s(!1)},q=(z,H)=>{const Q=z.toLowerCase(),ce=H.toLowerCase();if(Q===ce)return!0;const fe={favorite:["favourite"],favourite:["favorite"],color:["colour"],colour:["color"],center:["centre"],centre:["center"],theater:["theatre"],theatre:["theater"],analyze:["analyse"],analyse:["analyze"],organize:["organise"],organise:["organize"],realize:["realise"],realise:["realize"],dialog:["dialogue"],dialogue:["dialog"],catalog:["catalogue"],catalogue:["catalog"],program:["programme"],programme:["program"],traveling:["travelling"],travelling:["traveling"],defense:["defence"],defence:["defense"],license:["licence"],licence:["license"],practice:["practise"],practise:["practice"],gray:["grey"],grey:["gray"],humor:["humour"],humour:["humor"],labor:["labour"],labour:["labor"],neighbor:["neighbour"],neighbour:["neighbor"],soccer:["football"],football:["soccer"]};return!!(fe[Q]&&fe[Q].includes(ce)||fe[ce]&&fe[ce].includes(Q))},J=()=>{if(!l.trim()){u("❌ يرجى كتابة جملة قبل التحقق!"),y(!0);return}const z=r[i].word,H=l.toLowerCase().trim(),Q=z.english.toLowerCase();_(!1),P(!1),O(null),L([]);const ce=H.includes(Q)||H.split(/\s+/).some(me=>q(me.replace(/[.,!?;:]/g,""),Q)),fe=l.charAt(0)===l.charAt(0).toUpperCase(),ke=/[.!?]$/.test(l.trim()),ln=l.trim().split(" ").length>=4;_(!fe),P(!ke);let St=[];/is having \w+/.test(H)&&z.partOfSpeech==="noun"&&!["party","meeting","conversation","discussion","argument"].includes(Q)&&St.push("استخدام 'is having' غير صحيح مع الأسماء غير الإجرائية. استخدم 'has' بدلاً من ذلك."),H.includes("floor")&&H.includes("3")&&!H.includes("floors")&&St.push("الأعداد أكبر من 1 تتطلب جمع الاسم: 'floors' وليس 'floor'"),/house are/.test(H)&&St.push("'house' مفرد ويتطلب فعل مفرد: 'is' وليس 'are'"),St.length>0&&O(St.join(" "));const bl=H.split(/\s+/).map(me=>me.replace(/[.,!?;:]/g,"")),ws=[],V={recieve:"receive",freind:"friend",beleive:"believe",wierd:"weird",accomodate:"accommodate",occured:"occurred",definately:"definitely",seperate:"separate",untill:"until",begining:"beginning",comming:"coming",fotabl:"football"};bl.forEach(me=>{V[me]&&!q(me,Q)&&ws.push({word:me,correction:V[me]})}),L(ws);let se=0,oe="";if(ce){se+=15,oe="✅ ممتاز! استخدمت الكلمة بشكل صحيح. ",fe?(se+=5,oe+="بدأت الجملة بحرف كبير. "):oe+="⚠️ تذكر أن تبدأ الجملة بحرف كبير. ",ke?(se+=5,oe+="أنهيت الجملة بعلامة ترقيم. "):oe+="⚠️ تذكر أن تنهي الجملة بعلامة ترقيم. ",ln?(se+=5,oe+="الجملة طويلة ومفيدة. "):oe+="⚠️ حاول كتابة جمل أطول (4 كلمات على الأقل). ",z.difficulty==="hard"?se+=5:z.difficulty==="medium"&&(se+=3),se-=D*2,se-=W*3,St.length>0&&(se-=5,oe+="⚠️ لكن هناك أخطاء نحوية. "),ws.length>0&&(se-=ws.length*2,oe+=`⚠️ يوجد ${ws.length} أخطاء إملائية. `);const me=v+1;w(me),g(Math.max(p,me)),me>=3&&(se+=me),s(!0)}else oe=`❌ لم تستخدم كلمة "${z.english}" في جملتك. حاول مرة أخرى!`,w(0),s(!1);se=Math.max(0,se),b(j+se),u(oe+(se>0?` (+${se} نقطة)`:"")),y(!0),isGameTimerActive&&setRemainingTime(timeLimit)},ie=z=>{let H=z;return I&&(H=H.charAt(0).toUpperCase()+H.slice(1)),R&&(H=H.trim(),H.match(/[.!?]$/)||(H+=".")),F.forEach(Q=>{const ce=new RegExp(`\\b${Q.word}\\b`,"gi");H=H.replace(ce,Q.correction)}),T&&(H=H.replace(/is having ([a-zA-Z]+)/gi,"has $1"),H=H.replace(/(\d+)\s+floor\b/gi,"$1 floors"),H=H.replace(/house are/gi,"house is")),H},ye=z=>{const Q=z.split(/(\s+)/).map((ce,fe)=>{const ke=ce.replace(/[.,!?;:]/g,"").toLowerCase();return F.some(St=>St.word.toLowerCase()===ke)?n.jsx("span",{className:"bg-red-200 text-red-800 px-1 rounded border-b-2 border-red-400",title:"خطأ إملائي",children:ce},fe):n.jsx("span",{children:ce},fe)});return n.jsxs("span",{children:[I&&n.jsx("span",{className:"bg-yellow-200 text-yellow-800 px-1 rounded border-b-2 border-yellow-400",title:"يجب أن يبدأ بحرف كبير",children:Q[0]}),!I&&Q[0],Q.slice(1,-1),R&&Q.length>1&&n.jsxs("span",{children:[Q[Q.length-1],n.jsx("span",{className:"bg-orange-200 text-orange-800 px-1 rounded border-b-2 border-orange-400 ml-1",title:"مطلوب علامة ترقيم",children:"؟"})]}),!R&&Q.length>1&&Q[Q.length-1]]})},we=()=>{y(!1),u(null),O(null),_(!1),P(!1),L([]),i+1>=r.length?C(!0):(o(z=>z+1),c(""),h(!1),k(!1),A(120),setTimeout(()=>{Y.current&&Y.current.focus()},100))},Rt=()=>{o(0),c(""),u(null),y(!1),O(null),_(!1),P(!1),L([]),b(0),w(0),h(!1),k(!1),C(!1),A(120),$(0),E(0),le()},Gt=()=>{f||$(z=>z+1),h(!f)},vs=()=>{N||E(z=>z+1),k(!N)},Dt=z=>{const H=Math.floor(z/60),Q=z%60;return`${H}:${Q.toString().padStart(2,"0")}`};if(r.length===0)return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحضير التمارين..."})]});if(S){const z=G>0?j/(G*30)*100:0;return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهت جلسة الكتابة!"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:j}),n.jsx("div",{className:"text-sm opacity-80",children:"النقاط الإجمالية"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[z.toFixed(1),"%"]}),n.jsx("div",{className:"text-sm opacity-80",children:"الأداء"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:p}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:G}),n.jsx("div",{className:"text-sm opacity-80",children:"جمل مكتوبة"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"mb-6",children:z>=90?n.jsx("p",{className:"text-2xl text-pink-600 font-bold",children:"🏆 كاتب محترف!"}):z>=80?n.jsx("p",{className:"text-2xl text-blue-600 font-bold",children:"🎉 كتابة ممتازة!"}):z>=70?n.jsx("p",{className:"text-2xl text-green-600 font-bold",children:"👍 كتابة جيدة!"}):z>=60?n.jsx("p",{className:"text-2xl text-yellow-600 font-bold",children:"📚 تحتاج مراجعة!"}):n.jsx("p",{className:"text-2xl text-red-600 font-bold",children:"💪 راجع القواعد!"})}),n.jsx("div",{className:"flex justify-center gap-4 mb-6",children:n.jsxs("select",{value:U,onChange:H=>B(H.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})}),n.jsxs("button",{onClick:Rt,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:[n.jsx(Lr,{className:"w-5 h-5 inline mr-2"}),"جلسة كتابة جديدة"]})]})]})}const Ke=r[i];return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-t-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:"✍️ كتابة الجمل الإبداعية"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:j}),n.jsx("div",{className:"text-xs opacity-80",children:"النقاط"})]}),v>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),v]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-lg font-bold flex items-center gap-1 ${M<=30?"text-red-300 animate-pulse":""}`,children:[n.jsx(dt,{className:"w-4 h-4"}),Dt(M)]}),n.jsx("div",{className:"text-xs opacity-80",children:"وقت"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm opacity-90",children:[n.jsxs("span",{children:["التمرين ",i+1," / ",G]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Ke.difficulty==="easy"?"bg-green-500":Ke.difficulty==="medium"?"bg-yellow-500":"bg-red-500"}`,children:Ke.difficulty==="easy"?"سهل":Ke.difficulty==="medium"?"متوسط":"صعب"})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mt-4",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(i+1)/G*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsxs("div",{className:"bg-pink-50 rounded-xl p-6 border-2 border-pink-200",children:[n.jsx("h4",{className:"text-xl font-bold text-pink-800 mb-4",children:"الكلمة المطلوبة:"}),n.jsx("div",{className:"text-3xl font-bold mb-2",dir:"ltr",children:Ke.word.english}),n.jsx("div",{className:"text-lg text-gray-600 mb-2",children:Ke.word.arabic}),Ke.word.pronunciation&&n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:Ke.word.pronunciation})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"📝 المطلوب:"}),n.jsx("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:n.jsx("p",{className:"text-gray-700 text-lg",children:Ke.prompt})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"sentence",className:"block text-lg font-semibold text-gray-800 mb-3",children:"✍️ اكتب جملتك هنا:"}),n.jsx("textarea",{id:"sentence",ref:Y,value:l,onChange:z=>c(z.target.value),placeholder:"اكتب جملة إبداعية تحتوي على الكلمة المطلوبة...",className:"w-full h-32 p-4 border-2 border-gray-300 rounded-xl focus:border-pink-500 focus:outline-none text-lg resize-none",dir:"ltr",disabled:m}),n.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[n.jsxs("span",{children:["عدد الكلمات: ",l.trim().split(" ").filter(z=>z.length>0).length]}),n.jsx("span",{children:"الحد الأدنى: 4 كلمات"})]})]}),n.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[n.jsxs("button",{onClick:Gt,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(vn,{className:"w-4 h-4"}),f?"إخفاء التلميحات":"إظهار تلميحات"]}),n.jsxs("button",{onClick:vs,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(ze,{className:"w-4 h-4"}),N?"إخفاء الأمثلة":"إظهار أمثلة"]})]}),f&&n.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mb-6",children:[n.jsxs("h5",{className:"font-bold text-yellow-800 mb-3 flex items-center gap-2",children:[n.jsx(vn,{className:"w-5 h-5"}),"تلميحات مفيدة:"]}),n.jsx("ul",{className:"space-y-2",children:Ke.hints.map((z,H)=>n.jsxs("li",{className:"text-yellow-700 flex items-start gap-2",children:[n.jsx("span",{className:"text-yellow-500 font-bold",children:"•"}),n.jsx("span",{children:z})]},H))})]}),N&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[n.jsxs("h5",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[n.jsx(ze,{className:"w-5 h-5"}),"أمثلة للاستئناس:"]}),n.jsx("div",{className:"space-y-2",children:Ke.sampleSentences.map((z,H)=>n.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:n.jsx("p",{className:"text-blue-700 font-mono",dir:"ltr",children:z})},H))})]}),!m&&n.jsx("div",{className:"text-center mb-6",children:n.jsxs("button",{onClick:J,disabled:!l.trim(),className:"bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-700 hover:to-rose-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg disabled:cursor-not-allowed",children:[n.jsx(Fe,{className:"w-5 h-5 inline mr-2"}),"تحقق من الجملة"]})}),m&&d&&n.jsxs("div",{className:`p-6 rounded-xl border-2 mb-6 ${d.includes("✅")?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300"}`,children:[n.jsx("p",{className:"text-lg mb-6 font-semibold text-center",children:d}),(I||R||F.length>0||T)&&l&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-200",children:[n.jsxs("h5",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-red-500",children:"❌"}),"جملتك (مع تحديد الأخطاء):"]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 text-xs",children:[I&&n.jsx("span",{className:"bg-yellow-200 text-yellow-800 px-2 py-1 rounded border",children:"🟡 حرف كبير"}),R&&n.jsx("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded border",children:"🟠 علامة ترقيم"}),F.length>0&&n.jsx("span",{className:"bg-red-200 text-red-800 px-2 py-1 rounded border",children:"🔴 خطأ إملائي"})]}),n.jsx("div",{className:"text-lg font-mono p-3 bg-gray-50 rounded border",dir:"ltr",children:ye(l)})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-green-200",children:[n.jsxs("h5",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-green-500",children:"✅"}),"الجملة المُصححة:"]}),n.jsx("div",{className:"text-lg font-mono p-3 bg-green-50 rounded border",dir:"ltr",children:n.jsx("span",{className:"text-green-800 font-semibold",children:ie(l)})})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[n.jsxs("h5",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[n.jsx("span",{children:"💡"}),"شرح الأخطاء والتصحيحات:"]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[I&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded border border-yellow-200",children:[n.jsx("span",{className:"bg-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs font-bold",children:"حرف كبير"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-yellow-800",children:"يجب أن تبدأ الجملة بحرف كبير"}),n.jsxs("p",{className:"text-yellow-700",children:[n.jsx("span",{className:"line-through",children:l.charAt(0)}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsx("span",{className:"font-bold",children:l.charAt(0).toUpperCase()})]})]})]}),R&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded border border-orange-200",children:[n.jsx("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded text-xs font-bold",children:"ترقيم"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-orange-800",children:"يجب إنهاء الجملة بعلامة ترقيم"}),n.jsxs("p",{className:"text-orange-700",children:["أضف ",n.jsx("span",{className:"font-bold",children:"نقطة (.)"})," أو ",n.jsx("span",{className:"font-bold",children:"علامة تعجب (!)"})," أو ",n.jsx("span",{className:"font-bold",children:"علامة استفهام (?)"})]})]})]}),F.length>0&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 rounded border border-red-200",children:[n.jsx("span",{className:"bg-red-200 text-red-800 px-2 py-1 rounded text-xs font-bold",children:"إملاء"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-red-800 mb-2",children:"أخطاء إملائية:"}),n.jsx("div",{className:"space-y-1",children:F.map((z,H)=>n.jsxs("p",{className:"text-red-700",children:[n.jsx("span",{className:"line-through font-mono",children:z.word}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsx("span",{className:"font-bold font-mono",children:z.correction})]},H))})]})]}),T&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded border border-purple-200",children:[n.jsx("span",{className:"bg-purple-200 text-purple-800 px-2 py-1 rounded text-xs font-bold",children:"نحو"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-purple-800",children:"ملاحظات نحوية:"}),n.jsx("p",{className:"text-purple-700",children:T})]})]})]})]})]}),!(I||R||F.length>0||T)&&l&&n.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-green-200 mb-6",children:[n.jsxs("h5",{className:"font-bold text-green-700 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-green-500",children:"✅"}),"جملتك الممتازة:"]}),n.jsx("div",{className:"text-lg font-mono p-3 bg-green-50 rounded border",dir:"ltr",children:n.jsx("span",{className:"text-green-800 font-semibold",children:l})})]}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsxs("button",{onClick:we,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(vu,{className:"w-5 h-5"}),"الانتقال للجملة التالية"]})})]}),n.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 mt-6",children:[n.jsxs("h5",{className:"font-bold text-green-800 mb-3 flex items-center gap-2",children:[n.jsx(jt,{className:"w-5 h-5"}),"نصائح للكتابة الجيدة:"]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-green-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"ابدأ الجملة بحرف كبير"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"أنه الجملة بعلامة ترقيم"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"استخدم الكلمة المطلوبة بوضوح"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"اكتب جملة مفيدة ومفهومة"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"استخدم 4 كلمات على الأقل"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"✅"}),n.jsx("span",{children:"كن مبدعاً في التعبير"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"⚠️"}),n.jsx("span",{children:"انتبه للأخطاء النحوية الشائعة"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"⚠️"}),n.jsx("span",{children:"استخدم الجمع مع الأعداد أكبر من 1"})]})]})]})]})]})},t1=({words:e,onScore:t,onStreak:s,grade:r})=>{const[a,i]=x.useState([]),[o,l]=x.useState(0),[c,d]=x.useState(null),[u,m]=x.useState(!1),[y,j]=x.useState(0),[b,v]=x.useState(0),[w,p]=x.useState(0),[g,f]=x.useState(45),[h,N]=x.useState(!1),[k,S]=x.useState("medium"),[C,M]=x.useState(!1),[A,U]=x.useState(0),B=Math.min(10,e.length);x.useEffect(()=>{D()},[e,k]),x.useEffect(()=>{if(g>0&&!u&&!h&&a.length>0){const P=setTimeout(()=>f(g-1),1e3);return()=>clearTimeout(P)}else g===0&&!u&&a.length>0&&W()},[g,u,h,a.length]);const D=()=>{if(e.length===0)return;const F=e.filter(L=>L.exampleSentence).sort(()=>Math.random()-.5).slice(0,B).map(L=>{const Y=L.exampleSentence,G=L.english,le=Y.replace(new RegExp(`\\b${G}\\b`,"gi"),"____"),ee=e.filter(te=>te.english!==G&&te.partOfSpeech===L.partOfSpeech).sort(()=>Math.random()-.5).slice(0,3).map(te=>te.english);for(;ee.length<3;){const te=e[Math.floor(Math.random()*e.length)];te.english!==G&&!ee.includes(te.english)&&ee.push(te.english)}const ne=[G,...ee].sort(()=>Math.random()-.5),de=ne.indexOf(G);return{sentence:le,correctWord:G,options:ne,correctIndex:de,difficulty:$(Y,G),hint:`معنى الكلمة: ${L.arabic}`}});i(F)},$=(P,F)=>{const L=P.split(" ").length,Y=F.length;return L<=6&&Y<=5?"easy":L<=10&&Y<=8?"medium":"hard"},W=()=>{d(-1),m(!0),v(0),s(!1),setTimeout(T,2e3)},E=P=>{if(c!==null)return;if(d(P),m(!0),P===a[o].correctIndex){const L=y+1,Y=b+1;j(L),v(Y),p(Math.max(w,Y));let G=k==="easy"?10:k==="medium"?15:20;g>30&&(G+=5),Y>=3&&(G+=Y),C&&(G-=3),t(Math.max(G,5)),s(!0)}else v(0),s(!1);setTimeout(T,3e3)},T=()=>{o+1>=a.length?N(!0):(l(P=>P+1),d(null),m(!1),M(!1),f(45))},O=()=>{l(0),d(null),m(!1),j(0),v(0),f(45),N(!1),M(!1),U(0),D()},I=()=>{C||U(P=>P+1),M(!C)},_=P=>`${P}s`;if(a.length===0)return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحضير الأسئلة..."})]});if(h){const P=Math.round(y/a.length*100);return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهى التمرين!"}),n.jsxs("div",{className:"text-6xl font-bold mb-2",children:[P,"%"]}),n.jsxs("p",{className:"text-xl mb-4",children:[y," / ",a.length," إجابة صحيحة"]}),n.jsxs("div",{className:"flex justify-center gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:w}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:A}),n.jsx("div",{className:"text-sm opacity-80",children:"تلميحات مستخدمة"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"mb-6",children:P>=90?n.jsx("p",{className:"text-2xl text-indigo-600 font-bold",children:"🏆 ممتاز! إتقان كامل!"}):P>=80?n.jsx("p",{className:"text-2xl text-blue-600 font-bold",children:"🎉 ممتاز! أداء رائع!"}):P>=70?n.jsx("p",{className:"text-2xl text-green-600 font-bold",children:"👍 جيد جداً!"}):P>=60?n.jsx("p",{className:"text-2xl text-yellow-600 font-bold",children:"📚 جيد! تحتاج مراجعة!"}):n.jsx("p",{className:"text-2xl text-red-600 font-bold",children:"💪 راجع الكلمات!"})}),n.jsx("div",{className:"flex justify-center gap-4 mb-6",children:n.jsxs("select",{value:k,onChange:F=>S(F.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})}),n.jsxs("button",{onClick:O,className:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white px-8 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:[n.jsx(Lr,{className:"w-5 h-5 inline mr-2"}),"تمرين جديد"]})]})]})}const R=a[o];return n.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:"✍️ إكمال الجملة"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:y}),n.jsx("div",{className:"text-xs opacity-80",children:"النتيجة"})]}),b>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),b]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-lg font-bold flex items-center gap-1 ${g<=10?"text-red-300 animate-pulse":""}`,children:[n.jsx(dt,{className:"w-4 h-4"}),_(g)]}),n.jsx("div",{className:"text-xs opacity-80",children:"وقت"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm opacity-90",children:[n.jsxs("span",{children:["السؤال ",o+1," / ",a.length]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.difficulty==="easy"?"bg-green-500":R.difficulty==="medium"?"bg-yellow-500":"bg-red-500"}`,children:R.difficulty==="easy"?"سهل":R.difficulty==="medium"?"متوسط":"صعب"})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mt-4",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/a.length*100}%`}})})]}),n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"أكمل الجملة بالكلمة المناسبة:"}),n.jsx("div",{className:"bg-blue-50 rounded-xl p-6 border-2 border-blue-200",children:n.jsx("p",{className:"text-lg font-semibold text-center",dir:"ltr",children:R.sentence})})]}),C&&R.hint&&n.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(vn,{className:"w-5 h-5 text-yellow-600"}),n.jsx("span",{className:"font-bold text-yellow-800",children:"تلميح:"})]}),n.jsx("p",{className:"text-yellow-700",children:R.hint})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:R.options.map((P,F)=>{let L="p-4 rounded-xl font-semibold transition-all hover:scale-105 shadow-md border-2 ";const Y=/[\u0600-\u06FF]/.test(P),G=Y?"rtl":"ltr",le=Y?"text-right":"text-left";return u?F===R.correctIndex?L+="bg-green-500 text-white border-green-600":F===c?L+="bg-red-500 text-white border-red-600":L+="bg-gray-300 text-gray-600 border-gray-300":L+="bg-indigo-50 hover:bg-indigo-100 text-gray-800 border-indigo-200 hover:border-indigo-400",n.jsx("button",{onClick:()=>E(F),disabled:u,className:`${L} ${le}`,dir:G,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-lg",children:P}),u&&F===R.correctIndex&&n.jsx(Fe,{className:"w-6 h-6"}),u&&F===c&&F!==R.correctIndex&&n.jsx(Et,{className:"w-6 h-6"})]})},F)})}),!u&&!C&&R.hint&&n.jsx("div",{className:"text-center mb-6",children:n.jsxs("button",{onClick:I,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(vn,{className:"w-4 h-4"}),"إظهار تلميح"]})}),u&&n.jsxs("div",{className:`p-6 rounded-xl text-center font-semibold border-2 ${c===-1?"bg-orange-100 text-orange-800 border-orange-300":c===R.correctIndex?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300"}`,children:[n.jsx("div",{className:"flex items-center justify-center gap-3 mb-3",children:c===-1?n.jsxs(n.Fragment,{children:[n.jsx(dt,{className:"w-8 h-8"}),n.jsx("span",{className:"text-xl",children:"⏰ انتهى الوقت!"})]}):c===R.correctIndex?n.jsxs(n.Fragment,{children:[n.jsx(Fe,{className:"w-8 h-8"}),n.jsx("span",{className:"text-xl",children:"✅ إجابة صحيحة!"}),b>1&&n.jsxs("span",{className:"ml-2 text-indigo-600",children:["🔥 سلسلة ",b,"!"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Et,{className:"w-8 h-8"}),n.jsx("span",{className:"text-xl",children:"❌ إجابة خاطئة!"})]})}),n.jsxs("p",{className:"text-lg mb-2",children:[n.jsx("strong",{children:"الإجابة الصحيحة:"}),n.jsx("span",{className:"ml-2 font-bold",dir:"ltr",children:R.options[R.correctIndex]})]}),n.jsx("div",{className:"bg-white/50 rounded-lg p-3 mt-3",children:n.jsx("p",{className:"text-base",dir:"ltr",children:R.sentence.replace("____",R.correctWord)})})]})]})]})},n1=({words:e,onScore:t,onStreak:s})=>{const[r,a]=x.useState({wordCount:10,showHints:!0,playAudioOnStart:!0,difficulty:"medium",timeLimit:0,shuffleWords:!0,showProgress:!0,allowSkip:!1}),[i,o]=x.useState([]),[l,c]=x.useState(0),[d,u]=x.useState([]),[m,y]=x.useState(!1),[j,b]=x.useState(!1),[v,w]=x.useState(!1),[p,g]=x.useState(0),[f,h]=x.useState(0),[N,k]=x.useState(0),[S,C]=x.useState(!1),[M,A]=x.useState(!1),[U,B]=x.useState(0),[D,$]=x.useState(0),[W,E]=x.useState(0),[T,O]=x.useState(0),[I,_]=x.useState(null),[R,P]=x.useState(!1),F=x.useRef([]),L=i[l];x.useEffect(()=>{(async()=>{try{await Se.initialize(),P(Se.isSupported()),console.log("تم تهيئة نظام النطق في تمرين التهجئة")}catch(H){P(!1),console.error("فشل في تهيئة النطق:",H)}})()},[]);const Y=()=>{let z=[...e];r.difficulty==="easy"?z=z.filter(Q=>Q.english.length<=6):r.difficulty==="hard"&&(z=z.filter(Q=>Q.english.length>=8)),r.shuffleWords&&(z=z.sort(()=>Math.random()-.5));const H=z.slice(0,r.wordCount);o(H),c(0),y(!1),g(0),h(0),B(0),$(0),O(0),_(new Date),H.length>0&&(G(H[0]),r.timeLimit>0&&k(r.timeLimit))},G=z=>{const H=z.english.split("").map(Q=>({letter:Q===" "?" ":"",isCorrect:Q===" "?!0:null,isRevealed:Q===" "}));u(H),A(!1),F.current=new Array(H.length).fill(null),setTimeout(()=>{var ce;const Q=H.findIndex(fe=>fe.letter!==" "&&!fe.isRevealed);Q!==-1&&F.current[Q]&&((ce=F.current[Q])==null||ce.focus())},100)},le=async()=>{Y(),w(!0),b(!1),r.playAudioOnStart&&i.length>0&&await ee(i[0])},ee=async z=>{if(!R){Dt("❌ النطق غير متاح في هذا المتصفح. جرب Chrome أو Edge","error");return}if(S){Se.stop(),C(!1);return}try{C(!0),await Se.speak(z.english,{rate:.8,pitch:1,volume:1,emphasis:!0}),C(!1)}catch(H){C(!1),console.error("خطأ في تشغيل الصوت:",H),Dt("❌ خطأ في تشغيل الصوت","error")}},ne=z=>{for(let H=z+1;H<d.length;H++)if(d[H].letter!==" "&&!d[H].isRevealed)return H;return-1},de=(z,H)=>{if(!L||d[z].isRevealed)return;const Q=[...d],ce=L.english[z].toLowerCase(),fe=H.toLowerCase();if(Q[z]={letter:H.toUpperCase(),isCorrect:fe===ce,isRevealed:!1},u(Q),fe===ce){const ln=ne(z);ln!==-1&&setTimeout(()=>{var St;(St=F.current[ln])==null||St.focus()},100),te(z,!0)}else te(z,!1);Q.every(ln=>ln.letter!==""||ln.isRevealed)&&setTimeout(()=>{q(Q)},300)},te=(z,H)=>{const Q=F.current[z];Q&&(H?(Q.classList.add("animate-pulse"),setTimeout(()=>{Q.classList.remove("animate-pulse")},500)):(Q.classList.add("animate-shake"),setTimeout(()=>{Q.classList.remove("animate-shake")},500)))},he=(z,H)=>{var Q,ce,fe;if(H.key==="ArrowRight"){H.preventDefault();const ke=ne(z);ke!==-1&&((Q=F.current[ke])==null||Q.focus())}else if(H.key==="ArrowLeft"){H.preventDefault();for(let ke=z-1;ke>=0;ke--)if(d[ke].letter!==" "&&!d[ke].isRevealed){(ce=F.current[ke])==null||ce.focus();break}}else if(H.key==="Backspace"&&d[z].letter===""){for(let ke=z-1;ke>=0;ke--)if(d[ke].letter!==" "&&!d[ke].isRevealed){(fe=F.current[ke])==null||fe.focus();break}}},q=z=>{if(z.every(Q=>Q.isCorrect===!0)){const Q=J();g(ce=>ce+Q),h(ce=>ce+1),$(ce=>{const fe=ce+1;return fe>W&&E(fe),fe}),t(Q),s(!0),Dt(`✅ ممتاز! +${Q} نقطة`,"success"),setTimeout(()=>{ie()},1500)}else{B(ce=>ce+1),$(0),s(!1),Dt("❌ حاول مرة أخرى","error");const Q=z.findIndex(ce=>ce.isCorrect===!1);Q!==-1&&setTimeout(()=>{var ce,fe;(ce=F.current[Q])==null||ce.focus(),(fe=F.current[Q])==null||fe.select()},1e3)}},J=()=>{let z=10;return r.difficulty==="medium"&&(z+=5),r.difficulty==="hard"&&(z+=10),z+=Math.min(D*2,20),z-=T*2,r.timeLimit>0&&N>r.timeLimit*.5&&(z+=5),Math.max(z,5)},ie=()=>{if(l+1>=i.length)Gt();else{const z=l+1;c(z),G(i[z]),r.playAudioOnStart&&setTimeout(()=>{ee(i[z])},500)}},ye=()=>{r.allowSkip&&(B(z=>z+1),$(0),Dt("⏭️ تم تخطي الكلمة","info"),ie())},we=()=>{if(!r.showHints)return;const z=d.map((H,Q)=>({input:H,index:Q})).filter(({input:H})=>H.letter===""&&!H.isRevealed).map(({index:H})=>H);if(z.length>0){const H=z[Math.floor(Math.random()*z.length)],Q=[...d];Q[H]={letter:L.english[H].toUpperCase(),isCorrect:!0,isRevealed:!0},u(Q),O(fe=>fe+1),Dt("💡 تلميح مستخدم","info");const ce=ne(H);ce!==-1&&setTimeout(()=>{var fe;(fe=F.current[ce])==null||fe.focus()},200)}},Rt=()=>{A(!M),M||(O(z=>z+1),Dt("👁️ تم إظهار الكلمة","info"))},Gt=()=>{y(!0),I&&(new Date().getTime()-I.getTime())/1e3;const H=i.length>0?f/i.length*100:0;Dt(`🎉 تم إكمال التمرين! دقة: ${H.toFixed(1)}%`,"success")},vs=()=>{w(!1),y(!1),b(!0)},Dt=(z,H="info")=>{const Q=document.createElement("div"),ce=H==="success"?"bg-green-500":H==="error"?"bg-red-500":"bg-blue-500";Q.className=`fixed top-4 left-1/2 transform -translate-x-1/2 ${ce} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold`,Q.textContent=z,document.body.appendChild(Q),setTimeout(()=>{Q.style.opacity="0",Q.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(Q)&&document.body.removeChild(Q)},300)},3e3)};x.useEffect(()=>{if(v&&!m&&r.timeLimit>0&&N>0){const z=setTimeout(()=>{k(H=>H-1)},1e3);return()=>clearTimeout(z)}else N===0&&r.timeLimit>0&&v&&Gt()},[N,v,m,r.timeLimit]);const Ke=z=>{const H=Math.floor(z/60),Q=z%60;return`${H}:${Q.toString().padStart(2,"0")}`};if(!v||j)return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-t-xl p-6",children:[n.jsxs("h3",{className:"text-3xl font-bold text-center mb-2 flex items-center justify-center gap-3",children:[n.jsx(zs,{className:"w-8 h-8"}),"تمرين التهجئة التفاعلي"]}),n.jsx("p",{className:"text-center opacity-90",children:"اختبر مهاراتك في تهجئة الكلمات الإنجليزية"})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8 shadow-xl",children:[n.jsxs("h4",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[n.jsx(tn,{className:"w-6 h-6"}),"إعدادات التمرين"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["عدد الكلمات (",r.wordCount,")"]}),n.jsx("input",{type:"range",min:"5",max:"50",value:r.wordCount,onChange:z=>a(H=>({...H,wordCount:Number(z.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx("span",{children:"5"}),n.jsx("span",{children:"25"}),n.jsx("span",{children:"50"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"مستوى الصعوبة"}),n.jsxs("select",{value:r.difficulty,onChange:z=>a(H=>({...H,difficulty:z.target.value})),className:"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none",children:[n.jsx("option",{value:"easy",children:"سهل (كلمات قصيرة)"}),n.jsx("option",{value:"medium",children:"متوسط (جميع الكلمات)"}),n.jsx("option",{value:"hard",children:"صعب (كلمات طويلة)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["الحد الزمني (ثانية) - ",r.timeLimit===0?"بدون حد":r.timeLimit]}),n.jsx("input",{type:"range",min:"0",max:"300",step:"30",value:r.timeLimit,onChange:z=>a(H=>({...H,timeLimit:Number(z.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx("span",{children:"بدون حد"}),n.jsx("span",{children:"2.5 دقيقة"}),n.jsx("span",{children:"5 دقائق"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:r.showHints,onChange:z=>a(H=>({...H,showHints:z.target.checked})),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-gray-700",children:"إظهار التلميحات"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:r.playAudioOnStart,onChange:z=>a(H=>({...H,playAudioOnStart:z.target.checked})),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-gray-700",children:"تشغيل الصوت تلقائياً"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:r.shuffleWords,onChange:z=>a(H=>({...H,shuffleWords:z.target.checked})),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-gray-700",children:"خلط ترتيب الكلمات"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:r.allowSkip,onChange:z=>a(H=>({...H,allowSkip:z.target.checked})),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-gray-700",children:"السماح بتخطي الكلمات"})]})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 mb-6",children:[n.jsx("h5",{className:"font-bold text-green-800 mb-3",children:"معلومات التمرين:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-bold text-green-700",children:Math.min(r.wordCount,e.length)}),n.jsx("div",{className:"text-green-600",children:"كلمة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-bold text-green-700",children:r.difficulty==="easy"?"سهل":r.difficulty==="medium"?"متوسط":"صعب"}),n.jsx("div",{className:"text-green-600",children:"الصعوبة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-bold text-green-700",children:r.timeLimit===0?"بدون حد":Ke(r.timeLimit)}),n.jsx("div",{className:"text-green-600",children:"الوقت"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-bold text-green-700",children:r.showHints?"متاحة":"غير متاحة"}),n.jsx("div",{className:"text-green-600",children:"التلميحات"})]})]})]}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:le,disabled:e.length===0,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-xl font-bold text-xl transition-all hover:scale-105 shadow-lg disabled:cursor-not-allowed flex items-center gap-3 mx-auto",children:[n.jsx(Za,{className:"w-6 h-6"}),"بدء التمرين"]})})]})]});if(m){const z=i.length>0?f/i.length*100:0,H=I?(new Date().getTime()-I.getTime())/1e3:0;return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-t-xl p-6",children:[n.jsxs("h3",{className:"text-3xl font-bold text-center mb-2 flex items-center justify-center gap-3",children:[n.jsx(Pt,{className:"w-8 h-8"}),"نتائج التمرين"]}),n.jsx("p",{className:"text-center opacity-90",children:"تهانينا على إكمال تمرين التهجئة!"})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8 shadow-xl",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-green-100 p-6 rounded-xl text-center border border-green-200",children:[n.jsx("div",{className:"text-3xl font-bold text-green-700 mb-2",children:p}),n.jsx("div",{className:"text-green-600",children:"النقاط الإجمالية"})]}),n.jsxs("div",{className:"bg-blue-100 p-6 rounded-xl text-center border border-blue-200",children:[n.jsxs("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[z.toFixed(1),"%"]}),n.jsx("div",{className:"text-blue-600",children:"الدقة"})]}),n.jsxs("div",{className:"bg-purple-100 p-6 rounded-xl text-center border border-purple-200",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-2",children:W}),n.jsx("div",{className:"text-purple-600",children:"أفضل سلسلة"})]}),n.jsxs("div",{className:"bg-orange-100 p-6 rounded-xl text-center border border-orange-200",children:[n.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:Ke(Math.floor(H))}),n.jsx("div",{className:"text-orange-600",children:"الوقت المستغرق"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsx("h5",{className:"font-bold text-gray-800 mb-4",children:"تفاصيل الأداء:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"الكلمات الصحيحة:"}),n.jsx("span",{className:"font-bold text-green-600",children:f})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"الأخطاء:"}),n.jsx("span",{className:"font-bold text-red-600",children:U})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"التلميحات المستخدمة:"}),n.jsx("span",{className:"font-bold text-blue-600",children:T})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"إجمالي الكلمات:"}),n.jsx("span",{className:"font-bold text-gray-600",children:i.length})]})]})]}),n.jsxs("div",{className:"text-center space-y-4",children:[z>=90&&n.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 rounded-xl p-4",children:[n.jsx("div",{className:"text-2xl mb-2",children:"🏆"}),n.jsx("div",{className:"font-bold text-yellow-800",children:"أداء ممتاز!"}),n.jsx("div",{className:"text-yellow-700",children:"حققت دقة عالية جداً في التهجئة"})]}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsxs("button",{onClick:vs,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(Lr,{className:"w-5 h-5"}),"تمرين جديد"]}),n.jsxs("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5"}),"تغيير الإعدادات"]})]})]})]})]})}return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-t-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(zs,{className:"w-8 h-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold",children:"تمرين التهجئة"}),n.jsxs("p",{className:"opacity-90",children:["الكلمة ",l+1," من ",i.length]})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[r.timeLimit>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-2xl font-bold ${N<=30?"text-red-300":""}`,children:[n.jsx(dt,{className:"w-5 h-5 inline mr-1"}),Ke(N)]}),n.jsx("div",{className:"text-sm opacity-80",children:"الوقت المتبقي"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold",children:[n.jsx(on,{className:"w-5 h-5 inline mr-1"}),D]}),n.jsx("div",{className:"text-sm opacity-80",children:"السلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:p}),n.jsx("div",{className:"text-sm opacity-80",children:"النقاط"})]})]})]}),r.showProgress&&n.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:n.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${(l+1)/i.length*100}%`}})})]}),n.jsx("div",{className:"bg-white rounded-b-xl p-8 shadow-xl",children:L&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-center mb-8",children:n.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>ee(L),disabled:S||!R,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white p-4 rounded-full transition-all hover:scale-110 shadow-lg",children:S?n.jsx(No,{className:"w-6 h-6"}):n.jsx(nn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-1",children:"استمع وتهجى:"}),n.jsx("div",{className:"text-2xl font-bold text-blue-700",children:L.arabic}),L.pronunciation&&n.jsx("div",{className:"text-sm text-gray-500 font-mono mt-1",children:L.pronunciation})]})]}),M&&n.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-3 mb-4",children:n.jsx("div",{className:"text-yellow-800 font-bold text-xl",dir:"ltr",children:L.english})})]})}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx("div",{className:"flex gap-2 flex-wrap justify-center max-w-4xl",dir:"ltr",children:d.map((z,H)=>n.jsx("div",{className:"relative",children:z.letter===" "?n.jsx("div",{className:"w-4 h-16 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})}):n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:Q=>F.current[H]=Q,type:"text",maxLength:1,value:z.letter,onChange:Q=>de(H,Q.target.value),onKeyDown:Q=>he(H,Q),disabled:z.isRevealed,className:`w-16 h-16 text-center text-2xl font-bold border-4 rounded-xl transition-all focus:outline-none ${z.isRevealed?"bg-blue-100 border-blue-400 text-blue-700":z.isCorrect===!0?"bg-green-100 border-green-400 text-green-700":z.isCorrect===!1?"bg-red-100 border-red-400 text-red-700 animate-shake":"bg-gray-50 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`}),n.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-12 h-1 bg-gray-300 rounded"}),n.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 font-semibold",children:H+1})]})},H))})}),n.jsxs("div",{className:"flex justify-center gap-4 flex-wrap",children:[n.jsxs("button",{onClick:()=>ee(L),disabled:S||!R,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(nn,{className:"w-5 h-5"}),S?"جاري التشغيل...":"استمع للكلمة"]}),r.showHints&&n.jsx("button",{onClick:we,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:"💡 تلميح"}),n.jsxs("button",{onClick:Rt,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[M?n.jsx(Zo,{className:"w-5 h-5"}):n.jsx(Xa,{className:"w-5 h-5"}),M?"إخفاء الكلمة":"إظهار الكلمة"]}),r.allowSkip&&n.jsxs("button",{onClick:ye,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(Ev,{className:"w-5 h-5"}),"تخطي"]}),n.jsxs("button",{onClick:()=>b(!0),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5"}),"الإعدادات"]})]}),n.jsxs("div",{className:"mt-8 bg-green-50 border border-green-200 rounded-xl p-6",children:[n.jsx("h5",{className:"font-bold text-green-800 mb-3",children:"💡 نصائح للتهجئة:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"🎧"}),n.jsx("span",{children:"استمع للكلمة عدة مرات"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"⌨️"}),n.jsx("span",{children:"استخدم الأسهم للتنقل بين الحروف"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"🔤"}),n.jsx("span",{children:"فكر في الأصوات التي تسمعها"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"⚡"}),n.jsx("span",{children:"الانتقال التلقائي للحرف التالي عند الصحة"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"📝"}),n.jsx("span",{children:"ابدأ بالحروف التي تعرفها"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"💡"}),n.jsx("span",{children:"استخدم التلميحات عند الحاجة"})]})]})]})]})})]})},s1=({grade:e,onScore:t,onStreak:s})=>{const[r,a]=x.useState(null),[i,o]=x.useState([]),[l,c]=x.useState(0),[d,u]=x.useState(null),[m,y]=x.useState(!1),[j,b]=x.useState(0),[v,w]=x.useState(0),[p,g]=x.useState(!1),[f,h]=x.useState(0),[N,k]=x.useState(0),[S,C]=x.useState(!1),[M,A]=x.useState(null),[U,B]=x.useState(!1),[D,$]=x.useState(null),W={5:["Listening 1","Listening 2","Vocabulary","Grammar","Reading 1","Reading 2","Writing 1","Writing 2"],6:["Listening 1","Listening 2","Vocabulary","Grammar","Reading 1","Reading 2","Writing 1","Writing 2"]},E={"Listening 1":[{id:"l1-1",skill:"Listening 1",question:"Listen to the audio and choose the correct answer: What is the boy's favorite animal?",options:["Lion","Elephant","Tiger","Giraffe"],correctAnswer:1,explanation:'In the audio, the boy says "I love elephants because they are big and smart."',difficulty:"easy"},{id:"l1-2",skill:"Listening 1",question:"Listen to the conversation and answer: Where are the children going?",options:["To the zoo","To the park","To the museum","To the library"],correctAnswer:2,explanation:'In the conversation, the teacher says "Today we are going to visit the museum."',difficulty:"medium"},{id:"l1-3",skill:"Listening 1",question:"Listen to the story and choose the correct answer: What happened to the boy's toy?",options:["He lost it","His friend took it","It broke","His sister hid it"],correctAnswer:3,explanation:'In the story, the boy says "My sister hid my toy as a joke."',difficulty:"medium"}],"Listening 2":[{id:"l2-1",skill:"Listening 2",question:"Listen to the weather forecast and choose the correct answer: What will the weather be like tomorrow?",options:["Sunny","Rainy","Cloudy","Windy"],correctAnswer:0,explanation:'The weather forecast says "Tomorrow will be sunny with clear skies."',difficulty:"medium"},{id:"l2-2",skill:"Listening 2",question:"Listen to the announcement and answer: What time does the school trip start?",options:["8:00 AM","8:30 AM","9:00 AM","9:30 AM"],correctAnswer:2,explanation:'The announcement says "The bus will leave at 9:00 AM sharp."',difficulty:"medium"},{id:"l2-3",skill:"Listening 2",question:"Listen to the instructions and choose what you need to do first:",options:["Open your books","Write your name","Listen carefully","Raise your hand"],correctAnswer:1,explanation:'The instructions say "First, write your name at the top of the page."',difficulty:"hard"}],Vocabulary:[{id:"v-1",skill:"Vocabulary",question:'Choose the correct meaning of the word "enormous":',options:["Very small","Very big","Very fast","Very slow"],correctAnswer:1,explanation:"Enormous means very big or huge.",difficulty:"easy"},{id:"v-2",skill:"Vocabulary",question:'Which word means "a place where you can borrow books"?',options:["Hospital","School","Library","Museum"],correctAnswer:2,explanation:"A library is a place where you can borrow books.",difficulty:"easy"},{id:"v-3",skill:"Vocabulary",question:'Choose the word that means "to look at words and understand them":',options:["Write","Speak","Listen","Read"],correctAnswer:3,explanation:"To read means to look at words and understand them.",difficulty:"easy"},{id:"v-4",skill:"Vocabulary",question:'What is the opposite of "happy"?',options:["Sad","Angry","Tired","Excited"],correctAnswer:0,explanation:"The opposite of happy is sad.",difficulty:"easy"},{id:"v-5",skill:"Vocabulary",question:"Which word describes something that happens every day?",options:["Weekly","Monthly","Daily","Yearly"],correctAnswer:2,explanation:"Daily means something that happens every day.",difficulty:"medium"}],Grammar:[{id:"g-1",skill:"Grammar",question:"Choose the correct sentence:",options:["She have a new book.","She has a new book.","She having a new book.","She haves a new book."],correctAnswer:1,explanation:'We use "has" with he/she/it in the present simple tense.',difficulty:"easy"},{id:"g-2",skill:"Grammar",question:'Complete the sentence: "They _____ playing football now."',options:["is","are","am","be"],correctAnswer:1,explanation:'We use "are" with they/we/you in the present continuous tense.',difficulty:"easy"},{id:"g-3",skill:"Grammar",question:'Choose the correct past tense form of "go":',options:["goed","gone","went","going"],correctAnswer:2,explanation:'"Went" is the past tense of "go".',difficulty:"medium"},{id:"g-4",skill:"Grammar",question:"Which sentence is in the future tense?",options:["I am eating lunch.","I eat lunch.","I will eat lunch.","I ate lunch."],correctAnswer:2,explanation:'We use "will" to form the future simple tense.',difficulty:"medium"},{id:"g-5",skill:"Grammar",question:'Choose the correct comparative form: "This book is _____ than that one."',options:["more big","bigger","most big","biggest"],correctAnswer:1,explanation:'For short adjectives like "big", we add "-er" to form the comparative.',difficulty:"medium"}],"Reading 1":[{id:"r1-1",skill:"Reading 1",question:`Read the text and answer the question:

Sara loves animals. She has a cat and a dog. Her cat is black and her dog is brown. She plays with them every day.

What color is Sara's dog?`,options:["Black","White","Brown","Gray"],correctAnswer:2,explanation:'The text says "Her cat is black and her dog is brown."',text:"Sara loves animals. She has a cat and a dog. Her cat is black and her dog is brown. She plays with them every day.",difficulty:"easy"},{id:"r1-2",skill:"Reading 1",question:`Read the text and answer the question:

Tom went to the park on Saturday. He played football with his friends. They had a lot of fun. After that, they ate ice cream.

When did Tom go to the park?`,options:["Friday","Saturday","Sunday","Monday"],correctAnswer:1,explanation:'The text says "Tom went to the park on Saturday."',text:"Tom went to the park on Saturday. He played football with his friends. They had a lot of fun. After that, they ate ice cream.",difficulty:"easy"},{id:"r1-3",skill:"Reading 1",question:`Read the text and answer the question:

My name is Ali. I am 10 years old. I live in Muscat with my family. I have two brothers and one sister. My favorite subject is Science.

How many brothers does Ali have?`,options:["One","Two","Three","Four"],correctAnswer:1,explanation:'The text says "I have two brothers and one sister."',text:"My name is Ali. I am 10 years old. I live in Muscat with my family. I have two brothers and one sister. My favorite subject is Science.",difficulty:"easy"}],"Reading 2":[{id:"r2-1",skill:"Reading 2",question:`Read the text and answer the question:

The desert is a very dry place. It doesn't rain much in the desert. Many plants and animals live in the desert. They have special ways to survive with little water. Camels can live for many days without drinking water.

Why can camels survive in the desert?`,options:["They don't need water","They can live for many days without water","They drink a lot of water","They eat special plants"],correctAnswer:1,explanation:'The text says "Camels can live for many days without drinking water."',text:"The desert is a very dry place. It doesn't rain much in the desert. Many plants and animals live in the desert. They have special ways to survive with little water. Camels can live for many days without drinking water.",difficulty:"medium"},{id:"r2-2",skill:"Reading 2",question:`Read the text and answer the question:

Oman is a beautiful country in the Middle East. It has mountains, beaches, and deserts. The capital city is Muscat. People in Oman speak Arabic. Oman is famous for its dates and frankincense.

What is the capital city of Oman?`,options:["Dubai","Salalah","Muscat","Nizwa"],correctAnswer:2,explanation:'The text says "The capital city is Muscat."',text:"Oman is a beautiful country in the Middle East. It has mountains, beaches, and deserts. The capital city is Muscat. People in Oman speak Arabic. Oman is famous for its dates and frankincense.",difficulty:"medium"},{id:"r2-3",skill:"Reading 2",question:`Read the text and answer the question:

The water cycle has four main stages. First, water from oceans, lakes, and rivers evaporates and becomes water vapor. Then, the water vapor rises and forms clouds. Next, the water falls back to Earth as rain or snow. Finally, the water flows back to oceans, lakes, and rivers.

What is the first stage of the water cycle?`,options:["Water forms clouds","Water falls as rain","Water flows to oceans","Water evaporates"],correctAnswer:3,explanation:'The text says "First, water from oceans, lakes, and rivers evaporates and becomes water vapor."',text:"The water cycle has four main stages. First, water from oceans, lakes, and rivers evaporates and becomes water vapor. Then, the water vapor rises and forms clouds. Next, the water falls back to Earth as rain or snow. Finally, the water flows back to oceans, lakes, and rivers.",difficulty:"hard"}],"Writing 1":[{id:"w1-1",skill:"Writing 1",question:"Choose the correct order of words to make a sentence:",options:["cat the is black","the cat is black","black is the cat","is black the cat"],correctAnswer:1,explanation:"The correct word order in English is: article + noun + verb + adjective.",difficulty:"easy"},{id:"w1-2",skill:"Writing 1",question:"Which sentence has the correct punctuation?",options:["where is your book","where is your book.","where is your book?","where, is your book"],correctAnswer:2,explanation:"Questions should end with a question mark (?).",difficulty:"easy"},{id:"w1-3",skill:"Writing 1",question:"Choose the sentence with the correct capitalization:",options:["my friend ahmed lives in muscat.","My friend ahmed lives in muscat.","My friend Ahmed lives in muscat.","My friend Ahmed lives in Muscat."],correctAnswer:3,explanation:"We capitalize the first letter of sentences, names of people, and names of places.",difficulty:"medium"}],"Writing 2":[{id:"w2-1",skill:"Writing 2",question:"Which is the best topic sentence for a paragraph about healthy food?",options:["I like apples and bananas.","There are many types of food.","Eating healthy food is important for our bodies.","My mother cooks delicious meals."],correctAnswer:2,explanation:"A good topic sentence introduces the main idea of the paragraph.",difficulty:"medium"},{id:"w2-2",skill:"Writing 2",question:"Choose the best concluding sentence for a paragraph about your school:",options:["Schools are important places.","I go to school every day.","My school has many classrooms.","I am proud to be a student at my wonderful school."],correctAnswer:3,explanation:"A good concluding sentence summarizes the main idea and gives a final thought.",difficulty:"hard"},{id:"w2-3",skill:"Writing 2",question:"Which sentence does NOT belong in a paragraph about animals in the zoo?",options:["The lions are very big and strong.","The monkeys are funny and playful.","My favorite subject is Mathematics.","The elephants have long trunks."],correctAnswer:2,explanation:"This sentence is about school subjects, not about animals in the zoo.",difficulty:"medium"}]};x.useEffect(()=>{r&&T(r)},[r,e]);const T=Y=>{C(!0),A(null);try{let G=[];e===5&&(G=E[Y]||[]),G.length===0?A(`No questions available for ${Y} in Grade ${e}`):(o(G),c(0),u(null),y(!1),b(0),w(60),g(!1))}catch(G){console.error("Error loading questions:",G),A("Failed to load questions. Please try again.")}finally{C(!1)}};x.useEffect(()=>{if(r&&i.length>0&&!p&&!m){const Y=setInterval(()=>{w(G=>G<=1?(clearInterval(Y),O(),0):G-1)},1e3);return()=>clearInterval(Y)}},[r,i,l,p,m]),x.useEffect(()=>()=>{D&&(D.pause(),D.src="")},[D]);const O=()=>{u(null),y(!0),h(0),s(!1),setTimeout(()=>{_()},3e3)},I=Y=>{if(m)return;u(Y),y(!0);const G=i[l];if(!G)return;if(Y===G.correctAnswer){const ee=j+1,ne=f+1;b(ee),h(ne),k(Math.max(N,ne));let de=10;G.difficulty==="medium"&&(de=15),G.difficulty==="hard"&&(de=20),v>45&&(de+=5),ne>=3&&(de+=ne),t(de),s(!0)}else h(0),s(!1);setTimeout(()=>{_()},3e3)},_=()=>{l+1>=i.length?g(!0):(c(Y=>Y+1),u(null),y(!1),w(60),D&&(D.pause(),D.src="",B(!1)))},R=()=>{c(0),u(null),y(!1),b(0),w(60),g(!1),h(0),D&&(D.pause(),D.src="",B(!1))},P=Y=>{if(!Y)return;D&&(D.pause(),D.src="");const G=new Audio(Y);$(G),G.onplay=()=>B(!0),G.onpause=()=>B(!1),G.onended=()=>B(!1),G.onerror=()=>{console.warn("Audio file not available for this question"),B(!1)},G.play().catch(le=>{console.warn("Audio playback not available:",le.message),B(!1)})},F=Y=>`${Y}s`,L=i.length>0&&l<i.length?i[l]:null;if(!r)return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-xl p-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-center",children:"اختبارات تفاعلية"}),n.jsx("p",{className:"text-center opacity-90",children:"اختر المهارة التي تريد التدرب عليها"})]}),n.jsx("div",{className:"bg-white rounded-b-xl p-8 shadow-xl",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:(W[e]||[]).map(Y=>n.jsx("button",{onClick:()=>a(Y),className:"bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[Y.includes("Listening")&&n.jsx(od,{className:"w-8 h-8"}),Y.includes("Vocabulary")&&n.jsx(ze,{className:"w-8 h-8"}),Y.includes("Grammar")&&n.jsx(vn,{className:"w-8 h-8"}),Y.includes("Reading")&&n.jsx(ls,{className:"w-8 h-8"}),Y.includes("Writing")&&n.jsx(jt,{className:"w-8 h-8"}),n.jsx("span",{children:Y})]})},Y))})})]});if(S)return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل الأسئلة..."})]});if(M)return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("div",{className:"text-red-500 mb-4",children:"⚠️"}),n.jsx("p",{className:"text-red-600 font-bold mb-2",children:M}),n.jsx("button",{onClick:()=>a(null),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors mt-4",children:"العودة للاختيار"})]});if(p){const Y=Math.round(j/i.length*100);return n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-8 text-center",children:[n.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🎉 انتهى الاختبار!"}),n.jsxs("div",{className:"text-6xl font-bold mb-2",children:[Y,"%"]}),n.jsxs("p",{className:"text-xl mb-4",children:[j," / ",i.length," إجابة صحيحة"]}),n.jsxs("div",{className:"flex justify-center gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:N}),n.jsx("div",{className:"text-sm opacity-80",children:"أفضل سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:r}),n.jsx("div",{className:"text-sm opacity-80",children:"المهارة"})]})]})]}),n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"mb-6",children:Y>=90?n.jsx("p",{className:"text-2xl text-green-600 font-bold",children:"🏆 ممتاز! أداء استثنائي!"}):Y>=80?n.jsx("p",{className:"text-2xl text-blue-600 font-bold",children:"🎉 جيد جداً! أداء رائع!"}):Y>=70?n.jsx("p",{className:"text-2xl text-yellow-600 font-bold",children:"👍 جيد! استمر في التحسن!"}):Y>=60?n.jsx("p",{className:"text-2xl text-orange-600 font-bold",children:"📚 مقبول! تحتاج إلى مزيد من التدريب"}):n.jsx("p",{className:"text-2xl text-red-600 font-bold",children:"💪 لا تيأس! واصل المحاولة!"})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:"إعادة الاختبار"}),n.jsx("button",{onClick:()=>a(null),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg",children:"اختيار مهارة أخرى"})]})]})]})}return i.length===0||!L?n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-xl p-8 text-center",children:[n.jsx("p",{className:"text-gray-600",children:"لا توجد أسئلة متاحة لهذه المهارة حالياً."}),n.jsx("button",{onClick:()=>a(null),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors mt-4",children:"العودة للاختيار"})]}):n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",children:r}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:j}),n.jsx("div",{className:"text-xs opacity-80",children:"النتيجة"})]}),f>0&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[n.jsx(on,{className:"w-4 h-4"}),f]}),n.jsx("div",{className:"text-xs opacity-80",children:"سلسلة"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-lg font-bold flex items-center gap-1 ${v<=10?"text-red-300 animate-pulse":""}`,children:[n.jsx(dt,{className:"w-4 h-4"}),F(v)]}),n.jsx("div",{className:"text-xs opacity-80",children:"وقت"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm opacity-90",children:[n.jsxs("span",{children:["السؤال ",l+1," / ",i.length]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.difficulty==="easy"?"bg-green-500":L.difficulty==="medium"?"bg-yellow-500":"bg-red-500"}`,children:L.difficulty==="easy"?"سهل":L.difficulty==="medium"?"متوسط":"صعب"})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mt-4",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${(l+1)/i.length*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-b-xl p-8 shadow-xl",children:[L.skill.includes("Listening")&&n.jsxs("div",{className:"mb-6 text-center",children:[n.jsxs("button",{onClick:()=>L.audio&&P(L.audio),className:`bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg flex items-center gap-2 mx-auto ${U?"animate-pulse":""}`,disabled:!L.audio,children:[n.jsx(od,{className:"w-5 h-5"}),U?"جاري التشغيل...":"استمع للتسجيل"]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:L.audio?"اضغط على الزر للاستماع إلى التسجيل الصوتي":"التسجيل الصوتي غير متوفر حالياً"})]}),L.skill.includes("Reading")&&L.text&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:[n.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"اقرأ النص التالي:"}),n.jsx("p",{className:"text-gray-800 whitespace-pre-line",children:L.text})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4",children:L.question}),L.image&&n.jsx("div",{className:"mb-4",children:n.jsx("img",{src:L.image,alt:"Question image",className:"max-w-full h-auto rounded-lg mx-auto"})})]}),L.options&&n.jsx("div",{className:"space-y-4 mb-8",children:L.options.map((Y,G)=>{let le="w-full p-4 rounded-xl font-semibold transition-all hover:scale-105 shadow-md ";const ee=/[\u0600-\u06FF]/.test(Y),ne=ee?"rtl":"ltr",de=ee?"text-right":"text-left";return m?G===L.correctAnswer?le+="bg-green-500 text-white":G===d?le+="bg-red-500 text-white":le+="bg-gray-300 text-gray-600":le+="bg-blue-50 hover:bg-blue-100 text-gray-800 border-2 border-blue-200 hover:border-blue-400",n.jsx("button",{onClick:()=>I(G),disabled:m,className:`${le} ${de}`,dir:ne,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-lg",children:Y}),m&&G===L.correctAnswer&&n.jsx(Fe,{className:"w-6 h-6"}),m&&G===d&&G!==L.correctAnswer&&n.jsx(Et,{className:"w-6 h-6"})]})},G)})}),L.skill.includes("Writing")&&!L.options&&n.jsxs("div",{className:"mb-6",children:[n.jsx("textarea",{className:"w-full h-32 p-4 border-2 border-blue-300 rounded-xl focus:border-blue-500 focus:outline-none",placeholder:"اكتب إجابتك هنا...",disabled:m}),!m&&n.jsx("button",{onClick:()=>I("submitted"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:scale-105 shadow-lg mt-4",children:"تقديم الإجابة"})]}),m&&L.explanation&&n.jsxs("div",{className:`p-6 rounded-xl text-center font-semibold ${d===L.correctAnswer?"bg-green-100 text-green-800 border-2 border-green-300":"bg-red-100 text-red-800 border-2 border-red-300"}`,children:[n.jsx("div",{className:"flex items-center justify-center gap-3 mb-3",children:d===L.correctAnswer?n.jsxs(n.Fragment,{children:[n.jsx(Fe,{className:"w-8 h-8"}),n.jsx("span",{className:"text-xl",children:"✅ إجابة صحيحة!"}),f>1&&n.jsxs("span",{className:"ml-2 text-indigo-600",children:["🔥 سلسلة ",f,"!"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Et,{className:"w-8 h-8"}),n.jsx("span",{className:"text-xl",children:"❌ إجابة خاطئة!"})]})}),n.jsx("p",{className:"text-lg",children:L.explanation})]}),n.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>a(null),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للاختيار"}),m&&n.jsxs("button",{onClick:_,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[l+1>=i.length?"إنهاء الاختبار":"السؤال التالي",n.jsx(vu,{className:"w-4 h-4"})]})]})]})]})},r1=({progress:e,currentActivity:t})=>{const r=(()=>{if(e.totalScore===0)return 0;const a=Math.min(e.totalScore/500*100,100);return Math.round(a)})();return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"تقدمك في التعلم"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ju,{className:"w-5 h-5 text-yellow-500"}),n.jsx("span",{className:"font-bold text-gray-700",children:e.totalScore})]}),e.currentStreak>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(on,{className:"w-5 h-5 text-orange-500"}),n.jsx("span",{className:"font-bold text-gray-700",children:e.currentStreak})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsx("span",{children:"التقدم العام"}),n.jsxs("span",{children:[r,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-teal-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${r}%`}})})]}),t&&n.jsx("div",{className:"text-center py-2",children:n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold",children:["النشاط الحالي: ",t]})}),e.unitsCompleted.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Pt,{className:"w-4 h-4 text-yellow-500"}),n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"الوحدات المكتملة:"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.unitsCompleted.map((a,i)=>n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold",children:a},i))})]})]})},a1=({achievement:e,onClose:t})=>{const[s,r]=x.useState(!1);return x.useEffect(()=>{if(e){r(!0);const a=setTimeout(()=>{r(!1),setTimeout(t,300)},3e3);return()=>clearTimeout(a)}},[e,t]),e?n.jsx("div",{className:`
      fixed top-4 right-4 z-50 transform transition-all duration-300 
      ${s?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
    `,children:n.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl shadow-2xl p-6 max-w-sm",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-3xl",children:e.icon}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-lg",children:e.title}),n.jsx("p",{className:"text-sm opacity-90",children:e.description})]})]}),n.jsx("button",{onClick:()=>{r(!1),setTimeout(t,300)},className:"text-white hover:text-yellow-200 transition-colors",children:n.jsx($n,{className:"w-5 h-5"})})]})})}):null};function ge(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Wr(e,t=[]){let s=[];function r(i,o){const l=x.createContext(o),c=s.length;s=[...s,o];const d=m=>{var p;const{scope:y,children:j,...b}=m,v=((p=y==null?void 0:y[e])==null?void 0:p[c])||l,w=x.useMemo(()=>b,Object.values(b));return n.jsx(v.Provider,{value:w,children:j})};d.displayName=i+"Provider";function u(m,y){var v;const j=((v=y==null?void 0:y[e])==null?void 0:v[c])||l,b=x.useContext(j);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,i1(a,...t)]}function i1(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function Pm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ll(...e){return t=>{let s=!1;const r=e.map(a=>{const i=Pm(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():Pm(e[a],null)}}}}function Nt(...e){return x.useCallback(ll(...e),e)}function Co(e){const t=o1(e),s=x.forwardRef((r,a)=>{const{children:i,...o}=r,l=x.Children.toArray(i),c=l.find(c1);if(c){const d=c.props.children,u=l.map(m=>m===c?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...o,ref:a,children:x.isValidElement(d)?x.cloneElement(d,void 0,u):null})}return n.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function o1(e){const t=x.forwardRef((s,r)=>{const{children:a,...i}=s;if(x.isValidElement(a)){const o=u1(a),l=d1(i,a.props);return a.type!==x.Fragment&&(l.ref=r?ll(r,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var l1=Symbol("radix.slottable");function c1(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===l1}function d1(e,t){const s={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?s[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[r]=a):r==="style"?s[r]={...a,...i}:r==="className"&&(s[r]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function u1(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Kg(e){const t=e+"CollectionProvider",[s,r]=Wr(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:p}=v,g=qn.useRef(null),f=qn.useRef(new Map).current;return n.jsx(a,{scope:w,itemMap:f,collectionRef:g,children:p})};o.displayName=t;const l=e+"CollectionSlot",c=Co(l),d=qn.forwardRef((v,w)=>{const{scope:p,children:g}=v,f=i(l,p),h=Nt(w,f.collectionRef);return n.jsx(c,{ref:h,children:g})});d.displayName=l;const u=e+"CollectionItemSlot",m="data-radix-collection-item",y=Co(u),j=qn.forwardRef((v,w)=>{const{scope:p,children:g,...f}=v,h=qn.useRef(null),N=Nt(w,h),k=i(u,p);return qn.useEffect(()=>(k.itemMap.set(h,{ref:h,...f}),()=>void k.itemMap.delete(h))),n.jsx(y,{[m]:"",ref:N,children:g})});j.displayName=u;function b(v){const w=i(e+"CollectionConsumer",v);return qn.useCallback(()=>{const g=w.collectionRef.current;if(!g)return[];const f=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((k,S)=>f.indexOf(k.ref.current)-f.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:j},b,r]}var hs=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},h1=pf[" useId ".trim().toString()]||(()=>{}),m1=0;function Eo(e){const[t,s]=x.useState(h1());return hs(()=>{s(r=>r??String(m1++))},[e]),t?`radix-${t}`:""}var f1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Be=f1.reduce((e,t)=>{const s=Co(`Primitive.${t}`),r=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Qg(e,t){e&&Xo.flushSync(()=>e.dispatchEvent(t))}function Ln(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...s)=>{var r;return(r=t.current)==null?void 0:r.call(t,...s)},[])}var p1=pf[" useInsertionEffect ".trim().toString()]||hs;function Au({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[a,i,o]=g1({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:a;{const u=x.useRef(e!==void 0);x.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=x.useCallback(u=>{var m;if(l){const y=x1(u)?u(e):u;y!==e&&((m=o.current)==null||m.call(o,y))}else i(u)},[l,e,i,o]);return[c,d]}function g1({defaultProp:e,onChange:t}){const[s,r]=x.useState(e),a=x.useRef(s),i=x.useRef(t);return p1(()=>{i.current=t},[t]),x.useEffect(()=>{var o;a.current!==s&&((o=i.current)==null||o.call(i,s),a.current=s)},[s,a]),[s,r,i]}function x1(e){return typeof e=="function"}var y1=x.createContext(void 0);function Pu(e){const t=x.useContext(y1);return e||t||"ltr"}var tc="rovingFocusGroup.onEntryFocus",b1={bubbles:!1,cancelable:!0},si="RovingFocusGroup",[bd,Yg,v1]=Kg(si),[w1,cl]=Wr(si,[v1]),[j1,N1]=w1(si),Jg=x.forwardRef((e,t)=>n.jsx(bd.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(bd.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(S1,{...e,ref:t})})}));Jg.displayName=si;var S1=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,y=x.useRef(null),j=Nt(t,y),b=Pu(i),[v,w]=Au({prop:o,defaultProp:l??null,onChange:c,caller:si}),[p,g]=x.useState(!1),f=Ln(d),h=Yg(s),N=x.useRef(!1),[k,S]=x.useState(0);return x.useEffect(()=>{const C=y.current;if(C)return C.addEventListener(tc,f),()=>C.removeEventListener(tc,f)},[f]),n.jsx(j1,{scope:s,orientation:r,dir:b,loop:a,currentTabStopId:v,onItemFocus:x.useCallback(C=>w(C),[w]),onItemShiftTab:x.useCallback(()=>g(!0),[]),onFocusableItemAdd:x.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>S(C=>C-1),[]),children:n.jsx(Be.div,{tabIndex:p||k===0?-1:0,"data-orientation":r,...m,ref:j,style:{outline:"none",...e.style},onMouseDown:ge(e.onMouseDown,()=>{N.current=!0}),onFocus:ge(e.onFocus,C=>{const M=!N.current;if(C.target===C.currentTarget&&M&&!p){const A=new CustomEvent(tc,b1);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const U=h().filter(E=>E.focusable),B=U.find(E=>E.active),D=U.find(E=>E.id===v),W=[B,D,...U].filter(Boolean).map(E=>E.ref.current);ex(W,u)}}N.current=!1}),onBlur:ge(e.onBlur,()=>g(!1))})})}),Xg="RovingFocusGroupItem",Zg=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Eo(),d=i||c,u=N1(Xg,s),m=u.currentTabStopId===d,y=Yg(s),{onFocusableItemAdd:j,onFocusableItemRemove:b,currentTabStopId:v}=u;return x.useEffect(()=>{if(r)return j(),()=>b()},[r,j,b]),n.jsx(bd.ItemSlot,{scope:s,id:d,focusable:r,active:a,children:n.jsx(Be.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:ge(e.onMouseDown,w=>{r?u.onItemFocus(d):w.preventDefault()}),onFocus:ge(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ge(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const p=C1(w,u.orientation,u.dir);if(p!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let f=y().filter(h=>h.focusable).map(h=>h.ref.current);if(p==="last")f.reverse();else if(p==="prev"||p==="next"){p==="prev"&&f.reverse();const h=f.indexOf(w.currentTarget);f=u.loop?E1(f,h+1):f.slice(h+1)}setTimeout(()=>ex(f))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:v!=null}):o})})});Zg.displayName=Xg;var k1={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _1(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function C1(e,t,s){const r=_1(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return k1[r]}function ex(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function E1(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var tx=Jg,nx=Zg;function T1(e,t){return x.useReducer((s,r)=>t[s][r]??s,e)}var qr=e=>{const{present:t,children:s}=e,r=O1(t),a=typeof s=="function"?s({present:r.isPresent}):x.Children.only(s),i=Nt(r.ref,A1(a));return typeof s=="function"||r.isPresent?x.cloneElement(a,{ref:i}):null};qr.displayName="Presence";function O1(e){const[t,s]=x.useState(),r=x.useRef(null),a=x.useRef(e),i=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=T1(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=Oi(r.current);i.current=l==="mounted"?d:"none"},[l]),hs(()=>{const d=r.current,u=a.current;if(u!==e){const y=i.current,j=Oi(d);e?c("MOUNT"):j==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&y!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),hs(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=j=>{const v=Oi(r.current).includes(j.animationName);if(j.target===t&&v&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},y=j=>{j.target===t&&(i.current=Oi(r.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{r.current=d?getComputedStyle(d):null,s(d)},[])}}function Oi(e){return(e==null?void 0:e.animationName)||"none"}function A1(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var dl="Tabs",[P1,iC]=Wr(dl,[cl]),sx=cl(),[I1,Iu]=P1(dl),rx=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Pu(l),[m,y]=Au({prop:r,onChange:a,defaultProp:i??"",caller:dl});return n.jsx(I1,{scope:s,baseId:Eo(),value:m,onValueChange:y,orientation:o,dir:u,activationMode:c,children:n.jsx(Be.div,{dir:u,"data-orientation":o,...d,ref:t})})});rx.displayName=dl;var ax="TabsList",ix=x.forwardRef((e,t)=>{const{__scopeTabs:s,loop:r=!0,...a}=e,i=Iu(ax,s),o=sx(s);return n.jsx(tx,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:n.jsx(Be.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});ix.displayName=ax;var ox="TabsTrigger",lx=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,disabled:a=!1,...i}=e,o=Iu(ox,s),l=sx(s),c=ux(o.baseId,r),d=hx(o.baseId,r),u=r===o.value;return n.jsx(nx,{asChild:!0,...l,focusable:!a,active:u,children:n.jsx(Be.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ge(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(r):m.preventDefault()}),onKeyDown:ge(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(r)}),onFocus:ge(e.onFocus,()=>{const m=o.activationMode!=="manual";!u&&!a&&m&&o.onValueChange(r)})})})});lx.displayName=ox;var cx="TabsContent",dx=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,forceMount:a,children:i,...o}=e,l=Iu(cx,s),c=ux(l.baseId,r),d=hx(l.baseId,r),u=r===l.value,m=x.useRef(u);return x.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),n.jsx(qr,{present:a||u,children:({present:y})=>n.jsx(Be.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!y,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:y&&i})})});dx.displayName=cx;function ux(e,t){return`${e}-trigger-${t}`}function hx(e,t){return`${e}-content-${t}`}var M1=rx,mx=ix,fx=lx,px=dx;const nc=M1,Ki=x.forwardRef(({className:e,...t},s)=>n.jsx(mx,{ref:s,className:e,...t}));Ki.displayName=mx.displayName;const at=x.forwardRef(({className:e,...t},s)=>n.jsx(fx,{ref:s,className:e,...t}));at.displayName=fx.displayName;const it=x.forwardRef(({className:e,...t},s)=>n.jsx(px,{ref:s,className:e,...t}));it.displayName=px.displayName;const dn=e=>e.map(t=>({...t,partOfSpeech:t.partOfSpeech||R1(t.english),exampleSentence:t.exampleSentence||D1(t),difficulty:t.difficulty||$1(t.english)})),R1=e=>{const t=["cat","dog","book","house","school","teacher","student","family","mother","father","computer","phone","car","tree","water","food","apple","banana","baby","sister","brother","talent","show","stage","audience","adventure","treasure","map","compass","cave","forest","mountain","shopping","market","store","price","money","customer"],s=["run","walk","eat","drink","play","study","read","write","swim","jump","sing","dance","cook","sleep","work","help","learn","teach","perform","explore","discover","remember","miss","buy","sell","change"],r=["big","small","happy","sad","beautiful","ugly","hot","cold","fast","slow","good","bad","new","old","young","tall","short","kind","clever","brave","red","blue","green","yellow","black","white","excited","modern","expensive","cheap"],a=["hello","goodbye","yes","no","please","thank you","welcome"],i=["one","two","three","four","five","six","seven","eight","nine","ten"];return t.includes(e.toLowerCase())?"noun":s.includes(e.toLowerCase())?"verb":r.includes(e.toLowerCase())?"adjective":a.includes(e.toLowerCase())?"interjection":i.includes(e.toLowerCase())?"noun":e.endsWith("ing")?"verb":e.endsWith("ly")?"adverb":e.endsWith("tion")||e.endsWith("sion")?"noun":e.endsWith("ful")||e.endsWith("less")?"adjective":"noun"},D1=e=>{const t={noun:[`I have a ${e.english}.`,`The ${e.english} is very nice.`,`She likes the ${e.english}.`,`We use the ${e.english} every day.`],verb:[`I ${e.english} every day.`,`She can ${e.english} very well.`,`They ${e.english} together.`,`We like to ${e.english}.`],adjective:[`The cat is very ${e.english}.`,`She looks ${e.english} today.`,`This book is ${e.english}.`,`I feel ${e.english}.`],interjection:[`${e.english}! How are you?`,`She said "${e.english}" to everyone.`,`${e.english}, I am fine.`,`We always say "${e.english}".`]},s=e.partOfSpeech||"noun",r=t[s]||t.noun;return r[Math.floor(Math.random()*r.length)]},$1=e=>e.length<=4?"easy":e.length<=7?"medium":"hard",un=e=>{const t=new Map;return e.forEach(s=>{const r=s.english.toLowerCase().trim();if(!t.has(r))t.set(r,s);else{const a=t.get(r),i={...a,pronunciation:s.pronunciation||a.pronunciation,exampleSentence:s.exampleSentence||a.exampleSentence,partOfSpeech:s.partOfSpeech||a.partOfSpeech};t.set(r,i)}}),Array.from(t.values()).sort((s,r)=>s.english.localeCompare(r.english))},gx={1:un(dn(wN)),2:un(dn(SN)),3:un(dn(CN)),4:un(dn(ON)),5:un(dn(IN)),6:un(dn(DN)),9:un(dn(FN)),10:un(dn(WN)),11:un(dn(HN)),12:un(dn(KN))},ul=e=>{const t=gx[e]||[];console.log(`الصف ${e}: تم تحميل ${t.length} كلمة فريدة`);const s=new Map;t.forEach(a=>{const i=a.english.toLowerCase();s.set(i,(s.get(i)||0)+1)});const r=Array.from(s.entries()).filter(([a,i])=>i>1);return r.length>0&&console.warn(`تم العثور على كلمات مكررة في الصف ${e}:`,r),t},Im=()=>Object.values(gx).flat(),Mu=e=>{const t=ul(e),s=[...new Set(t.map(r=>r.unit))];return console.log(`الصف ${e}: تم تحميل ${s.length} وحدة فريدة:`,s),s};Mu(5);const L1=e=>{const[t,s]=x.useState([]),[r,a]=x.useState(!0),[i,o]=x.useState(null);x.useEffect(()=>{l()},[e]);const l=async()=>{a(!0),o(null);try{let m=Z.from("vocabulary_words").select("*");const{data:y,error:j}=await m;if(j)throw j;if(y&&y.length>0){const b=y.map(v=>({id:v.id,english:v.english,arabic:v.arabic,unit:v.unit,pronunciation:v.pronunciation||void 0,grade:v.grade,partOfSpeech:v.part_of_speech||void 0,exampleSentence:v.example_sentence||void 0,difficulty:v.difficulty||void 0}));s(b)}else{const b=e?ul(e):Im();s(b)}}catch(m){console.error("Error loading vocabulary:",m),o(m.message);const y=Im();s(y)}finally{a(!1)}};return{words:t,loading:r,error:i,addWord:async m=>{try{const{data:y,error:j}=await Z.from("vocabulary_words").insert({english:m.english,arabic:m.arabic,unit:m.unit,pronunciation:m.pronunciation,grade:m.grade,part_of_speech:m.partOfSpeech,example_sentence:m.exampleSentence,difficulty:m.difficulty,created_at:new Date().toISOString()}).select();if(j)throw j;if(y&&y.length>0){const b={id:y[0].id,english:y[0].english,arabic:y[0].arabic,unit:y[0].unit,pronunciation:y[0].pronunciation||void 0,grade:y[0].grade,partOfSpeech:y[0].part_of_speech||void 0,exampleSentence:y[0].example_sentence||void 0,difficulty:y[0].difficulty||void 0};return s(v=>[...v,b]),b}}catch(y){throw console.error("Error adding word:",y),o(y.message),y}},updateWord:async(m,y)=>{try{const j={};y.english&&(j.english=y.english),y.arabic&&(j.arabic=y.arabic),y.unit&&(j.unit=y.unit),y.pronunciation!==void 0&&(j.pronunciation=y.pronunciation),y.grade&&(j.grade=y.grade),y.partOfSpeech!==void 0&&(j.part_of_speech=y.partOfSpeech),y.exampleSentence!==void 0&&(j.example_sentence=y.exampleSentence),y.difficulty!==void 0&&(j.difficulty=y.difficulty),j.updated_at=new Date().toISOString();const{error:b}=await Z.from("vocabulary_words").update(j).eq("id",m);if(b)throw b;s(v=>v.map(w=>w.id===m?{...w,...y}:w))}catch(j){console.error("Error updating word:",j),o(j.message),s(b=>b.map(v=>v.id===m?{...v,...y}:v))}},deleteWord:async m=>{try{const{error:y}=await Z.from("vocabulary_words").delete().eq("id",m);if(y)throw y;s(j=>j.filter(b=>b.id!==m))}catch(y){console.error("Error deleting word:",y),o(y.message),s(j=>j.filter(b=>b.id!==m))}},refreshWords:l}},F1=()=>{const[e,t]=x.useState(""),[s,r]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState([]),[c,d]=x.useState([]),[u,m]=x.useState(!1),[y,j]=x.useState(!1),[b,v]=x.useState(null),[w,p]=x.useState(null),{words:g,loading:f,addWord:h,updateWord:N,deleteWord:k}=L1();x.useEffect(()=>{const $=[...new Set(g.map(E=>E.grade))].sort((E,T)=>E-T);d($);const W=[...new Set(g.map(E=>E.unit))];l(W)},[g]);const S=g.filter($=>{if(s!==null&&$.grade!==s||a&&$.unit!==a)return!1;if(e){const W=e.toLowerCase();return $.english.toLowerCase().includes(W)||$.arabic.includes(W)||$.pronunciation&&$.pronunciation.toLowerCase().includes(W)}return!0}),C=()=>{m(!0),setTimeout(()=>{const $=[["الإنجليزية","العربية","النطق","الوحدة","الصف","نوع الكلمة","مثال","الصعوبة"].join(","),...S.map(O=>[`"${O.english}"`,`"${O.arabic}"`,`"${O.pronunciation||""}"`,`"${O.unit}"`,O.grade,`"${O.partOfSpeech||""}"`,`"${O.exampleSentence||""}"`,`"${O.difficulty||""}"`].join(","))].join(`
`),W=new Blob([$],{type:"text/csv;charset=utf-8;"}),E=URL.createObjectURL(W),T=document.createElement("a");T.setAttribute("href",E),T.setAttribute("download","english_vocabulary.csv"),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T),m(!1)},1e3)},M=()=>{t(""),r(null),i(null)},A=()=>{v(null),j(!0)},U=$=>{v($),j(!0)},B=$=>{p($)},D=async $=>{try{await k($),p(null);const W=document.createElement("div");W.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",W.textContent="تم حذف الكلمة بنجاح",document.body.appendChild(W),setTimeout(()=>{W.style.opacity="0",W.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(W)&&document.body.removeChild(W)},300)},3e3)}catch(W){console.error("Error deleting word:",W);const E=document.createElement("div");E.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",E.textContent="حدث خطأ أثناء حذف الكلمة",document.body.appendChild(E),setTimeout(()=>{E.style.opacity="0",E.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},300)},3e3)}};return n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-xl p-6",children:[n.jsxs("h3",{className:"text-2xl font-bold text-center mb-2 flex items-center justify-center gap-2",children:[n.jsx(ze,{className:"w-8 h-8"}),"مستخرج المفردات"]}),n.jsx("p",{className:"text-center opacity-90",children:"عرض وتصفية وتصدير جميع كلمات المنهج"})]}),n.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-semibold text-gray-700 mb-2",children:"بحث"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",id:"search",value:e,onChange:$=>t($.target.value),placeholder:"ابحث عن كلمة...",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"}),n.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e&&n.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx($n,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"grade",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف"}),n.jsxs("select",{id:"grade",value:s===null?"":s,onChange:$=>r($.target.value?Number($.target.value):null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الصفوف"}),c.map($=>n.jsxs("option",{value:$,children:["الصف ",$]},$))]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"unit",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة"}),n.jsxs("select",{id:"unit",value:a||"",onChange:$=>i($.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الوحدات"}),o.map($=>n.jsx("option",{value:$,children:$},$))]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-gray-600",children:["تم العثور على ",n.jsx("span",{className:"font-bold text-blue-600",children:S.length})," كلمة"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"إعادة ضبط"]}),n.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(De,{className:"w-4 h-4"}),"إضافة كلمة"]}),n.jsx("button",{onClick:C,disabled:S.length===0||u,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:u?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري التصدير..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"w-4 h-4"}),"تصدير CSV"]})})]})]})]}),n.jsx("div",{className:"bg-white rounded-b-xl p-6 shadow-xl overflow-x-auto",children:f?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل المفردات..."})]}):S.length>0?n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإنجليزية"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"العربية"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النطق"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الوحدة"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الصف"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(($,W)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$.english}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.arabic}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:$.pronunciation||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.unit}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:["الصف ",$.grade]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>U($),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>B($.id||`${$.english}-${W}`),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},`${$.english}-${W}`))})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx(cs,{className:"w-12 h-12 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد نتائج"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على كلمات تطابق معايير البحث الخاصة بك"}),n.jsx("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:"إعادة ضبط الفلاتر"})]})}),S.length>0&&n.jsxs("div",{className:"mt-6 bg-blue-50 rounded-xl p-6 border border-blue-100",children:[n.jsxs("h4",{className:"font-bold text-blue-800 mb-4 flex items-center gap-2",children:[n.jsx(cs,{className:"w-5 h-5"}),"إحصائيات المفردات:"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-100",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"عدد الكلمات حسب الصف"}),n.jsx("div",{className:"space-y-2",children:c.map($=>{const W=S.filter(E=>E.grade===$).length;return W===0?null:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm",children:["الصف ",$]}),n.jsxs("span",{className:"font-semibold text-blue-600",children:[W," كلمة"]})]},$)})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-100",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"الوحدات الأكثر شيوعاً"}),n.jsx("div",{className:"space-y-2",children:o.map($=>({unit:$,count:S.filter(W=>W.unit===$).length})).filter($=>$.count>0).sort(($,W)=>W.count-$.count).slice(0,5).map($=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm truncate max-w-[150px]",children:$.unit}),n.jsxs("span",{className:"font-semibold text-blue-600",children:[$.count," كلمة"]})]},$.unit))})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-100",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"إحصائيات عامة"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"إجمالي الكلمات"}),n.jsx("span",{className:"font-semibold text-blue-600",children:S.length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"الكلمات مع نطق"}),n.jsx("span",{className:"font-semibold text-blue-600",children:S.filter($=>$.pronunciation).length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"عدد الوحدات"}),n.jsx("span",{className:"font-semibold text-blue-600",children:new Set(S.map($=>$.unit)).size})]})]})]})]})]}),y&&n.jsx(z1,{word:b,onClose:()=>j(!1),onSave:async $=>{try{b?await N(b.id||"",$):await h($),j(!1);const W=document.createElement("div");W.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",W.textContent=b?"تم تحديث الكلمة بنجاح":"تمت إضافة الكلمة بنجاح",document.body.appendChild(W),setTimeout(()=>{W.style.opacity="0",W.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(W)&&document.body.removeChild(W)},300)},3e3)}catch(W){console.error("Error saving word:",W);const E=document.createElement("div");E.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",E.textContent="حدث خطأ أثناء حفظ الكلمة",document.body.appendChild(E),setTimeout(()=>{E.style.opacity="0",E.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},300)},3e3)}}}),w&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>D(w),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف الكلمة"}),n.jsx("button",{onClick:()=>p(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},z1=({word:e,onClose:t,onSave:s})=>{const[r,a]=x.useState({english:(e==null?void 0:e.english)||"",arabic:(e==null?void 0:e.arabic)||"",unit:(e==null?void 0:e.unit)||"",pronunciation:(e==null?void 0:e.pronunciation)||"",grade:(e==null?void 0:e.grade)||5,partOfSpeech:(e==null?void 0:e.partOfSpeech)||"noun",exampleSentence:(e==null?void 0:e.exampleSentence)||"",difficulty:(e==null?void 0:e.difficulty)||"medium"}),i=l=>{const{name:c,value:d}=l.target;a(u=>({...u,[c]:c==="grade"?Number(d):d}))},o=l=>{l.preventDefault(),s(r)};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:e?"تعديل كلمة":"إضافة كلمة جديدة"}),n.jsx("p",{className:"opacity-90 text-sm",children:e?"قم بتعديل بيانات الكلمة":"قم بإدخال بيانات الكلمة الجديدة"})]}),n.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الكلمة الإنجليزية *"}),n.jsx("input",{type:"text",name:"english",value:r.english,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل الكلمة بالإنجليزية"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الترجمة العربية *"}),n.jsx("input",{type:"text",name:"arabic",value:r.arabic,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل الترجمة العربية"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"النطق"}),n.jsx("input",{type:"text",name:"pronunciation",value:r.pronunciation,onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: /həˈləʊ/"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:r.grade,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>n.jsxs("option",{value:l,children:["الصف ",l]},l))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة *"}),n.jsx("input",{type:"text",name:"unit",value:r.unit,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: My Family",list:"units-list"}),n.jsx("datalist",{id:"units-list",children:units.map(l=>n.jsx("option",{value:l},l))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"نوع الكلمة"}),n.jsxs("select",{name:"partOfSpeech",value:r.partOfSpeech,onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"noun",children:"اسم (Noun)"}),n.jsx("option",{value:"verb",children:"فعل (Verb)"}),n.jsx("option",{value:"adjective",children:"صفة (Adjective)"}),n.jsx("option",{value:"adverb",children:"ظرف (Adverb)"}),n.jsx("option",{value:"preposition",children:"حرف جر (Preposition)"}),n.jsx("option",{value:"pronoun",children:"ضمير (Pronoun)"}),n.jsx("option",{value:"conjunction",children:"أداة ربط (Conjunction)"}),n.jsx("option",{value:"interjection",children:"تعجب (Interjection)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"مستوى الصعوبة"}),n.jsxs("select",{name:"difficulty",value:r.difficulty,onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"easy",children:"سهل (Easy)"}),n.jsx("option",{value:"medium",children:"متوسط (Medium)"}),n.jsx("option",{value:"hard",children:"صعب (Hard)"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"مثال على استخدام الكلمة"}),n.jsx("textarea",{name:"exampleSentence",value:r.exampleSentence,onChange:i,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل جملة توضح استخدام الكلمة",dir:"ltr"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:e?"حفظ التغييرات":"إضافة الكلمة"}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})})},U1=e=>{const[t,s]=x.useState([]),[r,a]=x.useState([]),[i,o]=x.useState(!0),[l,c]=x.useState(null);x.useEffect(()=>{d()},[e]);const d=async()=>{o(!0),c(null);try{let w=[],p=[];if(!e)for(let g=1;g<=12;g++)w=[...w,...Tu(g)],p=[...p,...Ou(g)];w=w.map((g,f)=>({...g,id:g.id||`rule-${g.grade}-${f}`})),p=p.map((g,f)=>({...g,id:g.id||`question-${g.grade}-${f}`}));try{let g=Z.from("grammar_rules").select("*"),f=Z.from("quiz_questions").select("*");const[h,N]=await Promise.all([g,f]);if(!h.error&&h.data&&h.data.length>0){const k=h.data.map(S=>({id:S.id,title:S.title,explanation:S.explanation,examples:S.examples,unit:S.unit,grade:S.grade}));s(k)}else s(w);if(!N.error&&N.data&&N.data.length>0){const k=N.data.map(S=>({id:S.id,question:S.question,options:S.options,correct:S.correct,explanation:S.explanation,unit:S.unit,grade:S.grade}));a(k)}else a(p)}catch(g){console.warn("Error loading from Supabase, using static data:",g),s(w),a(p)}}catch(w){console.error("Error loading grammar:",w),c(w.message);const p=[],g=[];s(p.map((f,h)=>({...f,id:f.id||`rule-${f.grade}-${h}`}))),a(g.map((f,h)=>({...f,id:f.id||`question-${f.grade}-${h}`})))}finally{o(!1)}};return{rules:t,questions:r,loading:i,error:l,addRule:async w=>{try{const p=crypto.randomUUID();try{const{error:f}=await Z.from("grammar_rules").insert({id:p,title:w.title,explanation:w.explanation,examples:w.examples,unit:w.unit,grade:w.grade,created_at:new Date().toISOString()});f&&console.warn("Error adding rule to Supabase:",f)}catch(f){console.warn("Failed to add rule to Supabase, adding locally only:",f)}const g={id:p,...w};return s(f=>[...f,g]),g}catch(p){throw console.error("Error adding grammar rule:",p),c(p.message),p}},addQuestion:async w=>{try{const p=crypto.randomUUID();try{const{error:f}=await Z.from("quiz_questions").insert({id:p,question:w.question,options:w.options,correct:w.correct,explanation:w.explanation,unit:w.unit,grade:w.grade,created_at:new Date().toISOString()});f&&console.warn("Error adding question to Supabase:",f)}catch(f){console.warn("Failed to add question to Supabase, adding locally only:",f)}const g={id:p,...w};return a(f=>[...f,g]),g}catch(p){throw console.error("Error adding quiz question:",p),c(p.message),p}},updateRule:async(w,p)=>{try{try{const g={};p.title&&(g.title=p.title),p.explanation&&(g.explanation=p.explanation),p.examples&&(g.examples=p.examples),p.unit&&(g.unit=p.unit),p.grade&&(g.grade=p.grade),g.updated_at=new Date().toISOString();const{error:f}=await Z.from("grammar_rules").update(g).eq("id",w);f&&console.warn("Error updating rule in Supabase:",f)}catch(g){console.warn("Failed to update rule in Supabase, updating locally only:",g)}s(g=>g.map(f=>f.id===w?{...f,...p}:f))}catch(g){console.error("Error updating grammar rule:",g),c(g.message),s(f=>f.map(h=>h.id===w?{...h,...p}:h))}},updateQuestion:async(w,p)=>{try{try{const g={};p.question&&(g.question=p.question),p.options&&(g.options=p.options),p.correct!==void 0&&(g.correct=p.correct),p.explanation&&(g.explanation=p.explanation),p.unit&&(g.unit=p.unit),p.grade&&(g.grade=p.grade),g.updated_at=new Date().toISOString();const{error:f}=await Z.from("quiz_questions").update(g).eq("id",w);f&&console.warn("Error updating question in Supabase:",f)}catch(g){console.warn("Failed to update question in Supabase, updating locally only:",g)}a(g=>g.map(f=>f.id===w?{...f,...p}:f))}catch(g){console.error("Error updating quiz question:",g),c(g.message),a(f=>f.map(h=>h.id===w?{...h,...p}:h))}},deleteRule:async w=>{try{try{const{error:p}=await Z.from("grammar_rules").delete().eq("id",w);p&&console.warn("Error deleting rule from Supabase:",p)}catch(p){console.warn("Failed to delete rule from Supabase, deleting locally only:",p)}s(p=>p.filter(g=>g.id!==w))}catch(p){console.error("Error deleting grammar rule:",p),c(p.message),s(g=>g.filter(f=>f.id!==w))}},deleteQuestion:async w=>{try{try{const{error:p}=await Z.from("quiz_questions").delete().eq("id",w);p&&console.warn("Error deleting question from Supabase:",p)}catch(p){console.warn("Failed to delete question from Supabase, deleting locally only:",p)}a(p=>p.filter(g=>g.id!==w))}catch(p){console.error("Error deleting quiz question:",p),c(p.message),a(g=>g.filter(f=>f.id!==w))}},refreshGrammar:d}},W1=()=>{const[e,t]=x.useState(""),[s,r]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState([]),[c,d]=x.useState([]),[u,m]=x.useState(!1),[y,j]=x.useState(new Set),[b,v]=x.useState(!1),[w,p]=x.useState(null),[g,f]=x.useState(null),[h,N]=x.useState(!1),[k,S]=x.useState(null),[C,M]=x.useState("rules"),{rules:A,questions:U,loading:B,addRule:D,updateRule:$,deleteRule:W,addQuestion:E,updateQuestion:T,deleteQuestion:O}=U1();x.useEffect(()=>{const q=[...new Set(A.map(ie=>ie.grade))].sort((ie,ye)=>ie-ye);d(q);const J=[...new Set(A.map(ie=>ie.unit))];l(J)},[A]);const I=A.filter(q=>{if(s!==null&&q.grade!==s||a&&q.unit!==a)return!1;if(e){const J=e.toLowerCase();return q.title.toLowerCase().includes(J)||q.explanation.toLowerCase().includes(J)||q.examples.some(ie=>ie.toLowerCase().includes(J))}return!0}),_=U.filter(q=>{if(s!==null&&q.grade!==s||a&&q.unit!==a)return!1;if(e){const J=e.toLowerCase();return q.question.toLowerCase().includes(J)||q.explanation.toLowerCase().includes(J)||q.options.some(ie=>ie.toLowerCase().includes(J))}return!0}),R=()=>{m(!0),setTimeout(()=>{if(C==="rules"){const q=[["العنوان","الشرح","الأمثلة","الوحدة","الصف"].join(","),...I.map(we=>[`"${we.title}"`,`"${we.explanation}"`,`"${we.examples.join(" | ")}"`,`"${we.unit}"`,we.grade].join(","))].join(`
`),J=new Blob([q],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL(J),ye=document.createElement("a");ye.setAttribute("href",ie),ye.setAttribute("download","english_grammar.csv"),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}else{const q=[["السؤال","الخيارات","الإجابة الصحيحة","الشرح","الوحدة","الصف"].join(","),..._.map(we=>[`"${we.question}"`,`"${we.options.join(" | ")}"`,we.correct,`"${we.explanation}"`,`"${we.unit}"`,we.grade].join(","))].join(`
`),J=new Blob([q],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL(J),ye=document.createElement("a");ye.setAttribute("href",ie),ye.setAttribute("download","english_quiz_questions.csv"),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}m(!1)},1e3)},P=()=>{t(""),r(null),i(null)},F=q=>{const J=new Set(y);J.has(q)?J.delete(q):J.add(q),j(J)},L=()=>{p(null),v(!0)},Y=q=>{p(q),v(!0)},G=q=>{f(q)},le=async q=>{try{await W(q),f(null);const J=document.createElement("div");J.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",J.textContent="تم حذف القاعدة بنجاح",document.body.appendChild(J),setTimeout(()=>{J.style.opacity="0",J.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(J)&&document.body.removeChild(J)},300)},3e3)}catch(J){console.error("Error deleting rule:",J);const ie=document.createElement("div");ie.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",ie.textContent="حدث خطأ أثناء حذف القاعدة",document.body.appendChild(ie),setTimeout(()=>{ie.style.opacity="0",ie.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},300)},3e3)}},ee=()=>{S(null),N(!0)},ne=q=>{S(q),N(!0)},de=q=>{confirm("هل أنت متأكد من حذف هذا السؤال؟")&&O(q)},te=q=>{const J=q.examples.length+q.explanation.length/50;return J<5?"from-green-400 to-emerald-500":J<8?"from-yellow-400 to-orange-500":"from-red-400 to-pink-500"},he=q=>q.toLowerCase().includes("greeting")||q.toLowerCase().includes("تحيات")?"👋":q.toLowerCase().includes("this")||q.toLowerCase().includes("that")||q.toLowerCase().includes("إشارة")?"👆":q.toLowerCase().includes("is")||q.toLowerCase().includes("are")||q.toLowerCase().includes("جمل")?"🔗":q.toLowerCase().includes("number")||q.toLowerCase().includes("عد")||q.toLowerCase().includes("أرقام")?"🔢":q.toLowerCase().includes("plural")?"📚":q.toLowerCase().includes("have")||q.toLowerCase().includes("has")?"🤲":q.toLowerCase().includes("like")?"❤️":q.toLowerCase().includes("article")?"📝":q.toLowerCase().includes("preposition")?"📍":q.toLowerCase().includes("continuous")?"⏰":q.toLowerCase().includes("adjective")?"🎨":q.toLowerCase().includes("question")?"❓":q.toLowerCase().includes("comparative")?"⚖️":q.toLowerCase().includes("must")||q.toLowerCase().includes("should")?"⚠️":q.toLowerCase().includes("perfect")?"✅":q.toLowerCase().includes("passive")?"🔄":q.toLowerCase().includes("conditional")?"🔀":q.toLowerCase().includes("reported")?"💬":q.toLowerCase().includes("cohesive")||q.toLowerCase().includes("cohesion")?"🔗":q.toLowerCase().includes("used to")?"⏮️":"📖";return n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-t-xl p-6",children:[n.jsxs("h3",{className:"text-2xl font-bold text-center mb-2 flex items-center justify-center gap-2",children:[n.jsx(vn,{className:"w-8 h-8"}),"مستخرج قواعد اللغة"]}),n.jsx("p",{className:"text-center opacity-90",children:"عرض وتصفية وتصدير جميع قواعد اللغة الإنجليزية"})]}),n.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-semibold text-gray-700 mb-2",children:"بحث"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",id:"search",value:e,onChange:q=>t(q.target.value),placeholder:"ابحث في القواعد...",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none transition-colors"}),n.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e&&n.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx($n,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"grade",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف"}),n.jsxs("select",{id:"grade",value:s===null?"":s,onChange:q=>r(q.target.value?Number(q.target.value):null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الصفوف"}),c.map(q=>n.jsxs("option",{value:q,children:["الصف ",q]},q))]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"unit",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة"}),n.jsxs("select",{id:"unit",value:a||"",onChange:q=>i(q.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الوحدات"}),o.map(q=>n.jsx("option",{value:q,children:q},q))]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-gray-600",children:["تم العثور على ",n.jsx("span",{className:"font-bold text-yellow-600",children:C==="rules"?I.length:_.length})," ",C==="rules"?"قاعدة":"سؤال"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:P,className:"flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"إعادة ضبط"]}),n.jsxs("button",{onClick:C==="rules"?L:ee,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(De,{className:"w-4 h-4"}),"إضافة ",C==="rules"?"قاعدة":"سؤال"]}),n.jsx("button",{onClick:R,disabled:(C==="rules"?I.length:_.length)===0||u,className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:u?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري التصدير..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"w-4 h-4"}),"تصدير CSV"]})})]})]})]}),n.jsxs("div",{className:"bg-white p-4 flex gap-4",children:[n.jsxs("button",{onClick:()=>M("rules"),className:`flex-1 py-3 px-4 rounded-lg transition-colors ${C==="rules"?"bg-yellow-100 text-yellow-800 font-semibold":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["قواعد اللغة (",A.length,")"]}),n.jsxs("button",{onClick:()=>M("questions"),className:`flex-1 py-3 px-4 rounded-lg transition-colors ${C==="questions"?"bg-blue-100 text-blue-800 font-semibold":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["أسئلة الاختبارات (",U.length,")"]})]}),C==="rules"&&n.jsx("div",{className:"bg-white rounded-b-xl p-6 shadow-xl",children:B?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل قواعد اللغة..."})]}):I.length>0?n.jsx("div",{className:"space-y-6",children:I.map((q,J)=>{const ie=y.has(q.id||`rule-${J}`),ye=he(q.title);return te(q),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-r-4 border-yellow-400 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>F(q.id||`rule-${J}`),children:[n.jsxs("h4",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl",children:ye}),q.title]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mb-3",children:[n.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["الصف ",q.grade]}),n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full",children:q.unit})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Y(q),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>G(q.id||`rule-${J}`),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>F(q.id||`rule-${J}`),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:ie?"طي":"توسيع",children:ie?n.jsx($n,{className:"w-5 h-5"}):n.jsx(vn,{className:"w-5 h-5"})})]})]}),ie&&n.jsxs("div",{className:"mt-4 space-y-4",children:[n.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:q.explanation}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h5",{className:"font-semibold text-gray-700",children:"أمثلة:"}),n.jsx("div",{className:"space-y-2",children:q.examples.map((we,Rt)=>n.jsx("div",{className:"bg-white p-3 rounded-lg font-mono text-base shadow-sm border border-yellow-200",children:we},Rt))})]})]})]},q.id||`rule-${J}`)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx(cs,{className:"w-12 h-12 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد نتائج"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على قواعد تطابق معايير البحث الخاصة بك"}),n.jsx("button",{onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none",children:"إعادة ضبط الفلاتر"})]})}),C==="questions"&&n.jsx("div",{className:"bg-white rounded-b-xl p-6 shadow-xl",children:B?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل أسئلة الاختبارات..."})]}):_.length>0?n.jsx("div",{className:"space-y-6",children:_.map((q,J)=>n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-r-4 border-blue-400 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:q.question}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mb-3",children:[n.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["الصف ",q.grade]}),n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full",children:q.unit})]}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h5",{className:"font-semibold text-gray-700",children:"الخيارات:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:q.options.map((ie,ye)=>n.jsxs("div",{className:`p-3 rounded-lg border ${ye===q.correct?"bg-green-100 border-green-300 text-green-800":"bg-white border-gray-200 text-gray-700"}`,children:[ye===q.correct&&n.jsx("span",{className:"inline-block bg-green-500 text-white text-xs px-2 py-1 rounded-full mr-2",children:"صحيح"}),ie]},ye))}),n.jsxs("div",{className:"mt-4 bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[n.jsx("h5",{className:"font-semibold text-yellow-800",children:"الشرح:"}),n.jsx("p",{className:"text-yellow-700",children:q.explanation})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>ne(q),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>de(q.id||`question-${J}`),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-5 h-5"})})]})]})},q.id||`question-${J}`))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx(cs,{className:"w-12 h-12 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد نتائج"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على أسئلة تطابق معايير البحث الخاصة بك"}),n.jsx("button",{onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:"إعادة ضبط الفلاتر"})]})}),(C==="rules"?I.length:_.length)>0&&n.jsxs("div",{className:"mt-6 bg-yellow-50 rounded-xl p-6 border border-yellow-100",children:[n.jsxs("h4",{className:"font-bold text-yellow-800 mb-4 flex items-center gap-2",children:[n.jsx(cs,{className:"w-5 h-5"}),"إحصائيات ",C==="rules"?"القواعد":"الأسئلة",":"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-100",children:[n.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["عدد ",C==="rules"?"القواعد":"الأسئلة"," حسب الصف"]}),n.jsx("div",{className:"space-y-2",children:c.map(q=>{const J=C==="rules"?I.filter(ie=>ie.grade===q).length:_.filter(ie=>ie.grade===q).length;return J===0?null:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm",children:["الصف ",q]}),n.jsxs("span",{className:"font-semibold text-yellow-600",children:[J," ",C==="rules"?"قاعدة":"سؤال"]})]},q)})})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-100",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"الوحدات الأكثر شيوعاً"}),n.jsx("div",{className:"space-y-2",children:o.map(q=>({unit:q,count:C==="rules"?I.filter(J=>J.unit===q).length:_.filter(J=>J.unit===q).length})).filter(q=>q.count>0).sort((q,J)=>J.count-q.count).slice(0,5).map(q=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm truncate max-w-[150px]",children:q.unit}),n.jsxs("span",{className:"font-semibold text-yellow-600",children:[q.count," ",C==="rules"?"قاعدة":"سؤال"]})]},q.unit))})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-100",children:[n.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"إحصائيات عامة"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm",children:["إجمالي ",C==="rules"?"القواعد":"الأسئلة"]}),n.jsx("span",{className:"font-semibold text-yellow-600",children:C==="rules"?I.length:_.length})]}),C==="rules"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"متوسط الأمثلة لكل قاعدة"}),n.jsx("span",{className:"font-semibold text-yellow-600",children:I.length>0?(I.reduce((q,J)=>q+J.examples.length,0)/I.length).toFixed(1):"0"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"عدد الوحدات"}),n.jsx("span",{className:"font-semibold text-yellow-600",children:new Set(C==="rules"?I.map(q=>q.unit):_.map(q=>q.unit)).size})]})]})]})]})]}),b&&n.jsx(q1,{rule:w,onClose:()=>v(!1),onSave:async q=>{try{w?await $(w.id||"",q):await D(q),v(!1);const J=document.createElement("div");J.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",J.textContent=w?"تم تحديث القاعدة بنجاح":"تمت إضافة القاعدة بنجاح",document.body.appendChild(J),setTimeout(()=>{J.style.opacity="0",J.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(J)&&document.body.removeChild(J)},300)},3e3)}catch(J){console.error("Error saving rule:",J);const ie=document.createElement("div");ie.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",ie.textContent="حدث خطأ أثناء حفظ القاعدة",document.body.appendChild(ie),setTimeout(()=>{ie.style.opacity="0",ie.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},300)},3e3)}},units:o,grades:c}),h&&n.jsx(B1,{question:k,onClose:()=>N(!1),onSave:async q=>{try{k?await T(k.id||"",q):await E(q),N(!1);const J=document.createElement("div");J.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",J.textContent=k?"تم تحديث السؤال بنجاح":"تمت إضافة السؤال بنجاح",document.body.appendChild(J),setTimeout(()=>{J.style.opacity="0",J.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(J)&&document.body.removeChild(J)},300)},3e3)}catch(J){console.error("Error saving question:",J);const ie=document.createElement("div");ie.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",ie.textContent="حدث خطأ أثناء حفظ السؤال",document.body.appendChild(ie),setTimeout(()=>{ie.style.opacity="0",ie.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},300)},3e3)}},units:o,grades:c}),g&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذه القاعدة؟ لا يمكن التراجع عن هذا الإجراء."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>le(g),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف القاعدة"}),n.jsx("button",{onClick:()=>f(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},q1=({rule:e,onClose:t,onSave:s,units:r,grades:a})=>{const[i,o]=x.useState({title:(e==null?void 0:e.title)||"",explanation:(e==null?void 0:e.explanation)||"",examples:(e==null?void 0:e.examples)||[""],unit:(e==null?void 0:e.unit)||"",grade:(e==null?void 0:e.grade)||5}),l=y=>{const{name:j,value:b}=y.target;o(v=>({...v,[j]:j==="grade"?Number(b):b}))},c=(y,j)=>{const b=[...i.examples];b[y]=j,o(v=>({...v,examples:b}))},d=()=>{o(y=>({...y,examples:[...y.examples,""]}))},u=y=>{if(i.examples.length<=1)return;const j=[...i.examples];j.splice(y,1),o(b=>({...b,examples:j}))},m=y=>{y.preventDefault();const j=i.examples.filter(b=>b.trim()!=="");if(j.length===0){alert("يجب إضافة مثال واحد على الأقل");return}s({...i,examples:j})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:e?"تعديل قاعدة لغوية":"إضافة قاعدة لغوية جديدة"}),n.jsx("p",{className:"opacity-90 text-sm",children:e?"قم بتعديل بيانات القاعدة اللغوية":"قم بإدخال بيانات القاعدة اللغوية الجديدة"})]}),n.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"عنوان القاعدة *"}),n.jsx("input",{type:"text",name:"title",value:i.title,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"مثال: Present Simple Tense"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"شرح القاعدة *"}),n.jsx("textarea",{name:"explanation",value:i.explanation,onChange:l,required:!0,rows:5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"اشرح القاعدة بالتفصيل..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الأمثلة *"}),n.jsxs("div",{className:"space-y-3",children:[i.examples.map((y,j)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:y,onChange:b=>c(j,b.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:`مثال ${j+1}`,dir:"ltr"}),n.jsx("button",{type:"button",onClick:()=>u(j),disabled:i.examples.length<=1,className:"bg-red-100 text-red-700 hover:bg-red-200 disabled:bg-gray-100 disabled:text-gray-400 p-3 rounded-lg transition-colors",children:n.jsx($n,{className:"w-5 h-5"})})]},j)),n.jsxs("button",{type:"button",onClick:d,className:"bg-green-100 text-green-700 hover:bg-green-200 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(De,{className:"w-4 h-4"}),"إضافة مثال"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:i.grade,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(y=>n.jsxs("option",{value:y,children:["الصف ",y]},y))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة *"}),n.jsx("input",{type:"text",name:"unit",value:i.unit,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"مثال: My Family",list:"units-list"}),n.jsx("datalist",{id:"units-list",children:r.map(y=>n.jsx("option",{value:y},y))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:e?"حفظ التغييرات":"إضافة القاعدة"}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})})},B1=({question:e,onClose:t,onSave:s,units:r,grades:a})=>{const[i,o]=x.useState({question:(e==null?void 0:e.question)||"",options:(e==null?void 0:e.options)||["","","",""],correct:(e==null?void 0:e.correct)||0,explanation:(e==null?void 0:e.explanation)||"",unit:(e==null?void 0:e.unit)||"",grade:(e==null?void 0:e.grade)||5}),l=u=>{const{name:m,value:y}=u.target;o(j=>({...j,[m]:m==="grade"||m==="correct"?Number(y):y}))},c=(u,m)=>{const y=[...i.options];y[u]=m,o(j=>({...j,options:y}))},d=u=>{if(u.preventDefault(),i.options.some(m=>m.trim()==="")){alert("يجب ملء جميع الخيارات");return}s(i)};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:e?"تعديل سؤال اختبار":"إضافة سؤال اختبار جديد"}),n.jsx("p",{className:"opacity-90 text-sm",children:e?"قم بتعديل بيانات سؤال الاختبار":"قم بإدخال بيانات سؤال الاختبار الجديد"})]}),n.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"السؤال *"}),n.jsx("input",{type:"text",name:"question",value:i.question,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل نص السؤال...",dir:"auto"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الخيارات *"}),n.jsx("div",{className:"space-y-3",children:i.options.map((u,m)=>n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("div",{className:"flex-none",children:n.jsx("input",{type:"radio",name:"correct",value:m,checked:i.correct===m,onChange:()=>o(y=>({...y,correct:m})),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"})}),n.jsx("input",{type:"text",value:u,onChange:y=>c(m,y.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`الخيار ${m+1}`,dir:"auto"})]},m))}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختر الإجابة الصحيحة بالنقر على الدائرة بجانب الخيار"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"شرح الإجابة *"}),n.jsx("textarea",{name:"explanation",value:i.explanation,onChange:l,required:!0,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اشرح سبب كون الإجابة المختارة هي الصحيحة..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:i.grade,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(u=>n.jsxs("option",{value:u,children:["الصف ",u]},u))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة *"}),n.jsx("input",{type:"text",name:"unit",value:i.unit,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: My Family",list:"units-list"}),n.jsx("datalist",{id:"units-list",children:r.map(u=>n.jsx("option",{value:u},u))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:e?"حفظ التغييرات":"إضافة السؤال"}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})})},H1=()=>{const[e,t]=x.useState([]),[s,r]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(null);x.useEffect(()=>{y()},[]);const y=async()=>{r(!0);try{const{data:h,error:N}=await Z.from("teachers").select("*").order("name");if(N)throw N;if(h){const k=h.map(S=>({id:S.id,name:S.name,email:S.email,phone:S.phone||"",grades:S.grades,students:S.students||[],joinDate:S.join_date,isActive:S.is_active,schoolName:S.school_name||"",subjects:S.subjects||[]}));t(k)}}catch(h){console.error("Error loading teachers:",h);const N=localStorage.getItem("admin-teachers");N&&t(JSON.parse(N))}finally{r(!1)}},j=()=>{d(null),l(!0)},b=h=>{d(h),l(!0)},v=h=>{m(h)},w=()=>"your_supabase_anon_key_here"!=="your-supabase-anon-key",p=async h=>{try{if(w()){const{error:k}=await Z.from("access_codes").delete().eq("teacher_id",h);k&&console.error("Error deleting access codes:",k);const{error:S}=await Z.from("teachers").delete().eq("id",h);if(S)throw console.error("Error deleting teacher:",S),new Error(`فشل في حذف المعلم: ${S.message}`);t(M=>M.filter(A=>A.id!==h));const C=e.filter(M=>M.id!==h);localStorage.setItem("admin-teachers",JSON.stringify(C))}m(null);const N=document.createElement("div");N.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",N.textContent="تم حذف المعلم بنجاح",document.body.appendChild(N),setTimeout(()=>{N.style.opacity="0",N.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},300)},3e3)}catch(N){console.error("Error deleting teacher:",N);const k=document.createElement("div");k.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",k.textContent="حدث خطأ أثناء حذف المعلم",document.body.appendChild(k),setTimeout(()=>{k.style.opacity="0",k.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},300)},3e3)}},g=async h=>{try{if(w())if(c){const{error:N}=await Z.from("teachers").update({name:h.name,email:h.email,phone:h.phone,grades:h.grades,school_name:h.schoolName,subjects:h.subjects,is_active:h.isActive}).eq("id",c.id);if(N)throw new Error(`فشل في تحديث المعلم: ${N.message}`);t(S=>S.map(C=>C.id===c.id?{...c,...h}:C));const k=e.map(S=>S.id===c.id?{...c,...h}:S);localStorage.setItem("admin-teachers",JSON.stringify(k)),alert("تم تحديث بيانات المعلم بنجاح")}else{const N={...h,join_date:new Date().toISOString(),students:[]},{data:k,error:S}=await Z.from("teachers").insert([{name:N.name,email:N.email,phone:N.phone,grades:N.grades,school_name:N.schoolName,subjects:N.subjects,is_active:N.isActive,join_date:N.joinDate}]).select().single();if(S)throw new Error(`فشل في إضافة المعلم: ${S.message}`);const C={id:k.id,name:k.name,email:k.email,phone:k.phone||"",grades:k.grades,students:[],joinDate:k.join_date,isActive:k.is_active,schoolName:k.school_name||"",subjects:k.subjects||[]};t(A=>[C,...A]);const M=[C,...e];localStorage.setItem("admin-teachers",JSON.stringify(M)),alert("تم إضافة المعلم بنجاح")}l(!1),d(null)}catch(N){console.error("Error saving teacher:",N),alert(N instanceof Error?N.message:"حدث خطأ أثناء حفظ بيانات المعلم")}},f=e.filter(h=>{var N;return h.name.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())||((N=h.schoolName)==null?void 0:N.toLowerCase().includes(a.toLowerCase()))});return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(ct,{className:"w-8 h-8 text-blue-600"}),"إدارة المعلمين"]}),n.jsx("p",{className:"text-gray-600",children:"إضافة وتعديل وحذف المعلمين"})]}),n.jsxs("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة معلم جديد"]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"البحث عن معلم...",value:a,onChange:h=>i(h.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:s?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل بيانات المعلمين..."})]}):f.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"المعلم"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"البريد الإلكتروني"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الصفوف"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"المدرسة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الحالة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(h=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"py-4 px-6",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:h.name}),n.jsx("div",{className:"text-sm text-gray-600",children:h.phone})]}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:h.email}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:h.grades.map(N=>n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:["الصف ",N]},N))})}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:h.schoolName||"غير محدد"}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.isActive?"نشط":"غير نشط"})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>b(h),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>v(h.id),className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},h.id))})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ct,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"لا يوجد معلمين"}),n.jsx("p",{className:"text-gray-500 mb-6",children:a?"لم يتم العثور على معلمين يطابقون معايير البحث":"لم يتم إضافة أي معلمين بعد"}),!a&&n.jsxs("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة معلم جديد"]})]})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:c?"تعديل بيانات المعلم":"إضافة معلم جديد"}),n.jsx("p",{className:"opacity-90 text-sm",children:c?"قم بتعديل بيانات المعلم":"قم بإدخال بيانات المعلم الجديد"})]}),n.jsx(G1,{teacher:c,onClose:()=>{l(!1),d(null)},onSave:g})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(ut,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذا المعلم؟ سيتم حذف جميع بياناته ورموز الدخول المرتبطة به."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>p(u),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف المعلم"}),n.jsx("button",{onClick:()=>m(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},G1=({teacher:e,onClose:t,onSave:s})=>{const[r,a]=x.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",grades:(e==null?void 0:e.grades)||[5],schoolName:(e==null?void 0:e.schoolName)||"",subjects:(e==null?void 0:e.subjects)||[],isActive:(e==null?void 0:e.isActive)??!0}),i=c=>{const{name:d,value:u,type:m}=c.target;a(y=>({...y,[d]:m==="checkbox"?c.target.checked:u}))},o=c=>{a(d=>{const u=d.grades.includes(c)?d.grades.filter(m=>m!==c):[...d.grades,c];return{...d,grades:u}})},l=c=>{const u=c.target.value.split(",").map(m=>m.trim()).filter(m=>m);a(m=>({...m,subjects:u}))};return n.jsxs("form",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الاسم الكامل *"}),n.jsx("input",{type:"text",name:"name",value:r.name,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل اسم المعلم"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"البريد الإلكتروني *"}),n.jsx("input",{type:"email",name:"email",value:r.email,onChange:i,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"example@school.edu"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رقم الهاتف"}),n.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"05xxxxxxxx"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اسم المدرسة"}),n.jsx("input",{type:"text",name:"schoolName",value:r.schoolName,onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل اسم المدرسة"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصفوف التي يدرسها *"}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,6,7,8,9,10,11,12].map(c=>n.jsxs("label",{className:"flex items-center gap-2 p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:r.grades.includes(c),onChange:()=>o(c),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm",children:["الصف ",c]})]},c))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المواد التي يدرسها"}),n.jsx("input",{type:"text",value:r.subjects.join(", "),onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: اللغة الإنجليزية، الرياضيات (افصل بينها بفاصلة)"})]}),n.jsx("div",{className:"flex items-center",children:n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:r.isActive,onChange:c=>a(d=>({...d,isActive:c.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-gray-700",children:"المعلم نشط"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"button",onClick:()=>s(r),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5"}),e?"حفظ التغييرات":"إضافة المعلم"]}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})},xx=()=>{const[e,t]=x.useState([]),[s,r]=x.useState(!0),[a,i]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState({}),[u,m]=x.useState({student_name:"",grade:1,expires_at:""}),[y,j]=x.useState({});x.useEffect(()=>{b()},[]);const b=async()=>{r(!0);try{rr()}catch(A){console.error("Error loading student keys:",A)}finally{r(!1)}},v=()=>{const A="STU",U=Math.random().toString(36).substring(2,10).toUpperCase(),B=u.grade.toString().padStart(2,"0");return`${A}${B}${U}`},w=()=>{const A={};if(u.student_name.trim()||(A.student_name="اسم الطالب مطلوب"),(u.grade<1||u.grade>12)&&(A.grade="الصف يجب أن يكون بين 1 و 12"),!u.expires_at)A.expires_at="تاريخ انتهاء الصلاحية مطلوب";else{const U=new Date(u.expires_at),B=new Date;B.setHours(0,0,0,0),U<=B&&(A.expires_at="تاريخ انتهاء الصلاحية يجب أن يكون في المستقبل")}return j(A),Object.keys(A).length===0},p=async A=>{if(A.preventDefault(),!!w())try{rr(),m({student_name:"",grade:1,expires_at:""}),i(!1),j({})}catch(U){console.error("Error creating student and access key:",U),alert("حدث خطأ أثناء إنشاء الطالب ومفتاح الدخول")}},g=async(A,U)=>{try{rr()}catch(B){console.error("Error updating key status:",B),alert("حدث خطأ أثناء تحديث حالة المفتاح")}},f=async A=>{try{rr()}catch(U){console.error("Error reactivating key:",U),alert("حدث خطأ أثناء إعادة تفعيل المفتاح")}},h=async A=>{if(confirm("هل أنت متأكد من حذف هذا الطالب ومفتاح الدخول الخاص به؟ هذا الإجراء لا يمكن التراجع عنه."))try{rr()}catch(U){console.error("Error deleting student and key:",U),alert("حدث خطأ أثناء حذف الطالب ومفتاح الدخول")}},N=A=>{d(U=>({...U,[A]:!U[A]}))},k=A=>new Date(A)<=new Date,S=A=>A.is_active?k(A.expires_at)?{status:"expired",color:"text-red-600",bg:"bg-red-100",text:"منتهي الصلاحية"}:{status:"active",color:"text-green-600",bg:"bg-green-100",text:"مفعل"}:{status:"inactive",color:"text-gray-500",bg:"bg-gray-100",text:"غير مفعل"},C=A=>new Date(A).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),M=()=>{const A=new Date;return A.setDate(A.getDate()+1),A.toISOString().split("T")[0]};return s?n.jsx("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"mr-3 text-gray-600",children:"جاري تحميل مفاتيح الطلاب..."})]})}):n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(ct,{className:"w-6 h-6 text-blue-600"}),"إدارة مفاتيح الطلاب"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"إنشاء وإدارة مفاتيح الدخول للطلاب"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:b,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Ze,{className:"w-4 h-4"}),"تحديث"]}),n.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(De,{className:"w-4 h-4"}),"إضافة طالب جديد"]})]})]}),a&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h4",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(De,{className:"w-5 h-5 text-blue-600"}),"إضافة طالب جديد"]}),n.jsx("button",{onClick:()=>{i(!1),j({}),m({student_name:"",grade:1,expires_at:""})},className:"text-gray-500 hover:text-gray-700",children:n.jsx($n,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الطالب *"}),n.jsx("input",{type:"text",value:u.student_name,onChange:A=>m({...u,student_name:A.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.student_name?"border-red-500":"border-gray-300"}`,placeholder:"أدخل اسم الطالب"}),y.student_name&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.student_name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{value:u.grade,onChange:A=>m({...u,grade:parseInt(A.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.grade?"border-red-500":"border-gray-300"}`,children:Array.from({length:12},(A,U)=>n.jsxs("option",{value:U+1,children:["الصف ",U+1]},U+1))}),y.grade&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.grade})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء الصلاحية *"}),n.jsx("input",{type:"date",value:u.expires_at,onChange:A=>m({...u,expires_at:A.target.value}),min:M(),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.expires_at?"border-red-500":"border-gray-300"}`}),y.expires_at&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.expires_at})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-6 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"إلغاء"}),n.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"إنشاء المفتاح"})]})]})]}),n.jsx("div",{className:"space-y-4",children:e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ct,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"لا توجد مفاتيح طلاب"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"ابدأ بإنشاء مفتاح دخول للطلاب"}),n.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-4 h-4"}),"إضافة طالب جديد"]})]}):e.map(A=>{const U=S(A);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:A.student_name}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${U.bg} ${U.color}`,children:U.text}),n.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:["الصف ",A.grade]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Te,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"المفتاح:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:c[A.id]?A.key_code:"••••••••"}),n.jsx("button",{onClick:()=>N(A.id),className:"text-gray-500 hover:text-gray-700",children:c[A.id]?n.jsx(Zo,{className:"w-4 h-4"}):n.jsx(Xa,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"تاريخ الإنشاء:"}),n.jsx("span",{children:C(A.created_at)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dt,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"ينتهي في:"}),o===A.id?n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("input",{type:"date",defaultValue:A.expires_at.split("T")[0],min:M(),onKeyDown:B=>{B.key==="Enter"?f(A.id):B.key==="Escape"&&l(null)},onBlur:B=>f(A.id),className:"px-2 py-1 border border-gray-300 rounded text-sm",autoFocus:!0})}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:k(A.expires_at)?"text-red-600 font-medium":"",children:C(A.expires_at)}),n.jsx("button",{onClick:()=>l(A.id),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Rv,{className:"w-3 h-3"})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ze,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"الاستخدام:"}),n.jsx("span",{children:A.usage_count})]})]}),A.last_used_at&&n.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["آخر استخدام: ",C(A.last_used_at)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[k(A.expires_at)?n.jsx("button",{onClick:()=>f(A.id),className:"p-2 rounded-lg bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:"إعادة تفعيل مع تاريخ جديد",children:n.jsx(Lr,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>g(A.id,A.is_active),className:`p-2 rounded-lg transition-colors ${A.is_active?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:A.is_active?"إلغاء تفعيل المفتاح":"تفعيل المفتاح",children:A.is_active?n.jsx(Fe,{className:"w-4 h-4"}):n.jsx(Et,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>h(A.id),className:"p-2 bg-red-100 text-red-600 hover:bg-red-200 rounded-lg transition-colors",title:"حذف المفتاح",children:n.jsx(ut,{className:"w-4 h-4"})})]})]}),k(A.expires_at)&&A.is_active&&n.jsx("div",{className:"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-orange-700",children:[n.jsx(Ye,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"هذا المفتاح منتهي الصلاحية. استخدم زر إعادة التفعيل لتحديد تاريخ صلاحية جديد."})]})})]},A.id)})})]})},V1=({onSuccess:e})=>{const[t,s]=x.useState({code:"",grade:5,description:"",expiresAt:"",maxUsage:30,isForTeacher:!0,teacherId:"",teacherName:"",teacherPhone:"",isActive:!0}),[r,a]=x.useState([]),[i,o]=x.useState(!1),[l,c]=x.useState(null),[d,u]=x.useState({}),[m,y]=x.useState(!0);x.useEffect(()=>{j();const f=localStorage.getItem("admin-access-code-settings");if(f){const h=JSON.parse(f);if(u(h),h.requireExpiry){const N=new Date;N.setDate(N.getDate()+h.defaultExpiryDays),s(k=>({...k,expiresAt:N.toISOString().split("T")[0]}))}}},[]);const j=async()=>{y(!0);try{const{data:f,error:h}=await Z.from("teachers").select("*").order("name");if(h)throw h;if(f&&f.length>0)a(f);else{const N=Object.values(An);a(N)}}catch(f){console.error("Error loading teachers:",f);const h=Object.values(An);a(h)}finally{y(!1)}},b=f=>{const{name:h,value:N,type:k}=f.target;if(s(S=>({...S,[h]:k==="checkbox"?f.target.checked:N})),h==="teacherId"){const S=r.find(C=>C.id===N);S&&s(C=>({...C,teacherName:S.name,teacherPhone:S.phone||"",grade:S.grades[0]||5}))}},v=()=>{const f="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let h="";for(let N=0;N<8;N++)h+=f.charAt(Math.floor(Math.random()*f.length));return h},w=()=>{s(f=>({...f,code:v()}))},p=async f=>{if(f.preventDefault(),d.requireExpiry&&!t.expiresAt){alert("يجب تحديد تاريخ انتهاء للرمز");return}if(d.requireDescription&&!t.description.trim()){alert("يجب إدخال وصف للرمز");return}let h=t.code;h||(h=v());try{const N={id:crypto.randomUUID(),code:h,grade:t.grade,description:t.description,teacher_id:t.teacherId,teacher_name:t.teacherName,teacher_phone:t.teacherPhone,created_at:new Date().toISOString(),expires_at:t.expiresAt?new Date(t.expiresAt).toISOString():null,is_active:t.isActive,usage_count:0,max_usage:t.maxUsage>0?t.maxUsage:null,is_teacher:t.isForTeacher},{error:k}=await Z.from("access_codes").insert(N);if(k){console.error("Error creating access code:",k);const S=`teacher-access-codes-${t.teacherId}`,C=localStorage.getItem(S),M=C?JSON.parse(C):[],A={id:N.id,code:h,grade:t.grade,description:t.description,teacherId:t.teacherId,teacherName:t.teacherName,teacherPhone:t.teacherPhone,createdAt:new Date().toISOString(),expiresAt:t.expiresAt?new Date(t.expiresAt).toISOString():null,isActive:t.isActive,usageCount:0,maxUsage:t.maxUsage>0?t.maxUsage:null,isTeacher:t.isForTeacher};M.push(A),localStorage.setItem(S,JSON.stringify(M))}c(h),s({...t,code:"",description:"",expiresAt:""}),e&&e()}catch(N){alert(`حدث خطأ أثناء إنشاء الرمز: ${N.message}`)}},g=f=>{navigator.clipboard.writeText(f),o(!0),setTimeout(()=>o(!1),2e3)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Te,{className:"w-8 h-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:"إنشاء رمز دخول للمعلم"}),n.jsx("p",{className:"opacity-90",children:"أنشئ رمز دخول خاص بمعلم محدد"})]})]})}),l?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 text-green-600",children:[n.jsx(bg,{className:"w-8 h-8"}),n.jsx("h4",{className:"text-xl font-bold",children:"تم إنشاء الرمز بنجاح!"})]}),n.jsxs("div",{className:"bg-white border-2 border-green-300 rounded-lg p-4 mb-6 max-w-md mx-auto",children:[n.jsx("div",{className:"text-3xl font-mono font-bold text-green-700 mb-2",children:l}),n.jsx("p",{className:"text-gray-600",children:"يمكن للمعلم استخدام هذا الرمز للدخول إلى المنصة"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs("button",{onClick:()=>g(l),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[n.jsx(Ua,{className:"w-5 h-5"}),i?"تم النسخ!":"نسخ الرمز"]}),n.jsxs("button",{onClick:()=>c(null),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز جديد"]})]}),n.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"يمكنك مشاركة هذا الرمز مع المعلم عبر البريد الإلكتروني أو الرسائل النصية"})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Ps,{className:"w-5 h-5 text-blue-600"}),"معلومات المعلم المرتبطة بالرمز"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"اسم المعلم"}),n.jsx("div",{className:"font-semibold",children:t.teacherName})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wu,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"الصف"}),n.jsxs("div",{className:"font-semibold",children:["الصف ",t.grade]})]})]})]})]})]}):n.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اختر المعلم *"}),n.jsxs("select",{name:"teacherId",value:t.teacherId,onChange:b,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"اختر المعلم"}),r.map(f=>n.jsxs("option",{value:f.id,children:[f.name," - ",Array.isArray(f.grades)?f.grades.map(h=>`الصف ${h}`).join(", "):"غير محدد"]},f.id))]}),m&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل المعلمين..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رمز الدخول (اختياري)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",name:"code",value:t.code,onChange:b,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"أدخل رمز الدخول أو اتركه فارغاً للتوليد التلقائي"}),n.jsx("button",{type:"button",onClick:w,className:"bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-2 rounded-lg transition-colors",title:"توليد رمز عشوائي",children:n.jsx(Ze,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:t.grade,onChange:b,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(f=>n.jsxs("option",{value:f,children:["الصف ",f]},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"وصف الرمز *"}),n.jsx("input",{type:"text",name:"description",value:t.description,onChange:b,required:d.requireDescription,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: رمز دخول للمعلم أحمد محمد"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["تاريخ انتهاء الصلاحية ",d.requireExpiry?"*":"(اختياري)"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-5 h-5 text-gray-500"}),n.jsx("input",{type:"date",name:"expiresAt",value:t.expiresAt,onChange:b,min:new Date().toISOString().split("T")[0],className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:d.requireExpiry})]}),!d.requireExpiry&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اتركه فارغاً إذا كنت لا ترغب في تحديد تاريخ انتهاء"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأقصى للاستخدامات"}),n.jsx("input",{type:"number",name:"maxUsage",value:t.maxUsage,onChange:b,min:"0",max:d.maxUsagePerCode>0?d.maxUsagePerCode:void 0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اتركه 0 لاستخدامات غير محدودة"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.maxUsagePerCode>0?`الحد الأقصى المسموح به: ${d.maxUsagePerCode} استخدام`:"اتركه 0 إذا كنت لا ترغب في تحديد عدد الاستخدامات"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:t.isActive,onChange:f=>s(h=>({...h,isActive:f.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isActive",className:"text-sm font-semibold text-gray-700",children:"الرمز نشط"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isForTeacher",name:"isForTeacher",checked:t.isForTeacher,onChange:f=>s(h=>({...h,isForTeacher:f.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isForTeacher",className:"text-sm font-semibold text-gray-700",children:"رمز خاص بالمعلم (وليس للطلاب)"})]})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Ye,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-800 font-semibold",children:"معلومات هامة"}),n.jsx("p",{className:"text-yellow-700 text-sm",children:"سيتم ربط رمز الدخول بالمعلم المحدد. يمكن للمعلم استخدام هذا الرمز للوصول إلى لوحة تحكم المعلم."})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:!t.teacherId,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Te,{className:"w-5 h-5"}),"إنشاء رمز الدخول"]})})]})]})},K1=()=>{const[e,t]=x.useState(()=>{const _=localStorage.getItem("admin-teacher-code-limits");return _?JSON.parse(_):{"teacher-001":20,"teacher-002":20,"teacher-003":20,"teacher-004":20,"teacher-005":20,default:20}}),[s,r]=x.useState(()=>{const _=localStorage.getItem("admin-access-code-settings");return _?JSON.parse(_):{defaultExpiryDays:90,requireExpiry:!1,maxUsagePerCode:30,requireDescription:!0,allowTeacherCustomCodes:!0}}),[a,i]=x.useState(!1),[o,l]=x.useState(""),[c,d]=x.useState([]),[u,m]=x.useState(!0),[y,j]=x.useState(!1),[b,v]=x.useState([]),[w,p]=x.useState(null),[g,f]=x.useState(!1);x.useEffect(()=>{k(),N(),h()},[]);const h=async()=>{try{const{data:_,error:R}=await Z.from("teachers").select("*").order("name");if(R)throw R;if(_&&_.length>0){v(_);const P={};_.forEach(F=>{const L=Array.isArray(F.grades)?` - ${F.grades.map(Y=>`الصف ${Y}`).join(", ")}`:"";P[F.id]=`${F.name}${L}`}),P.default="الحد الافتراضي للمعلمين الجدد"}else{const P=Object.values(An);v(P)}}catch(_){console.error("Error loading teachers:",_);const R=Object.values(An);v(R)}},N=async()=>{try{const{data:_,error:R}=await Z.from("settings").select("value").eq("key","access_code_settings").single();!R&&_&&(r(_.value),localStorage.setItem("admin-access-code-settings",JSON.stringify(_.value)));const{data:P,error:F}=await Z.from("settings").select("value").eq("key","teacher_code_limits").single();!F&&P&&(t(P.value),localStorage.setItem("admin-teacher-code-limits",JSON.stringify(P.value)))}catch(_){console.error("Error loading settings from Supabase:",_)}},k=async()=>{m(!0);try{const{data:_,error:R}=await Z.from("access_codes").select("*").order("created_at",{ascending:!1});if(!R&&_){const F=_.map(L=>({id:L.id,code:L.code,grade:L.grade,description:L.description,teacherId:L.teacher_id,teacherName:L.teacher_name,teacherPhone:L.teacher_phone,createdAt:L.created_at,expiresAt:L.expires_at,isActive:L.is_active,usageCount:L.usage_count||0,maxUsage:L.max_usage,studentId:L.student_id,classRoomId:L.class_room_id,isTeacher:L.is_teacher}));d(F),m(!1);return}const P=[];Object.keys(An).forEach(F=>{const L=localStorage.getItem(`teacher-access-codes-${F}`);if(L){const G=JSON.parse(L).map(le=>({...le,teacherName:An[F].name,teacherId:F}));P.push(...G)}}),d(P)}catch(_){console.error("Error loading access codes:",_)}finally{m(!1)}},S=async()=>{try{const{error:_}=await Z.from("settings").update({value:s}).eq("key","access_code_settings");if(_)throw _;const{error:R}=await Z.from("settings").update({value:e}).eq("key","teacher_code_limits");if(R)throw R;localStorage.setItem("admin-teacher-code-limits",JSON.stringify(e)),localStorage.setItem("admin-access-code-settings",JSON.stringify(s)),i(!1);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم حفظ الإعدادات بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}catch(_){console.error("Error saving settings to Supabase:",_),localStorage.setItem("admin-teacher-code-limits",JSON.stringify(e)),localStorage.setItem("admin-access-code-settings",JSON.stringify(s)),i(!1);const R=document.createElement("div");R.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",R.textContent="تم حفظ الإعدادات محلياً فقط. فشل الحفظ في قاعدة البيانات.",document.body.appendChild(R),setTimeout(()=>{R.style.opacity="0",R.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(R)&&document.body.removeChild(R)},300)},3e3)}},C=(_,R)=>{t(P=>({...P,[_]:R}))},M=(_,R)=>{r(P=>({...P,[_]:R}))},U=(()=>{const _={default:"الحد الافتراضي للمعلمين الجدد"};return b.forEach(R=>{const P=Array.isArray(R.grades)?` - ${R.grades.map(F=>`الصف ${F}`).join(", ")}`:"";_[R.id]=`${R.name}${P}`}),_})(),B=Object.entries(U).filter(([_,R])=>R.toLowerCase().includes(o.toLowerCase())),D=_=>{if(!_.isActive)return{status:"غير نشط",color:"text-gray-600 bg-gray-100"};if(_.expiresAt){const R=new Date(_.expiresAt);if(R.getTime()<Date.now())return{status:"منتهي",color:"text-red-600 bg-red-100"};const P=Math.floor((R.getTime()-Date.now())/(1e3*60*60*24));if(P<=3)return{status:`ينتهي خلال ${P} أيام`,color:"text-orange-600 bg-orange-100"};if(P<=7)return{status:`ينتهي خلال ${P} أيام`,color:"text-yellow-600 bg-yellow-100"}}return{status:"نشط",color:"text-green-600 bg-green-100"}},$=c.filter(_=>{var R,P;return _.code.toLowerCase().includes(o.toLowerCase())||((R=_.description)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((P=_.teacherName)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))}),W=$.filter(_=>_.isTeacher),E=$.filter(_=>!_.isTeacher),T=_=>{p(_),f(!0)},O=async _=>{if(confirm("هل أنت متأكد من حذف هذا الرمز؟"))try{const{error:R}=await Z.from("access_codes").delete().eq("id",_);if(R)throw R;d(F=>F.filter(L=>L.id!==_));const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم حذف الرمز بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}catch(R){console.error("Error deleting access code:",R);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="حدث خطأ أثناء حذف الرمز",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}},I=async _=>{try{const{error:R}=await Z.from("access_codes").update({code:_.code,grade:_.grade,description:_.description,expires_at:_.expiresAt,is_active:_.isActive,max_usage:_.maxUsage,teacher_name:_.teacherName,teacher_phone:_.teacherPhone}).eq("id",_.id);if(R)throw R;d(F=>F.map(L=>L.id===_.id?_:L)),f(!1);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم تحديث الرمز بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}catch(R){console.error("Error updating access code:",R);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="حدث خطأ أثناء تحديث الرمز",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(Te,{className:"w-8 h-8 text-blue-600"}),"إدارة رموز الدخول"]}),n.jsx("p",{className:"text-gray-600",children:"إنشاء وتعديل وحذف رموز الدخول للمعلمين والطلاب"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(De,{className:"w-4 h-4"}),"إنشاء رمز معلم"]}),n.jsx("button",{onClick:()=>i(!a),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:a?"إلغاء":"تعديل الإعدادات"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(Te,{className:"w-6 h-6 text-purple-600"}),"إعدادات رموز الدخول"]}),a&&n.jsxs("button",{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Fr,{className:"w-4 h-4 inline mr-2"}),"حفظ التغييرات"]})]}),n.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl mb-8 border border-purple-200",children:[n.jsx("h4",{className:"text-lg font-bold text-purple-800 mb-4",children:"حدود رموز الدخول للمعلمين"}),n.jsx("p",{className:"text-purple-700 mb-4",children:"تحديد الحد الأقصى لعدد رموز الدخول التي يمكن لكل معلم إنشاؤها للطلاب"}),Object.keys(U).length>5&&n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",placeholder:"البحث عن معلم...",value:o,onChange:_=>l(_.target.value),className:"w-full pr-10 pl-4 py-3 border border-purple-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})})}),n.jsx("div",{className:"grid gap-4",children:B.map(([_,R])=>n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-purple-100",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:R}),n.jsx("div",{className:"flex items-center gap-2",children:a?n.jsx("input",{type:"number",min:"1",max:"1000",value:e[_],onChange:P=>C(_,parseInt(P.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center"}):n.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-2 rounded-lg font-bold",children:[e[_]," رمز"]})})]},_))})]}),n.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-bold text-blue-800 mb-4",children:"الإعدادات العامة لرموز الدخول"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"مدة صلاحية الرمز الافتراضية"}),n.jsx("div",{className:"text-sm text-gray-600",children:"عدد الأيام التي يبقى فيها الرمز صالحاً"})]}),n.jsx("div",{className:"flex items-center gap-2",children:a?n.jsx("input",{type:"number",min:"1",max:"365",value:s.defaultExpiryDays,onChange:_=>M("defaultExpiryDays",parseInt(_.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center"}):n.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-bold",children:[s.defaultExpiryDays," يوم"]})})]}),n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"إلزام المعلمين بتحديد تاريخ انتهاء"}),n.jsx("div",{className:"text-sm text-gray-600",children:"يجب على المعلمين تحديد تاريخ انتهاء لكل رمز"})]}),n.jsx("div",{children:a?n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.requireExpiry,onChange:_=>M("requireExpiry",_.target.checked)}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):n.jsx("div",{className:`px-4 py-2 rounded-lg font-bold ${s.requireExpiry?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.requireExpiry?"نعم":"لا"})})]}),n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"الحد الأقصى لاستخدامات الرمز الواحد"}),n.jsx("div",{className:"text-sm text-gray-600",children:"عدد المرات التي يمكن استخدام الرمز فيها"})]}),n.jsx("div",{className:"flex items-center gap-2",children:a?n.jsx("input",{type:"number",min:"1",max:"1000",value:s.maxUsagePerCode,onChange:_=>M("maxUsagePerCode",parseInt(_.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center"}):n.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-bold",children:[s.maxUsagePerCode," مرة"]})})]}),n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"إلزام المعلمين بإدخال وصف للرمز"}),n.jsx("div",{className:"text-sm text-gray-600",children:"يجب على المعلمين إدخال وصف لكل رمز"})]}),n.jsx("div",{children:a?n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.requireDescription,onChange:_=>M("requireDescription",_.target.checked)}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):n.jsx("div",{className:`px-4 py-2 rounded-lg font-bold ${s.requireDescription?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.requireDescription?"نعم":"لا"})})]}),n.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"السماح للمعلمين بإنشاء رموز مخصصة"}),n.jsx("div",{className:"text-sm text-gray-600",children:"السماح للمعلمين بتحديد نص الرمز بأنفسهم"})]}),n.jsx("div",{children:a?n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.allowTeacherCustomCodes,onChange:_=>M("allowTeacherCustomCodes",_.target.checked)}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):n.jsx("div",{className:`px-4 py-2 rounded-lg font-bold ${s.allowTeacherCustomCodes?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.allowTeacherCustomCodes?"نعم":"لا"})})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(Te,{className:"w-6 h-6 text-blue-600"}),"رموز دخول المعلمين"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:k,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:"تحديث",children:n.jsx(Ze,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>{const _=[["الرمز","الصف","الوصف","المعلم","تاريخ الإنشاء","تاريخ الانتهاء","عدد الاستخدامات","الحالة"].join(","),...W.map(L=>[L.code,L.grade,L.description||"",L.teacherName||"",new Date(L.createdAt).toLocaleDateString("ar-SA"),L.expiresAt?new Date(L.expiresAt).toLocaleDateString("ar-SA"):"غير محدد",L.usageCount||0,L.isActive?"نشط":"غير نشط"].join(","))].join(`
`),R=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(R),F=document.createElement("a");F.setAttribute("href",P),F.setAttribute("download",`teacher_access_codes_${new Date().toISOString().split("T")[0]}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-5 h-5"}),"تصدير"]}),n.jsxs("button",{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز معلم"]})]})]}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",placeholder:"البحث في الرموز...",value:o,onChange:_=>l(_.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})}),u?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل رموز الدخول..."})]}):n.jsx(n.Fragment,{children:W.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الرمز"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الوصف"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"المعلم"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"تاريخ الإنشاء"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"تاريخ الانتهاء"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الاستخدامات"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الحالة"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:W.map(_=>{const R=D(_);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono font-semibold",children:_.code}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_.code);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم نسخ الرمز بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},2e3)},className:"text-gray-500 hover:text-blue-600 transition-colors",title:"نسخ الرمز",children:n.jsx(Ua,{className:"w-4 h-4"})})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-semibold",children:["الصف ",_.grade]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-gray-800",children:_.description||"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-gray-800",children:_.teacherName||"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),new Date(_.createdAt).toLocaleDateString("ar-SA")]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-gray-600",children:_.expiresAt?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dt,{className:"w-4 h-4"}),new Date(_.expiresAt).toLocaleDateString("ar-SA")]}):"غير محدد"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[_.usageCount||0,_.maxUsage?` / ${_.maxUsage}`:""]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${R.color}`,children:R.status})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>T(_),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>O(_.id),className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},_.id)})})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"لا توجد رموز دخول للمعلمين"}),n.jsx("p",{className:"text-gray-500",children:o?"لم يتم العثور على رموز تطابق معايير البحث":"لم يتم إنشاء أي رموز دخول للمعلمين بعد"}),n.jsxs("button",{onClick:()=>j(!0),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز معلم جديد"]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(Te,{className:"w-6 h-6 text-green-600"}),"رموز دخول الطلاب"]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{onClick:()=>{const _=[["الرمز","الصف","الوصف","المعلم","تاريخ الإنشاء","تاريخ الانتهاء","عدد الاستخدامات","الحالة"].join(","),...E.map(L=>[L.code,L.grade,L.description||"",L.teacherName||"",new Date(L.createdAt).toLocaleDateString("ar-SA"),L.expiresAt?new Date(L.expiresAt).toLocaleDateString("ar-SA"):"غير محدد",L.usageCount||0,L.isActive?"نشط":"غير نشط"].join(","))].join(`
`),R=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(R),F=document.createElement("a");F.setAttribute("href",P),F.setAttribute("download",`student_access_codes_${new Date().toISOString().split("T")[0]}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-5 h-5"}),"تصدير"]})})]}),u?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل رموز الدخول..."})]}):n.jsx(n.Fragment,{children:E.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الرمز"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الوصف"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"المعلم"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"تاريخ الإنشاء"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"تاريخ الانتهاء"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الاستخدامات"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الحالة"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map(_=>{const R=D(_);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono font-semibold",children:_.code}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_.code);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم نسخ الرمز بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},2e3)},className:"text-gray-500 hover:text-blue-600 transition-colors",title:"نسخ الرمز",children:n.jsx(Ua,{className:"w-4 h-4"})})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-semibold",children:["الصف ",_.grade]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-gray-800",children:_.description||"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-gray-800",children:_.teacherName||"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),new Date(_.createdAt).toLocaleDateString("ar-SA")]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-gray-600",children:_.expiresAt?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dt,{className:"w-4 h-4"}),new Date(_.expiresAt).toLocaleDateString("ar-SA")]}):"غير محدد"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[_.usageCount||0,_.maxUsage?` / ${_.maxUsage}`:""]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${R.color}`,children:R.status})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>T(_),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>O(_.id),className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},_.id)})})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"لا توجد رموز دخول للطلاب"}),n.jsx("p",{className:"text-gray-500",children:o?"لم يتم العثور على رموز تطابق معايير البحث":"لم يتم إنشاء أي رموز دخول للطلاب بعد"})]})})]}),y&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 left-4 bg-white/20 hover:bg-white/30 text-gray-700 p-2 rounded-full transition-colors z-10",children:n.jsx(Et,{className:"w-5 h-5"})}),n.jsx(V1,{onSuccess:()=>{k(),setTimeout(()=>j(!1),3e3)}})]})})}),g&&w&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[n.jsx(Te,{className:"w-6 h-6"}),"تعديل رمز الدخول"]}),n.jsx("p",{className:"opacity-90 text-sm",children:"قم بتعديل بيانات رمز الدخول"})]}),n.jsxs("form",{onSubmit:_=>{_.preventDefault(),I(w)},className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رمز الدخول *"}),n.jsx("input",{type:"text",value:w.code,onChange:_=>p({...w,code:_.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{value:w.grade,onChange:_=>p({...w,grade:parseInt(_.target.value)}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(_=>n.jsxs("option",{value:_,children:["الصف ",_]},_))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوصف *"}),n.jsx("input",{type:"text",value:w.description,onChange:_=>p({...w,description:_.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"تاريخ انتهاء الصلاحية"}),n.jsx("input",{type:"date",value:w.expiresAt?new Date(w.expiresAt).toISOString().split("T")[0]:"",onChange:_=>p({...w,expiresAt:_.target.value?new Date(_.target.value).toISOString():null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأقصى للاستخدامات"}),n.jsx("input",{type:"number",value:w.maxUsage||0,onChange:_=>p({...w,maxUsage:parseInt(_.target.value)||null}),min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اتركه 0 إذا كنت لا ترغب في تحديد عدد الاستخدامات"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isActive",checked:w.isActive,onChange:_=>p({...w,isActive:_.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isActive",className:"text-sm font-semibold text-gray-700",children:"الرمز نشط"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"حفظ التغييرات"}),n.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})})]})},Q1=()=>{const[e,t]=x.useState([]),[s,r]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(null),y={english:{color:"from-blue-500 to-indigo-600",bg:"bg-blue-100",text:"text-blue-800"},math:{color:"from-green-500 to-teal-600",bg:"bg-green-100",text:"text-green-800"},science:{color:"from-purple-500 to-violet-600",bg:"bg-purple-100",text:"text-purple-800"},islamic:{color:"from-emerald-500 to-green-600",bg:"bg-emerald-100",text:"text-emerald-800"},arabic:{color:"from-amber-500 to-yellow-600",bg:"bg-amber-100",text:"text-amber-800"},social:{color:"from-orange-500 to-red-600",bg:"bg-orange-100",text:"text-orange-800"},art:{color:"from-pink-500 to-rose-600",bg:"bg-pink-100",text:"text-pink-800"},pe:{color:"from-red-500 to-pink-600",bg:"bg-red-100",text:"text-red-800"},default:{color:"from-gray-500 to-slate-600",bg:"bg-gray-100",text:"text-gray-800"}};x.useEffect(()=>{j()},[]);const j=async()=>{r(!0);try{const{data:h,error:N}=await Z.from("subjects").select("*").order("name");if(N)throw N;if(h&&h.length>0){const k=h.map(S=>({id:S.id,name:S.name,nameEn:S.name_en,icon:S.icon,color:S.color,description:S.description,isActive:S.is_active,createdAt:S.created_at,updatedAt:S.updated_at}));t(k)}else{const k=b();t(k);for(const S of k)await Z.from("subjects").insert({id:S.id,name:S.name,name_en:S.nameEn,icon:S.icon,color:S.color,description:S.description,is_active:S.isActive,created_at:S.createdAt})}}catch(h){console.error("Error loading subjects:",h);const N=localStorage.getItem("admin-subjects");if(N)t(JSON.parse(N));else{const k=b();t(k),localStorage.setItem("admin-subjects",JSON.stringify(k))}}finally{r(!1)}},b=()=>[{id:"english",name:"اللغة الإنجليزية",nameEn:"English",icon:"📚",color:"from-blue-500 to-indigo-600",description:"تعلم اللغة الإنجليزية من خلال المفردات والقواعد والتمارين التفاعلية",isActive:!0,createdAt:new Date().toISOString()},{id:"math",name:"الرياضيات",nameEn:"Mathematics",icon:"🔢",color:"from-green-500 to-teal-600",description:"تعلم الرياضيات من خلال المسائل والتمارين التفاعلية",isActive:!0,createdAt:new Date().toISOString()},{id:"science",name:"العلوم",nameEn:"Science",icon:"🔬",color:"from-purple-500 to-violet-600",description:"تعلم العلوم من خلال التجارب والمفاهيم العلمية",isActive:!0,createdAt:new Date().toISOString()},{id:"islamic",name:"التربية الإسلامية",nameEn:"Islamic Education",icon:"☪️",color:"from-emerald-500 to-green-600",description:"تعلم التربية الإسلامية من خلال القرآن والحديث والفقه",isActive:!0,createdAt:new Date().toISOString()},{id:"arabic",name:"اللغة العربية",nameEn:"Arabic",icon:"📖",color:"from-amber-500 to-yellow-600",description:"تعلم اللغة العربية من خلال القراءة والكتابة والقواعد",isActive:!0,createdAt:new Date().toISOString()}],v=()=>{d(null),l(!0)},w=h=>{d(h),l(!0)},p=h=>{m(h)},g=async h=>{try{const{error:N}=await Z.from("subjects").delete().eq("id",h);if(N)throw N;t(S=>S.filter(C=>C.id!==h)),m(null);const k=document.createElement("div");k.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",k.textContent="تم حذف المادة بنجاح",document.body.appendChild(k),setTimeout(()=>{k.style.opacity="0",k.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},300)},3e3)}catch(N){console.error("Error deleting subject:",N);const k=document.createElement("div");k.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",k.textContent="حدث خطأ أثناء حذف المادة",document.body.appendChild(k),setTimeout(()=>{k.style.opacity="0",k.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},300)},3e3)}},f=e.filter(h=>h.name.toLowerCase().includes(a.toLowerCase())||h.nameEn.toLowerCase().includes(a.toLowerCase())||h.description.toLowerCase().includes(a.toLowerCase()));return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(za,{className:"w-8 h-8 text-blue-600"}),"إدارة المواد الدراسية"]}),n.jsx("p",{className:"text-gray-600",children:"إضافة وتعديل وحذف المواد الدراسية"})]}),n.jsxs("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة مادة جديدة"]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"البحث عن مادة...",value:a,onChange:h=>i(h.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s?Array(6).fill(0).map((h,N)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]},N)):f.length>0?f.map(h=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`bg-gradient-to-br ${h.color} text-white p-3 rounded-xl shadow-md`,children:n.jsx("span",{className:"text-2xl",children:h.icon})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:h.name}),n.jsx("p",{className:"text-sm text-gray-600",children:h.nameEn})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>w(h),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>p(h.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-5 h-5"})})]})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:h.description}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${h.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.isActive?"نشط":"غير نشط"}),n.jsxs("span",{className:"text-sm text-gray-500",children:["تاريخ الإضافة: ",new Date(h.createdAt).toLocaleDateString("ar-SA")]})]})]},h.id)):n.jsxs("div",{className:"col-span-full bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(za,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"لا توجد مواد"}),n.jsx("p",{className:"text-gray-500 mb-6",children:a?"لم يتم العثور على مواد تطابق معايير البحث":"لم يتم إضافة أي مواد بعد"}),!a&&n.jsxs("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة مادة جديدة"]})]})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:c?"تعديل المادة الدراسية":"إضافة مادة دراسية جديدة"}),n.jsx("p",{className:"opacity-90 text-sm",children:c?"قم بتعديل بيانات المادة الدراسية":"قم بإدخال بيانات المادة الدراسية الجديدة"})]}),n.jsx(Y1,{subject:c,onClose:()=>l(!1),onSave:async h=>{try{if(c){const{error:k}=await Z.from("subjects").update({name:h.name,name_en:h.nameEn,icon:h.icon,color:h.color,description:h.description,is_active:h.isActive,updated_at:new Date().toISOString()}).eq("id",c.id);if(k)throw k;t(S=>S.map(C=>C.id===c.id?{...C,...h}:C))}else{const k=h.nameEn.toLowerCase().replace(/\s+/g,"-"),{error:S}=await Z.from("subjects").insert({id:k,name:h.name,name_en:h.nameEn,icon:h.icon,color:h.color,description:h.description,is_active:h.isActive,created_at:new Date().toISOString()});if(S)throw S;const C={id:k,...h,createdAt:new Date().toISOString()};t(M=>[...M,C])}l(!1);const N=document.createElement("div");N.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",N.textContent=c?"تم تحديث المادة بنجاح":"تمت إضافة المادة بنجاح",document.body.appendChild(N),setTimeout(()=>{N.style.opacity="0",N.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},300)},3e3)}catch(N){console.error("Error saving subject:",N);const k=document.createElement("div");k.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",k.textContent="حدث خطأ أثناء حفظ المادة",document.body.appendChild(k),setTimeout(()=>{k.style.opacity="0",k.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(k)&&document.body.removeChild(k)},300)},3e3)}},subjectColors:y})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذه المادة؟ سيتم حذف جميع المحتويات المرتبطة بها."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>g(u),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف المادة"}),n.jsx("button",{onClick:()=>m(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},Y1=({subject:e,onClose:t,onSave:s,subjectColors:r})=>{const[a,i]=x.useState({name:(e==null?void 0:e.name)||"",nameEn:(e==null?void 0:e.nameEn)||"",icon:(e==null?void 0:e.icon)||"📚",color:(e==null?void 0:e.color)||"from-blue-500 to-indigo-600",description:(e==null?void 0:e.description)||"",isActive:(e==null?void 0:e.isActive)??!0}),o=["📚","🔢","🔬","☪️","📖","🌍","🎨","🏃","🧠","💻","🔍","📝","🧪","📊","🔤"],l=Object.entries(r).map(([d,u])=>({id:d,gradient:u.color,bg:u.bg,text:u.text})),c=d=>{const{name:u,value:m,type:y}=d.target;i(j=>({...j,[u]:y==="checkbox"?d.target.checked:m}))};return n.jsxs("form",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اسم المادة بالعربية *"}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:c,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: الرياضيات"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اسم المادة بالإنجليزية *"}),n.jsx("input",{type:"text",name:"nameEn",value:a.nameEn,onChange:c,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: Mathematics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الأيقونة"}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:o.map(d=>n.jsx("button",{type:"button",onClick:()=>i(u=>({...u,icon:d})),className:`p-2 text-2xl rounded-lg transition-all ${a.icon===d?"bg-blue-100 border-2 border-blue-500 scale-110":"bg-gray-100 hover:bg-gray-200 border-2 border-transparent"}`,children:d},d))}),n.jsx("input",{type:"text",name:"icon",value:a.icon,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل رمز إيموجي",maxLength:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"لون المادة"}),n.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:l.map(d=>n.jsx("button",{type:"button",onClick:()=>i(u=>({...u,color:d.gradient})),className:`h-10 rounded-lg transition-all ${a.color===d.gradient?"ring-2 ring-offset-2 ring-blue-500 scale-105":""}`,children:n.jsx("div",{className:`h-full w-full rounded-lg bg-gradient-to-r ${d.gradient}`})},d.id))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"وصف المادة *"}),n.jsx("textarea",{name:"description",value:a.description,onChange:c,required:!0,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل وصفاً مختصراً للمادة"})]}),n.jsx("div",{className:"flex items-center",children:n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:a.isActive,onChange:d=>i(u=>({...u,isActive:d.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-gray-700",children:"المادة نشطة"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"button",onClick:()=>s(a),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5"}),e?"حفظ التغييرات":"إضافة المادة"]}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})},J1=({subject:e})=>{const[t,s]=x.useState([]),[r,a]=x.useState(!0),[i,o]=x.useState(""),[l,c]=x.useState(null),[d,u]=x.useState(null),[m,y]=x.useState(!1),[j,b]=x.useState(null),[v,w]=x.useState(null),[p,g]=x.useState([]),[f,h]=x.useState([]),[N,k]=x.useState([]),[S,C]=x.useState((e==null?void 0:e.id)||null);x.useEffect(()=>{e&&C(e.id),A(),M()},[e]);const M=async()=>{try{const{data:_,error:R}=await Z.from("subjects").select("*").order("name");if(R)throw R;if(_&&_.length>0){const P=_.map(F=>({id:F.id,name:F.name,nameEn:F.name_en,icon:F.icon,color:F.color,description:F.description,isActive:F.is_active,createdAt:F.created_at,updatedAt:F.updated_at}));k(P)}}catch(_){console.error("Error loading subjects:",_)}},A=async()=>{a(!0);try{let _=Z.from("content_items").select("*");S&&(_=_.eq("subject",S));const{data:R,error:P}=await _.order("created_at",{ascending:!1});if(P)throw P;if(R&&R.length>0){const F=R.map(G=>({id:G.id,title:G.title,description:G.description,content:G.content,contentType:G.content_type,subject:G.subject,unit:G.unit,grade:G.grade,order:G.order,isActive:G.is_active,createdAt:G.created_at,updatedAt:G.updated_at}));s(F);const L=[...new Set(F.map(G=>G.unit))],Y=[...new Set(F.map(G=>G.grade))].sort((G,le)=>G-le);g(L),h(Y)}else s([]),g([]),h([])}catch(_){console.error("Error loading content:",_),s([])}finally{a(!1)}},U=()=>{b(null),y(!0)},B=_=>{b(_),y(!0)},D=_=>{w(_)},$=async _=>{try{const{error:R}=await Z.from("content_items").delete().eq("id",_);if(R)throw R;s(F=>F.filter(L=>L.id!==_)),w(null);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="تم حذف المحتوى بنجاح",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}catch(R){console.error("Error deleting content:",R);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="حدث خطأ أثناء حذف المحتوى",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}},W=()=>{o(""),c(null),u(null)},E=t.filter(_=>{if(l!==null&&_.grade!==l||d&&_.unit!==d)return!1;if(i){const R=i.toLowerCase();return _.title.toLowerCase().includes(R)||_.description.toLowerCase().includes(R)||_.content.toLowerCase().includes(R)}return!0}),T=_=>{switch(_){case"text":return n.jsx(ls,{className:"w-5 h-5"});case"image":return n.jsx("div",{className:"text-lg",children:"🖼️"});case"video":return n.jsx("div",{className:"text-lg",children:"🎬"});case"audio":return n.jsx("div",{className:"text-lg",children:"🔊"});case"interactive":return n.jsx("div",{className:"text-lg",children:"🎮"});default:return n.jsx(ls,{className:"w-5 h-5"})}},O=_=>{switch(_){case"text":return"نص";case"image":return"صورة";case"video":return"فيديو";case"audio":return"صوت";case"interactive":return"تفاعلي";default:return"نص"}},I=_=>{const R=N.find(P=>P.id===_);return R?R.name:_};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(ze,{className:"w-8 h-8 text-blue-600"}),"إدارة المحتوى ",e?`- ${e.name}`:""]}),n.jsx("p",{className:"text-gray-600",children:"إضافة وتعديل وحذف محتوى المواد الدراسية"})]}),n.jsxs("button",{onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة محتوى جديد"]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-semibold text-gray-700 mb-2",children:"بحث"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",id:"search",value:i,onChange:_=>o(_.target.value),placeholder:"ابحث في المحتوى...",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"}),n.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i&&n.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx($n,{className:"w-5 h-5"})})]})]}),!e&&n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-700 mb-2",children:"المادة"}),n.jsxs("select",{id:"subject",value:S||"",onChange:_=>{C(_.target.value||null),A()},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع المواد"}),N.map(_=>n.jsx("option",{value:_.id,children:_.name},_.id))]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"grade",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف"}),n.jsxs("select",{id:"grade",value:l===null?"":l,onChange:_=>c(_.target.value?Number(_.target.value):null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الصفوف"}),f.map(_=>n.jsxs("option",{value:_,children:["الصف ",_]},_))]})]}),n.jsxs("div",{className:"md:w-1/4",children:[n.jsx("label",{htmlFor:"unit",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة"}),n.jsxs("select",{id:"unit",value:d||"",onChange:_=>u(_.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الوحدات"}),p.map(_=>n.jsx("option",{value:_,children:_},_))]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-gray-600",children:["تم العثور على ",n.jsx("span",{className:"font-bold text-blue-600",children:E.length})," محتوى"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:W,className:"flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"إعادة ضبط"]}),n.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"تحديث"]})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل المحتوى..."})]}):E.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"العنوان"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"النوع"}),!e&&n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"المادة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الوحدة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الحالة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map(_=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"py-4 px-6",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:_.title}),n.jsx("div",{className:"text-sm text-gray-600 line-clamp-1",children:_.description})]}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[T(_.contentType),n.jsx("span",{children:O(_.contentType)})]})}),!e&&n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-semibold",children:I(_.subject)})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-semibold",children:["الصف ",_.grade]})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm font-semibold",children:_.unit})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${_.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.isActive?"نشط":"غير نشط"})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>B(_),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>D(_.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},_.id))})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx(cs,{className:"w-12 h-12 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد نتائج"}),n.jsx("p",{className:"text-gray-500 mb-4",children:i||l||d||S?"لم يتم العثور على محتوى يطابق معايير البحث":"لم يتم إضافة أي محتوى بعد"}),n.jsx("button",{onClick:W,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:"إعادة ضبط الفلاتر"})]})}),m&&n.jsx(X1,{content:j,onClose:()=>y(!1),onSave:async _=>{try{if(j){const{error:P}=await Z.from("content_items").update({title:_.title,description:_.description,content:_.content,content_type:_.contentType,subject:_.subject,unit:_.unit,grade:_.grade,order:_.order,is_active:_.isActive,updated_at:new Date().toISOString()}).eq("id",j.id);if(P)throw P;s(F=>F.map(L=>L.id===j.id?{...L,..._}:L))}else{const P=crypto.randomUUID(),{error:F}=await Z.from("content_items").insert({id:P,title:_.title,description:_.description,content:_.content,content_type:_.contentType,subject:_.subject,unit:_.unit,grade:_.grade,order:_.order,is_active:_.isActive,created_at:new Date().toISOString()});if(F)throw F;const L={id:P,..._,createdAt:new Date().toISOString()};s(Y=>[L,...Y]),p.includes(_.unit)||g(Y=>[...Y,_.unit]),f.includes(_.grade)||h(Y=>[...Y,_.grade].sort((G,le)=>G-le))}y(!1);const R=document.createElement("div");R.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",R.textContent=j?"تم تحديث المحتوى بنجاح":"تمت إضافة المحتوى بنجاح",document.body.appendChild(R),setTimeout(()=>{R.style.opacity="0",R.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(R)&&document.body.removeChild(R)},300)},3e3)}catch(R){console.error("Error saving content:",R);const P=document.createElement("div");P.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",P.textContent="حدث خطأ أثناء حفظ المحتوى",document.body.appendChild(P),setTimeout(()=>{P.style.opacity="0",P.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},300)},3e3)}},subjects:N,defaultSubject:(e==null?void 0:e.id)||S}),v&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذا المحتوى؟ لا يمكن التراجع عن هذا الإجراء."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>$(v),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف المحتوى"}),n.jsx("button",{onClick:()=>w(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},X1=({content:e,onClose:t,onSave:s,subjects:r,defaultSubject:a})=>{var c;const[i,o]=x.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",content:(e==null?void 0:e.content)||"",contentType:(e==null?void 0:e.contentType)||"text",subject:(e==null?void 0:e.subject)||a||((c=r[0])==null?void 0:c.id)||"",unit:(e==null?void 0:e.unit)||"",grade:(e==null?void 0:e.grade)||5,order:(e==null?void 0:e.order)||0,isActive:(e==null?void 0:e.isActive)??!0}),l=d=>{const{name:u,value:m,type:y}=d.target;o(j=>({...j,[u]:y==="checkbox"?d.target.checked:u==="grade"||u==="order"?Number(m):m}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:e?"تعديل المحتوى":"إضافة محتوى جديد"}),n.jsx("p",{className:"opacity-90 text-sm",children:e?"قم بتعديل بيانات المحتوى":"قم بإدخال بيانات المحتوى الجديد"})]}),n.jsxs("form",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"عنوان المحتوى *"}),n.jsx("input",{type:"text",name:"title",value:i.title,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل عنوان المحتوى"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"نوع المحتوى *"}),n.jsxs("select",{name:"contentType",value:i.contentType,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"text",children:"نص"}),n.jsx("option",{value:"image",children:"صورة"}),n.jsx("option",{value:"video",children:"فيديو"}),n.jsx("option",{value:"audio",children:"صوت"}),n.jsx("option",{value:"interactive",children:"تفاعلي"})]})]}),!a&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المادة *"}),n.jsx("select",{name:"subject",value:i.subject,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:r.map(d=>n.jsx("option",{value:d.id,children:d.name},d.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:i.grade,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(d=>n.jsxs("option",{value:d,children:["الصف ",d]},d))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة *"}),n.jsx("input",{type:"text",name:"unit",value:i.unit,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل اسم الوحدة"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الترتيب"}),n.jsx("input",{type:"number",name:"order",value:i.order,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ترتيب العرض",min:"0"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"وصف المحتوى *"}),n.jsx("textarea",{name:"description",value:i.description,onChange:l,required:!0,rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل وصفاً مختصراً للمحتوى"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المحتوى *"}),n.jsx("textarea",{name:"content",value:i.content,onChange:l,required:!0,rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:i.contentType==="text"?"أدخل المحتوى النصي هنا...":i.contentType==="image"?"أدخل رابط الصورة هنا...":i.contentType==="video"?"أدخل رابط الفيديو هنا...":i.contentType==="audio"?"أدخل رابط الصوت هنا...":"أدخل المحتوى التفاعلي هنا..."})]}),n.jsx("div",{className:"flex items-center",children:n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:d=>o(u=>({...u,isActive:d.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-gray-700",children:"المحتوى نشط"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"button",onClick:()=>s(i),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5"}),e?"حفظ التغييرات":"إضافة المحتوى"]}),n.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})})},Z1=({subject:e})=>{const[t,s]=x.useState([]),[r,a]=x.useState(!0),[i,o]=x.useState(""),[l,c]=x.useState(null),[d,u]=x.useState(null),[m,y]=x.useState(null),[j,b]=x.useState(!1),[v,w]=x.useState(null),[p,g]=x.useState(null),[f,h]=x.useState([]),[N,k]=x.useState([]);x.useEffect(()=>{S()},[e]);const S=async()=>{a(!0);try{let E=Z.from("math_problems").select("*");e&&(E=E.eq("subject",e.id));const{data:T,error:O}=await E.order("created_at",{ascending:!1});if(O)throw O;if(T&&T.length>0){const I=T.map(P=>({id:P.id,question:P.question,options:P.options,answer:P.answer,solution:P.solution,difficulty:P.difficulty,topic:P.topic,unit:P.unit,grade:P.grade,subject:P.subject,imageUrl:P.image_url}));s(I);const _=[...new Set(I.map(P=>P.topic))],R=[...new Set(I.map(P=>P.grade))].sort((P,F)=>P-F);h(_),k(R)}else s([]),h([]),k([])}catch(E){console.error("Error loading math problems:",E),s([])}finally{a(!1)}},C=()=>{w(null),b(!0)},M=E=>{w(E),b(!0)},A=E=>{g(E)},U=async E=>{try{const{error:T}=await Z.from("math_problems").delete().eq("id",E);if(T)throw T;s(I=>I.filter(_=>_.id!==E)),g(null);const O=document.createElement("div");O.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",O.textContent="تم حذف المسألة بنجاح",document.body.appendChild(O),setTimeout(()=>{O.style.opacity="0",O.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},300)},3e3)}catch(T){console.error("Error deleting math problem:",T);const O=document.createElement("div");O.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",O.textContent="حدث خطأ أثناء حذف المسألة",document.body.appendChild(O),setTimeout(()=>{O.style.opacity="0",O.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},300)},3e3)}},B=()=>{o(""),c(null),u(null),y(null)},D=t.filter(E=>{if(l!==null&&E.grade!==l||d&&E.topic!==d||m&&E.difficulty!==m)return!1;if(i){const T=i.toLowerCase();return E.question.toLowerCase().includes(T)||E.topic.toLowerCase().includes(T)||E.solution.toLowerCase().includes(T)}return!0}),$=E=>{switch(E){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=E=>{switch(E){case"easy":return"سهل";case"medium":return"متوسط";case"hard":return"صعب";default:return E}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(ad,{className:"w-8 h-8 text-green-600"}),"محتوى الرياضيات ",e?`- ${e.name}`:""]}),n.jsx("p",{className:"text-gray-600",children:"إضافة وتعديل وحذف مسائل الرياضيات"})]}),n.jsxs("button",{onClick:C,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة مسألة جديدة"]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-semibold text-gray-700 mb-2",children:"بحث"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",id:"search",value:i,onChange:E=>o(E.target.value),placeholder:"ابحث في المسائل...",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none transition-colors"}),n.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i&&n.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx($n,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"grade",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف"}),n.jsxs("select",{id:"grade",value:l===null?"":l,onChange:E=>c(E.target.value?Number(E.target.value):null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع الصفوف"}),N.map(E=>n.jsxs("option",{value:E,children:["الصف ",E]},E))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"topic",className:"block text-sm font-semibold text-gray-700 mb-2",children:"الموضوع"}),n.jsxs("select",{id:"topic",value:d||"",onChange:E=>u(E.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع المواضيع"}),f.map(E=>n.jsx("option",{value:E,children:E},E))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"difficulty",className:"block text-sm font-semibold text-gray-700 mb-2",children:"مستوى الصعوبة"}),n.jsxs("select",{id:"difficulty",value:m||"",onChange:E=>y(E.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none transition-colors",children:[n.jsx("option",{value:"",children:"جميع المستويات"}),n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-gray-600",children:["تم العثور على ",n.jsx("span",{className:"font-bold text-green-600",children:D.length})," مسألة"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"إعادة ضبط"]}),n.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Ze,{className:"w-4 h-4"}),"تحديث"]})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"جاري تحميل المسائل..."})]}):D.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"المسألة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الموضوع"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الصعوبة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:D.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"py-4 px-6",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:E.question}),n.jsxs("div",{className:"text-sm text-gray-600",children:["الإجابة: ",E.answer]})]}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-semibold",children:["الصف ",E.grade]})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-semibold",children:E.topic})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${$(E.difficulty)}`,children:W(E.difficulty)})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>M(E),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"تعديل",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>A(E.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"حذف",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},E.id))})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx(ad,{className:"w-12 h-12 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مسائل"}),n.jsx("p",{className:"text-gray-500 mb-4",children:i||l||d||m?"لم يتم العثور على مسائل تطابق معايير البحث":"لم يتم إضافة أي مسائل بعد"}),n.jsx("button",{onClick:B,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none",children:"إعادة ضبط الفلاتر"})]})}),j&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:[n.jsx("h3",{className:"text-xl font-bold",children:v?"تعديل مسألة رياضية":"إضافة مسألة رياضية جديدة"}),n.jsx("p",{className:"opacity-90 text-sm",children:v?"قم بتعديل بيانات المسألة":"قم بإدخال بيانات المسألة الجديدة"})]}),n.jsxs("form",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"نص المسألة *"}),n.jsx("textarea",{name:"question",value:(v==null?void 0:v.question)||"",onChange:E=>w(T=>T?{...T,question:E.target.value}:null),required:!0,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"أدخل نص المسألة الرياضية"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الإجابة الصحيحة *"}),n.jsx("input",{type:"text",name:"answer",value:(v==null?void 0:v.answer)||"",onChange:E=>w(T=>T?{...T,answer:E.target.value}:null),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"أدخل الإجابة الصحيحة"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"مستوى الصعوبة *"}),n.jsxs("select",{name:"difficulty",value:(v==null?void 0:v.difficulty)||"medium",onChange:E=>w(T=>T?{...T,difficulty:E.target.value}:null),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[n.jsx("option",{value:"easy",children:"سهل"}),n.jsx("option",{value:"medium",children:"متوسط"}),n.jsx("option",{value:"hard",children:"صعب"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الموضوع *"}),n.jsx("input",{type:"text",name:"topic",value:(v==null?void 0:v.topic)||"",onChange:E=>w(T=>T?{...T,topic:E.target.value}:null),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"مثال: الجبر، الهندسة، الإحصاء"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوحدة *"}),n.jsx("input",{type:"text",name:"unit",value:(v==null?void 0:v.unit)||"",onChange:E=>w(T=>T?{...T,unit:E.target.value}:null),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"أدخل اسم الوحدة"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:(v==null?void 0:v.grade)||5,onChange:E=>w(T=>T?{...T,grade:Number(E.target.value)}:null),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(E=>n.jsxs("option",{value:E,children:["الصف ",E]},E))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحل التفصيلي *"}),n.jsx("textarea",{name:"solution",value:(v==null?void 0:v.solution)||"",onChange:E=>w(T=>T?{...T,solution:E.target.value}:null),required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"اشرح خطوات الحل بالتفصيل"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رابط الصورة (اختياري)"}),n.jsx("input",{type:"text",name:"imageUrl",value:(v==null?void 0:v.imageUrl)||"",onChange:E=>w(T=>T?{...T,imageUrl:E.target.value}:null),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"أدخل رابط الصورة التوضيحية (إن وجدت)"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الخيارات (للأسئلة متعددة الاختيارات، اتركها فارغة للأسئلة المفتوحة)"}),n.jsx("div",{className:"space-y-2",children:((v==null?void 0:v.options)||["","","",""]).map((E,T)=>n.jsx("input",{type:"text",value:E,onChange:O=>{if(v){const I=[...v.options||["","","",""]];I[T]=O.target.value,w({...v,options:I})}},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 mb-2",placeholder:`الخيار ${T+1}`},T))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"button",onClick:()=>{if(v)Z.from("math_problems").update({question:v.question,options:v.options,answer:v.answer,solution:v.solution,difficulty:v.difficulty,topic:v.topic,unit:v.unit,grade:v.grade,subject:v.subject||(e==null?void 0:e.id)||"math",image_url:v.imageUrl,updated_at:new Date().toISOString()}).eq("id",v.id).then(({error:E})=>{if(E)throw E;s(O=>O.map(I=>I.id===v.id?v:I)),b(!1);const T=document.createElement("div");T.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",T.textContent="تم تحديث المسألة بنجاح",document.body.appendChild(T),setTimeout(()=>{T.style.opacity="0",T.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},300)},3e3)}).catch(E=>{console.error("Error updating math problem:",E);const T=document.createElement("div");T.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",T.textContent="حدث خطأ أثناء تحديث المسألة",document.body.appendChild(T),setTimeout(()=>{T.style.opacity="0",T.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},300)},3e3)});else{const E={id:crypto.randomUUID(),question:"",answer:"",solution:"",difficulty:"medium",topic:"",unit:"",grade:5,subject:(e==null?void 0:e.id)||"math",options:["","","",""]};Z.from("math_problems").insert({id:E.id,question:E.question,options:E.options,answer:E.answer,solution:E.solution,difficulty:E.difficulty,topic:E.topic,unit:E.unit,grade:E.grade,subject:E.subject,image_url:E.imageUrl,created_at:new Date().toISOString()}).then(({error:T})=>{if(T)throw T;s(I=>[E,...I]),b(!1);const O=document.createElement("div");O.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",O.textContent="تمت إضافة المسألة بنجاح",document.body.appendChild(O),setTimeout(()=>{O.style.opacity="0",O.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},300)},3e3)}).catch(T=>{console.error("Error adding math problem:",T);const O=document.createElement("div");O.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",O.textContent="حدث خطأ أثناء إضافة المسألة",document.body.appendChild(O),setTimeout(()=>{O.style.opacity="0",O.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},300)},3e3)})}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5"}),v?"حفظ التغييرات":"إضافة المسألة"]}),n.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"إلغاء"})]})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف هذه المسألة؟ لا يمكن التراجع عن هذا الإجراء."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>U(p),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"نعم، حذف المسألة"}),n.jsx("button",{onClick:()=>g(null),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})})]})},Nn={totalScore:0,currentStreak:0,unitsCompleted:[],wordsLearned:0,lastStudyDate:new Date().toISOString(),wordProgress:{},studySessions:[],totalStudyTime:0},Zs=[{id:"first_word",title:"أول كلمة",description:"تعلمت أول كلمة!",icon:"🌟",achieved:!1},{id:"streak_5",title:"متتالية 5",description:"حققت 5 إجابات صحيحة متتالية",icon:"🔥",achieved:!1},{id:"streak_10",title:"متتالية 10",description:"حققت 10 إجابات صحيحة متتالية",icon:"⚡",achieved:!1},{id:"unit_complete",title:"وحدة مكتملة",description:"أكملت وحدة كاملة",icon:"🏆",achieved:!1},{id:"score_100",title:"مائة نقطة",description:"حققت 100 نقطة",icon:"💯",achieved:!1},{id:"score_500",title:"خمسمائة نقطة",description:"حققت 500 نقطة",icon:"🎯",achieved:!1},{id:"score_1000",title:"ألف نقطة",description:"حققت 1000 نقطة",icon:"👑",achieved:!1},{id:"daily_streak_7",title:"أسبوع من التعلم",description:"تعلمت لمدة 7 أيام متتالية",icon:"📅",achieved:!1},{id:"master_10_words",title:"إتقان 10 كلمات",description:"أتقنت 10 كلمات بنسبة 80% أو أكثر",icon:"📚",achieved:!1},{id:"perfect_quiz",title:"اختبار مثالي",description:"حققت 100% في اختبار",icon:"🎖️",achieved:!1}],yx=e=>{const[t,s]=x.useState(Nn),[r,a]=x.useState(Zs),[i,o]=x.useState(!0),[l,c]=x.useState(null);x.useEffect(()=>{d()},[e]);const d=async()=>{o(!0),c(null),e&&localStorage.getItem("english-learning-progress")&&(console.log("Clearing old localStorage progress data for code-based identification"),localStorage.removeItem("english-learning-progress"),localStorage.removeItem("english-learning-achievements"));try{if(e){const{data:g,error:f}=await Z.from("user_progress").select("*").eq("student_id",e).single();if(f)throw f;if(g){const k={totalScore:g.total_score,currentStreak:g.current_streak,unitsCompleted:g.units_completed,wordsLearned:g.words_learned,lastStudyDate:g.last_study_date,wordProgress:g.word_progress,studySessions:g.study_sessions,totalStudyTime:g.total_study_time,studentId:g.student_id};s(k)}else{const k={...Nn,studentId:e};console.log("Creating new progress for student:",e,k),await Z.from("user_progress").insert({id:crypto.randomUUID(),student_id:e,total_score:k.totalScore,current_streak:k.currentStreak,units_completed:k.unitsCompleted,words_learned:k.wordsLearned,last_study_date:k.lastStudyDate,word_progress:k.wordProgress,study_sessions:k.studySessions,total_study_time:k.totalStudyTime,created_at:new Date().toISOString()}),s(k)}const{data:h,error:N}=await Z.from("achievements").select("*").eq("student_id",e);if(N)console.error("Error loading achievements:",N);else if(h&&h.length>0){const k=h.map(S=>({id:S.achievement_id,title:S.title,description:S.description,icon:S.icon,achieved:S.achieved,achievedDate:S.achieved_date}));a(k)}else{for(const k of Zs)await Z.from("achievements").insert({id:crypto.randomUUID(),student_id:e,achievement_id:k.id,title:k.title,description:k.description,icon:k.icon,achieved:k.achieved,achieved_date:k.achievedDate,created_at:new Date().toISOString()});a(Zs)}}else{const g=localStorage.getItem("english-learning-progress");if(g)try{const h=JSON.parse(g);console.log("Loaded progress from localStorage:",h),s({...Nn,...h,wordProgress:h.wordProgress||{},studySessions:h.studySessions||[],totalStudyTime:h.totalStudyTime||0})}catch(h){console.error("Error parsing saved progress:",h),s(Nn)}else console.log("No saved progress found, using default progress:",Nn),s(Nn);const f=localStorage.getItem("english-learning-achievements");if(f)try{a(JSON.parse(f))}catch(h){console.error("Error parsing saved achievements:",h),a(Zs)}}}catch(g){console.error("Error loading progress:",g),c(g.message);const f=localStorage.getItem("english-learning-progress");if(f)try{const N=JSON.parse(f);s({...Nn,...N,wordProgress:N.wordProgress||{},studySessions:N.studySessions||[],totalStudyTime:N.totalStudyTime||0})}catch(N){console.error("Error parsing saved progress:",N),s(Nn)}const h=localStorage.getItem("english-learning-achievements");if(h)try{a(JSON.parse(h))}catch(N){console.error("Error parsing saved achievements:",N),a(Zs)}}finally{o(!1)}},u=async g=>{s(g);try{if(e){const{error:f}=await Z.from("user_progress").update({total_score:g.totalScore,current_streak:g.currentStreak,units_completed:g.unitsCompleted,words_learned:g.wordsLearned,last_study_date:g.lastStudyDate,word_progress:g.wordProgress,study_sessions:g.studySessions,total_study_time:g.totalStudyTime,updated_at:new Date().toISOString()}).eq("student_id",e);if(f)throw f}else localStorage.setItem("english-learning-progress",JSON.stringify(g))}catch(f){console.error("Error saving progress:",f),c(f.message),localStorage.setItem("english-learning-progress",JSON.stringify(g))}},m=(g,f,h)=>{const N={...t,totalScore:t.totalScore+g,lastStudyDate:new Date().toISOString()},k={id:crypto.randomUUID(),startTime:new Date().toISOString(),endTime:new Date().toISOString(),wordsStudied:[],totalScore:g,activitiesCompleted:[f||"unknown"],duration:0,studentId:e};N.studySessions=[...t.studySessions||[],k],s(N),u(N),w(N)},y=(g,f)=>{const h=g?t.currentStreak+1:0,N={...t,currentStreak:h};s(N),u(N),w(N)},j=(g,f)=>{const h=f?`${f}:${g}`:g;if(!t.unitsCompleted.includes(h)){const N={...t,unitsCompleted:[...t.unitsCompleted,h]};s(N),u(N),w(N)}},b=g=>{const f=(t.studySessions||[]).filter(k=>k.activitiesCompleted.includes(g)),h=f.reduce((k,S)=>k+(S.totalScore||0),0),N=t.unitsCompleted.filter(k=>k.startsWith(`${g}:`));return{totalScore:h,unitsCompleted:N.length,sessionsCount:f.length,lastStudyDate:f.length>0?f[f.length-1].startTime:null}},v=(g,f)=>{const h=`${g}:${f}`,N=t.unitsCompleted.includes(h),k=(t.studySessions||[]).filter(C=>C.activitiesCompleted.includes(g)),S=k.reduce((C,M)=>C+(M.totalScore||0),0);return{isCompleted:N,totalScore:S,sessionsCount:k.length,lastStudyDate:k.length>0?k[k.length-1].startTime:null}},w=async g=>{const f=r.map(h=>{if(h.achieved)return h;let N=!1;switch(h.id){case"first_word":N=g.wordsLearned>0;break;case"streak_5":N=g.currentStreak>=5;break;case"streak_10":N=g.currentStreak>=10;break;case"unit_complete":N=g.unitsCompleted.length>0;break;case"score_100":N=g.totalScore>=100;break;case"score_500":N=g.totalScore>=500;break;case"score_1000":N=g.totalScore>=1e3;break;case"master_10_words":N=Object.values(g.wordProgress||{}).filter(S=>S.overallMastery>=80).length>=10;break;case"daily_streak_7":N=g.studySessions.length>=7;break;case"perfect_quiz":N=!1;break}if(N&&!h.achieved){const k={...h,achieved:!0,achievedDate:new Date().toISOString()};return e&&Z.from("achievements").update({achieved:!0,achieved_date:new Date().toISOString()}).eq("student_id",e).eq("achievement_id",h.id).then(({error:S})=>{S&&console.error("Error updating achievement:",S)}),k}return h});a(f),e||localStorage.setItem("english-learning-achievements",JSON.stringify(f))};return{progress:t,achievements:r,loading:i,error:l,addScore:m,updateStreak:y,completeUnit:j,resetProgress:async()=>{s(Nn),a(Zs);try{e?(await Z.from("user_progress").update({total_score:0,current_streak:0,units_completed:[],words_learned:0,last_study_date:new Date().toISOString(),word_progress:{},study_sessions:[],total_study_time:0,updated_at:new Date().toISOString()}).eq("student_id",e),await Z.from("achievements").update({achieved:!1,achieved_date:null}).eq("student_id",e)):(localStorage.removeItem("english-learning-progress"),localStorage.removeItem("english-learning-achievements"))}catch(g){console.error("Error resetting progress:",g),c(g.message),localStorage.removeItem("english-learning-progress"),localStorage.removeItem("english-learning-achievements")}},checkAchievements:w,getSubjectProgress:b,getUnitProgress:v}},eS=()=>{const{progress:e,achievements:t,addScore:s,updateStreak:r,completeUnit:a}=yx(),{recordCorrectAnswer:i,recordIncorrectAnswer:o,getStudyStatistics:l}=Vg(),[c,d]=x.useState([]),[u,m]=x.useState(!1),[y,j]=x.useState(""),b=(p,g="info")=>{const f=new Date().toLocaleTimeString(),h=g==="success"?"✅":g==="error"?"❌":"ℹ️";d(N=>[...N,`${f} ${h} ${p}`])},v=async()=>{m(!0),d([]),b("🚀 بدء اختبار نظام تقدم الطلاب...","info");try{b("اختبار الوظائف الأساسية...","info");const p=e.totalScore;s(25),await new Promise(S=>setTimeout(S,100)),e.totalScore>=p+25?b("✅ نجح اختبار إضافة النقاط","success"):b("❌ فشل اختبار إضافة النقاط","error");const g=e.currentStreak;r(!0),await new Promise(S=>setTimeout(S,100)),e.currentStreak>g?b("✅ نجح اختبار تحديث السلسلة","success"):b("❌ فشل اختبار تحديث السلسلة","error");const f=`وحدة اختبار ${Date.now()}`;a(f),await new Promise(S=>setTimeout(S,100)),e.unitsCompleted.includes(f)?b("✅ نجح اختبار إكمال الوحدة","success"):b("❌ فشل اختبار إكمال الوحدة","error"),b("اختبار تقدم الكلمات...","info");const h=["test","example","progress"];for(const S of h)i(S,"pronunciation"),o(S,"spelling");const N=l();N.totalWords>0?b(`✅ تم اختبار ${N.totalWords} كلمات بدقة ${N.accuracy.toFixed(1)}%`,"success"):b("❌ فشل اختبار تقدم الكلمات","error"),b("فحص الإنجازات...","info");const k=t.filter(S=>S.achieved).length;b(`📊 الإنجازات المحققة: ${k}/${t.length}`,"info"),b("🎉 اكتملت جميع الاختبارات!","success")}catch(p){b(`❌ خطأ أثناء الاختبار: ${p}`,"error")}finally{m(!1)}},w=async()=>{if(!y.trim()){b("❌ يرجى إدخال معرف الطالب","error");return}m(!0),d([]),b(`🎯 اختبار النظام للطالب: ${y}`,"info"),b("📝 محاكاة اختبار مع معرف الطالب...","info"),await new Promise(p=>setTimeout(p,1e3)),b("✅ تم اختبار النظام بنجاح مع معرف الطالب","success"),m(!1)};return n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(ld,{className:"w-6 h-6 text-teal-600"}),"اختبار نظام تقدم الطلاب"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-700",children:e.totalScore}),n.jsx("div",{className:"text-sm text-blue-600",children:"النقاط الحالية"})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-700",children:e.currentStreak}),n.jsx("div",{className:"text-sm text-orange-600",children:"السلسلة الحالية"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-700",children:e.unitsCompleted.length}),n.jsx("div",{className:"text-sm text-green-600",children:"الوحدات المكتملة"})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-700",children:e.wordsLearned}),n.jsx("div",{className:"text-sm text-purple-600",children:"الكلمات المتعلمة"})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:t.filter(p=>p.achieved).length}),n.jsx("div",{className:"text-sm text-yellow-600",children:"الإنجازات"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[n.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"اختبارات النظام"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:v,disabled:u,className:"bg-teal-600 hover:bg-teal-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[u?n.jsx(Ze,{className:"w-5 h-5 animate-spin"}):n.jsx(Gl,{className:"w-5 h-5"}),u?"جاري التشغيل...":"اختبار النظام العام"]}),n.jsx("span",{className:"text-gray-600",children:"اختبار جميع وظائف النظام الأساسية"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("input",{type:"text",placeholder:"معرف الطالب للاختبار",value:y,onChange:p=>j(p.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 flex-1 max-w-xs"}),n.jsxs("button",{onClick:w,disabled:u,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Gl,{className:"w-5 h-5"}),"اختبار طالب محدد"]})]}),n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("button",{onClick:()=>d([]),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Ze,{className:"w-5 h-5"}),"مسح النتائج"]})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:n.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gl,{className:"w-5 h-5"}),"نتائج الاختبارات (",c.length,")"]})}),n.jsx("div",{className:"p-6 max-h-64 overflow-y-auto",children:c.length>0?n.jsx("div",{className:"space-y-2",children:c.map((p,g)=>n.jsx("div",{className:`p-3 rounded text-sm font-mono ${p.includes("✅")?"bg-green-50 text-green-800 border-l-4 border-green-400":p.includes("❌")?"bg-red-50 text-red-800 border-l-4 border-red-400":"bg-blue-50 text-blue-800 border-l-4 border-blue-400"}`,children:p},g))}):n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx(ld,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"لا توجد نتائج اختبارات بعد"}),n.jsx("p",{className:"text-sm",children:"قم بتشغيل اختبار لعرض النتائج"})]})})]}),n.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:n.jsxs("h4",{className:"font-bold text-gray-800",children:["حالة الإنجازات (",t.filter(p=>p.achieved).length,"/",t.length,")"]})}),n.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-40 overflow-y-auto",children:t.map(p=>n.jsxs("div",{className:`p-3 rounded-lg border-2 flex items-center gap-3 ${p.achieved?"border-green-300 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[n.jsx("span",{className:"text-2xl",children:p.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h5",{className:`font-semibold text-sm ${p.achieved?"text-green-800":"text-gray-600"}`,children:p.title}),n.jsx("p",{className:`text-xs ${p.achieved?"text-green-600":"text-gray-500"}`,children:p.description})]}),p.achieved?n.jsx(Fe,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full flex-shrink-0"})]},p.id))})]})]})},tS=()=>{const[e,t]=x.useState("access-codes"),[s,r]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState({inProgress:!1,success:!1,message:"",details:[]}),[c,d]=x.useState(null),[u,m]=x.useState("subjects"),y=async()=>{d(null);const b=await Gg();return d(b),b},j=async()=>{i(!0),l({inProgress:!0,success:!1,message:"جاري التحقق من الاتصال بقاعدة البيانات...",details:[]});try{if(!await y())throw new Error("لا يمكن الاتصال بقاعدة البيانات. يرجى التحقق من اتصالك بالإنترنت ومحاولة المحاولة مرة أخرى.");l(k=>({...k,message:"جاري حذف رموز الدخول...",details:[...k.details,"✓ تم التحقق من الاتصال بقاعدة البيانات"]}));const v=await xr("access_codes"),w=await xr("teachers"),p=await Em("access_codes");if(!p.success)throw new Error(`فشل في حذف رموز الدخول: ${p.error||"خطأ غير معروف"}`);l(k=>({...k,message:"جاري حذف المعلمين...",details:[...k.details,`✓ تم حذف ${p.count} رمز دخول بنجاح`]}));const g=await Em("teachers");if(!g.success)throw new Error(`فشل في حذف المعلمين: ${g.error||"خطأ غير معروف"}`);l(k=>({...k,message:"جاري مسح التخزين المحلي...",details:[...k.details,`✓ تم حذف ${g.count} معلم بنجاح`]}));const f=[];for(let k=0;k<localStorage.length;k++){const S=localStorage.key(k);S&&(S.startsWith("teacher-")||S.startsWith("admin-"))&&f.push(S)}f.forEach(k=>localStorage.removeItem(k));const h=await xr("access_codes"),N=await xr("teachers");h>0||N>0?l(k=>({...k,success:!1,inProgress:!1,message:"تم الحذف جزئياً، لكن بعض البيانات لا تزال موجودة",details:[...k.details,`✓ تم مسح ${f.length} عنصر من التخزين المحلي`,`⚠️ لا يزال هناك ${h} رمز دخول في قاعدة البيانات`,`⚠️ لا يزال هناك ${N} معلم في قاعدة البيانات`]})):(l({inProgress:!1,success:!0,message:"تم حذف جميع البيانات بنجاح",details:["✓ تم التحقق من الاتصال بقاعدة البيانات",`✓ تم حذف ${v} رمز دخول`,`✓ تم حذف ${w} معلم`,`✓ تم مسح ${f.length} عنصر من التخزين المحلي`,"✓ تم التحقق من اكتمال عملية الحذف"]}),setTimeout(()=>{window.location.reload()},3e3))}catch(b){console.error("Error deleting data:",b),l({inProgress:!1,success:!1,message:b instanceof Error?b.message:"حدث خطأ أثناء حذف البيانات",details:["❌ فشلت عملية الحذف",b instanceof Error?`سبب الخطأ: ${b.message}`:"سبب غير معروف","يرجى التحقق من اتصالك بالإنترنت والمحاولة مرة أخرى"]})}finally{i(!1),r(!1)}};return n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl p-6 mb-8 shadow-lg",children:n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx(el,{className:"w-12 h-12"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold",children:"لوحة تحكم المدير"}),n.jsx("p",{className:"opacity-90",children:"إدارة المواد الدراسية والمحتوى التعليمي لجميع الصفوف"})]})]})}),n.jsxs(nc,{value:e,onValueChange:t,className:"w-full",children:[n.jsxs(Ki,{className:"w-full flex mb-8 bg-white rounded-xl p-2 shadow-md",children:[n.jsx(at,{value:"access-codes",className:"flex-1 py-3 data-[state=active]:bg-purple-100 data-[state=active]:text-purple-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Te,{className:"w-5 h-5"}),n.jsx("span",{children:"رموز الدخول"})]})}),n.jsx(at,{value:"teachers",className:"flex-1 py-3 data-[state=active]:bg-green-100 data-[state=active]:text-green-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(ct,{className:"w-5 h-5"}),n.jsx("span",{children:"المعلمين"})]})}),n.jsx(at,{value:"students",className:"flex-1 py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Av,{className:"w-5 h-5"}),n.jsx("span",{children:"الطلاب"})]})}),n.jsx(at,{value:"subjects",className:"flex-1 py-3 data-[state=active]:bg-purple-100 data-[state=active]:text-purple-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(za,{className:"w-5 h-5"}),n.jsx("span",{children:"المواد الدراسية"})]})}),n.jsx(at,{value:"english",className:"flex-1 py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(ze,{className:"w-5 h-5"}),n.jsx("span",{children:"اللغة الإنجليزية"})]})}),n.jsx(at,{value:"testing",className:"flex-1 py-3 data-[state=active]:bg-teal-100 data-[state=active]:text-teal-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(ld,{className:"w-5 h-5"}),n.jsx("span",{children:"اختبار النظام"})]})}),n.jsx(at,{value:"settings",className:"flex-1 py-3 data-[state=active]:bg-gray-100 data-[state=active]:text-gray-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5"}),n.jsx("span",{children:"الإعدادات"})]})})]}),n.jsx(it,{value:"access-codes",children:n.jsx(K1,{})}),n.jsx(it,{value:"teachers",children:n.jsx(H1,{})}),n.jsx(it,{value:"students",children:n.jsx(xx,{})}),n.jsx(it,{value:"subjects",children:n.jsxs(nc,{value:u,onValueChange:m,className:"w-full",children:[n.jsxs(Ki,{className:"w-full flex mb-6 bg-white rounded-xl p-2 shadow-md",children:[n.jsx(at,{value:"subjects",className:"flex-1 py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(za,{className:"w-5 h-5"}),n.jsx("span",{children:"المواد الدراسية"})]})}),n.jsx(at,{value:"content",className:"flex-1 py-3 data-[state=active]:bg-green-100 data-[state=active]:text-green-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(ls,{className:"w-5 h-5"}),n.jsx("span",{children:"المحتوى العام"})]})}),n.jsx(at,{value:"math",className:"flex-1 py-3 data-[state=active]:bg-teal-100 data-[state=active]:text-teal-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(ad,{className:"w-5 h-5"}),n.jsx("span",{children:"الرياضيات"})]})}),n.jsx(at,{value:"science",className:"flex-1 py-3 data-[state=active]:bg-purple-100 data-[state=active]:text-purple-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(dm,{className:"w-5 h-5"}),n.jsx("span",{children:"العلوم"})]})}),n.jsx(at,{value:"islamic",className:"flex-1 py-3 data-[state=active]:bg-emerald-100 data-[state=active]:text-emerald-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(om,{className:"w-5 h-5"}),n.jsx("span",{children:"التربية الإسلامية"})]})})]}),n.jsx(it,{value:"subjects",children:n.jsx(Q1,{})}),n.jsx(it,{value:"content",children:n.jsx(J1,{})}),n.jsx(it,{value:"math",children:n.jsx(Z1,{})}),n.jsx(it,{value:"science",children:n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg text-center",children:[n.jsx(dm,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"محتوى العلوم"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"سيتم إضافة إدارة محتوى العلوم قريباً"})]})}),n.jsx(it,{value:"islamic",children:n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg text-center",children:[n.jsx(om,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"محتوى التربية الإسلامية"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"سيتم إضافة إدارة محتوى التربية الإسلامية قريباً"})]})})]})}),n.jsx(it,{value:"english",children:n.jsxs(nc,{value:"vocabulary",className:"w-full",children:[n.jsxs(Ki,{className:"w-full flex mb-6 bg-white rounded-xl p-2 shadow-md",children:[n.jsx(at,{value:"vocabulary",className:"flex-1 py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(ze,{className:"w-5 h-5"}),n.jsx("span",{children:"المفردات"})]})}),n.jsx(at,{value:"grammar",className:"flex-1 py-3 data-[state=active]:bg-yellow-100 data-[state=active]:text-yellow-700 rounded-lg transition-all",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(Tv,{className:"w-5 h-5"}),n.jsx("span",{children:"القواعد"})]})})]}),n.jsx(it,{value:"vocabulary",children:n.jsx(F1,{})}),n.jsx(it,{value:"grammar",children:n.jsx(W1,{})})]})}),n.jsx(it,{value:"testing",children:n.jsx(eS,{})}),n.jsx(it,{value:"settings",children:n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(tn,{className:"w-6 h-6 text-gray-600"}),"إعدادات النظام"]}),n.jsxs("div",{className:"mb-8 bg-white border border-gray-200 rounded-xl p-6",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Ze,{className:"w-5 h-5 text-blue-600"}),"حالة الاتصال بقاعدة البيانات"]}),n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c===null?n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),n.jsx("span",{children:"جاري التحقق من الاتصال..."})]}):c?n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"font-semibold",children:"متصل بقاعدة البيانات"})]}):n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),n.jsx("span",{className:"font-semibold",children:"غير متصل بقاعدة البيانات"})]}),n.jsxs("button",{onClick:y,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Ze,{className:"w-4 h-4"}),"تحديث حالة الاتصال"]})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[n.jsx("strong",{children:"ملاحظة هامة:"})," يجب التأكد من وجود اتصال نشط بقاعدة البيانات قبل إجراء عمليات الحذف الهامة. إذا كنت غير متصل، فقد يتم حذف البيانات من التخزين المحلي فقط وليس من قاعدة البيانات."]})})]}),n.jsxs("div",{className:"border border-red-300 rounded-xl p-6 bg-red-50",children:[n.jsxs("h4",{className:"text-xl font-bold text-red-800 mb-4 flex items-center gap-2",children:[n.jsx(Ye,{className:"w-6 h-6"}),"منطقة الخطر"]}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-red-200",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-bold text-gray-800 mb-1",children:"حذف جميع الرموز والمعلمين"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"هذا الإجراء سيؤدي إلى حذف جميع رموز الدخول وجميع المعلمين من قاعدة البيانات. هذا الإجراء لا يمكن التراجع عنه!"})]}),n.jsxs("button",{onClick:()=>r(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(ut,{className:"w-4 h-4"}),"حذف الكل"]})]})})]})]})})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تأكيد الحذف"}),n.jsx("p",{className:"text-gray-600",children:"هل أنت متأكد من حذف جميع رموز الدخول والمعلمين؟ هذا الإجراء لا يمكن التراجع عنه!"}),c===!1&&n.jsxs("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 rounded-lg p-3 text-yellow-800",children:[n.jsx(Ye,{className:"w-5 h-5 inline-block mr-2"}),n.jsx("span",{className:"font-semibold",children:"تحذير:"})," أنت غير متصل بقاعدة البيانات حاليًا. سيتم حذف البيانات من التخزين المحلي فقط وليس من قاعدة البيانات."]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:j,disabled:a,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري الحذف..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ut,{className:"w-4 h-4"}),"نعم، حذف الكل"]})}),n.jsx("button",{onClick:()=>r(!1),disabled:a,className:"flex-1 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-800 py-2 px-4 rounded-lg transition-colors",children:"إلغاء"})]})]})}),o.message&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[o.inProgress?n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}):o.success?n.jsx("div",{className:"bg-green-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Fe,{className:"w-8 h-8 text-green-600"})}):n.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:o.success?"تم الحذف بنجاح":o.inProgress?"جاري الحذف...":"حدثت مشكلة"}),n.jsx("p",{className:"text-gray-600 mb-4",children:o.message}),o.details.length>0&&n.jsx("div",{className:`text-left border rounded-lg p-4 mb-4 ${o.success?"bg-green-50 border-green-200":o.inProgress?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:n.jsx("ul",{className:"space-y-2",children:o.details.map((b,v)=>n.jsx("li",{className:"text-sm",children:b},v))})})]}),!o.inProgress&&n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:()=>{l({inProgress:!1,success:!1,message:"",details:[]}),o.success&&window.location.reload()},className:`px-6 py-2 rounded-lg transition-colors ${o.success?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:o.success?"تحديث الصفحة":"إغلاق"})})]})})]})},nS=({teacher:e,classRooms:t,students:s,onRefresh:r})=>{const[a,i]=x.useState(""),[o,l]=x.useState("all"),[c,d]=x.useState(!1),[u,m]=x.useState(null),y=t.filter(p=>{const g=p.name.toLowerCase().includes(a.toLowerCase())||p.subject.toLowerCase().includes(a.toLowerCase()),f=o==="all"||p.grade===o;return g&&f}),j=p=>s.filter(g=>{var f;return(f=g.classRoomIds)==null?void 0:f.includes(p)}),b=()=>{d(!0)},v=p=>{m(p),d(!0)},w=p=>{confirm("هل أنت متأكد من حذف هذا الفصل؟")&&(console.log("Deleting class:",p),r())};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"إدارة الفصول"}),n.jsx("p",{className:"text-gray-600",children:"إدارة فصولك الدراسية والطلاب المسجلين"})]}),n.jsxs("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة فصل جديد"]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"البحث في الفصول...",value:a,onChange:p=>i(p.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsx("div",{className:"md:w-48",children:n.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"جميع الصفوف"}),e.grades.map(p=>n.jsxs("option",{value:p,children:["الصف ",p]},p))]})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(p=>{const g=j(p.id);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:n.jsx(ze,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.name}),n.jsx("p",{className:"text-sm text-gray-600",children:p.subject})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>v(p),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>w(p.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(ut,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"الصف:"}),n.jsx("span",{className:"font-semibold text-gray-800",children:p.grade})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"عدد الطلاب:"}),n.jsx("span",{className:"font-semibold text-gray-800",children:g.length})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"تاريخ الإنشاء:"}),n.jsx("span",{className:"font-semibold text-gray-800",children:new Date(p.createdAt).toLocaleDateString("ar-SA")})]})]}),p.description&&n.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-sm text-gray-700",children:p.description})}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(ct,{className:"w-4 h-4"}),n.jsxs("span",{children:["آخر نشاط: ",new Date(p.lastActivity||p.createdAt).toLocaleDateString("ar-SA")]})]})})]},p.id)})}),y.length===0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(ze,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"لا توجد فصول"}),n.jsx("p",{className:"text-gray-500 mb-6",children:a||o!=="all"?"لم يتم العثور على فصول تطابق معايير البحث":"لم تقم بإنشاء أي فصول بعد"}),!a&&o==="all"&&n.jsxs("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-5 h-5"}),"إضافة فصل جديد"]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:u?"تعديل الفصل":"إضافة فصل جديد"}),n.jsxs("form",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اسم الفصل"}),n.jsx("input",{type:"text",defaultValue:(u==null?void 0:u.name)||"",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: فصل الرياضيات المتقدم"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المادة"}),n.jsx("input",{type:"text",defaultValue:(u==null?void 0:u.subject)||"",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: الرياضيات"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف"}),n.jsxs("select",{defaultValue:(u==null?void 0:u.grade)||"",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"اختر الصف"}),e.grades.map(p=>n.jsx("option",{value:p,children:p},p))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوصف (اختياري)"}),n.jsx("textarea",{defaultValue:(u==null?void 0:u.description)||"",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"وصف مختصر للفصل..."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>{d(!1),m(null)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"}),n.jsx("button",{onClick:()=>{console.log("Saving class..."),d(!1),m(null),r()},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:u?"حفظ التغييرات":"إضافة الفصل"})]})]})})})]})},sS=({teacher:e,students:t,onExport:s})=>{const[r,a]=x.useState("all"),[i,o]=x.useState("month"),[l,c]=x.useState("summary"),[d,u]=x.useState(""),m=t.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())),y=()=>{r==="all"?s("all-students",void 0):s("single-student",r)},j=w=>({totalActivities:Math.floor(Math.random()*50)+10,averageScore:Math.floor(Math.random()*40)+60,timeSpent:Math.floor(Math.random()*120)+30,improvement:Math.floor(Math.random()*20)-10,lastActive:new Date(Date.now()-Math.random()*7*24*60*60*1e3)}),b=w=>{const p=Math.floor(w/60),g=w%60;return p>0?`${p}س ${g}د`:`${g}د`},v=w=>w>=80?"text-green-600 bg-green-100":w>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تقارير الطلاب"}),n.jsx("p",{className:"text-gray-600",children:"عرض وتصدير تقارير مفصلة عن أداء الطلاب"})]}),n.jsxs("button",{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(bn,{className:"w-5 h-5"}),"تصدير التقرير"]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الطالب"}),n.jsxs("select",{value:r,onChange:w=>a(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"جميع الطلاب"}),m.map(w=>n.jsx("option",{value:w.id,children:w.name},w.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الفترة الزمنية"}),n.jsxs("select",{value:i,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"week",children:"الأسبوع الماضي"}),n.jsx("option",{value:"month",children:"الشهر الماضي"}),n.jsx("option",{value:"term",children:"الفصل الدراسي"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"نوع التقرير"}),n.jsxs("select",{value:l,onChange:w=>c(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"summary",children:"ملخص"}),n.jsx("option",{value:"detailed",children:"مفصل"}),n.jsx("option",{value:"progress",children:"التقدم"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"البحث"}),n.jsxs("div",{className:"relative",children:[n.jsx(ys,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"البحث في الطلاب...",value:d,onChange:w=>u(w.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"إجمالي الطلاب"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.length})]}),n.jsx(ct,{className:"w-12 h-12 text-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-green-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"متوسط الدرجات"}),n.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[Math.round(t.reduce((w,p)=>w+j().averageScore,0)/t.length||0),"%"]})]}),n.jsx(So,{className:"w-12 h-12 text-green-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"إجمالي الأنشطة"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:t.reduce((w,p)=>w+j().totalActivities,0)})]}),n.jsx(Fa,{className:"w-12 h-12 text-purple-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"الوقت الإجمالي"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:b(t.reduce((w,p)=>w+j().timeSpent,0))})]}),n.jsx(dt,{className:"w-12 h-12 text-orange-500"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(ls,{className:"w-6 h-6 text-blue-500"}),"تفاصيل أداء الطلاب"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الطالب"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"عدد الأنشطة"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"متوسط الدرجات"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الوقت المستغرق"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"التحسن"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"آخر نشاط"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{children:m.map(w=>{const p=j();return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:w.name}),n.jsx("div",{className:"text-sm text-gray-600",children:w.studentId})]}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:w.grade}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:p.totalActivities}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${v(p.averageScore)}`,children:[p.averageScore,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:b(p.timeSpent)}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("span",{className:`text-sm font-semibold ${p.improvement>=0?"text-green-600":"text-red-600"}`,children:[p.improvement>=0?"+":"",p.improvement,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:p.lastActive.toLocaleDateString("ar-SA")}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>s("single-student",w.id),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"عرض التفاصيل",children:n.jsx(Xa,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>s("single-student",w.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"تصدير التقرير",children:n.jsx(bn,{className:"w-4 h-4"})})]})})]},w.id)})})]})}),m.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ls,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"لا توجد بيانات"}),n.jsx("p",{className:"text-gray-500",children:d?"لم يتم العثور على طلاب يطابقون البحث":"لا توجد بيانات طلاب متاحة"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"خيارات التصدير"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>s("summary"),className:"p-4 border-2 border-blue-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-center",children:[n.jsx(ls,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-semibold text-gray-800",children:"تقرير ملخص"}),n.jsx("p",{className:"text-sm text-gray-600",children:"نظرة عامة على أداء جميع الطلاب"})]}),n.jsxs("button",{onClick:()=>s("detailed"),className:"p-4 border-2 border-green-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors text-center",children:[n.jsx(Fa,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-semibold text-gray-800",children:"تقرير مفصل"}),n.jsx("p",{className:"text-sm text-gray-600",children:"تفاصيل شاملة لكل طالب"})]}),n.jsxs("button",{onClick:()=>s("progress"),className:"p-4 border-2 border-purple-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors text-center",children:[n.jsx(So,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-semibold text-gray-800",children:"تقرير التقدم"}),n.jsx("p",{className:"text-sm text-gray-600",children:"تتبع تطور الطلاب عبر الزمن"})]})]})]})]})},$t="teacher-access-codes",Ru=e=>{const[t,s]=x.useState([]),[r,a]=x.useState(!0),[i,o]=x.useState(null),[l,c]=x.useState(20);x.useEffect(()=>{d(),v(e).then(w=>c(w))},[e]);const d=async()=>{a(!0),o(null);try{const{data:w,error:p}=await Z.from("access_codes").select("*").eq("teacher_id",e).order("created_at",{ascending:!1});if(p)throw p;if(w){const g=w.map(f=>({id:f.id,code:f.code,grade:f.grade,description:f.description,teacherId:f.teacher_id,teacherName:f.teacher_name,teacherPhone:f.teacher_phone,createdAt:f.created_at,expiresAt:f.expires_at,isActive:f.is_active,usageCount:f.usage_count||0,maxUsage:f.max_usage,studentId:f.student_id,classRoomId:f.class_room_id}));s(g)}else{const g=localStorage.getItem(`${$t}-${e}`);if(g)s(JSON.parse(g));else{const f=Mm(e);s(f),localStorage.setItem(`${$t}-${e}`,JSON.stringify(f));for(const h of f)await Z.from("access_codes").insert({id:h.id,code:h.code,grade:h.grade,description:h.description,teacher_id:h.teacherId,teacher_name:h.teacherName,teacher_phone:h.teacherPhone,created_at:h.createdAt,expires_at:h.expiresAt,is_active:h.isActive,usage_count:h.usageCount||0,max_usage:h.maxUsage,student_id:h.studentId,class_room_id:h.classRoomId})}}}catch(w){console.error("Error loading access codes:",w),o(w.message);const p=localStorage.getItem(`${$t}-${e}`);if(p)s(JSON.parse(p));else{const g=Mm(e);s(g),localStorage.setItem(`${$t}-${e}`,JSON.stringify(g))}}finally{a(!1)}},u=async w=>{if(t.length>=l)throw new Error(`لقد وصلت إلى الحد الأقصى المسموح به من رموز الدخول (${l}). يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد.`);if(t.some(f=>f.code===w.code))throw new Error("هذا الرمز موجود بالفعل. يرجى اختيار رمز آخر.");const g={id:crypto.randomUUID(),...w,teacherId:e,createdAt:new Date().toISOString(),usageCount:0};try{const{error:f}=await Z.from("access_codes").insert({id:g.id,code:g.code,grade:g.grade,description:g.description,teacher_id:g.teacherId,teacher_name:g.teacherName,teacher_phone:g.teacherPhone,created_at:g.createdAt,expires_at:g.expiresAt,is_active:g.isActive,usage_count:0,max_usage:g.maxUsage,student_id:g.studentId,class_room_id:g.classRoomId});if(f)throw f;const h=[...t,g];return s(h),localStorage.setItem(`${$t}-${e}`,JSON.stringify(h)),g}catch(f){console.error("Error adding access code:",f),o(f.message);const h=[...t,g];return s(h),localStorage.setItem(`${$t}-${e}`,JSON.stringify(h)),g}},m=async(w,p)=>{if(p.code&&t.some(f=>f.code===p.code&&f.id!==w))throw new Error("هذا الرمز موجود بالفعل. يرجى اختيار رمز آخر.");try{const g={};p.code&&(g.code=p.code),p.grade&&(g.grade=p.grade),p.description&&(g.description=p.description),p.expiresAt!==void 0&&(g.expires_at=p.expiresAt),p.isActive!==void 0&&(g.is_active=p.isActive),p.maxUsage!==void 0&&(g.max_usage=p.maxUsage),p.studentId!==void 0&&(g.student_id=p.studentId),p.classRoomId!==void 0&&(g.class_room_id=p.classRoomId),p.teacherName&&(g.teacher_name=p.teacherName),p.teacherPhone&&(g.teacher_phone=p.teacherPhone);const{error:f}=await Z.from("access_codes").update(g).eq("id",w);if(f)throw f;const h=t.map(N=>N.id===w?{...N,...p}:N);s(h),localStorage.setItem(`${$t}-${e}`,JSON.stringify(h))}catch(g){console.error("Error updating access code:",g),o(g.message);const f=t.map(h=>h.id===w?{...h,...p}:h);s(f),localStorage.setItem(`${$t}-${e}`,JSON.stringify(f))}},y=async w=>{try{const{error:p}=await Z.from("access_codes").delete().eq("id",w);if(p)throw p;const g=t.filter(f=>f.id!==w);s(g),localStorage.setItem(`${$t}-${e}`,JSON.stringify(g))}catch(p){console.error("Error deleting access code:",p),o(p.message);const g=t.filter(f=>f.id!==w);s(g),localStorage.setItem(`${$t}-${e}`,JSON.stringify(g))}},j=async w=>{try{const{data:p,error:g}=await Z.from("access_codes").select("id, usage_count").eq("code",w).single();if(g)throw g;if(p){const f=(p.usage_count||0)+1,{error:h}=await Z.from("access_codes").update({usage_count:f}).eq("id",p.id);if(h)throw h;const N=t.map(k=>k.code===w?{...k,usageCount:f}:k);s(N),localStorage.setItem(`${$t}-${e}`,JSON.stringify(N))}}catch(p){console.error("Error incrementing usage count:",p),o(p.message);const g=t.map(f=>f.code===w?{...f,usageCount:(f.usageCount||0)+1}:f);s(g),localStorage.setItem(`${$t}-${e}`,JSON.stringify(g))}},b=()=>{const w="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let p="";for(let f=0;f<8;f++)p+=w.charAt(Math.floor(Math.random()*w.length));return t.some(f=>f.code===p)?b():p},v=async w=>{try{const{data:p,error:g}=await Z.from("teachers").select("code_limit").eq("id",w).single();if(g)throw g;if(p&&p.code_limit)return p.code_limit;const f=localStorage.getItem("admin-teacher-code-limits");if(f){const h=JSON.parse(f);return h[w]||h.default||20}return 20}catch(p){console.error("Error getting teacher code limit:",p);const g=localStorage.getItem("admin-teacher-code-limits");if(g){const f=JSON.parse(g);return f[w]||f.default||20}return 20}};return{accessCodes:t,addAccessCode:u,updateAccessCode:m,deleteAccessCode:y,incrementUsageCount:j,generateRandomCode:b,loading:r,error:i,teacherCodeLimit:l,refreshCodes:d}},Mm=e=>{const t=()=>{const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let a="";for(let i=0;i<8;i++)a+=r.charAt(Math.floor(Math.random()*r.length));return a},s=[5,6];return[{id:"1",code:t(),grade:s[0],description:"رمز دخول لطلاب الصف الخامس - المجموعة أ",teacherId:e,createdAt:new Date(Date.now()-30*24*60*60*1e3).toISOString(),expiresAt:new Date(Date.now()+60*24*60*60*1e3).toISOString(),isActive:!0,usageCount:5,teacherName:"أستاذة فاطمة أحمد",teacherPhone:"0501234567"},{id:"2",code:t(),grade:s[0],description:"رمز دخول لطلاب الصف الخامس - المجموعة ب",teacherId:e,createdAt:new Date(Date.now()-15*24*60*60*1e3).toISOString(),isActive:!0,usageCount:8,teacherName:"أستاذة فاطمة أحمد",teacherPhone:"0501234567"},{id:"3",code:t(),grade:s.length>1?s[1]:s[0],description:"رمز دخول مؤقت للطلاب الجدد",teacherId:e,createdAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),expiresAt:new Date(Date.now()-1*24*60*60*1e3).toISOString(),isActive:!0,usageCount:3,teacherName:"أستاذة فاطمة أحمد",teacherPhone:"0501234567"},{id:"4",code:t(),grade:s.length>1?s[1]:s[0],description:"رمز دخول للاختبار - غير نشط",teacherId:e,createdAt:new Date(Date.now()-45*24*60*60*1e3).toISOString(),isActive:!1,usageCount:0,teacherName:"أستاذة فاطمة أحمد",teacherPhone:"0501234567"}]},rS=({teacher:e,students:t,onRefresh:s})=>{const[r,a]=x.useState(""),[i,o]=x.useState(null),[l,c]=x.useState(!1),[d,u]=x.useState(null),[m,y]=x.useState("createdAt"),[j,b]=x.useState(null),{accessCodes:v,addAccessCode:w,updateAccessCode:p,deleteAccessCode:g,generateRandomCode:f,teacherCodeLimit:h}=Ru(e.id),N=v.filter(D=>{const $=D.description.toLowerCase().includes(r.toLowerCase())||D.code.toLowerCase().includes(r.toLowerCase()),W=i===null||D.grade===i;return $&&W}).sort((D,$)=>{switch(m){case"createdAt":return new Date($.createdAt).getTime()-new Date(D.createdAt).getTime();case"expiresAt":return!D.expiresAt&&!$.expiresAt?0:D.expiresAt?$.expiresAt?new Date(D.expiresAt).getTime()-new Date($.expiresAt).getTime():-1:1;case"grade":return D.grade-$.grade;case"usageCount":return($.usageCount||0)-(D.usageCount||0);default:return 0}}),k=()=>{if(v.length>=h){const D=document.createElement("div");D.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",D.textContent=`لقد وصلت إلى الحد الأقصى المسموح به من رموز الدخول (${h}). يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد.`,document.body.appendChild(D),setTimeout(()=>{D.style.opacity="0",D.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},300)},5e3);return}u(null),c(!0)},S=D=>{u(D),c(!0)},C=D=>{confirm("هل أنت متأكد من حذف هذا الرمز؟ لن يتمكن الطلاب من استخدامه للدخول.")&&(g(D),s())},M=D=>{navigator.clipboard.writeText(D).then(()=>{b(D),setTimeout(()=>b(null),2e3)})},A=()=>{const D=[["الرمز","الصف","الوصف","تاريخ الإنشاء","تاريخ الانتهاء","عدد الاستخدامات","الحالة"].join(","),...N.map(T=>[T.code,T.grade,T.description,new Date(T.createdAt).toLocaleDateString("ar-SA"),T.expiresAt?new Date(T.expiresAt).toLocaleDateString("ar-SA"):"غير محدد",T.usageCount||0,T.isActive?"نشط":"غير نشط"].join(","))].join(`
`),$=new Blob([D],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL($),E=document.createElement("a");E.setAttribute("href",W),E.setAttribute("download",`access_codes_${new Date().toISOString().split("T")[0]}.csv`),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E)},U=D=>D.expiresAt?new Date(D.expiresAt).getTime()<Date.now():!1,B=D=>{if(!D.isActive)return{status:"غير نشط",color:"text-gray-600 bg-gray-100"};if(U(D))return{status:"منتهي",color:"text-red-600 bg-red-100"};const $=D.expiresAt?Math.floor((new Date(D.expiresAt).getTime()-Date.now())/(1e3*60*60*24)):null;return $!==null?$<=3?{status:`ينتهي خلال ${$} أيام`,color:"text-orange-600 bg-orange-100"}:$<=7?{status:`ينتهي خلال ${$} أيام`,color:"text-yellow-600 bg-yellow-100"}:{status:"نشط",color:"text-green-600 bg-green-100"}:{status:"نشط",color:"text-green-600 bg-green-100"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[n.jsx(Te,{className:"w-8 h-8 text-blue-600"}),"إدارة رموز الدخول"]}),n.jsx("p",{className:"text-gray-600",children:"إنشاء وإدارة رموز الدخول للطلاب"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:A,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-4 h-4"}),"تصدير الرموز"]}),n.jsxs("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 font-semibold",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز جديد"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-600 text-sm font-semibold",children:"إجمالي الرموز"}),n.jsx("p",{className:"text-2xl font-bold text-blue-700",children:v.length})]}),n.jsx(Te,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-600 text-sm font-semibold",children:"الرموز النشطة"}),n.jsx("p",{className:"text-2xl font-bold text-green-700",children:v.filter(D=>D.isActive&&!U(D)).length})]}),n.jsx(Fe,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-600 text-sm font-semibold",children:"تنتهي قريباً"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:v.filter(D=>{if(!D.expiresAt||!D.isActive)return!1;const $=Math.floor((new Date(D.expiresAt).getTime()-Date.now())/(1e3*60*60*24));return $>=0&&$<=7}).length})]}),n.jsx(Fs,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-600 text-sm font-semibold",children:"الحد المسموح"}),n.jsx("p",{className:"text-2xl font-bold text-purple-700",children:h})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Te,{className:"w-8 h-8 text-purple-500"}),v.length>=h&&n.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:"!"})]})]}),n.jsxs("div",{className:"mt-1 text-xs text-purple-700",children:["المستخدم: ",v.length," / ",h]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"البحث في الرموز...",value:r,onChange:D=>a(D.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("select",{value:i||"",onChange:D=>o(D.target.value?Number(D.target.value):null),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"جميع الصفوف"}),e.grades.map(D=>n.jsxs("option",{value:D,children:["الصف ",D]},D))]}),n.jsxs("select",{value:m,onChange:D=>y(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"createdAt",children:"ترتيب حسب تاريخ الإنشاء"}),n.jsx("option",{value:"expiresAt",children:"ترتيب حسب تاريخ الانتهاء"}),n.jsx("option",{value:"grade",children:"ترتيب حسب الصف"}),n.jsx("option",{value:"usageCount",children:"ترتيب حسب عدد الاستخدامات"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[v.length>=h&&n.jsxs("div",{className:"bg-red-50 border-b border-red-200 p-4 flex items-center gap-3",children:[n.jsx(Ye,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-red-800 font-semibold",children:"لقد وصلت إلى الحد الأقصى من رموز الدخول"}),n.jsx("p",{className:"text-red-700 text-sm",children:"لإنشاء رموز جديدة، يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد المسموح به."})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الرمز"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الصف"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الوصف"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"تاريخ الإنشاء"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"تاريخ الانتهاء"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الاستخدامات"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الحالة"}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:"الإجراءات"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map(D=>{const $=B(D);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono font-semibold",children:D.code}),n.jsx("button",{onClick:()=>M(D.code),className:"text-gray-500 hover:text-blue-600 transition-colors",title:"نسخ الرمز",children:n.jsx(Ua,{className:"w-4 h-4"})}),j===D.code&&n.jsx("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"تم النسخ!"})]})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("span",{className:`bg-gradient-to-r ${Eu(D.grade)} text-white px-2 py-1 rounded-full text-sm font-semibold`,children:["الصف ",D.grade]})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("div",{className:"text-gray-800",children:D.description})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("div",{className:"text-sm text-gray-600",children:new Date(D.createdAt).toLocaleDateString("ar-SA")})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("div",{className:"text-sm text-gray-600",children:D.expiresAt?new Date(D.expiresAt).toLocaleDateString("ar-SA"):"غير محدد"})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[D.usageCount||0,D.maxUsage?` / ${D.maxUsage}`:""]})}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${$.color}`,children:$.status})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>S(D),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:"تعديل الرمز",children:n.jsx(jt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>C(D.id),className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"حذف الرمز",children:n.jsx(ut,{className:"w-4 h-4"})})]})})]},D.id)})})]})}),N.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"لا توجد رموز دخول"}),n.jsx("p",{className:"text-gray-500",children:r||i?"لم يتم العثور على رموز تطابق معايير البحث":"لم تقم بإنشاء أي رموز دخول بعد"}),!r&&i===null&&n.jsxs("button",{onClick:k,className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز جديد"]})]})]}),l&&n.jsx(aS,{teacher:e,editingCode:d,onClose:()=>{c(!1),u(null)},onSave:D=>{try{d?p(d.id,D):w(D),c(!1),u(null),s()}catch($){alert($.message)}},onGenerateCode:f})]})},aS=({teacher:e,editingCode:t,onClose:s,onSave:r,onGenerateCode:a})=>{const[i,o]=x.useState({code:(t==null?void 0:t.code)||"",grade:(t==null?void 0:t.grade)||e.grades[0]||5,description:(t==null?void 0:t.description)||"",expiresAt:t!=null&&t.expiresAt?new Date(t.expiresAt).toISOString().split("T")[0]:"",isActive:(t==null?void 0:t.isActive)??!0,maxUsage:(t==null?void 0:t.maxUsage)||0}),[l,c]=x.useState({requireExpiry:!1,defaultExpiryDays:90,maxUsagePerCode:30,requireDescription:!0,allowTeacherCustomCodes:!0});x.useEffect(()=>{const y=localStorage.getItem("admin-access-code-settings");if(y&&(c(JSON.parse(y)),!t)){const j=JSON.parse(y);if(j.requireExpiry){const b=new Date;b.setDate(b.getDate()+j.defaultExpiryDays),o(v=>({...v,expiresAt:b.toISOString().split("T")[0]}))}j.maxUsagePerCode>0&&o(b=>({...b,maxUsage:j.maxUsagePerCode}))}},[t]);const d=y=>{const{name:j,value:b,type:v}=y.target;o(w=>({...w,[j]:v==="checkbox"?y.target.checked:b}))},u=()=>{if(!l.allowTeacherCustomCodes&&!t){alert("غير مسموح للمعلمين بإنشاء رموز مخصصة. سيتم إنشاء رمز عشوائي عند الحفظ.");return}o(y=>({...y,code:a()}))},m=y=>{if(y.preventDefault(),l.requireExpiry&&!i.expiresAt){alert("يجب تحديد تاريخ انتهاء للرمز");return}if(l.requireDescription&&!i.description.trim()){alert("يجب إدخال وصف للرمز");return}let j=i.code;!l.allowTeacherCustomCodes&&!t&&(j=a()),r({code:j,grade:i.grade,description:i.description,expiresAt:i.expiresAt?new Date(i.expiresAt).toISOString():void 0,isActive:i.isActive,maxUsage:i.maxUsage>0?i.maxUsage:void 0,teacherName:e.name,teacherPhone:e.phone})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[n.jsx(Te,{className:"w-6 h-6"}),t?"تعديل رمز الدخول":"إنشاء رمز دخول جديد"]}),n.jsx("p",{className:"opacity-90 text-sm",children:t?"قم بتعديل بيانات رمز الدخول":"قم بإنشاء رمز دخول جديد للطلاب"})]}),n.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رمز الدخول *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",name:"code",value:i.code,onChange:d,required:!0,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"أدخل رمز الدخول",disabled:!l.allowTeacherCustomCodes&&!t}),n.jsx("button",{type:"button",onClick:u,className:"bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-2 rounded-lg transition-colors",title:"توليد رمز عشوائي",children:n.jsx(Ze,{className:"w-5 h-5"})})]}),!l.allowTeacherCustomCodes&&!t&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"غير مسموح للمعلمين بإنشاء رموز مخصصة. سيتم إنشاء رمز عشوائي عند الحفظ."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:i.grade,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:e.grades.map(y=>n.jsxs("option",{value:y,children:["الصف ",y]},y))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوصف *"}),n.jsx("input",{type:"text",name:"description",value:i.description,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: رمز دخول لطلاب الصف الخامس - المجموعة أ"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["تاريخ الانتهاء ",l.requireExpiry?"*":"(اختياري)"]}),n.jsx("input",{type:"date",name:"expiresAt",value:i.expiresAt,onChange:d,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:l.requireExpiry}),!l.requireExpiry&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اتركه فارغاً إذا كنت لا ترغب في تحديد تاريخ انتهاء"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأقصى للاستخدامات (اختياري)"}),n.jsx("input",{type:"number",name:"maxUsage",value:i.maxUsage,onChange:d,min:"0",max:l.maxUsagePerCode>0?l.maxUsagePerCode:void 0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اتركه 0 لاستخدامات غير محدودة"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l.maxUsagePerCode>0?`الحد الأقصى المسموح به: ${l.maxUsagePerCode} استخدام`:"اتركه 0 إذا كنت لا ترغب في تحديد عدد الاستخدامات"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:i.isActive,onChange:y=>o(j=>({...j,isActive:y.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isActive",className:"text-sm font-semibold text-gray-700",children:"الرمز نشط"})]}),t&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Ye,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-800 font-semibold",children:"تنبيه عند تعديل الرمز"}),n.jsx("p",{className:"text-yellow-700 text-sm",children:"تعديل الرمز نفسه قد يؤثر على الطلاب الذين يستخدمونه حالياً. يفضل إنشاء رمز جديد بدلاً من تعديل الرمز الحالي."})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:t?"حفظ التغييرات":"إنشاء الرمز"})]})]})]})})},iS=({teacher:e,onUpdate:t})=>{var j,b;const[s,r]=x.useState(!1),[a,i]=x.useState({name:e.name,email:e.email,phone:e.phone||"",schoolName:e.schoolName||"",subjects:((j=e.subjects)==null?void 0:j.join(", "))||"",grades:e.grades||[]}),{accessCodes:o,teacherCodeLimit:l}=Ru(e.id),c=o.length,d=l-c;x.useEffect(()=>{var v;i({name:e.name,email:e.email,phone:e.phone||"",schoolName:e.schoolName||"",subjects:((v=e.subjects)==null?void 0:v.join(", "))||"",grades:e.grades||[]})},[e]);const u=v=>{const{name:w,value:p}=v.target;i(g=>({...g,[w]:p}))},m=v=>{i(w=>{const p=w.grades.includes(v)?w.grades.filter(g=>g!==v):[...w.grades,v];return{...w,grades:p}})},y=()=>{const v={...e,name:a.name,email:a.email,phone:a.phone,schoolName:a.schoolName,subjects:a.subjects.split(",").map(w=>w.trim()).filter(w=>w),grades:a.grades};t(v),r(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx(Ps,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold",children:e.name}),n.jsx("p",{className:"opacity-90",children:"معلم اللغة الإنجليزية"})]})]}),s?n.jsxs("button",{onClick:()=>r(!1),className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx($n,{className:"w-4 h-4"}),"إلغاء"]}):n.jsxs("button",{onClick:()=>r(!0),className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(jt,{className:"w-4 h-4"}),"تعديل البيانات"]})]})}),n.jsx("div",{className:"p-6",children:s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الاسم الكامل"}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"البريد الإلكتروني"}),n.jsx("input",{type:"email",name:"email",value:a.email,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"رقم الهاتف"}),n.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"05xxxxxxxx"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اسم المدرسة"}),n.jsx("input",{type:"text",name:"schoolName",value:a.schoolName,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل اسم المدرسة"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المواد التي يدرسها"}),n.jsx("input",{type:"text",name:"subjects",value:a.subjects,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: اللغة الإنجليزية، الرياضيات (افصل بينها بفاصلة)"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصفوف التي يدرسها *"}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,6,7,8,9,10,11,12].map(v=>n.jsxs("label",{className:"flex items-center gap-2 p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:a.grades.includes(v),onChange:()=>m(v),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm",children:["الصف ",v]})]},v))})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5"}),"حفظ التغييرات"]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Iv,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"البريد الإلكتروني"})]}),n.jsx("p",{className:"text-gray-800",children:e.email})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Dv,{className:"w-5 h-5 text-green-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"رقم الهاتف"})]}),n.jsx("p",{className:"text-gray-800",children:e.phone||"غير محدد"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(wu,{className:"w-5 h-5 text-purple-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"المدرسة"})]}),n.jsx("p",{className:"text-gray-800",children:e.schoolName||"غير محدد"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Fs,{className:"w-5 h-5 text-orange-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"تاريخ الانضمام"})]}),n.jsx("p",{className:"text-gray-800",children:new Date(e.joinDate).toLocaleDateString("ar-SA")})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ze,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"الصفوف التي يدرسها"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.grades.map(v=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-sm",children:["الصف ",v]},v))})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ze,{className:"w-5 h-5 text-teal-600"}),n.jsx("h4",{className:"font-semibold text-gray-700",children:"المواد التي يدرسها"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:((b=e.subjects)==null?void 0:b.map((v,w)=>n.jsx("span",{className:"bg-teal-100 text-teal-800 px-2 py-1 rounded-full text-sm",children:v},w)))||n.jsx("span",{className:"text-gray-500",children:"غير محدد"})})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-xl border border-purple-200 mt-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Te,{className:"w-6 h-6 text-purple-600"}),n.jsx("h4",{className:"text-lg font-bold text-purple-800",children:"حد رموز الدخول"})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-gray-700 font-semibold",children:"الرموز المستخدمة:"}),n.jsxs("span",{className:"text-purple-700 font-bold",children:[c," / ",l]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:`h-2.5 rounded-full ${c>=l?"bg-red-600":"bg-purple-600"}`,style:{width:`${Math.min(100,c/l*100)}%`}})})]}),n.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["يمكنك إنشاء ",n.jsx("span",{className:"font-bold text-purple-700",children:d})," رمز دخول إضافي"]}),c>=l&&n.jsxs("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Ye,{className:"w-5 h-5 text-red-600 mt-0.5"}),n.jsx("div",{className:"text-sm text-red-700",children:"لقد وصلت إلى الحد الأقصى من رموز الدخول. يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد المسموح به."})]})]}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>window.location.href="#/access-codes",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Te,{className:"w-5 h-5"}),"إدارة رموز الدخول"]})})]})]})]})})]})},oS=({teacher:e,onSuccess:t})=>{const[s,r]=x.useState({code:"",grade:e.grades[0]||5,description:"",expiresAt:"",maxUsage:30,isForClass:!1,classId:"",isForStudent:!1,studentId:"",teacherPhone:e.phone||"",teacherName:e.name}),[a,i]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState({}),{accessCodes:u,addAccessCode:m,generateRandomCode:y,teacherCodeLimit:j}=Ru(e.id),b=u.length,v=j-b;x.useEffect(()=>{const h=localStorage.getItem("admin-access-code-settings");if(h){const N=JSON.parse(h);if(d(N),N.requireExpiry){const k=new Date;k.setDate(k.getDate()+N.defaultExpiryDays),r(S=>({...S,expiresAt:k.toISOString().split("T")[0]}))}N.maxUsagePerCode>0&&r(k=>({...k,maxUsage:N.maxUsagePerCode}))}},[]);const w=h=>{const{name:N,value:k,type:S}=h.target;r(C=>({...C,[N]:S==="checkbox"?h.target.checked:k}))},p=()=>{if(!c.allowTeacherCustomCodes){alert("غير مسموح للمعلمين بإنشاء رموز مخصصة. سيتم إنشاء رمز عشوائي عند الحفظ.");return}r(h=>({...h,code:y()}))},g=h=>{if(h.preventDefault(),b>=j){alert(`لقد وصلت إلى الحد الأقصى المسموح به من رموز الدخول (${j}). يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد.`);return}if(c.requireExpiry&&!s.expiresAt){alert("يجب تحديد تاريخ انتهاء للرمز");return}if(c.requireDescription&&!s.description.trim()){alert("يجب إدخال وصف للرمز");return}let N=s.code;(!c.allowTeacherCustomCodes||!N)&&(N=y());try{const k=m({code:N,grade:s.grade,description:s.description,expiresAt:s.expiresAt?new Date(s.expiresAt).toISOString():void 0,isActive:!0,maxUsage:s.maxUsage>0?s.maxUsage:void 0,studentId:s.isForStudent?s.studentId:void 0,classRoomId:s.isForClass?s.classId:void 0,teacherName:s.teacherName,teacherPhone:s.teacherPhone});l(N),r({...s,code:"",description:"",isForClass:!1,classId:"",isForStudent:!1,studentId:""}),t()}catch(k){alert(k.message)}},f=h=>{navigator.clipboard.writeText(h),i(!0),setTimeout(()=>i(!1),2e3)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Te,{className:"w-8 h-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:"إنشاء رمز دخول جديد"}),n.jsx("p",{className:"opacity-90",children:"أنشئ رمز دخول للطلاب للوصول إلى المحتوى التعليمي"})]})]})}),b>=j?n.jsxs("div",{className:"bg-red-50 border-b border-red-200 p-4 flex items-center gap-3",children:[n.jsx(Ye,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-red-800 font-semibold",children:"لقد وصلت إلى الحد الأقصى من رموز الدخول"}),n.jsx("p",{className:"text-red-700 text-sm",children:"لإنشاء رموز جديدة، يرجى حذف بعض الرموز القديمة أو الاتصال بالمدير لزيادة الحد المسموح به."})]})]}):n.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Te,{className:"w-5 h-5 text-blue-600"}),n.jsx("div",{children:n.jsxs("p",{className:"text-blue-800 font-semibold",children:["الرموز المتاحة: ",v," من أصل ",j]})})]}),n.jsxs("div",{className:"text-sm text-blue-700",children:["يمكنك إنشاء ",v," رمز دخول إضافي"]})]}),o?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 text-green-600",children:[n.jsx(bg,{className:"w-8 h-8"}),n.jsx("h4",{className:"text-xl font-bold",children:"تم إنشاء الرمز بنجاح!"})]}),n.jsxs("div",{className:"bg-white border-2 border-green-300 rounded-lg p-4 mb-6 max-w-md mx-auto",children:[n.jsx("div",{className:"text-3xl font-mono font-bold text-green-700 mb-2",children:o}),n.jsx("p",{className:"text-gray-600",children:"يمكن للطلاب استخدام هذا الرمز للدخول إلى المنصة"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs("button",{onClick:()=>f(o),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[n.jsx(Ua,{className:"w-5 h-5"}),a?"تم النسخ!":"نسخ الرمز"]}),n.jsxs("button",{onClick:()=>l(null),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز جديد"]})]}),n.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"يمكنك مشاركة هذا الرمز مع طلابك عبر البريد الإلكتروني أو الرسائل النصية"})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Ps,{className:"w-5 h-5 text-blue-600"}),"معلومات المعلم المرتبطة بالرمز"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"اسم المعلم"}),n.jsx("div",{className:"font-semibold",children:s.teacherName})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wu,{className:"w-5 h-5 text-gray-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"المدرسة"}),n.jsx("div",{className:"font-semibold",children:e.schoolName||"غير محدد"})]})]})]})]})]}):n.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["رمز الدخول ",c.allowTeacherCustomCodes?"(اختياري)":""]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",name:"code",value:s.code,onChange:w,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"أدخل رمز الدخول أو اتركه فارغاً للتوليد التلقائي",disabled:!c.allowTeacherCustomCodes}),n.jsx("button",{type:"button",onClick:p,className:"bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-2 rounded-lg transition-colors",title:"توليد رمز عشوائي",children:n.jsx(Ze,{className:"w-5 h-5"})})]}),!c.allowTeacherCustomCodes&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"غير مسموح للمعلمين بإنشاء رموز مخصصة. سيتم إنشاء رمز عشوائي عند الحفظ."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الصف *"}),n.jsx("select",{name:"grade",value:s.grade,onChange:w,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:e.grades.map(h=>n.jsxs("option",{value:h,children:["الصف ",h]},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"وصف الرمز *"}),n.jsx("input",{type:"text",name:"description",value:s.description,onChange:w,required:c.requireDescription,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: رمز دخول لطلاب الصف الخامس - المجموعة أ"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["تاريخ انتهاء الصلاحية ",c.requireExpiry?"*":"(اختياري)"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-5 h-5 text-gray-500"}),n.jsx("input",{type:"date",name:"expiresAt",value:s.expiresAt,onChange:w,min:new Date().toISOString().split("T")[0],className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:c.requireExpiry})]}),!c.requireExpiry&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اتركه فارغاً إذا كنت لا ترغب في تحديد تاريخ انتهاء"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأقصى للاستخدامات"}),n.jsx("input",{type:"number",name:"maxUsage",value:s.maxUsage,onChange:w,min:"0",max:c.maxUsagePerCode>0?c.maxUsagePerCode:void 0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اتركه 0 لاستخدامات غير محدودة"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.maxUsagePerCode>0?`الحد الأقصى المسموح به: ${c.maxUsagePerCode} استخدام`:"اتركه 0 إذا كنت لا ترغب في تحديد عدد الاستخدامات"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isForClass",name:"isForClass",checked:s.isForClass,onChange:h=>{r(N=>({...N,isForClass:h.target.checked,isForStudent:h.target.checked?!1:N.isForStudent}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isForClass",className:"text-sm font-semibold text-gray-700",children:"رمز مخصص لفصل دراسي"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"isForStudent",name:"isForStudent",checked:s.isForStudent,onChange:h=>{r(N=>({...N,isForStudent:h.target.checked,isForClass:h.target.checked?!1:N.isForClass}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"isForStudent",className:"text-sm font-semibold text-gray-700",children:"رمز مخصص لطالب"})]})]}),s.isForClass&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اختر الفصل"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ct,{className:"w-5 h-5 text-gray-500"}),n.jsxs("select",{name:"classId",value:s.classId,onChange:w,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"اختر الفصل"}),n.jsx("option",{value:"class-5a",children:"الصف الخامس أ"}),n.jsx("option",{value:"class-5b",children:"الصف الخامس ب"})]})]})]}),s.isForStudent&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"اختر الطالب"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ps,{className:"w-5 h-5 text-gray-500"}),n.jsxs("select",{name:"studentId",value:s.studentId,onChange:w,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"اختر الطالب"}),n.jsx("option",{value:"student-1",children:"أحمد محمد علي"}),n.jsx("option",{value:"student-2",children:"فاطمة أحمد"}),n.jsx("option",{value:"student-3",children:"محمد عبدالله"})]})]})]})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Ye,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-800 font-semibold",children:"معلومات هامة"}),n.jsx("p",{className:"text-yellow-700 text-sm",children:"سيتم ربط رمز الدخول باسمك ورقم هاتفك. يمكن للطلاب استخدام هذا الرمز للوصول إلى المحتوى التعليمي للصف المحدد."})]})]})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:b>=j,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Te,{className:"w-5 h-5"}),"إنشاء رمز الدخول"]})})]})]})},na="teacher-data",Sn="students-data",Rm="activities-data",lS=e=>{const[t,s]=x.useState(null),[r,a]=x.useState([]),[i,o]=x.useState([]),[l,c]=x.useState([]),[d,u]=x.useState(!0),[m,y]=x.useState(null),[j,b]=x.useState(null);x.useEffect(()=>{v()},[e]);const v=async()=>{u(!0),b(null);try{const{data:S,error:C}=await Z.from("teachers").select("*").eq("id",e).single();if(C){const E=localStorage.getItem(`${na}-${e}`);let T;E?T=JSON.parse(E):(T={id:e,name:"المعلم",email:"teacher@example.com",grades:[5],students:[],joinDate:new Date().toISOString(),isActive:!0},localStorage.setItem(`${na}-${e}`,JSON.stringify(T)),await Z.from("teachers").insert({id:T.id,name:T.name,email:T.email,grades:T.grades,students:T.students,join_date:T.joinDate,is_active:T.isActive,code_limit:20})),y(T)}else{const E={id:S.id,name:S.name,email:S.email,phone:S.phone,grades:S.grades,students:S.students,joinDate:S.join_date,isActive:S.is_active,schoolName:S.school_name,subjects:S.subjects};y(E),localStorage.setItem(`${na}-${e}`,JSON.stringify(E))}const{data:M,error:A}=await Z.from("students").select("*").eq("teacher_id",e);if(A){const E=localStorage.getItem(`${Sn}-${e}`),T=E?JSON.parse(E):cS(e);a(T);for(const O of T)await Z.from("students").insert({id:O.id,name:O.name,grade:O.grade,teacher_id:O.teacherId,join_date:O.joinDate,last_active:O.lastActive,is_active:O.isActive,notes:O.notes,parent_email:O.parentEmail,student_number:O.studentNumber,class_room_ids:O.classRoomIds})}else{const E=M.map(T=>({id:T.id,name:T.name,grade:T.grade,teacherId:T.teacher_id,joinDate:T.join_date,lastActive:T.last_active,isActive:T.is_active,notes:T.notes,parentEmail:T.parent_email,studentNumber:T.student_number,classRoomIds:T.class_room_ids,progress:{totalScore:0,currentStreak:0,unitsCompleted:[],wordsLearned:0,lastStudyDate:new Date().toISOString(),wordProgress:{},studySessions:[],totalStudyTime:0,studentId:T.id},achievements:[]}));a(E),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(E))}const{data:U,error:B}=await Z.from("student_activities").select("*").eq("teacher_id",e).order("start_time",{ascending:!1}).limit(50);if(B){const E=localStorage.getItem(`${Rm}-${e}`),T=E?JSON.parse(E):dS(r);c(T)}else{const E=U.map(T=>({id:T.id,studentId:T.student_id,activityType:T.activity_type,startTime:T.start_time,endTime:T.end_time,score:T.score,wordsStudied:T.words_studied,correctAnswers:T.correct_answers,totalQuestions:T.total_questions,timeSpent:T.time_spent,unit:T.unit,grade:T.grade}));c(E),localStorage.setItem(`${Rm}-${e}`,JSON.stringify(E))}const{data:D,error:$}=await Z.from("class_rooms").select("*").eq("teacher_id",e);if($){const E=uS(e,r);o(E);for(const T of E)await Z.from("class_rooms").insert({id:T.id,name:T.name,grade:T.grade,teacher_id:T.teacherId,created_at:T.createdAt,is_active:T.isActive,description:T.description,last_activity:T.lastActivity,subject:T.subject})}else{const E=D.map(T=>({id:T.id,name:T.name,grade:T.grade,teacherId:T.teacher_id,students:[],createdAt:T.created_at,isActive:T.is_active,description:T.description,lastActivity:T.last_activity,subject:T.subject}));o(E)}const W=hS(e,r,l,i);s(W)}catch(S){console.error("Error loading teacher data:",S),b(S.message)}finally{u(!1)}};return{dashboardData:t,students:r,classRooms:i,recentActivities:l,loading:d,teacher:m,error:j,refreshData:()=>{v()},updateTeacher:async S=>{if(m)try{const{error:C}=await Z.from("teachers").update({name:S.name,email:S.email,phone:S.phone,school_name:S.schoolName,subjects:S.subjects,grades:S.grades,is_active:S.isActive,updated_at:new Date().toISOString()}).eq("id",m.id);if(C)throw C;const M={...m,...S};y(M),localStorage.setItem(`${na}-${e}`,JSON.stringify(M));const A=document.createElement("div");A.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",A.textContent="تم تحديث بيانات المعلم بنجاح",document.body.appendChild(A),setTimeout(()=>{A.style.opacity="0",A.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},300)},3e3)}catch(C){console.error("Error updating teacher:",C),b(C.message);const M={...m,...S};y(M),localStorage.setItem(`${na}-${e}`,JSON.stringify(M));const A=document.createElement("div");A.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",A.textContent="حدث خطأ أثناء تحديث بيانات المعلم في قاعدة البيانات. تم الحفظ محلياً فقط.",document.body.appendChild(A),setTimeout(()=>{A.style.opacity="0",A.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},300)},3e3)}},addStudent:async S=>{try{const C=crypto.randomUUID(),M={...S,id:C,joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),isActive:!0,progress:{totalScore:0,currentStreak:0,unitsCompleted:[],wordsLearned:0,lastStudyDate:new Date().toISOString(),wordProgress:{},studySessions:[],totalStudyTime:0,studentId:C},achievements:[]},{error:A}=await Z.from("students").insert({id:M.id,name:M.name,grade:M.grade,teacher_id:M.teacherId,join_date:M.joinDate,last_active:M.lastActive,is_active:M.isActive,notes:M.notes,parent_email:M.parentEmail,student_number:M.studentNumber,class_room_ids:M.classRoomIds});if(A)throw A;await Z.from("user_progress").insert({id:crypto.randomUUID(),student_id:M.id,total_score:0,current_streak:0,units_completed:[],words_learned:0,last_study_date:new Date().toISOString(),word_progress:{},study_sessions:[],total_study_time:0});const U=[...r,M];a(U),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(U));const B=document.createElement("div");return B.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",B.textContent="تمت إضافة الطالب بنجاح",document.body.appendChild(B),setTimeout(()=>{B.style.opacity="0",B.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},300)},3e3),M}catch(C){console.error("Error adding student:",C),b(C.message);const M={...S,id:crypto.randomUUID(),joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),isActive:!0,progress:{totalScore:0,currentStreak:0,unitsCompleted:[],wordsLearned:0,lastStudyDate:new Date().toISOString(),wordProgress:{},studySessions:[],totalStudyTime:0,studentId:crypto.randomUUID()},achievements:[]},A=[...r,M];a(A),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(A));const U=document.createElement("div");return U.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",U.textContent="حدث خطأ أثناء إضافة الطالب في قاعدة البيانات. تم الحفظ محلياً فقط.",document.body.appendChild(U),setTimeout(()=>{U.style.opacity="0",U.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(U)&&document.body.removeChild(U)},300)},3e3),M}},updateStudent:async(S,C)=>{try{const M={};C.name&&(M.name=C.name),C.grade&&(M.grade=C.grade),C.isActive!==void 0&&(M.is_active=C.isActive),C.notes!==void 0&&(M.notes=C.notes),C.parentEmail!==void 0&&(M.parent_email=C.parentEmail),C.studentNumber!==void 0&&(M.student_number=C.studentNumber),C.classRoomIds&&(M.class_room_ids=C.classRoomIds),M.updated_at=new Date().toISOString();const{error:A}=await Z.from("students").update(M).eq("id",S);if(A)throw A;if(C.progress){const D={total_score:C.progress.totalScore,current_streak:C.progress.currentStreak,units_completed:C.progress.unitsCompleted,words_learned:C.progress.wordsLearned,last_study_date:C.progress.lastStudyDate,word_progress:C.progress.wordProgress,study_sessions:C.progress.studySessions,total_study_time:C.progress.totalStudyTime,updated_at:new Date().toISOString()};await Z.from("user_progress").update(D).eq("student_id",S)}const U=r.map(D=>D.id===S?{...D,...C}:D);a(U),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(U));const B=document.createElement("div");B.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",B.textContent="تم تحديث بيانات الطالب بنجاح",document.body.appendChild(B),setTimeout(()=>{B.style.opacity="0",B.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},300)},3e3)}catch(M){console.error("Error updating student:",M),b(M.message);const A=r.map(B=>B.id===S?{...B,...C}:B);a(A),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(A));const U=document.createElement("div");U.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",U.textContent="حدث خطأ أثناء تحديث بيانات الطالب في قاعدة البيانات. تم الحفظ محلياً فقط.",document.body.appendChild(U),setTimeout(()=>{U.style.opacity="0",U.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(U)&&document.body.removeChild(U)},300)},3e3)}},deleteStudent:async S=>{try{const{error:C}=await Z.from("students").delete().eq("id",S);if(C)throw C;await Z.from("user_progress").delete().eq("student_id",S),await Z.from("achievements").delete().eq("student_id",S);const M=r.filter(U=>U.id!==S);a(M),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(M));const A=document.createElement("div");A.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",A.textContent="تم حذف الطالب بنجاح",document.body.appendChild(A),setTimeout(()=>{A.style.opacity="0",A.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},300)},3e3)}catch(C){console.error("Error deleting student:",C),b(C.message);const M=r.filter(U=>U.id!==S);a(M),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(M));const A=document.createElement("div");A.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",A.textContent="حدث خطأ أثناء حذف الطالب من قاعدة البيانات. تم الحذف محلياً فقط.",document.body.appendChild(A),setTimeout(()=>{A.style.opacity="0",A.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},300)},3e3)}},exportStudentData:S=>{const C=[["الاسم","رقم الطالب","الصف","النقاط الإجمالية","الكلمات المتعلمة","الوحدات المكتملة","آخر نشاط","وقت الدراسة الإجمالي"].join(","),...r.map(B=>[B.name,B.studentNumber||"",B.grade,B.progress.totalScore,B.progress.wordsLearned,B.progress.unitsCompleted.length,new Date(B.lastActive).toLocaleDateString("ar-SA"),Math.round(B.progress.totalStudyTime/60)+" دقيقة"].join(","))].join(`
`),M=new Blob([C],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(M),U=document.createElement("a");U.setAttribute("href",A),U.setAttribute("download",`students_report_${new Date().toISOString().split("T")[0]}.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U)},importStudentData:async S=>{var C,M,A;try{const B=(await S.text()).split(`
`),D=B[0].split(","),$=[];for(let T=1;T<B.length;T++){const O=B[T].split(",");if(O.length>=3&&O[0].trim()){const I={id:crypto.randomUUID(),name:O[0].trim(),studentNumber:((C=O[1])==null?void 0:C.trim())||void 0,grade:parseInt(O[2])||5,teacherId:e,joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),isActive:!0,progress:{totalScore:0,currentStreak:0,unitsCompleted:[],wordsLearned:0,lastStudyDate:new Date().toISOString(),wordProgress:{},studySessions:[],totalStudyTime:0,studentId:crypto.randomUUID()},achievements:[],parentEmail:((M=O[3])==null?void 0:M.trim())||void 0,notes:((A=O[4])==null?void 0:A.trim())||void 0},{error:_}=await Z.from("students").insert({id:I.id,name:I.name,grade:I.grade,teacher_id:I.teacherId,join_date:I.joinDate,last_active:I.lastActive,is_active:I.isActive,notes:I.notes,parent_email:I.parentEmail,student_number:I.studentNumber});_?console.error("Error adding imported student to Supabase:",_):await Z.from("user_progress").insert({id:crypto.randomUUID(),student_id:I.id,total_score:0,current_streak:0,units_completed:[],words_learned:0,last_study_date:new Date().toISOString(),word_progress:{},study_sessions:[],total_study_time:0}),$.push(I)}}const W=[...r,...$];a(W),localStorage.setItem(`${Sn}-${e}`,JSON.stringify(W));const E=document.createElement("div");return E.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",E.textContent=`تمت إضافة ${$.length} طالب بنجاح`,document.body.appendChild(E),setTimeout(()=>{E.style.opacity="0",E.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},300)},3e3),$.length}catch(U){console.error("Error importing student data:",U),b(U.message);const B=document.createElement("div");throw B.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",B.textContent="حدث خطأ أثناء استيراد بيانات الطلاب",document.body.appendChild(B),setTimeout(()=>{B.style.opacity="0",B.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},300)},3e3),U}}}},cS=e=>["أحمد محمد علي","فاطمة أحمد","محمد عبدالله","عائشة سالم","علي حسن","مريم خالد","يوسف إبراهيم","زينب عمر","حسن محمود","نور الدين"].map((s,r)=>({id:`student-${r+1}`,name:s,grade:5,teacherId:e,joinDate:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),lastActive:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),isActive:Math.random()>.2,studentNumber:`2024${(r+1).toString().padStart(3,"0")}`,progress:{totalScore:Math.floor(Math.random()*500)+50,currentStreak:Math.floor(Math.random()*20),unitsCompleted:["Welcome Back","Talent Show"].slice(0,Math.floor(Math.random()*3)),wordsLearned:Math.floor(Math.random()*100)+20,lastStudyDate:new Date(Date.now()-Math.random()*3*24*60*60*1e3).toISOString(),wordProgress:{},studySessions:[],totalStudyTime:Math.floor(Math.random()*3600)+600,studentId:`student-${r+1}`},achievements:[]})),dS=e=>{const t=[],s=["flashcards","quiz","memory","pronunciation","grammar"];return e.forEach(r=>{for(let a=0;a<Math.floor(Math.random()*10)+5;a++)t.push({id:`activity-${r.id}-${a}`,studentId:r.id,activityType:s[Math.floor(Math.random()*s.length)],startTime:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),score:Math.floor(Math.random()*100),wordsStudied:["hello","goodbye","thank you"],correctAnswers:Math.floor(Math.random()*10)+5,totalQuestions:10,timeSpent:Math.floor(Math.random()*600)+120,unit:"Welcome Back",grade:r.grade})}),t.sort((r,a)=>new Date(a.startTime).getTime()-new Date(r.startTime).getTime())},uS=(e,t)=>[{id:"class-5a",name:"الصف الخامس أ",grade:5,teacherId:e,students:t.slice(0,5).map(s=>s.id),createdAt:new Date().toISOString(),isActive:!0,description:"فصل الصف الخامس الأساسي - المجموعة الأولى",subject:"اللغة الإنجليزية"},{id:"class-5b",name:"الصف الخامس ب",grade:5,teacherId:e,students:t.slice(5).map(s=>s.id),createdAt:new Date().toISOString(),isActive:!0,description:"فصل الصف الخامس الأساسي - المجموعة الثانية",subject:"اللغة الإنجليزية"}],hS=(e,t,s,r)=>{const a=t.filter(l=>Math.floor((Date.now()-new Date(l.lastActive).getTime())/864e5)<=7).length,i=t.sort((l,c)=>c.progress.totalScore-l.progress.totalScore).slice(0,5).map(l=>({studentId:l.id,studentName:l.name,score:l.progress.totalScore,improvement:Math.floor(Math.random()*20)-5})),o=t.filter(l=>l.progress.totalScore<100).slice(0,5).map(l=>({studentId:l.id,studentName:l.name,issueAreas:["النطق","التهجئة"].slice(0,Math.floor(Math.random()*2)+1),lastActive:l.lastActive}));return{teacherId:e,totalStudents:t.length,activeStudents:a,classRooms:r,recentActivities:s.slice(0,20),topPerformers:i,strugglingStudents:o,weeklyStats:[{week:"هذا الأسبوع",totalActivities:s.filter(l=>{const c=Date.now()-6048e5;return new Date(l.startTime).getTime()>c}).length,averageScore:Math.floor(Math.random()*30)+70,activeStudents:a}]}},mS=({teacher:e,onLogout:t})=>{var h,N,k;const[s,r]=x.useState("overview"),[a,i]=x.useState("week"),[o,l]=x.useState(!1),{dashboardData:c,students:d,classRooms:u,recentActivities:m,loading:y,refreshData:j,exportStudentData:b,importStudentData:v,updateTeacher:w}=lS(e.id),p=S=>{const C=Math.floor(S/3600),M=Math.floor(S%3600/60);return C>0?`${C}س ${M}د`:`${M}د`},g=S=>S>=80?"text-green-600 bg-green-100":S>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",f=()=>{const S=[["اسم الطالب","رقم الطالب","الصف","بريد ولي الأمر","ملاحظات"].join(","),["أحمد محمد","2024001","5","parent@email.com","طالب متميز"].join(","),["فاطمة علي","2024002","5","parent2@email.com",""].join(",")].join(`
`),C=new Blob([S],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(C),A=document.createElement("a");A.setAttribute("href",M),A.setAttribute("download","students_template.csv"),A.style.visibility="hidden",document.body.appendChild(A),A.click(),document.body.removeChild(A)};return y?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل لوحة التحكم..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",dir:"rtl",children:[n.jsx("div",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:n.jsx("div",{className:"container mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 rounded-xl shadow-lg",children:n.jsx(ct,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"لوحة تحكم المعلم"}),n.jsxs("p",{className:"text-gray-600",children:["مرحباً ",e.name," - ",e.schoolName||"مدرسة"]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Fa,{className:"w-4 h-4"}),"تحديث البيانات"]}),n.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"خروج"})]})]})})}),n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:n.jsx("div",{className:"container mx-auto px-6",children:n.jsx("div",{className:"flex space-x-8 overflow-x-auto",children:[{id:"overview",label:"نظرة عامة",icon:Fa},{id:"students",label:"إدارة الطلاب",icon:ct},{id:"classes",label:"الفصول",icon:ze},{id:"reports",label:"التقارير",icon:ls},{id:"access-codes",label:"رموز الدخول",icon:Te},{id:"profile",label:"الملف الشخصي",icon:Ps},{id:"settings",label:"الإعدادات",icon:tn}].map(S=>{const C=S.icon;return n.jsxs("button",{onClick:()=>r(S.id),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-semibold transition-colors ${s===S.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-blue-600 hover:border-blue-300"}`,children:[n.jsx(C,{className:"w-5 h-5"}),S.label]},S.id)})})})}),n.jsxs("div",{className:"container mx-auto px-6 py-8",children:[s==="overview"&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"إجمالي الطلاب"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(c==null?void 0:c.totalStudents)||0})]}),n.jsx(ct,{className:"w-12 h-12 text-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-green-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"الطلاب النشطون"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:(c==null?void 0:c.activeStudents)||0})]}),n.jsx(So,{className:"w-12 h-12 text-green-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"الفصول"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:((h=c==null?void 0:c.classRooms)==null?void 0:h.length)||0})]}),n.jsx(ze,{className:"w-12 h-12 text-purple-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-r-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"الأنشطة اليوم"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:(m==null?void 0:m.filter(S=>new Date(S.startTime).toDateString()===new Date().toDateString()).length)||0})]}),n.jsx(on,{className:"w-12 h-12 text-orange-500"})]})})]}),n.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-indigo-100 rounded-xl p-6 border border-purple-200 shadow-md",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-3 rounded-xl shadow-lg text-white",children:n.jsx(Te,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"رموز الدخول للطلاب"}),n.jsx("p",{className:"text-gray-600",children:"أنشئ رموز دخول للطلاب للوصول إلى المحتوى التعليمي"})]})]}),n.jsxs("button",{onClick:()=>l(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl transition-colors flex items-center gap-2 shadow-md",children:[n.jsx(De,{className:"w-5 h-5"}),"إنشاء رمز جديد"]})]})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(Ls,{className:"w-6 h-6 text-yellow-500"}),"أفضل الطلاب أداءً"]}),n.jsx("div",{className:"space-y-4",children:((N=c==null?void 0:c.topPerformers)==null?void 0:N.slice(0,5).map((S,C)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${C===0?"bg-yellow-500":C===1?"bg-gray-400":C===2?"bg-orange-600":"bg-blue-500"}`,children:C+1}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:S.studentName}),n.jsxs("p",{className:"text-sm text-gray-600",children:["النقاط: ",S.score]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-semibold ${S.improvement>=0?"text-green-600":"text-red-600"}`,children:[S.improvement>=0?"+":"",S.improvement,"%"]}),n.jsx("p",{className:"text-xs text-gray-500",children:"التحسن"})]})]},S.studentId)))||n.jsx("p",{className:"text-gray-500 text-center py-8",children:"لا توجد بيانات متاحة"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(Ye,{className:"w-6 h-6 text-red-500"}),"طلاب يحتاجون مساعدة"]}),n.jsx("div",{className:"space-y-4",children:((k=c==null?void 0:c.strugglingStudents)==null?void 0:k.slice(0,5).map(S=>n.jsxs("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"font-semibold text-gray-800",children:S.studentName}),n.jsxs("p",{className:"text-xs text-gray-500",children:["آخر نشاط: ",new Date(S.lastActive).toLocaleDateString("ar-SA")]})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:S.issueAreas.map((C,M)=>n.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:C},M))})]},S.studentId)))||n.jsx("p",{className:"text-gray-500 text-center py-8",children:"جميع الطلاب يؤدون بشكل جيد! 🎉"})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[n.jsx(dt,{className:"w-6 h-6 text-blue-500"}),"الأنشطة الأخيرة"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الطالب"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"النشاط"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"النتيجة"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"الوقت المستغرق"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"التاريخ"})]})}),n.jsx("tbody",{children:(m==null?void 0:m.slice(0,10).map(S=>{const C=d.find(M=>M.id===S.studentId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsxs("td",{className:"py-3 px-4",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:(C==null?void 0:C.name)||"غير معروف"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["الصف ",S.grade]})]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm",children:S.activityType})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${g(S.score)}`,children:[S.score,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:p(S.timeSpent)}),n.jsx("td",{className:"py-3 px-4 text-gray-600",children:new Date(S.startTime).toLocaleDateString("ar-SA")})]},S.id)}))||n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"لا توجد أنشطة حديثة"})})})]})})]})]}),s==="students"&&n.jsx(xx,{teacher:e,students:d,onRefresh:j}),s==="classes"&&n.jsx(nS,{teacher:e,classRooms:u,students:d,onRefresh:j}),s==="reports"&&n.jsx(sS,{teacher:e,students:d,onExport:b}),s==="access-codes"&&n.jsx(rS,{teacher:e,students:d,onRefresh:j}),s==="profile"&&n.jsx(iS,{teacher:e,onUpdate:w}),s==="settings"&&n.jsx("div",{className:"space-y-8",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"استيراد وتصدير البيانات"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-700",children:"استيراد قائمة الطلاب"}),n.jsx("p",{className:"text-sm text-gray-600",children:"قم بتحميل ملف Excel أو CSV يحتوي على أسماء الطلاب ومعلوماتهم"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:f,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-4 h-4"}),"تحميل النموذج"]}),n.jsxs("label",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors cursor-pointer flex items-center gap-2",children:[n.jsx(zv,{className:"w-4 h-4"}),"استيراد الملف",n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",className:"hidden",onChange:S=>{var C;(C=S.target.files)!=null&&C[0]&&v(S.target.files[0])}})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-700",children:"تصدير بيانات الطلاب"}),n.jsx("p",{className:"text-sm text-gray-600",children:"قم بتصدير جميع بيانات الطلاب وتقدمهم في ملف Excel"}),n.jsxs("button",{onClick:()=>b("all"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{className:"w-4 h-4"}),"تصدير جميع البيانات"]})]})]})]})})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 left-4 bg-white/20 hover:bg-white/30 text-gray-700 p-2 rounded-full transition-colors z-10",children:n.jsx(X,{className:"w-5 h-5"})}),n.jsx(oS,{teacher:e,onSuccess:()=>{j(),setTimeout(()=>l(!1),3e3)}})]})})})]})},To=[{id:"english",name:"اللغة الإنجليزية",nameEn:"English",icon:"🇺🇸",color:"from-blue-500 to-indigo-600",description:"تعلم اللغة الإنجليزية من خلال المفردات والقواعد والتمارين التفاعلية",isActive:!0,activities:["flashcards","quiz","memory","pronunciation","grammar","spelling","sentence-writing","sentence-completion","test-exercises"]},{id:"math",name:"الرياضيات",nameEn:"Mathematics",icon:"🔢",color:"from-green-500 to-teal-600",description:"تعلم الرياضيات من خلال المسائل والتمارين التفاعلية",isActive:!0},{id:"science",name:"العلوم",nameEn:"Science",icon:"🔬",color:"from-purple-500 to-violet-600",description:"تعلم العلوم من خلال التجارب والمفاهيم العلمية",isActive:!0},{id:"islamic",name:"التربية الإسلامية",nameEn:"Islamic Education",icon:"☪️",color:"from-emerald-500 to-green-600",description:"تعلم التربية الإسلامية من خلال القرآن والحديث والفقه",isActive:!0},{id:"arabic",name:"اللغة العربية",nameEn:"Arabic",icon:"📖",color:"from-amber-500 to-yellow-600",description:"تعلم اللغة العربية من خلال القراءة والكتابة والقواعد",isActive:!0}];function fS(e,t=globalThis==null?void 0:globalThis.document){const s=Ln(e);x.useEffect(()=>{const r=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[s,t])}var pS="DismissableLayer",vd="dismissableLayer.update",gS="dismissableLayer.pointerDownOutside",xS="dismissableLayer.focusOutside",Dm,bx=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vx=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=x.useContext(bx),[u,m]=x.useState(null),y=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=x.useState({}),b=Nt(t,S=>m(S)),v=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),p=v.indexOf(w),g=u?v.indexOf(u):-1,f=d.layersWithOutsidePointerEventsDisabled.size>0,h=g>=p,N=vS(S=>{const C=S.target,M=[...d.branches].some(A=>A.contains(C));!h||M||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},y),k=wS(S=>{const C=S.target;[...d.branches].some(A=>A.contains(C))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},y);return fS(S=>{g===d.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},y),x.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Dm=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),$m(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Dm)}},[u,y,s,d]),x.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),$m())},[u,d]),x.useEffect(()=>{const S=()=>j({});return document.addEventListener(vd,S),()=>document.removeEventListener(vd,S)},[]),n.jsx(Be.div,{...c,ref:b,style:{pointerEvents:f?h?"auto":"none":void 0,...e.style},onFocusCapture:ge(e.onFocusCapture,k.onFocusCapture),onBlurCapture:ge(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ge(e.onPointerDownCapture,N.onPointerDownCapture)})});vx.displayName=pS;var yS="DismissableLayerBranch",bS=x.forwardRef((e,t)=>{const s=x.useContext(bx),r=x.useRef(null),a=Nt(t,r);return x.useEffect(()=>{const i=r.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),n.jsx(Be.div,{...e,ref:a})});bS.displayName=yS;function vS(e,t=globalThis==null?void 0:globalThis.document){const s=Ln(e),r=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){wx(gS,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}function wS(e,t=globalThis==null?void 0:globalThis.document){const s=Ln(e),r=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!r.current&&wx(xS,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $m(){const e=new CustomEvent(vd);document.dispatchEvent(e)}function wx(e,t,s,{discrete:r}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),r?Qg(a,i):a.dispatchEvent(i)}var sc=0;function jS(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lm()),document.body.insertAdjacentElement("beforeend",e[1]??Lm()),sc++,()=>{sc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sc--}},[])}function Lm(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var rc="focusScope.autoFocusOnMount",ac="focusScope.autoFocusOnUnmount",Fm={bubbles:!1,cancelable:!0},NS="FocusScope",jx=x.forwardRef((e,t)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=x.useState(null),d=Ln(a),u=Ln(i),m=x.useRef(null),y=Nt(t,v=>c(v)),j=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let v=function(f){if(j.paused||!l)return;const h=f.target;l.contains(h)?m.current=h:Hn(m.current,{select:!0})},w=function(f){if(j.paused||!l)return;const h=f.relatedTarget;h!==null&&(l.contains(h)||Hn(m.current,{select:!0}))},p=function(f){if(document.activeElement===document.body)for(const N of f)N.removedNodes.length>0&&Hn(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const g=new MutationObserver(p);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),g.disconnect()}}},[r,l,j.paused]),x.useEffect(()=>{if(l){Um.add(j);const v=document.activeElement;if(!l.contains(v)){const p=new CustomEvent(rc,Fm);l.addEventListener(rc,d),l.dispatchEvent(p),p.defaultPrevented||(SS(TS(Nx(l)),{select:!0}),document.activeElement===v&&Hn(l))}return()=>{l.removeEventListener(rc,d),setTimeout(()=>{const p=new CustomEvent(ac,Fm);l.addEventListener(ac,u),l.dispatchEvent(p),p.defaultPrevented||Hn(v??document.body,{select:!0}),l.removeEventListener(ac,u),Um.remove(j)},0)}}},[l,d,u,j]);const b=x.useCallback(v=>{if(!s&&!r||j.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,p=document.activeElement;if(w&&p){const g=v.currentTarget,[f,h]=kS(g);f&&h?!v.shiftKey&&p===h?(v.preventDefault(),s&&Hn(f,{select:!0})):v.shiftKey&&p===f&&(v.preventDefault(),s&&Hn(h,{select:!0})):p===g&&v.preventDefault()}},[s,r,j.paused]);return n.jsx(Be.div,{tabIndex:-1,...o,ref:y,onKeyDown:b})});jx.displayName=NS;function SS(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(Hn(r,{select:t}),document.activeElement!==s)return}function kS(e){const t=Nx(e),s=zm(t,e),r=zm(t.reverse(),e);return[s,r]}function Nx(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function zm(e,t){for(const s of e)if(!_S(s,{upTo:t}))return s}function _S(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function CS(e){return e instanceof HTMLInputElement&&"select"in e}function Hn(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&CS(e)&&t&&e.select()}}var Um=ES();function ES(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Wm(e,t),e.unshift(t)},remove(t){var s;e=Wm(e,t),(s=e[0])==null||s.resume()}}}function Wm(e,t){const s=[...e],r=s.indexOf(t);return r!==-1&&s.splice(r,1),s}function TS(e){return e.filter(t=>t.tagName!=="A")}const OS=["top","right","bottom","left"],ms=Math.min,_t=Math.max,Oo=Math.round,Ai=Math.floor,yn=e=>({x:e,y:e}),AS={left:"right",right:"left",bottom:"top",top:"bottom"},PS={start:"end",end:"start"};function wd(e,t,s){return _t(e,ms(t,s))}function Fn(e,t){return typeof e=="function"?e(t):e}function zn(e){return e.split("-")[0]}function Br(e){return e.split("-")[1]}function Du(e){return e==="x"?"y":"x"}function $u(e){return e==="y"?"height":"width"}function pn(e){return["top","bottom"].includes(zn(e))?"y":"x"}function Lu(e){return Du(pn(e))}function IS(e,t,s){s===void 0&&(s=!1);const r=Br(e),a=Lu(e),i=$u(a);let o=a==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ao(o)),[o,Ao(o)]}function MS(e){const t=Ao(e);return[jd(e),t,jd(t)]}function jd(e){return e.replace(/start|end/g,t=>PS[t])}function RS(e,t,s){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return s?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function DS(e,t,s,r){const a=Br(e);let i=RS(zn(e),s==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(jd)))),i}function Ao(e){return e.replace(/left|right|bottom|top/g,t=>AS[t])}function $S(e){return{top:0,right:0,bottom:0,left:0,...e}}function Sx(e){return typeof e!="number"?$S(e):{top:e,right:e,bottom:e,left:e}}function Po(e){const{x:t,y:s,width:r,height:a}=e;return{width:r,height:a,top:s,left:t,right:t+r,bottom:s+a,x:t,y:s}}function qm(e,t,s){let{reference:r,floating:a}=e;const i=pn(t),o=Lu(t),l=$u(o),c=zn(t),d=i==="y",u=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,y=r[l]/2-a[l]/2;let j;switch(c){case"top":j={x:u,y:r.y-a.height};break;case"bottom":j={x:u,y:r.y+r.height};break;case"right":j={x:r.x+r.width,y:m};break;case"left":j={x:r.x-a.width,y:m};break;default:j={x:r.x,y:r.y}}switch(Br(t)){case"start":j[o]-=y*(s&&d?-1:1);break;case"end":j[o]+=y*(s&&d?-1:1);break}return j}const LS=async(e,t,s)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=qm(d,r,c),y=r,j={},b=0;for(let v=0;v<l.length;v++){const{name:w,fn:p}=l[v],{x:g,y:f,data:h,reset:N}=await p({x:u,y:m,initialPlacement:r,placement:y,strategy:a,middlewareData:j,rects:d,platform:o,elements:{reference:e,floating:t}});u=g??u,m=f??m,j={...j,[w]:{...j[w],...h}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:u,y:m}=qm(d,y,c)),v=-1)}return{x:u,y:m,placement:y,strategy:a,middlewareData:j}};async function qa(e,t){var s;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:y=!1,padding:j=0}=Fn(t,e),b=Sx(j),w=l[y?m==="floating"?"reference":"floating":m],p=Po(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(w)))==null||s?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),g=m==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,f=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),h=await(i.isElement==null?void 0:i.isElement(f))?await(i.getScale==null?void 0:i.getScale(f))||{x:1,y:1}:{x:1,y:1},N=Po(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:f,strategy:c}):g);return{top:(p.top-N.top+b.top)/h.y,bottom:(N.bottom-p.bottom+b.bottom)/h.y,left:(p.left-N.left+b.left)/h.x,right:(N.right-p.right+b.right)/h.x}}const FS=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Fn(e,t)||{};if(d==null)return{};const m=Sx(u),y={x:s,y:r},j=Lu(a),b=$u(j),v=await o.getDimensions(d),w=j==="y",p=w?"top":"left",g=w?"bottom":"right",f=w?"clientHeight":"clientWidth",h=i.reference[b]+i.reference[j]-y[j]-i.floating[b],N=y[j]-i.reference[j],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=k?k[f]:0;(!S||!await(o.isElement==null?void 0:o.isElement(k)))&&(S=l.floating[f]||i.floating[b]);const C=h/2-N/2,M=S/2-v[b]/2-1,A=ms(m[p],M),U=ms(m[g],M),B=A,D=S-v[b]-U,$=S/2-v[b]/2+C,W=wd(B,$,D),E=!c.arrow&&Br(a)!=null&&$!==W&&i.reference[b]/2-($<B?A:U)-v[b]/2<0,T=E?$<B?$-B:$-D:0;return{[j]:y[j]+T,data:{[j]:W,centerOffset:$-W-T,...E&&{alignmentOffset:T}},reset:E}}}),zS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...w}=Fn(e,t);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const p=zn(a),g=pn(l),f=zn(l)===l,h=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=y||(f||!v?[Ao(l)]:MS(l)),k=b!=="none";!y&&k&&N.push(...DS(l,v,b,h));const S=[l,...N],C=await qa(t,w),M=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&M.push(C[p]),m){const $=IS(a,o,h);M.push(C[$[0]],C[$[1]])}if(A=[...A,{placement:a,overflows:M}],!M.every($=>$<=0)){var U,B;const $=(((U=i.flip)==null?void 0:U.index)||0)+1,W=S[$];if(W&&(!(m==="alignment"?g!==pn(W):!1)||A.every(O=>O.overflows[0]>0&&pn(O.placement)===g)))return{data:{index:$,overflows:A},reset:{placement:W}};let E=(B=A.filter(T=>T.overflows[0]<=0).sort((T,O)=>T.overflows[1]-O.overflows[1])[0])==null?void 0:B.placement;if(!E)switch(j){case"bestFit":{var D;const T=(D=A.filter(O=>{if(k){const I=pn(O.placement);return I===g||I==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(I=>I>0).reduce((I,_)=>I+_,0)]).sort((O,I)=>O[1]-I[1])[0])==null?void 0:D[0];T&&(E=T);break}case"initialPlacement":E=l;break}if(a!==E)return{reset:{placement:E}}}return{}}}};function Bm(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Hm(e){return OS.some(t=>e[t]>=0)}const US=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:r="referenceHidden",...a}=Fn(e,t);switch(r){case"referenceHidden":{const i=await qa(t,{...a,elementContext:"reference"}),o=Bm(i,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Hm(o)}}}case"escaped":{const i=await qa(t,{...a,altBoundary:!0}),o=Bm(i,s.floating);return{data:{escapedOffsets:o,escaped:Hm(o)}}}default:return{}}}}};async function WS(e,t){const{placement:s,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=zn(s),l=Br(s),c=pn(s)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,m=Fn(t,e);let{mainAxis:y,crossAxis:j,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof b=="number"&&(j=l==="end"?b*-1:b),c?{x:j*u,y:y*d}:{x:y*d,y:j*u}}const qS=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await WS(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},BS=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:p,y:g}=w;return{x:p,y:g}}},...c}=Fn(e,t),d={x:s,y:r},u=await qa(t,c),m=pn(zn(a)),y=Du(m);let j=d[y],b=d[m];if(i){const w=y==="y"?"top":"left",p=y==="y"?"bottom":"right",g=j+u[w],f=j-u[p];j=wd(g,j,f)}if(o){const w=m==="y"?"top":"left",p=m==="y"?"bottom":"right",g=b+u[w],f=b-u[p];b=wd(g,b,f)}const v=l.fn({...t,[y]:j,[m]:b});return{...v,data:{x:v.x-s,y:v.y-r,enabled:{[y]:i,[m]:o}}}}}},HS=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Fn(e,t),u={x:s,y:r},m=pn(a),y=Du(m);let j=u[y],b=u[m];const v=Fn(l,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const f=y==="y"?"height":"width",h=i.reference[y]-i.floating[f]+w.mainAxis,N=i.reference[y]+i.reference[f]-w.mainAxis;j<h?j=h:j>N&&(j=N)}if(d){var p,g;const f=y==="y"?"width":"height",h=["top","left"].includes(zn(a)),N=i.reference[m]-i.floating[f]+(h&&((p=o.offset)==null?void 0:p[m])||0)+(h?0:w.crossAxis),k=i.reference[m]+i.reference[f]+(h?0:((g=o.offset)==null?void 0:g[m])||0)-(h?w.crossAxis:0);b<N?b=N:b>k&&(b=k)}return{[y]:j,[m]:b}}}},GS=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Fn(e,t),u=await qa(t,d),m=zn(a),y=Br(a),j=pn(a)==="y",{width:b,height:v}=i.floating;let w,p;m==="top"||m==="bottom"?(w=m,p=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(p=m,w=y==="end"?"top":"bottom");const g=v-u.top-u.bottom,f=b-u.left-u.right,h=ms(v-u[w],g),N=ms(b-u[p],f),k=!t.middlewareData.shift;let S=h,C=N;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(C=f),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=g),k&&!y){const A=_t(u.left,0),U=_t(u.right,0),B=_t(u.top,0),D=_t(u.bottom,0);j?C=b-2*(A!==0||U!==0?A+U:_t(u.left,u.right)):S=v-2*(B!==0||D!==0?B+D:_t(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:S});const M=await o.getDimensions(l.floating);return b!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function hl(){return typeof window<"u"}function Hr(e){return kx(e)?(e.nodeName||"").toLowerCase():"#document"}function Ot(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function jn(e){var t;return(t=(kx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kx(e){return hl()?e instanceof Node||e instanceof Ot(e).Node:!1}function rn(e){return hl()?e instanceof Element||e instanceof Ot(e).Element:!1}function wn(e){return hl()?e instanceof HTMLElement||e instanceof Ot(e).HTMLElement:!1}function Gm(e){return!hl()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ot(e).ShadowRoot}function ri(e){const{overflow:t,overflowX:s,overflowY:r,display:a}=an(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!["inline","contents"].includes(a)}function VS(e){return["table","td","th"].includes(Hr(e))}function ml(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Fu(e){const t=zu(),s=rn(e)?an(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(s.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(s.contain||"").includes(r))}function KS(e){let t=fs(e);for(;wn(t)&&!Mr(t);){if(Fu(t))return t;if(ml(t))return null;t=fs(t)}return null}function zu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mr(e){return["html","body","#document"].includes(Hr(e))}function an(e){return Ot(e).getComputedStyle(e)}function fl(e){return rn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fs(e){if(Hr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Gm(e)&&e.host||jn(e);return Gm(t)?t.host:t}function _x(e){const t=fs(e);return Mr(t)?e.ownerDocument?e.ownerDocument.body:e.body:wn(t)&&ri(t)?t:_x(t)}function Ba(e,t,s){var r;t===void 0&&(t=[]),s===void 0&&(s=!0);const a=_x(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Ot(a);if(i){const l=Nd(o);return t.concat(o,o.visualViewport||[],ri(a)?a:[],l&&s?Ba(l):[])}return t.concat(a,Ba(a,[],s))}function Nd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cx(e){const t=an(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=wn(e),i=a?e.offsetWidth:s,o=a?e.offsetHeight:r,l=Oo(s)!==i||Oo(r)!==o;return l&&(s=i,r=o),{width:s,height:r,$:l}}function Uu(e){return rn(e)?e:e.contextElement}function Sr(e){const t=Uu(e);if(!wn(t))return yn(1);const s=t.getBoundingClientRect(),{width:r,height:a,$:i}=Cx(t);let o=(i?Oo(s.width):s.width)/r,l=(i?Oo(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QS=yn(0);function Ex(e){const t=Ot(e);return!zu()||!t.visualViewport?QS:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function YS(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Ot(e)?!1:t}function Us(e,t,s,r){t===void 0&&(t=!1),s===void 0&&(s=!1);const a=e.getBoundingClientRect(),i=Uu(e);let o=yn(1);t&&(r?rn(r)&&(o=Sr(r)):o=Sr(e));const l=YS(i,s,r)?Ex(i):yn(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,m=a.height/o.y;if(i){const y=Ot(i),j=r&&rn(r)?Ot(r):r;let b=y,v=Nd(b);for(;v&&r&&j!==b;){const w=Sr(v),p=v.getBoundingClientRect(),g=an(v),f=p.left+(v.clientLeft+parseFloat(g.paddingLeft))*w.x,h=p.top+(v.clientTop+parseFloat(g.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,m*=w.y,c+=f,d+=h,b=Ot(v),v=Nd(b)}}return Po({width:u,height:m,x:c,y:d})}function Wu(e,t){const s=fl(e).scrollLeft;return t?t.left+s:Us(jn(e)).left+s}function Tx(e,t,s){s===void 0&&(s=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(s?0:Wu(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function JS(e){let{elements:t,rect:s,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=jn(r),l=t?ml(t.floating):!1;if(r===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},d=yn(1);const u=yn(0),m=wn(r);if((m||!m&&!i)&&((Hr(r)!=="body"||ri(o))&&(c=fl(r)),wn(r))){const j=Us(r);d=Sr(r),u.x=j.x+r.clientLeft,u.y=j.y+r.clientTop}const y=o&&!m&&!i?Tx(o,c,!0):yn(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+y.x,y:s.y*d.y-c.scrollTop*d.y+u.y+y.y}}function XS(e){return Array.from(e.getClientRects())}function ZS(e){const t=jn(e),s=fl(e),r=e.ownerDocument.body,a=_t(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=_t(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+Wu(e);const l=-s.scrollTop;return an(r).direction==="rtl"&&(o+=_t(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function e2(e,t){const s=Ot(e),r=jn(e),a=s.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=zu();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function t2(e,t){const s=Us(e,!0,t==="fixed"),r=s.top+e.clientTop,a=s.left+e.clientLeft,i=wn(e)?Sr(e):yn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function Vm(e,t,s){let r;if(t==="viewport")r=e2(e,s);else if(t==="document")r=ZS(jn(e));else if(rn(t))r=t2(t,s);else{const a=Ex(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Po(r)}function Ox(e,t){const s=fs(e);return s===t||!rn(s)||Mr(s)?!1:an(s).position==="fixed"||Ox(s,t)}function n2(e,t){const s=t.get(e);if(s)return s;let r=Ba(e,[],!1).filter(l=>rn(l)&&Hr(l)!=="body"),a=null;const i=an(e).position==="fixed";let o=i?fs(e):e;for(;rn(o)&&!Mr(o);){const l=an(o),c=Fu(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ri(o)&&!c&&Ox(e,o))?r=r.filter(u=>u!==o):a=l,o=fs(o)}return t.set(e,r),r}function s2(e){let{element:t,boundary:s,rootBoundary:r,strategy:a}=e;const o=[...s==="clippingAncestors"?ml(t)?[]:n2(t,this._c):[].concat(s),r],l=o[0],c=o.reduce((d,u)=>{const m=Vm(t,u,a);return d.top=_t(m.top,d.top),d.right=ms(m.right,d.right),d.bottom=ms(m.bottom,d.bottom),d.left=_t(m.left,d.left),d},Vm(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function r2(e){const{width:t,height:s}=Cx(e);return{width:t,height:s}}function a2(e,t,s){const r=wn(t),a=jn(t),i=s==="fixed",o=Us(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=yn(0);function d(){c.x=Wu(a)}if(r||!r&&!i)if((Hr(t)!=="body"||ri(a))&&(l=fl(t)),r){const j=Us(t,!0,i,t);c.x=j.x+t.clientLeft,c.y=j.y+t.clientTop}else a&&d();i&&!r&&a&&d();const u=a&&!r&&!i?Tx(a,l):yn(0),m=o.left+l.scrollLeft-c.x-u.x,y=o.top+l.scrollTop-c.y-u.y;return{x:m,y,width:o.width,height:o.height}}function ic(e){return an(e).position==="static"}function Km(e,t){if(!wn(e)||an(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return jn(e)===s&&(s=s.ownerDocument.body),s}function Ax(e,t){const s=Ot(e);if(ml(e))return s;if(!wn(e)){let a=fs(e);for(;a&&!Mr(a);){if(rn(a)&&!ic(a))return a;a=fs(a)}return s}let r=Km(e,t);for(;r&&VS(r)&&ic(r);)r=Km(r,t);return r&&Mr(r)&&ic(r)&&!Fu(r)?s:r||KS(e)||s}const i2=async function(e){const t=this.getOffsetParent||Ax,s=this.getDimensions,r=await s(e.floating);return{reference:a2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function o2(e){return an(e).direction==="rtl"}const l2={convertOffsetParentRelativeRectToViewportRelativeRect:JS,getDocumentElement:jn,getClippingRect:s2,getOffsetParent:Ax,getElementRects:i2,getClientRects:XS,getDimensions:r2,getScale:Sr,isElement:rn,isRTL:o2};function Px(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function c2(e,t){let s=null,r;const a=jn(e);function i(){var l;clearTimeout(r),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:m,width:y,height:j}=d;if(l||t(),!y||!j)return;const b=Ai(m),v=Ai(a.clientWidth-(u+y)),w=Ai(a.clientHeight-(m+j)),p=Ai(u),f={rootMargin:-b+"px "+-v+"px "+-w+"px "+-p+"px",threshold:_t(0,ms(1,c))||1};let h=!0;function N(k){const S=k[0].intersectionRatio;if(S!==c){if(!h)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Px(d,e.getBoundingClientRect())&&o(),h=!1}try{s=new IntersectionObserver(N,{...f,root:a.ownerDocument})}catch{s=new IntersectionObserver(N,f)}s.observe(e)}return o(!0),i}function d2(e,t,s,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Uu(e),u=a||i?[...d?Ba(d):[],...Ba(t)]:[];u.forEach(p=>{a&&p.addEventListener("scroll",s,{passive:!0}),i&&p.addEventListener("resize",s)});const m=d&&l?c2(d,s):null;let y=-1,j=null;o&&(j=new ResizeObserver(p=>{let[g]=p;g&&g.target===d&&j&&(j.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var f;(f=j)==null||f.observe(t)})),s()}),d&&!c&&j.observe(d),j.observe(t));let b,v=c?Us(e):null;c&&w();function w(){const p=Us(e);v&&!Px(v,p)&&s(),v=p,b=requestAnimationFrame(w)}return s(),()=>{var p;u.forEach(g=>{a&&g.removeEventListener("scroll",s),i&&g.removeEventListener("resize",s)}),m==null||m(),(p=j)==null||p.disconnect(),j=null,c&&cancelAnimationFrame(b)}}const u2=qS,h2=BS,m2=zS,f2=GS,p2=US,Qm=FS,g2=HS,x2=(e,t,s)=>{const r=new Map,a={platform:l2,...s},i={...a.platform,_c:r};return LS(e,t,{...a,platform:i})};var y2=typeof document<"u",b2=function(){},Qi=y2?x.useLayoutEffect:b2;function Io(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;r--!==0;)if(!Io(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=s;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Io(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ix(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ym(e,t){const s=Ix(e);return Math.round(t*s)/s}function oc(e){const t=x.useRef(e);return Qi(()=>{t.current=e}),t}function v2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=x.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[y,j]=x.useState(r);Io(y,r)||j(r);const[b,v]=x.useState(null),[w,p]=x.useState(null),g=x.useCallback(O=>{O!==k.current&&(k.current=O,v(O))},[]),f=x.useCallback(O=>{O!==S.current&&(S.current=O,p(O))},[]),h=i||b,N=o||w,k=x.useRef(null),S=x.useRef(null),C=x.useRef(u),M=c!=null,A=oc(c),U=oc(a),B=oc(d),D=x.useCallback(()=>{if(!k.current||!S.current)return;const O={placement:t,strategy:s,middleware:y};U.current&&(O.platform=U.current),x2(k.current,S.current,O).then(I=>{const _={...I,isPositioned:B.current!==!1};$.current&&!Io(C.current,_)&&(C.current=_,Xo.flushSync(()=>{m(_)}))})},[y,t,s,U,B]);Qi(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(O=>({...O,isPositioned:!1})))},[d]);const $=x.useRef(!1);Qi(()=>($.current=!0,()=>{$.current=!1}),[]),Qi(()=>{if(h&&(k.current=h),N&&(S.current=N),h&&N){if(A.current)return A.current(h,N,D);D()}},[h,N,D,A,M]);const W=x.useMemo(()=>({reference:k,floating:S,setReference:g,setFloating:f}),[g,f]),E=x.useMemo(()=>({reference:h,floating:N}),[h,N]),T=x.useMemo(()=>{const O={position:s,left:0,top:0};if(!E.floating)return O;const I=Ym(E.floating,u.x),_=Ym(E.floating,u.y);return l?{...O,transform:"translate("+I+"px, "+_+"px)",...Ix(E.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:I,top:_}},[s,l,E.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:D,refs:W,elements:E,floatingStyles:T}),[u,D,W,E,T])}const w2=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:a}=typeof e=="function"?e(s):e;return r&&t(r)?r.current!=null?Qm({element:r.current,padding:a}).fn(s):{}:r?Qm({element:r,padding:a}).fn(s):{}}}},j2=(e,t)=>({...u2(e),options:[e,t]}),N2=(e,t)=>({...h2(e),options:[e,t]}),S2=(e,t)=>({...g2(e),options:[e,t]}),k2=(e,t)=>({...m2(e),options:[e,t]}),_2=(e,t)=>({...f2(e),options:[e,t]}),C2=(e,t)=>({...p2(e),options:[e,t]}),E2=(e,t)=>({...w2(e),options:[e,t]});var T2="Arrow",Mx=x.forwardRef((e,t)=>{const{children:s,width:r=10,height:a=5,...i}=e;return n.jsx(Be.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Mx.displayName=T2;var O2=Mx;function A2(e){const[t,s]=x.useState(void 0);return hs(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else s(void 0)},[e]),t}var qu="Popper",[Rx,Dx]=Wr(qu),[P2,$x]=Rx(qu),Lx=e=>{const{__scopePopper:t,children:s}=e,[r,a]=x.useState(null);return n.jsx(P2,{scope:t,anchor:r,onAnchorChange:a,children:s})};Lx.displayName=qu;var Fx="PopperAnchor",zx=x.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:r,...a}=e,i=$x(Fx,s),o=x.useRef(null),l=Nt(t,o);return x.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(Be.div,{...a,ref:l})});zx.displayName=Fx;var Bu="PopperContent",[I2,M2]=Rx(Bu),Ux=x.forwardRef((e,t)=>{var le,ee,ne,de,te,he;const{__scopePopper:s,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:j="optimized",onPlaced:b,...v}=e,w=$x(Bu,s),[p,g]=x.useState(null),f=Nt(t,q=>g(q)),[h,N]=x.useState(null),k=A2(h),S=(k==null?void 0:k.width)??0,C=(k==null?void 0:k.height)??0,M=r+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},U=Array.isArray(d)?d:[d],B=U.length>0,D={padding:A,boundary:U.filter(D2),altBoundary:B},{refs:$,floatingStyles:W,placement:E,isPositioned:T,middlewareData:O}=v2({strategy:"fixed",placement:M,whileElementsMounted:(...q)=>d2(...q,{animationFrame:j==="always"}),elements:{reference:w.anchor},middleware:[j2({mainAxis:a+C,alignmentAxis:o}),c&&N2({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?S2():void 0,...D}),c&&k2({...D}),_2({...D,apply:({elements:q,rects:J,availableWidth:ie,availableHeight:ye})=>{const{width:we,height:Rt}=J.reference,Gt=q.floating.style;Gt.setProperty("--radix-popper-available-width",`${ie}px`),Gt.setProperty("--radix-popper-available-height",`${ye}px`),Gt.setProperty("--radix-popper-anchor-width",`${we}px`),Gt.setProperty("--radix-popper-anchor-height",`${Rt}px`)}}),h&&E2({element:h,padding:l}),$2({arrowWidth:S,arrowHeight:C}),y&&C2({strategy:"referenceHidden",...D})]}),[I,_]=Bx(E),R=Ln(b);hs(()=>{T&&(R==null||R())},[T,R]);const P=(le=O.arrow)==null?void 0:le.x,F=(ee=O.arrow)==null?void 0:ee.y,L=((ne=O.arrow)==null?void 0:ne.centerOffset)!==0,[Y,G]=x.useState();return hs(()=>{p&&G(window.getComputedStyle(p).zIndex)},[p]),n.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:T?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(de=O.transformOrigin)==null?void 0:de.x,(te=O.transformOrigin)==null?void 0:te.y].join(" "),...((he=O.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(I2,{scope:s,placedSide:I,onArrowChange:N,arrowX:P,arrowY:F,shouldHideArrow:L,children:n.jsx(Be.div,{"data-side":I,"data-align":_,...v,ref:f,style:{...v.style,animation:T?void 0:"none"}})})})});Ux.displayName=Bu;var Wx="PopperArrow",R2={top:"bottom",right:"left",bottom:"top",left:"right"},qx=x.forwardRef(function(t,s){const{__scopePopper:r,...a}=t,i=M2(Wx,r),o=R2[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(O2,{...a,ref:s,style:{...a.style,display:"block"}})})});qx.displayName=Wx;function D2(e){return e!==null}var $2=e=>({name:"transformOrigin",options:e,fn(t){var w,p,g;const{placement:s,rects:r,middlewareData:a}=t,o=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=Bx(s),m={start:"0%",center:"50%",end:"100%"}[u],y=(((p=a.arrow)==null?void 0:p.x)??0)+l/2,j=(((g=a.arrow)==null?void 0:g.y)??0)+c/2;let b="",v="";return d==="bottom"?(b=o?m:`${y}px`,v=`${-c}px`):d==="top"?(b=o?m:`${y}px`,v=`${r.floating.height+c}px`):d==="right"?(b=`${-c}px`,v=o?m:`${j}px`):d==="left"&&(b=`${r.floating.width+c}px`,v=o?m:`${j}px`),{data:{x:b,y:v}}}});function Bx(e){const[t,s="center"]=e.split("-");return[t,s]}var L2=Lx,F2=zx,z2=Ux,U2=qx,W2="Portal",Hx=x.forwardRef((e,t)=>{var l;const{container:s,...r}=e,[a,i]=x.useState(!1);hs(()=>i(!0),[]);const o=s||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?kv.createPortal(n.jsx(Be.div,{...r,ref:t}),o):null});Hx.displayName=W2;var q2=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},er=new WeakMap,Pi=new WeakMap,Ii={},lc=0,Gx=function(e){return e&&(e.host||Gx(e.parentNode))},B2=function(e,t){return t.map(function(s){if(e.contains(s))return s;var r=Gx(s);return r&&e.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},H2=function(e,t,s,r){var a=B2(t,Array.isArray(e)?e:[e]);Ii[s]||(Ii[s]=new WeakMap);var i=Ii[s],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(y){if(l.has(y))u(y);else try{var j=y.getAttribute(r),b=j!==null&&j!=="false",v=(er.get(y)||0)+1,w=(i.get(y)||0)+1;er.set(y,v),i.set(y,w),o.push(y),v===1&&b&&Pi.set(y,!0),w===1&&y.setAttribute(s,"true"),b||y.setAttribute(r,"true")}catch(p){console.error("aria-hidden: cannot operate on ",y,p)}})};return u(t),l.clear(),lc++,function(){o.forEach(function(m){var y=er.get(m)-1,j=i.get(m)-1;er.set(m,y),i.set(m,j),y||(Pi.has(m)||m.removeAttribute(r),Pi.delete(m)),j||m.removeAttribute(s)}),lc--,lc||(er=new WeakMap,er=new WeakMap,Pi=new WeakMap,Ii={})}},G2=function(e,t,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=q2(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),H2(r,a,s,"aria-hidden")):function(){return null}},fn=function(){return fn=Object.assign||function(t){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},fn.apply(this,arguments)};function Vx(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s}function V2(e,t,s){if(s||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Yi="right-scroll-bar-position",Ji="width-before-scroll-bar",K2="with-scroll-bars-hidden",Q2="--removed-body-scroll-bar-size";function cc(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Y2(e,t){var s=x.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(r){var a=s.value;a!==r&&(s.value=r,s.callback(r,a))}}}})[0];return s.callback=t,s.facade}var J2=typeof window<"u"?x.useLayoutEffect:x.useEffect,Jm=new WeakMap;function X2(e,t){var s=Y2(null,function(r){return e.forEach(function(a){return cc(a,r)})});return J2(function(){var r=Jm.get(s);if(r){var a=new Set(r),i=new Set(e),o=s.current;a.forEach(function(l){i.has(l)||cc(l,null)}),i.forEach(function(l){a.has(l)||cc(l,o)})}Jm.set(s,e)},[e]),s}function Z2(e){return e}function ek(e,t){t===void 0&&(t=Z2);var s=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(i){var o=t(i,r);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){r=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return a}function tk(e){e===void 0&&(e={});var t=ek(null);return t.options=fn({async:!0,ssr:!1},e),t}var Kx=function(e){var t=e.sideCar,s=Vx(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,fn({},s))};Kx.isSideCarExport=!0;function nk(e,t){return e.useMedium(t),Kx}var Qx=tk(),dc=function(){},pl=x.forwardRef(function(e,t){var s=x.useRef(null),r=x.useState({onScrollCapture:dc,onWheelCapture:dc,onTouchMoveCapture:dc}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,y=e.sideCar,j=e.noRelative,b=e.noIsolation,v=e.inert,w=e.allowPinchZoom,p=e.as,g=p===void 0?"div":p,f=e.gapMode,h=Vx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=y,k=X2([s,t]),S=fn(fn({},h),a);return x.createElement(x.Fragment,null,u&&x.createElement(N,{sideCar:Qx,removeScrollBar:d,shards:m,noRelative:j,noIsolation:b,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:s,gapMode:f}),o?x.cloneElement(x.Children.only(l),fn(fn({},S),{ref:k})):x.createElement(g,fn({},S,{className:c,ref:k}),l))});pl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pl.classNames={fullWidth:Ji,zeroRight:Yi};var sk=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rk(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sk();return t&&e.setAttribute("nonce",t),e}function ak(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ik(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ok=function(){var e=0,t=null;return{add:function(s){e==0&&(t=rk())&&(ak(t,s),ik(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},lk=function(){var e=ok();return function(t,s){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},Yx=function(){var e=lk(),t=function(s){var r=s.styles,a=s.dynamic;return e(r,a),null};return t},ck={left:0,top:0,right:0,gap:0},uc=function(e){return parseInt(e||"",10)||0},dk=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[uc(s),uc(r),uc(a)]},uk=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ck;var t=dk(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},hk=Yx(),kr="data-scroll-locked",mk=function(e,t,s,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(K2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(kr,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yi,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ji,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yi," .").concat(Yi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ji," .").concat(Ji,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kr,`] {
    `).concat(Q2,": ").concat(l,`px;
  }
`)},Xm=function(){var e=parseInt(document.body.getAttribute(kr)||"0",10);return isFinite(e)?e:0},fk=function(){x.useEffect(function(){return document.body.setAttribute(kr,(Xm()+1).toString()),function(){var e=Xm()-1;e<=0?document.body.removeAttribute(kr):document.body.setAttribute(kr,e.toString())}},[])},pk=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;fk();var i=x.useMemo(function(){return uk(a)},[a]);return x.createElement(hk,{styles:mk(i,!t,a,s?"":"!important")})},Sd=!1;if(typeof window<"u")try{var Mi=Object.defineProperty({},"passive",{get:function(){return Sd=!0,!0}});window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Sd=!1}var tr=Sd?{passive:!1}:!1,gk=function(e){return e.tagName==="TEXTAREA"},Jx=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!gk(e)&&s[t]==="visible")},xk=function(e){return Jx(e,"overflowY")},yk=function(e){return Jx(e,"overflowX")},Zm=function(e,t){var s=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Xx(e,r);if(a){var i=Zx(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},bk=function(e){var t=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[t,s,r]},vk=function(e){var t=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[t,s,r]},Xx=function(e,t){return e==="v"?xk(t):yk(t)},Zx=function(e,t){return e==="v"?bk(t):vk(t)},wk=function(e,t){return e==="h"&&t==="rtl"?-1:1},jk=function(e,t,s,r,a){var i=wk(e,window.getComputedStyle(t).direction),o=i*r,l=s.target,c=t.contains(l),d=!1,u=o>0,m=0,y=0;do{if(!l)break;var j=Zx(e,l),b=j[0],v=j[1],w=j[2],p=v-w-i*b;(b||p)&&Xx(e,l)&&(m+=p,y+=b);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(m)<1||!u&&Math.abs(y)<1)&&(d=!0),d},Ri=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ef=function(e){return[e.deltaX,e.deltaY]},tf=function(e){return e&&"current"in e?e.current:e},Nk=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Sk=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},kk=0,nr=[];function _k(e){var t=x.useRef([]),s=x.useRef([0,0]),r=x.useRef(),a=x.useState(kk++)[0],i=x.useState(Yx)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=V2([e.lockRef.current],(e.shards||[]).map(tf),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var p=Ri(v),g=s.current,f="deltaX"in v?v.deltaX:g[0]-p[0],h="deltaY"in v?v.deltaY:g[1]-p[1],N,k=v.target,S=Math.abs(f)>Math.abs(h)?"h":"v";if("touches"in v&&S==="h"&&k.type==="range")return!1;var C=Zm(S,k);if(!C)return!0;if(C?N=S:(N=S==="v"?"h":"v",C=Zm(S,k)),!C)return!1;if(!r.current&&"changedTouches"in v&&(f||h)&&(r.current=N),!N)return!0;var M=r.current||N;return jk(M,w,v,M==="h"?f:h)},[]),c=x.useCallback(function(v){var w=v;if(!(!nr.length||nr[nr.length-1]!==i)){var p="deltaY"in w?ef(w):Ri(w),g=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&Nk(N.delta,p)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var f=(o.current.shards||[]).map(tf).filter(Boolean).filter(function(N){return N.contains(w.target)}),h=f.length>0?l(w,f[0]):!o.current.noIsolation;h&&w.cancelable&&w.preventDefault()}}},[]),d=x.useCallback(function(v,w,p,g){var f={name:v,delta:w,target:p,should:g,shadowParent:Ck(p)};t.current.push(f),setTimeout(function(){t.current=t.current.filter(function(h){return h!==f})},1)},[]),u=x.useCallback(function(v){s.current=Ri(v),r.current=void 0},[]),m=x.useCallback(function(v){d(v.type,ef(v),v.target,l(v,e.lockRef.current))},[]),y=x.useCallback(function(v){d(v.type,Ri(v),v.target,l(v,e.lockRef.current))},[]);x.useEffect(function(){return nr.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",c,tr),document.addEventListener("touchmove",c,tr),document.addEventListener("touchstart",u,tr),function(){nr=nr.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,tr),document.removeEventListener("touchmove",c,tr),document.removeEventListener("touchstart",u,tr)}},[]);var j=e.removeScrollBar,b=e.inert;return x.createElement(x.Fragment,null,b?x.createElement(i,{styles:Sk(a)}):null,j?x.createElement(pk,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ck(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ek=nk(Qx,_k);var e0=x.forwardRef(function(e,t){return x.createElement(pl,fn({},e,{ref:t,sideCar:Ek}))});e0.classNames=pl.classNames;var kd=["Enter"," "],Tk=["ArrowDown","PageUp","Home"],t0=["ArrowUp","PageDown","End"],Ok=[...Tk,...t0],Ak={ltr:[...kd,"ArrowRight"],rtl:[...kd,"ArrowLeft"]},Pk={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ai="Menu",[Ha,Ik,Mk]=Kg(ai),[Hs,n0]=Wr(ai,[Mk,Dx,cl]),gl=Dx(),s0=cl(),[Rk,Gs]=Hs(ai),[Dk,ii]=Hs(ai),r0=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=gl(t),[c,d]=x.useState(null),u=x.useRef(!1),m=Ln(i),y=Pu(a);return x.useEffect(()=>{const j=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),n.jsx(L2,{...l,children:n.jsx(Rk,{scope:t,open:s,onOpenChange:m,content:c,onContentChange:d,children:n.jsx(Dk,{scope:t,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:y,modal:o,children:r})})})};r0.displayName=ai;var $k="MenuAnchor",Hu=x.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,a=gl(s);return n.jsx(F2,{...a,...r,ref:t})});Hu.displayName=$k;var Gu="MenuPortal",[Lk,a0]=Hs(Gu,{forceMount:void 0}),i0=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:a}=e,i=Gs(Gu,t);return n.jsx(Lk,{scope:t,forceMount:s,children:n.jsx(qr,{present:s||i.open,children:n.jsx(Hx,{asChild:!0,container:a,children:r})})})};i0.displayName=Gu;var Wt="MenuContent",[Fk,Vu]=Hs(Wt),o0=x.forwardRef((e,t)=>{const s=a0(Wt,e.__scopeMenu),{forceMount:r=s.forceMount,...a}=e,i=Gs(Wt,e.__scopeMenu),o=ii(Wt,e.__scopeMenu);return n.jsx(Ha.Provider,{scope:e.__scopeMenu,children:n.jsx(qr,{present:r||i.open,children:n.jsx(Ha.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(zk,{...a,ref:t}):n.jsx(Uk,{...a,ref:t})})})})}),zk=x.forwardRef((e,t)=>{const s=Gs(Wt,e.__scopeMenu),r=x.useRef(null),a=Nt(t,r);return x.useEffect(()=>{const i=r.current;if(i)return G2(i)},[]),n.jsx(Ku,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:ge(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),Uk=x.forwardRef((e,t)=>{const s=Gs(Wt,e.__scopeMenu);return n.jsx(Ku,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),Wk=Co("MenuContent.ScrollLock"),Ku=x.forwardRef((e,t)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:y,onDismiss:j,disableOutsideScroll:b,...v}=e,w=Gs(Wt,s),p=ii(Wt,s),g=gl(s),f=s0(s),h=Ik(s),[N,k]=x.useState(null),S=x.useRef(null),C=Nt(t,S,w.onContentChange),M=x.useRef(0),A=x.useRef(""),U=x.useRef(0),B=x.useRef(null),D=x.useRef("right"),$=x.useRef(0),W=b?e0:x.Fragment,E=b?{as:Wk,allowPinchZoom:!0}:void 0,T=I=>{var le,ee;const _=A.current+I,R=h().filter(ne=>!ne.disabled),P=document.activeElement,F=(le=R.find(ne=>ne.ref.current===P))==null?void 0:le.textValue,L=R.map(ne=>ne.textValue),Y=e_(L,_,F),G=(ee=R.find(ne=>ne.textValue===Y))==null?void 0:ee.ref.current;(function ne(de){A.current=de,window.clearTimeout(M.current),de!==""&&(M.current=window.setTimeout(()=>ne(""),1e3))})(_),G&&setTimeout(()=>G.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),jS();const O=x.useCallback(I=>{var R,P;return D.current===((R=B.current)==null?void 0:R.side)&&n_(I,(P=B.current)==null?void 0:P.area)},[]);return n.jsx(Fk,{scope:s,searchRef:A,onItemEnter:x.useCallback(I=>{O(I)&&I.preventDefault()},[O]),onItemLeave:x.useCallback(I=>{var _;O(I)||((_=S.current)==null||_.focus(),k(null))},[O]),onTriggerLeave:x.useCallback(I=>{O(I)&&I.preventDefault()},[O]),pointerGraceTimerRef:U,onPointerGraceIntentChange:x.useCallback(I=>{B.current=I},[]),children:n.jsx(W,{...E,children:n.jsx(jx,{asChild:!0,trapped:a,onMountAutoFocus:ge(i,I=>{var _;I.preventDefault(),(_=S.current)==null||_.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(vx,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:y,onDismiss:j,children:n.jsx(tx,{asChild:!0,...f,dir:p.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:k,onEntryFocus:ge(c,I=>{p.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(z2,{role:"menu","aria-orientation":"vertical","data-state":N0(w.open),"data-radix-menu-content":"",dir:p.dir,...g,...v,ref:C,style:{outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,I=>{const R=I.target.closest("[data-radix-menu-content]")===I.currentTarget,P=I.ctrlKey||I.altKey||I.metaKey,F=I.key.length===1;R&&(I.key==="Tab"&&I.preventDefault(),!P&&F&&T(I.key));const L=S.current;if(I.target!==L||!Ok.includes(I.key))return;I.preventDefault();const G=h().filter(le=>!le.disabled).map(le=>le.ref.current);t0.includes(I.key)&&G.reverse(),Xk(G)}),onBlur:ge(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(M.current),A.current="")}),onPointerMove:ge(e.onPointerMove,Ga(I=>{const _=I.target,R=$.current!==I.clientX;if(I.currentTarget.contains(_)&&R){const P=I.clientX>$.current?"right":"left";D.current=P,$.current=I.clientX}}))})})})})})})});o0.displayName=Wt;var qk="MenuGroup",Qu=x.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Be.div,{role:"group",...r,ref:t})});Qu.displayName=qk;var Bk="MenuLabel",l0=x.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Be.div,{...r,ref:t})});l0.displayName=Bk;var Mo="MenuItem",nf="menu.itemSelect",xl=x.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:r,...a}=e,i=x.useRef(null),o=ii(Mo,e.__scopeMenu),l=Vu(Mo,e.__scopeMenu),c=Nt(t,i),d=x.useRef(!1),u=()=>{const m=i.current;if(!s&&m){const y=new CustomEvent(nf,{bubbles:!0,cancelable:!0});m.addEventListener(nf,j=>r==null?void 0:r(j),{once:!0}),Qg(m,y),y.defaultPrevented?d.current=!1:o.onClose()}};return n.jsx(c0,{...a,ref:c,disabled:s,onClick:ge(e.onClick,u),onPointerDown:m=>{var y;(y=e.onPointerDown)==null||y.call(e,m),d.current=!0},onPointerUp:ge(e.onPointerUp,m=>{var y;d.current||(y=m.currentTarget)==null||y.click()}),onKeyDown:ge(e.onKeyDown,m=>{const y=l.searchRef.current!=="";s||y&&m.key===" "||kd.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});xl.displayName=Mo;var c0=x.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:r=!1,textValue:a,...i}=e,o=Vu(Mo,s),l=s0(s),c=x.useRef(null),d=Nt(t,c),[u,m]=x.useState(!1),[y,j]=x.useState("");return x.useEffect(()=>{const b=c.current;b&&j((b.textContent??"").trim())},[i.children]),n.jsx(Ha.ItemSlot,{scope:s,disabled:r,textValue:a??y,children:n.jsx(nx,{asChild:!0,...l,focusable:!r,children:n.jsx(Be.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:ge(e.onPointerMove,Ga(b=>{r?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(e.onPointerLeave,Ga(b=>o.onItemLeave(b))),onFocus:ge(e.onFocus,()=>m(!0)),onBlur:ge(e.onBlur,()=>m(!1))})})})}),Hk="MenuCheckboxItem",d0=x.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:r,...a}=e;return n.jsx(p0,{scope:e.__scopeMenu,checked:s,children:n.jsx(xl,{role:"menuitemcheckbox","aria-checked":Ro(s)?"mixed":s,...a,ref:t,"data-state":Ju(s),onSelect:ge(a.onSelect,()=>r==null?void 0:r(Ro(s)?!0:!s),{checkForDefaultPrevented:!1})})})});d0.displayName=Hk;var u0="MenuRadioGroup",[Gk,Vk]=Hs(u0,{value:void 0,onValueChange:()=>{}}),h0=x.forwardRef((e,t)=>{const{value:s,onValueChange:r,...a}=e,i=Ln(r);return n.jsx(Gk,{scope:e.__scopeMenu,value:s,onValueChange:i,children:n.jsx(Qu,{...a,ref:t})})});h0.displayName=u0;var m0="MenuRadioItem",f0=x.forwardRef((e,t)=>{const{value:s,...r}=e,a=Vk(m0,e.__scopeMenu),i=s===a.value;return n.jsx(p0,{scope:e.__scopeMenu,checked:i,children:n.jsx(xl,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Ju(i),onSelect:ge(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,s)},{checkForDefaultPrevented:!1})})})});f0.displayName=m0;var Yu="MenuItemIndicator",[p0,Kk]=Hs(Yu,{checked:!1}),g0=x.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:r,...a}=e,i=Kk(Yu,s);return n.jsx(qr,{present:r||Ro(i.checked)||i.checked===!0,children:n.jsx(Be.span,{...a,ref:t,"data-state":Ju(i.checked)})})});g0.displayName=Yu;var Qk="MenuSeparator",x0=x.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Be.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});x0.displayName=Qk;var Yk="MenuArrow",y0=x.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,a=gl(s);return n.jsx(U2,{...a,...r,ref:t})});y0.displayName=Yk;var Jk="MenuSub",[oC,b0]=Hs(Jk),la="MenuSubTrigger",v0=x.forwardRef((e,t)=>{const s=Gs(la,e.__scopeMenu),r=ii(la,e.__scopeMenu),a=b0(la,e.__scopeMenu),i=Vu(la,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),n.jsx(Hu,{asChild:!0,...d,children:n.jsx(c0,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":N0(s.open),...e,ref:ll(t,a.onTriggerChange),onClick:m=>{var y;(y=e.onClick)==null||y.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:ge(e.onPointerMove,Ga(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:ge(e.onPointerLeave,Ga(m=>{var j,b;u();const y=(j=s.content)==null?void 0:j.getBoundingClientRect();if(y){const v=(b=s.content)==null?void 0:b.dataset.side,w=v==="right",p=w?-5:5,g=y[w?"left":"right"],f=y[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+p,y:m.clientY},{x:g,y:y.top},{x:f,y:y.top},{x:f,y:y.bottom},{x:g,y:y.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ge(e.onKeyDown,m=>{var j;const y=i.searchRef.current!=="";e.disabled||y&&m.key===" "||Ak[r.dir].includes(m.key)&&(s.onOpenChange(!0),(j=s.content)==null||j.focus(),m.preventDefault())})})})});v0.displayName=la;var w0="MenuSubContent",j0=x.forwardRef((e,t)=>{const s=a0(Wt,e.__scopeMenu),{forceMount:r=s.forceMount,...a}=e,i=Gs(Wt,e.__scopeMenu),o=ii(Wt,e.__scopeMenu),l=b0(w0,e.__scopeMenu),c=x.useRef(null),d=Nt(t,c);return n.jsx(Ha.Provider,{scope:e.__scopeMenu,children:n.jsx(qr,{present:r||i.open,children:n.jsx(Ha.Slot,{scope:e.__scopeMenu,children:n.jsx(Ku,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;o.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ge(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ge(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ge(e.onKeyDown,u=>{var j;const m=u.currentTarget.contains(u.target),y=Pk[o.dir].includes(u.key);m&&y&&(i.onOpenChange(!1),(j=l.trigger)==null||j.focus(),u.preventDefault())})})})})})});j0.displayName=w0;function N0(e){return e?"open":"closed"}function Ro(e){return e==="indeterminate"}function Ju(e){return Ro(e)?"indeterminate":e?"checked":"unchecked"}function Xk(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function Zk(e,t){return e.map((s,r)=>e[(t+r)%e.length])}function e_(e,t,s){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=s?e.indexOf(s):-1;let o=Zk(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function t_(e,t){const{x:s,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,m=c.x,y=c.y;u>r!=y>r&&s<(m-d)*(r-u)/(y-u)+d&&(a=!a)}return a}function n_(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return t_(s,t)}function Ga(e){return t=>t.pointerType==="mouse"?e(t):void 0}var s_=r0,r_=Hu,a_=i0,i_=o0,o_=Qu,l_=l0,c_=xl,d_=d0,u_=h0,h_=f0,m_=g0,f_=x0,p_=y0,g_=v0,x_=j0,yl="DropdownMenu",[y_,lC]=Wr(yl,[n0]),ft=n0(),[b_,S0]=y_(yl),k0=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ft(t),d=x.useRef(null),[u,m]=Au({prop:a,defaultProp:i??!1,onChange:o,caller:yl});return n.jsx(b_,{scope:t,triggerId:Eo(),triggerRef:d,contentId:Eo(),open:u,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(y=>!y),[m]),modal:l,children:n.jsx(s_,{...c,open:u,onOpenChange:m,dir:r,modal:l,children:s})})};k0.displayName=yl;var _0="DropdownMenuTrigger",C0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...a}=e,i=S0(_0,s),o=ft(s);return n.jsx(r_,{asChild:!0,...o,children:n.jsx(Be.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ll(t,i.triggerRef),onPointerDown:ge(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ge(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});C0.displayName=_0;var v_="DropdownMenuPortal",E0=e=>{const{__scopeDropdownMenu:t,...s}=e,r=ft(t);return n.jsx(a_,{...r,...s})};E0.displayName=v_;var T0="DropdownMenuContent",O0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=S0(T0,s),i=ft(s),o=x.useRef(!1);return n.jsx(i_,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:ge(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ge(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O0.displayName=T0;var w_="DropdownMenuGroup",j_=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(o_,{...a,...r,ref:t})});j_.displayName=w_;var N_="DropdownMenuLabel",A0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(l_,{...a,...r,ref:t})});A0.displayName=N_;var S_="DropdownMenuItem",P0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(c_,{...a,...r,ref:t})});P0.displayName=S_;var k_="DropdownMenuCheckboxItem",I0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(d_,{...a,...r,ref:t})});I0.displayName=k_;var __="DropdownMenuRadioGroup",C_=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(u_,{...a,...r,ref:t})});C_.displayName=__;var E_="DropdownMenuRadioItem",M0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(h_,{...a,...r,ref:t})});M0.displayName=E_;var T_="DropdownMenuItemIndicator",R0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(m_,{...a,...r,ref:t})});R0.displayName=T_;var O_="DropdownMenuSeparator",D0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(f_,{...a,...r,ref:t})});D0.displayName=O_;var A_="DropdownMenuArrow",P_=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(p_,{...a,...r,ref:t})});P_.displayName=A_;var I_="DropdownMenuSubTrigger",$0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(g_,{...a,...r,ref:t})});$0.displayName=I_;var M_="DropdownMenuSubContent",L0=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=ft(s);return n.jsx(x_,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});L0.displayName=M_;var R_=k0,D_=C0,$_=E0,F0=O0,z0=A0,U0=P0,W0=I0,q0=M0,B0=R0,H0=D0,G0=$0,V0=L0;const L_=R_,F_=D_,z_=x.forwardRef(({className:e,...t},s)=>n.jsx(G0,{ref:s,className:`flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 data-[state=open]:bg-gray-100 ${e}`,...t}));z_.displayName=G0.displayName;const U_=x.forwardRef(({className:e,...t},s)=>n.jsx(V0,{ref:s,className:`z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ${e}`,...t}));U_.displayName=V0.displayName;const K0=x.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx($_,{children:n.jsx(F0,{ref:r,sideOffset:t,className:`z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 shadow-md ${e}`,...s})}));K0.displayName=F0.displayName;const Q0=x.forwardRef(({className:e,...t},s)=>n.jsx(U0,{ref:s,className:`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e}`,...t}));Q0.displayName=U0.displayName;const W_=x.forwardRef(({className:e,children:t,checked:s,...r},a)=>n.jsxs(W0,{ref:a,className:`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e}`,checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(B0,{children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:n.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),t]}));W_.displayName=W0.displayName;const q_=x.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(q0,{ref:r,className:`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e}`,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(B0,{children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-2 w-2 fill-current",children:n.jsx("circle",{cx:"12",cy:"12",r:"12"})})})}),t]}));q_.displayName=q0.displayName;const B_=x.forwardRef(({className:e,...t},s)=>n.jsx(z0,{ref:s,className:`px-2 py-1.5 text-sm font-semibold ${e}`,...t}));B_.displayName=z0.displayName;const H_=x.forwardRef(({className:e,...t},s)=>n.jsx(H0,{ref:s,className:`-mx-1 my-1 h-px bg-gray-100 ${e}`,...t}));H_.displayName=H0.displayName;const G_=({onSubjectChange:e,currentSubject:t})=>{const[s,r]=x.useState([]),[a,i]=x.useState(!0);x.useEffect(()=>{o()},[]);const o=async()=>{i(!0);try{const{data:d,error:u}=await Z.from("subjects").select("*").eq("is_active",!0).order("name");if(u)throw u;if(d&&d.length>0){const m=d.map(y=>{const j=To.find(b=>b.id===y.id);return{id:y.id,name:y.name,nameEn:y.name_en,icon:y.icon,color:y.color,description:y.description,isActive:y.is_active,activities:(j==null?void 0:j.activities)||[],createdAt:y.created_at,updatedAt:y.updated_at}});console.log("Formatted subjects from Supabase:",m),r(m),!t&&m.length>0&&e(m[0])}else{const m=l();console.log("Using default subjects:",m),r(m),!t&&m.length>0&&e(m[0])}}catch(d){console.error("Error loading subjects:",d);const u=l();console.log("Error fallback - using default subjects:",u),r(u),!t&&u.length>0&&e(u[0])}finally{i(!1)}},l=()=>To,c=d=>d.includes("blue")?"bg-blue-100":d.includes("green")?"bg-green-100":d.includes("purple")?"bg-purple-100":d.includes("emerald")?"bg-emerald-100":d.includes("amber")?"bg-amber-100":d.includes("red")?"bg-red-100":d.includes("pink")?"bg-pink-100":"bg-gray-100";return n.jsxs(L_,{children:[n.jsxs(F_,{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[a?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}),n.jsx("span",{children:"جاري التحميل..."})]}):t?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xl",children:t.icon}),n.jsx("span",{children:t.name})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(za,{className:"w-5 h-5"}),n.jsx("span",{children:"اختر المادة"})]}),n.jsx(id,{className:"w-4 h-4 opacity-50"})]}),n.jsx(K0,{align:"end",className:"w-56",children:s.map(d=>n.jsx(Q0,{onClick:()=>e(d),className:"cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:`p-2 rounded-lg ${c(d.color)}`,children:n.jsx("span",{className:"text-xl",children:d.icon})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold",children:d.name}),n.jsx("span",{className:"text-xs text-gray-500",children:d.nameEn})]})]})},d.id))})]})},V_=({subject:e,grade:t,onUnitSelect:s,getUnitProgress:r,getSubjectProgress:a})=>{const[i,o]=x.useState(null),[l,c]=x.useState([]),[d,u]=x.useState(!0);x.useEffect(()=>{m()},[e,t]);const m=async()=>{if(u(!0),e.id==="english"){const h=ul(t),N=Tu(t),S=Mu(t).map((C,M)=>{const A=h.filter(B=>B.unit===C),U=N.filter(B=>B.unit===C);return{name:y(C),nameEn:C,description:j(C),icon:b(C,M),color:v(M),words:A,grammar:U,difficulty:w(A.length,U.length),estimatedTime:p(A.length,U.length),totalWords:A.length}});c(S)}else c([]);u(!1)},y=(h,N)=>({"Welcome Back":"مرحباً بالعودة","Talent Show":"عرض المواهب","Then and Now":"الآن والماضي","Let's Explore!":"هيا نستكشف!","Off to the Shops":"إلى المتاجر","Adventure Stories":"قصص المغامرة","Science and Nature":"العلوم والطبيعة","Technology and Communication":"التكنولوجيا والتواصل","Health and Fitness":"الصحة واللياقة","Community and Culture":"المجتمع والثقافة",Family:"العائلة",Animals:"الحيوانات",Colors:"الألوان",Numbers:"الأرقام","Body Parts":"أجزاء الجسم",Food:"الطعام",School:"المدرسة",Home:"المنزل",Toys:"الألعاب",Weather:"الطقس"})[h]||h,j=(h,N)=>({"Welcome Back":"تعلم كلمات الترحيب والعودة للمدرسة","Talent Show":"اكتشف كلمات المواهب والعروض","Then and Now":"قارن بين الماضي والحاضر","Let's Explore!":"انطلق في رحلة استكشافية مثيرة","Off to the Shops":"تعلم كلمات التسوق والأسعار","Adventure Stories":"اقرأ قصص المغامرة المشوقة","Science and Nature":"اكتشف عجائب العلوم والطبيعة","Technology and Communication":"تعرف على التكنولوجيا الحديثة","Health and Fitness":"تعلم أهمية الصحة والرياضة","Community and Culture":"اكتشف ثقافات المجتمع",Family:"تعرف على أفراد العائلة",Animals:"اكتشف عالم الحيوانات",Colors:"تعلم الألوان الجميلة",Numbers:"العد والأرقام","Body Parts":"أجزاء جسم الإنسان",Food:"أنواع الطعام المختلفة"})[h]||"وحدة تعليمية تفاعلية",b=(h,N)=>({"Welcome Back":"👋","Talent Show":"🎭","Then and Now":"⏰","Let's Explore!":"🧭","Off to the Shops":"🛍️","Adventure Stories":"📚","Science and Nature":"🔬","Technology and Communication":"💻","Health and Fitness":"💪","Community and Culture":"🏛️",Family:"👨‍👩‍👧‍👦",Animals:"🦁",Colors:"🎨",Numbers:"🔢","Body Parts":"👤",Food:"🍎",School:"🏫",Home:"🏠",Toys:"🧸",Weather:"🌤️"})[h]||["📖","📝","📚","📋","📊"][N%5],v=h=>{const N=["from-blue-400 to-blue-600","from-green-400 to-green-600","from-purple-400 to-purple-600","from-orange-400 to-orange-600","from-pink-400 to-pink-600","from-teal-400 to-teal-600","from-indigo-400 to-indigo-600","from-red-400 to-red-600","from-yellow-400 to-yellow-600","from-cyan-400 to-cyan-600"];return N[h%N.length]},w=(h,N)=>{const k=h+N*2;return k<15?"easy":k<25?"medium":"hard"},p=(h,N)=>{const k=Math.max(15,h*2+N*5);if(k<60)return`${k} دقيقة`;const S=Math.floor(k/60),C=k%60;return`${S} ساعة ${C>0?`${C} دقيقة`:""}`},g=h=>{const k={easy:{text:"سهل",color:"bg-green-100 text-green-800",icon:"🟢"},medium:{text:"متوسط",color:"bg-yellow-100 text-yellow-800",icon:"🟡"},hard:{text:"صعب",color:"bg-red-100 text-red-800",icon:"🔴"}}[h];return n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${k.color}`,children:[n.jsx("span",{children:k.icon}),k.text]})},f=h=>{h.words.length>0&&(o(h.nameEn),s(h.nameEn,h.words,h.grammar))};if(d)return n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(i){const h=l.find(N=>N.nameEn===i);if(h)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium",children:[n.jsx(lm,{className:"w-5 h-5 rotate-180"}),"العودة للوحدات"]})}),n.jsx(yd,{title:h.name,words:h.words,grammarRules:h.grammar})]})}return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-3 rounded-2xl shadow-lg",children:n.jsx("span",{className:"text-3xl",children:e.icon})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl font-bold text-slate-800",children:["وحدات مادة ",e.name]}),n.jsxs("p",{className:"text-slate-600 mt-2",children:["الصف ",t===0?"الإداري":t]})]})]}),n.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-teal-500 mx-auto rounded-full"})]}),a&&(()=>{const h=a(e.id);return n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border border-blue-200",children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Ls,{className:"w-5 h-5 text-blue-600"}),"تقدمك في هذه المادة"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg p-4",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"النقاط المحققة"}),n.jsx("p",{className:"text-xl font-bold text-slate-800",children:h.totalScore})]})]}),n.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg p-4",children:[n.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:n.jsx(Fe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"الوحدات المكتملة"}),n.jsx("p",{className:"text-xl font-bold text-slate-800",children:h.unitsCompleted})]})]}),n.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg p-4",children:[n.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:n.jsx(ct,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-600",children:"جلسات الدراسة"}),n.jsx("p",{className:"text-xl font-bold text-slate-800",children:h.sessionsCount})]})]})]})]})})(),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((h,N)=>n.jsxs("div",{onClick:()=>f(h),className:`bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group ${h.words.length>0?"cursor-pointer hover:scale-105":"opacity-75 cursor-not-allowed"}`,children:[n.jsxs("div",{className:`bg-gradient-to-r ${h.color} p-6 text-white`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-4xl",children:h.icon}),g(h.difficulty)]}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:h.name}),n.jsx("p",{className:"text-white/90 text-sm",children:h.description})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zs,{className:"w-4 h-4 text-blue-500"}),n.jsxs("span",{className:"text-sm text-slate-600",children:[h.totalWords," كلمة"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dt,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-sm text-slate-600",children:h.estimatedTime})]})]}),r&&(()=>{const k=r(e.id,h.nameEn);return n.jsxs("div",{className:"space-y-2",children:[k.isCompleted&&n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx(Fe,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"مكتملة"})]}),k.totalScore>0&&n.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[n.jsx(Pt,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm",children:[k.totalScore," نقطة"]})]}),k.sessionsCount>0&&n.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[n.jsx(ct,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm",children:[k.sessionsCount," جلسة"]})]})]})})(),h.grammar.length>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(rd,{className:"w-4 h-4 text-purple-500"}),n.jsxs("span",{className:"text-sm text-slate-600",children:[h.grammar.length," قاعدة نحوية"]})]}),h.words.length>0?n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"ابدأ التعلم"}),n.jsxs("div",{className:"flex items-center gap-2 text-blue-600 group-hover:text-blue-800 transition-colors",children:[n.jsx(Za,{className:"w-4 h-4"}),n.jsx(lm,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}):n.jsx("div",{className:"pt-4 border-t border-gray-100",children:n.jsx("span",{className:"text-sm text-slate-500",children:"قريباً..."})})]})})]},h.nameEn))}),l.length===0&&n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full p-8 w-32 h-32 mx-auto mb-6 flex items-center justify-center shadow-lg",children:n.jsx("span",{className:"text-6xl",children:e.icon})}),n.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-4",children:"ليست متوفرة الآن"}),n.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"نعمل على إضافة محتوى هذه المادة"}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 max-w-md mx-auto border border-blue-200",children:[n.jsxs("p",{className:"text-gray-700 text-center",children:[n.jsx("span",{className:"font-semibold",children:"حالياً متوفر:"})," مادة اللغة الإنجليزية فقط"]}),n.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:"باقي المواد قيد التطوير وستكون متاحة قريباً"})]})]})]})};function K_(){const[e,t]=x.useState(null),[s,r]=x.useState(null),[a,i]=x.useState("subjects"),[o,l]=x.useState(null),[c,d]=x.useState(null),[u,m]=x.useState(!1),[y,j]=x.useState(!1),[b,v]=x.useState(null),[w,p]=x.useState(null),{progress:g,achievements:f,addScore:h,updateStreak:N,getSubjectProgress:k,getUnitProgress:S}=yx(e==null?void 0:e.code);x.useEffect(()=>{(async()=>{{j(!1),console.warn("⚠️ Supabase credentials are not configured properly");return}})();const de=new URLSearchParams(window.location.search).get("grade");if(de){const te=parseInt(de,10);window.history.replaceState({},document.title,window.location.pathname),M(te)}},[]);const[C,M]=x.useState(void 0);x.useEffect(()=>{(async()=>{try{await Se.initialize(),console.log("تم تحميل نظام الصوت بنجاح")}catch(ne){console.warn("فشل في تحميل نظام الصوت:",ne)}})()},[]),x.useEffect(()=>{const ee=f.find(ne=>ne.achieved&&(!ne.achievedDate||new Date(ne.achievedDate).getTime()>Date.now()-5e3));ee&&ee!==c&&d(ee)},[f,c]);const A=ee=>{if(t(ee),ee.isTeacher&&ee.teacherId){const ne=Bv(ee.code);ne&&r(ne)}if(ee.isAdmin)i("admin");else{i("subjects");const ne=To.find(de=>de.id==="english");ne&&v(ne)}},U=ee=>{console.log("Subject changed to:",ee),console.log("Subject activities:",ee.activities);let ne=ee;if(!ee.activities||ee.activities.length===0){const de=To.find(te=>te.id===ee.id);de&&(ne={...ee,activities:de.activities},console.log("Fixed subject with activities:",ne))}v(ne),i("subjects"),l(null),p(null)},B=(ee,ne,de)=>{p({name:ee,words:ne,grammar:de||[]})},D=()=>b?b.activities||[]:[],$=ee=>D().includes(ee);if(!e)return n.jsx(cN,{onLogin:A,selectedGrade:C});if(e.isTeacher&&s)return n.jsx(mS,{teacher:s,onLogout:()=>{t(null),r(null)}});if(e.isAdmin&&a==="admin")return n.jsxs("div",{className:`min-h-screen ${Tm(0)}`,dir:"rtl",children:[n.jsx(Om,{progress:g,gradeAccess:e}),n.jsx(Am,{activeTab:a,onTabChange:i,gradeAccess:e,currentSubject:b,onLogout:()=>t(null)}),n.jsx(tS,{})]});const W=e.grade===0?5:e.grade,E=ul(W);Mu(W);const T=Tu(W);Ou(W);const O=ee=>({1:{family:"Family",animals:"Animals",colors:"Colors",numbers:"Numbers",bodyparts:"Body Parts",food:"Food",school:"School"},2:{home:"Home",toysandgames:"Toys and Games",weather:"Weather",clothes:"Clothes",actions:"Actions",transportation:"Transportation",time:"Time"},3:{friendsandfriendship:"Friends and Friendship",sportsandactivities:"Sports and Activities",foodandmeals:"Food and Meals"},4:{natureandenvironment:"Nature and Environment",technologyandcommunication:"Technology and Communication"},5:{welcome:"Welcome Back",talent:"Talent Show",time:"Then and Now",explore:"Let's Explore!",shops:"Off to the Shops",adventure:"Adventure Stories",science:"Science and Nature",technology:"Technology and Communication",health:"Health and Fitness",community:"Community and Culture"},6:{wowteam:"The WOW! Team",freetimefun:"Free-time fun",technology:"Technology",places:"Places"},9:{globalcitizens:"Global Citizens",technologytoday:"Technology Today",healthfitness:"Health and Fitness",careerpaths:"Career Paths",culturalexchange:"Cultural Exchange"},10:{futureaspirations:"Future Aspirations",sciencediscovery:"Science and Discovery",mediacommunication:"Media and Communication",globalchallenges:"Global Challenges",artsculture:"Arts and Culture"},11:{highereducation:"Higher Education",globalization:"Globalization",environmentalsustainability:"Environmental Sustainability",innovationtechnology:"Innovation and Technology",literaturearts:"Literature and Arts"},12:{newsmedia:"News and the Media",workcareers:"Work and Careers",healthsafety:"Health and Safety",citizenship:"Citizenship"}})[ee]||{},I=O(W),_=()=>{if(a==="practice")return E;const ee=I[a];return E.filter(ne=>ne.unit===ee)},R=()=>{if(a==="practice")return T;const ee=I[a];return T.filter(ne=>ne.unit===ee)},P=async ee=>{try{await Se.speak(ee,{emphasis:!0,rate:.85,pitch:1,volume:1}),h(2);const ne=[`🔊 ${ee} - نطق رائع!`,`👂 استمع جيداً لـ ${ee}`,`⭐ ${ee} - أحسنت!`,`🎯 نطق ${ee} واضح!`],de=ne[Math.floor(Math.random()*ne.length)],te=document.createElement("div");te.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold",te.textContent=de,document.body.appendChild(te),setTimeout(()=>{te.style.opacity="0",te.style.transform="translate(-50%, -100%)",setTimeout(()=>{document.body.contains(te)&&document.body.removeChild(te)},300)},3e3)}catch(ne){console.error("خطأ في تشغيل النطق:",ne);let de="❌ خطأ في تشغيل الصوت",te="bg-red-500";ne instanceof Error&&ne.message==="Speech timeout"&&(de="⏱️ انتهت مهلة النطق - جرب تحديث الصفحة أو استخدم متصفح Chrome/Edge",te="bg-orange-500");const he=document.createElement("div");he.className=`fixed top-4 left-1/2 transform -translate-x-1/2 ${te} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 font-semibold max-w-md text-center`,he.textContent=de,document.body.appendChild(he),setTimeout(()=>{he.style.opacity="0",setTimeout(()=>{document.body.contains(he)&&document.body.removeChild(he)},300)},4e3)}},F=ee=>{$(ee)&&(l(ee),i("practice"))},L=()=>{l(null)},Y=()=>{t(null),r(null),i("welcome"),l(null)},G=ee=>({flashcards:"بطاقات المراجعة التفاعلية",quiz:"الاختبار التفاعلي",memory:"لعبة الذاكرة",pronunciation:"تمرين النطق",grammar:"تحدي القواعد",spelling:"تمرين التهجئة","sentence-writing":"كتابة الجمل الإبداعية","sentence-completion":"إكمال الجملة التفاعلي","test-exercises":"اختبارات تفاعلية"})[ee],le=()=>{if(a==="subjects")return n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 mb-8",children:n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"مرحباً بك في منصة التعلم التفاعلية"}),n.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"اختر المادة الدراسية التي ترغب في تعلمها"}),n.jsx("div",{className:"flex justify-center",children:n.jsx(G_,{onSubjectChange:U,currentSubject:b})})]})}),b&&w&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[n.jsx("div",{className:"flex items-center gap-4 mb-6",children:n.jsx("button",{onClick:()=>p(null),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium",children:"← العودة للوحدات"})}),n.jsx(yd,{title:w.name,words:w.words,grammarRules:w.grammar})]}),b&&!w&&n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:n.jsx(V_,{subject:b,grade:W,onUnitSelect:B,getUnitProgress:S,getSubjectProgress:k})})]});if(a==="units")return n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl",children:"📚"}),n.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["وحدات اللغة الإنجليزية - الصف ",W]})]}),n.jsx("p",{className:"text-xl text-gray-600",children:"اختر الوحدة التي ترغب في دراستها"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(O(W)).map(([te,he])=>n.jsx("div",{onClick:()=>i(te),className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 cursor-pointer hover:shadow-lg transition-all duration-300 hover:scale-105",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📖"}),n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:he}),n.jsx("p",{className:"text-sm text-gray-600",children:"تعلم المفردات والقواعد الخاصة بهذه الوحدة"})]})},te))})]})});if(a==="practice"){if(!b)return n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"يرجى اختيار مادة دراسية أولاً"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"لبدء التدريب التفاعلي، يجب عليك اختيار مادة دراسية من صفحة المواد الدراسية"}),n.jsx("button",{onClick:()=>i("subjects"),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors",children:"اختر المادة الدراسية"})]})});if(!o)return n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl",children:b.icon}),n.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["التدريب التفاعلي - ",b.name]})]}),n.jsx("p",{className:"text-gray-600",children:"اختر النشاط التعليمي الذي ترغب في ممارسته"})]}),(()=>{const te=D();return te.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:te.map(he=>n.jsx("div",{onClick:()=>F(he),className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 cursor-pointer hover:shadow-lg transition-all duration-300 hover:scale-105",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-4xl mb-4",children:[he==="flashcards"&&"📚",he==="quiz"&&"❓",he==="memory"&&"🧠",he==="pronunciation"&&"🗣️",he==="grammar"&&"📝",he==="spelling"&&"✏️",he==="sentence-writing"&&"📖",he==="sentence-completion"&&"🔤",he==="test-exercises"&&"📋"]}),n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:G(he)}),n.jsxs("p",{className:"text-sm text-gray-600",children:[he==="flashcards"&&"تعلم المفردات بطريقة تفاعلية وممتعة",he==="quiz"&&"اختبر معلوماتك مع أسئلة متنوعة",he==="memory"&&"حسن ذاكرتك مع لعبة المطابقة",he==="pronunciation"&&"تدرب على النطق الصحيح",he==="grammar"&&"تعلم القواعد بطريقة تفاعلية",he==="spelling"&&"حسن مهارات التهجئة لديك",he==="sentence-writing"&&"تدرب على كتابة الجمل",he==="sentence-completion"&&"أكمل الجمل بالكلمات المناسبة",he==="test-exercises"&&"اختبارات شاملة لقياس تقدمك"]})]})},he))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🚧"}),n.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"الأنشطة قيد التطوير"}),n.jsx("p",{className:"text-gray-500",children:"ستتوفر أنشطة هذه المادة قريباً"})]})})()]})});if(o==="test-exercises")return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"اختبارات تفاعلية"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(s1,{grade:W,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});if(o)switch(o){case"flashcards":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"بطاقات المراجعة التفاعلية"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>m(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:"📊 تقرير التقدم"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]})]}),n.jsx(pN,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});case"quiz":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"الاختبار التفاعلي"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(xN,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});case"memory":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"لعبة الذاكرة"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(yN,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name)})]});case"pronunciation":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تمرين النطق المتقدم"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(vN,{onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name)})]});case"grammar":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تحدي القواعد"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(ZN,{onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});case"spelling":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تمرين التهجئة التفاعلي"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(n1,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});case"sentence-writing":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"كتابة الجمل الإبداعية"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(e1,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id)})]});case"sentence-completion":return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"إكمال الجملة التفاعلي"}),n.jsx("button",{onClick:L,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"العودة للأنشطة"})]}),n.jsx(t1,{words:E,onScore:te=>h(te,b==null?void 0:b.id,w==null?void 0:w.name),onStreak:te=>N(te,b==null?void 0:b.id),grade:W})]});default:return null}return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"التدريب التفاعلي والأنشطة"}),n.jsxs("p",{className:"text-gray-600 mb-8",children:["اختر النشاط الذي تريد التدرب عليه - ",e.name]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-teal-50 rounded-xl p-6 border-r-4 border-blue-500",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"نصائح للدراسة الفعالة"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"📚"}),n.jsx("span",{children:"راجع الكلمات يومياً لمدة 10-15 دقيقة"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"🎯"}),n.jsx("span",{children:"ركز على الجمل الأساسية وحفظها"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"🔄"}),n.jsx("span",{children:"كرر النطق الصحيح للكلمات"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"🎮"}),n.jsx("span",{children:"استخدم الألعاب التفاعلية للمراجعة"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"✍️"}),n.jsx("span",{children:"اكتب جملاً من إنشائك باستخدام الكلمات الجديدة"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:"🔊"}),n.jsx("span",{children:"استمع للنطق الصحيح واتبعه"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("button",{onClick:()=>F("test-exercises"),className:"bg-gradient-to-br from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"📝"}),n.jsx("div",{children:"اختبارات تفاعلية"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"تدرب على اختبارات مشابهة للاختبارات المدرسية"})]}),n.jsxs("button",{onClick:()=>F("flashcards"),className:"bg-gradient-to-br from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"🎴"}),n.jsx("div",{children:"بطاقات المراجعة التفاعلية"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"نظام شامل لتتبع التقدم في النطق والتهجئة والاستخدام والقواعد"})]}),n.jsxs("button",{onClick:()=>F("sentence-completion"),className:"bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"✍️"}),n.jsx("div",{children:"إكمال الجملة التفاعلي"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"اختر الكلمات المناسبة لإكمال الجمل بمستويات صعوبة مختلفة"})]}),n.jsxs("button",{onClick:()=>F("quiz"),className:"bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"📝"}),n.jsx("div",{children:"اختبار سريع"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"اختبر معرفتك بالكلمات"})]}),n.jsxs("button",{onClick:()=>F("memory"),className:"bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"🧠"}),n.jsx("div",{children:"لعبة الذاكرة"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"اعثر على الأزواج المتطابقة"})]}),n.jsxs("button",{onClick:()=>F("pronunciation"),className:"bg-gradient-to-br from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"🔊"}),n.jsx("div",{children:"تمرين النطق المتقدم"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"نظام صوتي ذكي عالي الجودة"})]}),n.jsxs("button",{onClick:()=>F("spelling"),className:"bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"🔤"}),n.jsx("div",{children:"تمرين التهجئة"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"تعلم تهجئة الكلمات بطريقة تفاعلية"})]}),n.jsxs("button",{onClick:()=>F("grammar"),className:"bg-gradient-to-br from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"⚡"}),n.jsx("div",{children:"تحدي القواعد"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"تطبيق قواعد اللغة"})]}),n.jsxs("button",{onClick:()=>F("sentence-writing"),className:"bg-gradient-to-br from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 text-white p-6 rounded-xl font-semibold text-lg transition-all hover:scale-105 shadow-lg",children:[n.jsx("div",{className:"text-3xl mb-3",children:"✍️"}),n.jsx("div",{children:"كتابة الجمل الإبداعية"}),n.jsx("div",{className:"text-sm opacity-80 mt-2",children:"اكتب جملاً من إنشائك مع التصحيح الذكي"})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-6 border border-indigo-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-indigo-800 mb-2",children:"📊 تقرير التقدم الشامل"}),n.jsx("p",{className:"text-indigo-600",children:"اطلع على تقدمك المفصل في جميع الكلمات والمهارات"})]}),n.jsx("button",{onClick:()=>m(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition-colors font-semibold",children:"عرض التقرير"})]})}),n.jsx("div",{className:`${y?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"} border rounded-xl p-4 text-center`,children:n.jsxs("p",{className:`${y?"text-green-700":"text-yellow-700"}`,children:[n.jsx("strong",{children:y?"✓ متصل بقاعدة البيانات":"⚠️ وضع غير متصل"}),n.jsx("br",{}),y?"تقدمك يتم حفظه ومزامنته تلقائياً":"يرجى تحديث متغيرات البيئة في ملف .env للاتصال بقاعدة البيانات"]})})]})}const ee=I[a],ne=_(),de=R();return n.jsx(yd,{title:ee||`محتوى ${e.name}`,words:ne,grammarRules:de,onWordPronounce:P})};return n.jsxs("div",{className:`min-h-screen ${Tm(W)}`,dir:"rtl",children:[n.jsx(Om,{progress:g,gradeAccess:e}),n.jsx(Am,{activeTab:a,onTabChange:i,gradeAccess:e,onLogout:Y}),n.jsxs("main",{className:"container mx-auto px-4 py-8",children:[n.jsx(r1,{progress:g,currentActivity:o?G(o):void 0}),le()]}),n.jsx(a1,{achievement:c,onClose:()=>d(null)}),u&&n.jsx(gN,{words:E,onClose:()=>m(!1)})]})}yg(document.getElementById("root")).render(n.jsx(x.StrictMode,{children:n.jsx(K_,{})}));
